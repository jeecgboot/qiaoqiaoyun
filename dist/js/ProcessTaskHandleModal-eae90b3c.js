var Ze=Object.defineProperty,et=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var Te=Object.getOwnPropertySymbols;var st=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable;var Se=(e,s,p)=>s in e?Ze(e,s,{enumerable:!0,configurable:!0,writable:!0,value:p}):e[s]=p,V=(e,s)=>{for(var p in s||(s={}))st.call(s,p)&&Se(e,p,s[p]);if(Te)for(var p of Te(s))at.call(s,p)&&Se(e,p,s[p]);return e},Ie=(e,s)=>et(e,tt(s));var M=(e,s,p)=>new Promise((B,b)=>{var j=f=>{try{h(p.next(f))}catch(w){b(w)}},g=f=>{try{h(p.throw(f))}catch(w){b(w)}},h=f=>f.done?B(f.value):Promise.resolve(f.value).then(j,g);h((p=p.apply(e,s)).next())});import{B as ot}from"./index-1c3affea.js";import{f as k,r as ge,e as X,d as nt,u as me,a5 as l,V as c,a6 as i,a7 as _,F as W,k as u,ap as lt,aq as rt,ai as d,W as A,E as P,ak as J,a8 as it,af as L,am as ue,ae as ut}from"./vue-vendor-24c7dc61.js";import{T as ct}from"./index-6507b9cd.js";import{ap as dt,k as D,d as pt,b as ft,cb as mt,a7 as gt,e as ce,a as be,h as kt,q as vt,j as _t,c2 as yt,l as ht}from"./index-831af9dd.js";import{u as Ct}from"./index-44229d9b.js";import Tt from"./ProcessGraphicDrawer-0a29e434.js";import St from"./LowAvatar-f808b87b.js";import It from"./JSelectUserByDept-bd619076.js";import{U as At}from"./UserSelectModal-d78c1490.js";import bt from"./TaskRejectModal-889160a8.js";import wt from"./TaskAddSignModal-0519a829.js";import{U as Ft}from"./index-4d0525a5.js";import Bt from"./MyTaskNotifyModal-dbffa8d1.js";import{_ as Nt}from"./componentMap-c857637c.js";function Ae(e){if(e)return dt(e)}const Q={queryMyTaskTodoTotal(){return M(this,null,function*(){let e=yield D.get({url:"/act/task/list",params:{pageNo:1,pageSize:1}});return(e==null?void 0:e.total)!==null?e.total:0})},queryMyTodoProcessList(e){return D.get({url:"/act/task/list",params:V({column:"createTime",order:"desc"},e)})},queryMyHistoryTaskList(e){return D.get({url:"/act/task/taskHistoryList",params:V({column:"createTime",order:"desc"},e)})},queryMyApplyProcessList(e){return D.get({url:"/act/task/myApplyProcessList",params:V({column:"createTime",order:"desc"},e)})},queryMyCCopyProcessList(e){return D.get({url:"/act/task/taskAllCcHistoryList",params:V({column:"createTime",order:"desc"},e)})},getProcessNodeInfo:e=>D.get({url:"/act/process/extActProcessNode/getProcessNodeInfo",params:{taskId:e}}),getHisProcessNodeInfo:e=>D.get({url:"/act/process/extActProcessNode/getHisProcessNodeInfo",params:{procInstId:e}}),processHistoryList(e){return M(this,null,function*(){return(yield D.get({url:"/act/task/processHistoryList",params:{pageNo:1,pageSize:9999,processInstanceId:e}})).records})},getProcessTaskTransInfo:(e,s)=>D.get({url:"/act/task/getProcessTaskTransInfo",params:{taskId:e,procInstId:s}}),getNodePositionInfo:e=>D.get({url:"/act/task/getNodePositionInfo",params:{processInstanceId:e}}),processComplete(e){return D.post({url:"/act/task/processComplete",params:e})}};function Ut(){const e=k(""),s=k("detail"),p=ge({status:!1,code:"",url:"",dataId:""});function B(g){let h=b(g);e.value=h}function b(g){const{domainUrl:h}=pt();let f=g.taskDefKey,w=ft(),v=h;const C=mt(g.formUrl,w,v,f);if(s.value="detail",j(C)){C.indexOf("desform/edit/")>=0||C.indexOf("desform/detail/")>=0?(p.url=C,p.status=!0,p.dataId=g.dataId,p.code=g.tableName,C.indexOf("desform/edit/")>=0&&(s.value="edit"),g.taskIsHandel===!0&&(s.value="detail")):p.status=!1;let E="CUSTOM_FORM_"+f;if(g.records&&g.records[E]){let K=g.records[E];return C.replace(g.dataId,K)}return C}else return""}function j(g){return/^http[s]?:\/\/.*/.test(g)}return{bpmFormMode:s,bpmFormUrl:e,initBpmFormUrl:B}}const de={taskComplaint:"/act/task/taskComplaint",taskBack:"/act/task/callBackProcess",taskInvalid:"/act/task/invalidProcess",addMultiInstance:"/act/task/addMultiInstance"};function Mt(e,s,p,B){const b=gt(),[j,{openModal:g,closeModal:h}]=ce(),[f,{openModal:w}]=ce(),[v,{openModal:C}]=ce(),[E,{openModal:K}]=ce(),{createMessage:F}=be(),Z=X(()=>{let m=p.value;if(m&&m.histListNode){let y=s.value.taskDefKey,S=[];for(let N of m.histListNode)N.TASK_DEF_KEY_!=y&&S.push(V({},N));return S}return[]}),R=k("");function O(m,y){return D.put({url:m,params:y},{isTransformResponse:!1})}function x(){let m=b.getUserInfo.id;R.value="change-user",g(!0,{list:[],excludeUserIdList:[m]})}function $(m,y){return M(this,null,function*(){let S=y[0].username,N={taskId:m,taskAssignee:S};const r=yield O(de.taskComplaint,N);r.success?(h(),e("success"),F.success("操作成功！"),B()):F.warning(r.message)})}function z(){let m=b.getUserInfo.id;R.value="add-user",g(!0,{list:[],excludeUserIdList:[m]})}function q(m,y){return M(this,null,function*(){let S=y.map(U=>U.username),N={taskId:m,assignees:S,assigneeListKey:"loopAssigneeCollection"};const r=yield O(de.addMultiInstance,N);r.success?(h(),e("success"),F.success("操作成功！"),B()):F.warning(r.message)})}function ee(m){return M(this,null,function*(){if(m&&m.length>0){let y=s.value;if(!y||!y.taskId)return;R.value==="change-user"?yield $(y.taskId,m):R.value==="add-user"&&(yield q(y.taskId,m))}})}function te(){w(!0,{histListNode:Z.value,currentTaskKey:s.value.taskDefKey,taskId:s.value.taskId})}function ae(){e("success"),B()}function H(){C(!0,{taskId:s.value.taskId})}function se(){e("success"),B()}function oe(){let m=s.value;K(!0,{title:"催办提醒",procInstId:m.instanceId})}function Y(){return M(this,null,function*(){let y={processInstanceId:s.value.instanceId};const S=yield O(de.taskBack,y);S.success?(e("success"),F.success("操作成功！"),B()):F.warning(S.message)})}function T(){return M(this,null,function*(){let y={processInstanceId:s.value.instanceId};const S=yield O(de.taskInvalid,y);S.success?(e("success"),F.success("操作成功！"),B()):F.warning(S.message)})}return{onChangeHandlePerson:x,registerUserModal:j,onSelectedUserOk:ee,registerTaskRejectModal:f,onTaskReject:te,historyNodeList:Z,onTaskRejectSuccess:ae,registerAddSignModal:v,onAddSign:H,onAddSignSuccess:se,registerNotifyModal:E,onTaskNotify:oe,onTaskBack:Y,onTaskInvalid:T,onAddHandlePerson:z,selectUserType:R,closeUserModal:h}}const Pt="/assets/process_no_form-e87ee8cd.png",Dt=nt({name:"ProcessTaskHandleModal",components:{JEllipsis:Nt,ProcessGraphicDrawer:Tt,BasicModal:ot,LowAvatar:St,Time:ct,JSelectUserByDept:It,UserSelectModal:At,TaskRejectModal:bt,TaskAddSignModal:wt,UserSelect:Ft,MyTaskNotifyModal:Bt},props:{actionType:String},emits:["register","success"],setup(e,{emit:s}){const{prefixCls:p}=kt("low-app-process-modal"),B=vt(),{createMessage:b,createConfirm:j}=be(),g=k(!0),h=k(!0),f=k(""),w=k(),v=k(),C=k(),E=k(),K=k(),F=k(),Z=X(()=>{var t;return((t=w.value)==null?void 0:t.title)||"流程详情"}),R=k(!1),O=k([]),x=k(""),$=k(!1),z=k(!1),q=k(""),[ee,{closeModal:te,setModalProps:ae}]=_t(ze),H=k(!1),se=X(()=>H.value===!0?!1:e.actionType==="todo"),oe=X(()=>H.value===!0?!1:e.actionType==="apply"),Y=ge({backStatus:"",urgeStatus:""}),T=ge({allowAddSign:!1,selnextUserStatus:!1,ccStatus:!1,allowCounterSignAddUser:!1,rejectStatus:!1,transferStatus:!1}),[m,y]=Ct(),{bpmFormMode:S,bpmFormUrl:N,initBpmFormUrl:r}=Ut(),{onChangeHandlePerson:U,registerUserModal:pe,onSelectedUserOk:we,onAddHandlePerson:Fe,selectUserType:ke,registerTaskRejectModal:Be,onTaskReject:Ne,historyNodeList:Ue,onTaskRejectSuccess:Me,registerAddSignModal:Pe,onAddSign:De,onAddSignSuccess:Ee,registerNotifyModal:Le,onTaskNotify:Re,onTaskBack:He,onTaskInvalid:je}=Mt(s,v,C,te),Oe=X(()=>ke.value!="change-user"),Ve=X(()=>{let t={width:1200,title:me(Z),defaultFullscreen:!0,canFullscreen:!1,confirmLoading:me(h),wrapClassName:p,draggable:!1,footer:null};return Ie(V(V(V({},me(B)),t),e),{onOk:_e,onCancel:le,onRegister:ee})}),Ke=X(()=>{let t=E.value,a=[];if(Array.isArray(t)&&t.length>0)for(const n of t.reverse()){let o=!1,I=!1;n.id==="start"?o=!0:n.id==="end"&&(I=!0);let ie=!o&&!I,ne=[];ne.push({label:o?"开始时间":I?"结束时间":"开始处理",value:I?n.endTime:n.startTime,type:"time"});let Xe;ie&&(n.endTime&&ne.push({label:"结束处理",value:n.endTime,type:"time"}),ne.push({label:"处理耗时",value:n.durationStr}),ne.push({label:"处理意见",value:n.remarks})),a.push({id:n.id,taskId:Xe||"",logTitle:o?"流程开始":I?"流程结束":n.name,logTime:n.startTime,avatar:Ae(n.assigneeAvatar),name:n.assigneeName,action:n.deleteReason||"处理中",contentInfo:ne})}return a}),G=k(""),xe=k([{label:"同意"},{label:"同意***的意见"},{label:"请指示"},{label:"请***阅示"},{label:"请处理"},{label:"不同意"},{label:"呈领导阅示"},{label:"请审批"},{label:"审核无误"}].reverse());function $e(t){let a=t.label;G.value&&(a=G.value+`
`+a),G.value=a}const fe=k("");function ze(t){return M(this,null,function*(){G.value="",fe.value="",N.value="",R.value=!1,O.value=[];let a=t==null?void 0:t.record;w.value=a;const n=a==null?void 0:a.isDetail;if(n?H.value=n:H.value=!1,x.value="",ke.value="",q.value="",z.value=!1,$.value=!1,Object.keys(T).map(o=>{T[o]=!1}),a){try{if(re(!0),se.value){let o=yield Q.getProcessNodeInfo(a.id);o.taskIsHandel===!0?(o=yield Q.getHisProcessNodeInfo(a.procInsId),f.value=a.procInsId,H.value=!0,o.taskIsHandel=!0):(f.value=o.records.BPM_INST_ID,C.value=yield Q.getProcessTaskTransInfo(a.id,f.value),We()),fe.value=o.taskDefKey,v.value=o,r(o);let I="approve_result_node_"+o.taskDefKey;o.records[I]===!0&&($.value=!0)}else{let o=a.procInsId;o||(o=a.id),v.value=yield Q.getHisProcessNodeInfo(o),f.value=o,(a.bpmStatus=="3"||a.bpmStatus=="callBackProcess"||a.bpmStatus=="invalidProcess")&&(H.value=!0),a.processConfig&&Object.keys(Y).map(I=>{Y[I]=a.processConfig[I]})}if(f.value){v.value&&(v.value.instanceId=f.value),E.value=yield Q.processHistoryList(f.value);let o=yield Q.getNodePositionInfo(f.value);K.value=o.hisTasks,F.value=o.positionList}else b.warning("流程实例不存在"),le()}finally{re(!1)}a.processDefinitionId&&(yield qe(a.processDefinitionId))}})}function qe(t){return M(this,null,function*(){const a="/act/designer/miniDesFlow/api/getProcessFormStatus";let n={processDefinitionId:t};const o=yield D.get({url:a,params:n},{isTransformResponse:!1});g.value=o.success})}function le(){te()}function Ge(t){t.target.value==="1"&&y.openDrawer(!0,{instanceId:f})}const ve=yt(16);function _e(t){return M(this,null,function*(){var a;if(N&&N.value.includes("/desform/edit/")){let n=document.getElementById("myDesFormIframeId");if(n){let o={messageSessionId:ve,type:"action:save:submitprocess",data:"nextnode"};(a=n==null?void 0:n.contentWindow)==null||a.postMessage(o,"*")}}else ye(t)})}window.addEventListener("message",function(t){let a=t.data;if(`${ve}`===a.messageId)switch(a.type){case"action:save:submitprocess:callback":let n=a.data;ye(n);return;case"action:save:submitprocess:error":b.warning("校验提示："+a.data);return}},!1);function ye(t){if(!G.value){b.warning("请输入审批处理意见");return}j({title:"提交",iconType:"info",content:"确定提交吗？",onOk:()=>he(t)})}function Je(t){return M(this,null,function*(){let a=C.value,n="";if(a){let o=a.transitionList;o&&o.length>0&&(n=o[0].nextnode)}if(!n){b.warning("下个节点不存在");return}if(!G.value){b.warning("请输入审批处理意见");return}j({title:"提交",iconType:"info",content:`确定${t=="Y"?"通过":"否决"}吗？`,onOk:()=>he(n,{approve_result_val:t})})})}function he(t,a){return M(this,null,function*(){var n,o;try{re(!0);let I={taskId:(n=v.value)==null?void 0:n.taskId,reason:G.value,nextnode:t,processModel:1,fileList:"",nextCodeCount:(o=C.value)==null?void 0:o.nextCodeCount,nextUserId:"",nextUserName:"",rejectModelNode:""};R.value===!0&&(I.ccUserIds=x.value),z.value===!0&&q.value&&(I.nextUserId=q.value),a&&Object.keys(a).map(ie=>{I[ie]=a[ie]}),yield Q.processComplete(I),le(),s("success")}finally{re(!1)}})}function re(t){h.value=t,ae({confirmLoading:t})}function Ye(t){t.key=="add-user"&&Fe()}function We(){let t=C.value;!t.selnextUserStatus||t.selnextUserStatus=="1"?T.selnextUserStatus=!0:T.selnextUserStatus=!1,!t.ccStatus||t.ccStatus=="1"?T.ccStatus=!0:T.ccStatus=!1,T.allowAddSign=t.allowAddSign,!t.allowCounterSignAddUser||t.allowCounterSignAddUser=="1"?T.allowCounterSignAddUser=!0:T.allowCounterSignAddUser=!1,!t.rejectStatus||t.rejectStatus=="1"?T.rejectStatus=!0:T.rejectStatus=!1,!t.transferStatus||t.transferStatus=="1"?T.transferStatus=!0:T.transferStatus=!1}function Qe(){let t=v.value,a=t.taskDefKey,n=t.records,o="CUSTOM_FORM_"+a;return n[o]?n[o]:t.dataId}const Ce=k(0);return Ce.value=window.innerHeight-120,{prefixCls:p,getProps:Ve,loading:h,model:w,nodeInfo:v,transInfo:C,instanceId:f,taskLogList:Ke,historyTaskList:K,positionList:F,isTodo:se,isCCopy:R,cCopyValue:O,close:le,handleOpinionValue:G,commonHandleOpinion:xe,onRightTabChange:Ge,onSetOpinionValue:$e,onSubmit:_e,onBranch:Je,getAvatarUrl:Ae,registerGraphicDrawer:m,currentTaskId:fe,bpmFormUrl:N,bpmFormMode:S,title:Z,onChangeHandlePerson:U,registerUserModal:pe,onSelectedUserOk:we,registerTaskRejectModal:Be,onTaskReject:Ne,historyNodeList:Ue,onTaskRejectSuccess:Me,registerAddSignModal:Pe,onAddSign:De,onAddSignSuccess:Ee,registerNotifyModal:Le,onTaskNotify:Re,onTaskBack:He,onTaskInvalid:je,ccUsernames:x,onMoreAction:Ye,isApply:oe,processConfig:Y,buttonAuth:T,multiSelectUser:Oe,maxHeight:Ce,isNextUser:z,nextUsernames:q,NoFormImage:Pt,showProcessForm:g,getTaskDataId:Qe,hasResultBranch:$}}});const Et={class:"task-handle-title"},Lt={key:0},Rt=l("div",{class:"dot-more",title:"更多操作"},[l("div"),l("div"),l("div")],-1),Ht=l("span",{style:{"margin-left":"10px"}},"添加审批人",-1),jt={key:1,class:"opt-btn"},Ot={key:2,class:"opt-btn"},Vt={key:3,class:"opt-btn"},Kt={key:0,class:"opt-btn"},xt={key:1,class:"opt-btn"},$t={class:"text"},zt={class:"left"},qt={ref:"desformBoxRef",class:"task-desform-view"},Gt={key:1,class:"desform-view",style:{height:"100%","text-align":"center"}},Jt=l("span",{style:{display:"inline-block","vertical-align":"middle",width:"0px",height:"100%"}},null,-1),Yt={style:{display:"inline-block","vertical-align":"middle",width:"100%",height:"55%"}},Wt=["src"],Qt=l("div",{style:{width:"100%","text-align":"center","margin-top":"20px","font-size":"16px"}}," 此页面为系统通用页面，定时触发等无表单显示 ",-1),Xt={key:0,class:"task-handle-box"},Zt={class:"handle-opinion"},es={class:"handle-form"},ts={class:"opinion-label"},ss=l("span",null,"处理意见",-1),as=l("a",null,"常用审批语",-1);const os={class:"handle-footer"},ns={key:4,style:{display:"inline-block"}},ls={key:6,style:{display:"inline-block"}},rs={class:"right"},is={style:{"margin-bottom":"20px"}},us={class:"task-log-list"},cs={class:"task-log-title"},ds={class:"log-title"},ps={class:"title"},fs={class:"log-task-id"},ms={class:"task-log-card"},gs={class:"task-avatar"},ks={class:"task-content"},vs={class:"task-action"},_s=["title"],ys={class:"action"},hs={class:"content-info"},Cs={class:"info-label"},Ts=l("span",null,"：",-1),Ss={class:"info-value"},Is={key:1};function As(e,s,p,B,b,j){const g=c("Icon"),h=c("a-menu-item"),f=c("a-menu"),w=c("a-dropdown"),v=c("a-button"),C=c("DesformView"),E=c("a-divider"),K=c("a-textarea"),F=c("a-checkbox"),Z=c("a-checkbox-group"),R=c("a-radio"),O=c("a-radio-group"),x=c("a-space"),$=c("UserSelect"),z=c("a-radio-button"),q=c("a-icon"),ee=c("LowAvatar"),te=c("JEllipsis"),ae=c("Time"),H=c("a-tab-pane"),se=c("a-tabs"),oe=c("ProcessGraphicDrawer"),Y=c("a-spin"),T=c("BasicModal"),m=c("user-select-modal"),y=c("TaskRejectModal"),S=c("TaskAddSignModal"),N=c("MyTaskNotifyModal");return i(),_(W,null,[u(T,lt(rt(e.getProps)),{title:d(()=>[l("div",Et,[e.isTodo?(i(),_(W,{key:0},[e.buttonAuth.allowCounterSignAddUser?(i(),_("div",Lt,[u(w,{trigger:["click"],overlayStyle:{width:"120px"},placement:"bottomRight"},{overlay:d(()=>[u(f,{onClick:e.onMoreAction},{default:d(()=>[u(h,{key:"add-user"},{default:d(()=>[u(g,{icon:"ant-design:usergroup-add-outlined"}),Ht]),_:1})]),_:1},8,["onClick"])]),default:d(()=>[Rt]),_:1})])):A("",!0),e.buttonAuth.allowAddSign?(i(),_("div",jt,[u(v,{onClick:e.onAddSign},{default:d(()=>[P("加签")]),_:1},8,["onClick"])])):A("",!0),e.buttonAuth.transferStatus?(i(),_("div",Ot,[u(v,{onClick:e.onChangeHandlePerson},{default:d(()=>[P("转审")]),_:1},8,["onClick"])])):A("",!0),e.historyNodeList.length>0&&e.buttonAuth.rejectStatus?(i(),_("div",Vt,[u(v,{onClick:e.onTaskReject,danger:"",type:"primary"},{default:d(()=>[P("驳回")]),_:1},8,["onClick"])])):A("",!0)],64)):e.isApply?(i(),_(W,{key:1},[e.processConfig.urgeStatus!=="0"?(i(),_("div",Kt,[u(v,{onClick:e.onTaskNotify},{default:d(()=>[P("催办")]),_:1},8,["onClick"])])):A("",!0),e.processConfig.backStatus!=="0"?(i(),_("div",xt,[u(v,{onClick:e.onTaskInvalid,danger:"",type:"primary"},{default:d(()=>[P("作废")]),_:1},8,["onClick"])])):A("",!0)],64)):A("",!0),l("div",$t,J(e.title),1)])]),default:d(()=>[u(Y,{spinning:e.loading},{default:d(()=>[e.loading?A("",!0):(i(),_("div",{key:0,class:it([`${e.prefixCls}-container`])},[l("div",zt,[l("div",qt,[e.showProcessForm?(i(),L(C,{key:0,iframeId:"myDesFormIframeId",class:"desform-view",mode:e.bpmFormMode,url:e.bpmFormUrl,dataId:e.getTaskDataId(),isOnline:!1,parentNode:e.$refs.desformBoxRef,desformCode:e.nodeInfo.tableName,taskId:e.currentTaskId,triggerProcess:"false",onClose:e.close,onForceClose:e.close},null,8,["mode","url","dataId","parentNode","desformCode","taskId","onClose","onForceClose"])):(i(),_("div",Gt,[Jt,l("div",Yt,[l("img",{src:e.NoFormImage,style:{height:"calc(100% - 30px)",margin:"0 auto"}},null,8,Wt),Qt])]))],512),e.isTodo?(i(),_("div",Xt,[l("div",Zt,[l("div",es,[l("div",ts,[ss,u(E,{type:"vertical"}),u(w,{trigger:["click"]},{overlay:d(()=>[u(f,null,{default:d(()=>[(i(!0),_(W,null,ue(e.commonHandleOpinion,(r,U)=>(i(),L(h,{key:U,onClick:pe=>e.onSetOpinionValue(r)},{default:d(()=>[P(J(r.label),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:d(()=>[as]),_:1})]),u(K,{value:e.handleOpinionValue,"onUpdate:value":s[0]||(s[0]=r=>e.handleOpinionValue=r),placeholder:"请输入处理意见",rows:4,style:{"max-height":"100px"}},null,8,["value"])]),A("",!0)]),l("div",os,[e.hasResultBranch?(i(),L(x,{key:0},{default:d(()=>[u(v,{type:"primary",onClick:s[1]||(s[1]=r=>e.onBranch("Y"))},{default:d(()=>[P("通过")]),_:1}),u(v,{style:{"margin-left":"10px"},type:"error",onClick:s[2]||(s[2]=r=>e.onBranch("N"))},{default:d(()=>[P("否决")]),_:1})]),_:1})):(i(),L(x,{key:1},{default:d(()=>{var r;return[(i(!0),_(W,null,ue(((r=e.transInfo)==null?void 0:r.transitionList)||[],U=>(i(),L(v,{type:"primary",onClick:pe=>e.onSubmit(U.nextnode)},{default:d(()=>[P(J(U.Transition),1)]),_:2},1032,["onClick"]))),256))]}),_:1})),e.buttonAuth.selnextUserStatus?(i(),L(E,{key:2,type:"vertical"})):A("",!0),e.buttonAuth.selnextUserStatus?(i(),L(F,{key:3,checked:e.isNextUser,"onUpdate:checked":s[3]||(s[3]=r=>e.isNextUser=r)},{default:d(()=>[P("指定下一步操作人（指定下一步会签人员）")]),_:1},8,["checked"])):A("",!0),e.isNextUser?(i(),_("div",ns,[u($,{value:e.nextUsernames,"onUpdate:value":s[4]||(s[4]=r=>e.nextUsernames=r),multi:"",store:"username",placeholder:"请选择下一步操作人"},null,8,["value"])])):A("",!0),u(E,{type:"vertical",style:{"margin-left":"20px"}}),e.buttonAuth.ccStatus?(i(),L(F,{key:5,checked:e.isCCopy,"onUpdate:checked":s[5]||(s[5]=r=>e.isCCopy=r)},{default:d(()=>[P("是否抄送")]),_:1},8,["checked"])):A("",!0),e.isCCopy?(i(),_("div",ls,[u($,{value:e.ccUsernames,"onUpdate:value":s[6]||(s[6]=r=>e.ccUsernames=r),multi:"",store:"username",placeholder:"请选择抄送人"},null,8,["value"])])):A("",!0)])])):A("",!0)]),l("div",rs,[l("div",is,[u(O,{value:"0",buttonStyle:"solid",onChange:e.onRightTabChange},{default:d(()=>[u(z,{value:"0"},{default:d(()=>[P("流程动态")]),_:1}),u(z,{value:"1"},{default:d(()=>[P("流程图")]),_:1})]),_:1},8,["onChange"])]),u(se,null,{default:d(()=>[u(H,{tab:"流程动态",key:"0",forceRender:"",style:ut({height:e.maxHeight+"px","overflow-y":"auto","padding-right":"5px"})},{default:d(()=>[(i(!0),_(W,null,ue(e.taskLogList,r=>(i(),_("div",us,[l("div",cs,[l("span",ds,[u(q,{type:"caret-up",size:12}),l("span",ps,J(r.logTitle),1)]),l("span",fs,J(r.taskId),1)]),l("div",ms,[l("div",gs,[r.logTitle=="流程结束"?(i(),L(ee,{key:0,src:"",size:24})):(i(),L(ee,{key:1,src:r.avatar,size:24},null,8,["src"]))]),l("div",ks,[l("div",vs,[l("span",{class:"name",title:r.name},J(r.logTitle=="流程结束"?"系统默认结束":r.name),9,_s),l("span",ys,[u(te,{value:r.action,length:5},null,8,["value"])])]),l("div",hs,[(i(!0),_(W,null,ue(r.contentInfo,U=>(i(),_("div",null,[l("span",Cs,J(U.label),1),Ts,l("span",Ss,[U.type==="time"?(i(),L(ae,{key:0,value:U.value},null,8,["value"])):(i(),_("span",Is,J(U.value),1))])]))),256))])])])]))),256))]),_:1},8,["style"])]),_:1}),l("div",null,[u(oe,{onRegister:e.registerGraphicDrawer},null,8,["onRegister"])])])],2))]),_:1},8,["spinning"])]),_:1},16),u(m,{multi:e.multiSelectUser,onRegister:e.registerUserModal,onSelected:e.onSelectedUserOk},null,8,["multi","onRegister","onSelected"]),u(y,{onRegister:e.registerTaskRejectModal,onReject:e.onTaskRejectSuccess},null,8,["onRegister","onReject"]),u(S,{onRegister:e.registerAddSignModal,onSuccess:e.onAddSignSuccess},null,8,["onRegister","onSuccess"]),u(N,{onRegister:e.registerNotifyModal},null,8,["onRegister"])],64)}const bs=ht(Dt,[["render",As]]),Ks=Object.freeze(Object.defineProperty({__proto__:null,default:bs},Symbol.toStringTag,{value:"Module"}));export{bs as P,Ks as a,Ae as g,Q as p};

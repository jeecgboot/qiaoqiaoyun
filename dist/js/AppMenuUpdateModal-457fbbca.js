var v=(n,a,o)=>new Promise((e,i)=>{var c=t=>{try{p(o.next(t))}catch(d){i(d)}},l=t=>{try{p(o.throw(t))}catch(d){i(d)}},p=t=>t.done?e(t.value):Promise.resolve(t.value).then(c,l);p((o=o.apply(n,a)).next())});import{f as m,w as f,a3 as y,a4 as C,a5 as s,V as r,a6 as U,af as M,ai as _,k as g}from"./vue-vendor-24c7dc61.js";import N from"./AppIconSelector-c6c055a9.js";import{m as b,d as x}from"./low.app.api-97fc250a.js";import{l as A}from"./index-831af9dd.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";const S={name:"AppMenuUpdateModal",components:{AppIconSelector:N},props:{info:{type:Object,default:()=>{}},activeMenuId:{type:String,default:""}},emits:["update","dbUpdate"],setup(n,{emit:a}){const o=m(""),e=m(""),i=m(""),c=m(""),l=m("bottomRight"),p=m(!1);f(()=>n.info,u=>{o.value=u.iconType,e.value=u.menuName,i.value=u.type,c.value=u.menuUrl,p.value=u.showUpdateInfo},{immediate:!0,deep:!0});function t(){a("update",{id:n.activeMenuId,iconType:o.value,menuName:e.value})}f(p,()=>{n.activeMenuId==n.info.id&&p.value===!1&&d()});function d(){return v(this,null,function*(){let u={id:n.activeMenuId,iconType:o.value,menuName:e.value};yield b.update(u),i.value=="drag"&&c.value&&(yield x.update({id:c.value,name:e.value})),a("dbUpdate",{id:n.activeMenuId,iconType:o.value,menuName:e.value})})}function I(u){return h(u),document.body}function h(u){const w=u.getBoundingClientRect();window.innerHeight-w.bottom<350?l.value="topRight":l.value="bottomRight"}return{menuName:e,menuIcon:o,placement:l,showUpdateInfo:p,onDataChange:t,getPopupContainer:I}}};const P=n=>(y("data-v-dd38c1d9"),n=n(),C(),n),T=P(()=>s("div",{class:"app-update-modal-content"},null,-1)),k={style:{padding:"0 12px"}};function B(n,a,o,e,i,c){const l=r("a-input"),p=r("AppIconSelector"),t=r("a-dropdown");return U(),M(t,{open:e.showUpdateInfo,"onUpdate:open":a[2]||(a[2]=d=>e.showUpdateInfo=d),trigger:["click"],placement:e.placement,overlayClassName:"app-update-dropdown",getPopupContainer:e.getPopupContainer},{overlay:_(()=>[s("div",null,[s("div",k,[g(l,{maxlength:20,"show-count":"",value:e.menuName,"onUpdate:value":a[0]||(a[0]=d=>e.menuName=d),style:{width:"100%","text-align":"center"},onChange:e.onDataChange},null,8,["value","onChange"])]),s("div",null,[g(p,{value:e.menuIcon,"onUpdate:value":a[1]||(a[1]=d=>e.menuIcon=d),onChange:e.onDataChange},null,8,["value","onChange"])])])]),default:_(()=>[T]),_:1},8,["open","placement","getPopupContainer"])}const E=A(S,[["render",B],["__scopeId","data-v-dd38c1d9"]]);export{E as default};

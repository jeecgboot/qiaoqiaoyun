var N=(e,a,l)=>new Promise((q,y)=>{var R=d=>{try{u(l.next(d))}catch(r){y(r)}},p=d=>{try{u(l.throw(d))}catch(r){y(r)}},u=d=>d.done?q(d.value):Promise.resolve(d.value).then(R,p);u((l=l.apply(e,a)).next())});import{d as J,f as O,h as Q,w as V,a3 as M,a4 as j,a5 as v,V as B,a6 as c,a7 as I,k as w,a8 as W,ai as g,F as G,E as S,af as L,ak as E,W as Y}from"./vue-vendor-24c7dc61.js";import _ from"./BasicTable-d435f501.js";import{u as $}from"./useListPage-62a041ef.js";import{c as ee,b as te}from"./useRoleAuth-039fb12a.js";import{k as ae,l as de}from"./index-831af9dd.js";import{C as oe}from"./ComponentIcon-f1bbb90f.js";import"./antd-vue-vendor-0d72f01e.js";import"./index-52c8c841.js";import"./useForm-14b2bc77.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./vxe-table-vendor-8813019a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./helper-22dafba0.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./index-621e597c.js";import"./application.api-4e2bde90.js";const ie="data:image/png;base64,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",se=J({name:"AuthField",components:{BasicTable:_,ComponentIcon:oe},props:{code:{type:String,default:""},fieldAuthList:{type:Array,default:()=>[]},disabledStatus:{type:Object,default:()=>{}}},emits:["data-change"],setup(e,{emit:a}){const l=[{title:"名称",dataIndex:"fieldName",width:220,align:"left"},{title:"新增",dataIndex:"create",width:100,align:"left"},{title:"查看",dataIndex:"read",width:100,align:"left"},{title:"编辑",dataIndex:"update",width:100,align:"left"}],{prefixCls:q,tableContext:y}=$({designScope:"low-app-auth-field",tableProps:{columns:l,pagination:!1,showTableSetting:!1,showActionColumn:!1,useSearchForm:!1,rowKey:"id"}}),[R,{reload:p},{rowSelection:u,selectedRowKeys:d}]=y,{authDataList:r,headerRead:H,headerInterRead:t,headerUpdate:i,headerInterUpdate:h,headerCreate:F,headerInterCreate:U,onCheckboxChange:X}=ee(e,a),T=O([]);Q(()=>{let o=T.value,m=e.fieldAuthList,s=e.disabledStatus;D(o,m,s)}),V(()=>e.code,o=>N(this,null,function*(){o&&(yield Z(o))}),{immediate:!0});function Z(o){return N(this,null,function*(){const m=`/desform/api/fields/${o}`,s=yield ae.get({url:m,params:{subTable:!0}});let f=[];if(s&&s.fields&&s.fields.length>0)for(let C of s.fields)f.push({key:C.key,name:C.name,type:C.type});T.value=f})}function D(o,m,s){let f=["read","update","create"],C=[];if(o&&o.length>0)for(let k of o){let n={fieldName:k.name,fieldKey:k.key,type:k.type,id:k.key,isForm:!1};if(m&&m.length>0){let b=m.filter(A=>A.fieldKey==k.key);if(b.length>0){const{authCreate:A,authUpdate:K,authRead:z}=b[0];n.readChecked=z==1,n.updateChecked=K==1,n.createChecked=A==1,f.forEach(x=>{s[x]===!0&&(n[x+"Checked"]=!1)})}else f.forEach(A=>{n[A+"Checked"]=!1})}else f.forEach(b=>{s[b]===!0?n[b+"Checked"]=!1:n[b+"Checked"]=!0});C.push(n)}r.value=C}const{maxTableHeight:P}=te();return{AuthFieldImage:ie,registerTable:R,authDataList:r,headerRead:H,headerInterRead:t,headerUpdate:i,headerInterUpdate:h,headerCreate:F,headerInterCreate:U,onCheckboxChange:X,prefixCls:q,maxTableHeight:P}}});const re=e=>(M("data-v-2a104813"),e=e(),j(),e),ne={class:"auth-field-title",style:{"margin-bottom":"20px","margin-left":"10px"}},le=["src"],pe=re(()=>v("span",null,"可新增、查看、编辑哪些字段？",-1)),me={key:0,class:"auth-field-name"};function ce(e,a,l,q,y,R){const p=B("a-checkbox"),u=B("Icon"),d=B("a-tooltip"),r=B("component-icon"),H=B("BasicTable");return c(),I("div",null,[v("div",ne,[v("img",{src:e.AuthFieldImage},null,8,le),pe]),w(H,{scroll:{y:e.maxTableHeight},class:W(e.prefixCls),onRegister:e.registerTable,dataSource:e.authDataList},{headerCell:g(({column:t})=>[t.dataIndex=="fieldName"?(c(),I(G,{key:0},[S(" 名称 ")],64)):t.dataIndex==="read"?(c(),L(p,{key:1,checked:e.headerRead,"onUpdate:checked":a[0]||(a[0]=i=>e.headerRead=i),indeterminate:e.headerInterRead,disabled:e.disabledStatus[t.dataIndex]},{default:g(()=>[S(E(t.customTitle),1)]),_:2},1032,["checked","indeterminate","disabled"])):t.dataIndex==="update"?(c(),L(p,{key:2,checked:e.headerUpdate,"onUpdate:checked":a[1]||(a[1]=i=>e.headerUpdate=i),indeterminate:e.headerInterUpdate,disabled:e.disabledStatus[t.dataIndex]},{default:g(()=>[S(E(t.customTitle),1)]),_:2},1032,["checked","indeterminate","disabled"])):t.dataIndex==="create"?(c(),I(G,{key:3},[w(p,{checked:e.headerCreate,"onUpdate:checked":a[2]||(a[2]=i=>e.headerCreate=i),indeterminate:e.headerInterCreate,disabled:e.disabledStatus[t.dataIndex]},{default:g(()=>[S(E(t.customTitle),1)]),_:2},1032,["checked","indeterminate","disabled"]),w(d,{title:"指“新增记录”时，可查看的字段"},{default:g(()=>[w(u,{icon:"ant-design:info-circle-outlined",style:{color:"#bdbdbd","margin-left":"5px"}})]),_:1})],64)):Y("",!0)]),bodyCell:g(({column:t,text:i,record:h})=>[t.dataIndex==="fieldName"?(c(),I("div",me,[w(r,{type:h.type,style:{color:"rgb(158, 158, 158)"}},null,8,["type"]),v("span",null,E(i),1)])):(c(),L(p,{key:1,disabled:e.disabledStatus[t.dataIndex],checked:h[t.dataIndex+"Checked"],"onUpdate:checked":F=>h[t.dataIndex+"Checked"]=F,onChange:F=>e.onCheckboxChange(F,h,t.dataIndex)},null,8,["disabled","checked","onUpdate:checked","onChange"]))]),_:1},8,["scroll","class","onRegister","dataSource"])])}const pt=de(se,[["render",ce],["__scopeId","data-v-2a104813"]]);export{pt as default};

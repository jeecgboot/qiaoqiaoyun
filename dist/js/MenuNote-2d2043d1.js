var k=(h,t,n)=>new Promise((e,l)=>{var s=o=>{try{d(n.next(o))}catch(r){l(r)}},f=o=>{try{d(n.throw(o))}catch(r){l(r)}},d=o=>o.done?e(o.value):Promise.resolve(o.value).then(s,f);d((n=n.apply(h,t)).next())});import{I as E,a_ as M}from"./antd-vue-vendor-0d72f01e.js";import{f as _,e as b,w as I,a5 as m,V as v,a6 as c,a7 as y,F as A,af as g,ai as i,k as p,W as C,ak as T,E as x}from"./vue-vendor-24c7dc61.js";import B from"./JEditor-249b2194.js";import{m as F}from"./low.app.api-97fc250a.js";import{l as O}from"./index-831af9dd.js";import"./index-b845562c.js";import"./vxe-table-vendor-8813019a.js";const V={name:"MenuNote",components:{InfoCircleFilled:E,JEditor:B,EditOutlined:M},props:{menu:{type:Object,default:()=>{}},hasAdminAuth:{type:Boolean,default:!1}},emits:["save"],setup(h,{emit:t}){const n=_(!1),e=_(!1),l=_(""),s=_(""),f=_(""),d=b(()=>l.value==="drag"?"自定义页面说明":l.value==="desform"||l.value==="form"?"工作表说明":"");I(()=>h.menu,a=>{a&&(a.menuNote?e.value=!0:e.value=!1,f.value=a.id,s.value=a.menuNote,l.value=a.type)},{immediate:!0,deep:!0});const o=_(!1);function r(){n.value=!0,o.value=!0}function w(){return k(this,null,function*(){yield F.update({id:f.value,menuNote:s.value}),t("save",s.value),N()})}function N(){n.value=!1}function u(a){a.preventDefault(),a.stopPropagation(),n.value=!0,o.value=!1}return{visible:n,title:d,saveNote:w,menuNote:s,closeNoteModal:N,openNoteModal:r,showIcon:e,onShowAppNote:u,showEditor:o}}},H={class:"app-action-select-icon"},L={style:{height:"140px","overflow-y":"auto"}},j=["innerHTML"],S={style:{display:"flex",height:"55px","line-height":"55px"}},U={style:{color:"#333","font-size":"17px","font-weight":"700"}},D=m("div",{style:{flex:"1"}},null,-1),z={key:0},J={key:1},P={key:0,style:{padding:"0px 2px 2px"}},W={key:1,style:{padding:"15px 20px"}},q=["innerHTML"];function G(h,t,n,e,l,s){const f=v("InfoCircleFilled"),d=v("a-dropdown"),o=v("a-button"),r=v("EditOutlined"),w=v("j-editor"),N=v("a-modal");return c(),y(A,null,[m("div",H,[e.showIcon?(c(),g(d,{key:0,overlayClassName:"low-app-menu-note-dropdown"},{overlay:i(()=>[m("div",L,[m("div",{innerHTML:e.menuNote},null,8,j)])]),default:i(()=>[p(f,{onClick:e.onShowAppNote,style:{color:"#999","margin-left":"10px"}},null,8,["onClick"])]),_:1})):C("",!0)]),p(N,{open:e.visible,"onUpdate:open":t[3]||(t[3]=u=>e.visible=u),closable:!1,wrapClassName:"low-app-note-modal",width:800,destroyOnClose:"",centered:"",footer:null},{title:i(()=>[m("div",S,[m("div",U,T(e.title),1),D,e.showEditor?(c(),y("div",z,[p(o,{type:"text",onClick:e.closeNoteModal,style:{"margin-right":"10px"}},{default:i(()=>[x("取消")]),_:1},8,["onClick"]),p(o,{type:"primary",onClick:t[0]||(t[0]=u=>e.saveNote())},{default:i(()=>[x("保存")]),_:1})])):(c(),y("div",J,[p(o,{type:"text",onClick:e.closeNoteModal,style:{"margin-right":"10px"}},{default:i(()=>[x("关闭")]),_:1},8,["onClick"]),n.hasAdminAuth?(c(),g(o,{key:0,type:"text",onClick:t[1]||(t[1]=u=>e.showEditor=!0)},{default:i(()=>[p(r,{style:{"margin-right":"2px"}}),x(" 编辑 ")]),_:1})):C("",!0)]))])]),default:i(()=>[e.showEditor?(c(),y("div",P,[p(w,{value:e.menuNote,"onUpdate:value":t[2]||(t[2]=u=>e.menuNote=u),showImageUpload:!1,menubar:[]},null,8,["value"])])):(c(),y("div",W,[m("div",{innerHTML:e.menuNote},null,8,q)]))]),_:1},8,["open"])],64)}const oe=O(V,[["render",G]]);export{oe as default};

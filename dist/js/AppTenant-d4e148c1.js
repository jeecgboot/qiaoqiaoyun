var re=Object.defineProperty,ue=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var A=(a,l,s)=>l in a?re(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,P=(a,l)=>{for(var s in l||(l={}))ve.call(l,s)&&A(a,s,l[s]);if(V)for(var s of V(l))de.call(l,s)&&A(a,s,l[s]);return a},q=(a,l)=>ue(a,ce(l));var T=(a,l,s)=>new Promise((f,h)=>{var C=n=>{try{m(s.next(n))}catch(c){h(c)}},d=n=>{try{m(s.throw(n))}catch(c){h(c)}},m=n=>n.done?f(n.value):Promise.resolve(n.value).then(C,d);m((s=s.apply(a,l)).next())});import{d as K,f as v,r as M,e as S,u as U,w as me,V as k,a6 as g,a7 as b,a5 as e,k as o,F as j,W as w,ai as p,a8 as x,a3 as pe,a4 as fe,E as R}from"./vue-vendor-24c7dc61.js";import _e from"./AppLoginHeader-c75d2fdd.js";import{k as W,a7 as ge,a as be,o as he,r as L,cg as $,l as ye}from"./index-831af9dd.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";const ke=a=>W.post({url:"/sys/tenant/saveTenantJoinUser",params:a},{isTransformResponse:!1}),xe=a=>W.post({url:"/sys/tenant/joinTenantByHouseNumber",params:a},{isTransformResponse:!1}),i=a=>(pe("data-v-8e46d5e8"),a=a(),fe(),a),Ce={class:"organ-box"},Ne=i(()=>e("div",{class:"flex-row align-items-center",style:{"margin-top":"20px"}},[e("div",{class:"organ-title"}," 创建或者加入组织 ")],-1)),Te=i(()=>e("div",{class:"organ-title-desc"},[R(" 加入"),e("span",{style:{color:"rgb(141, 198, 216)"}},"已有"),R("组织 ")],-1)),Se=i(()=>e("div",null," 如果被告知要使用，或有同事已经在用，请选择此项。 ",-1)),Re=[Te,Se],Ue=i(()=>e("div",{class:"organ-title-desc"},[R(" 创建"),e("span",{style:{color:"rgb(74, 79, 175)"}},"新的"),R("组织 ")],-1)),je=i(()=>e("div",null," 如果想为企业或者组织创建账号，请选择此项。 ",-1)),we=[Ue,je],Ie=i(()=>e("span",{style:{"margin-left":"10px"}},"返回",-1)),Be={class:"align-items-center",style:{"margin-top":"20px"}},He=i(()=>e("div",{class:"organ-title"}," 请填写组织门牌号 ",-1)),Oe=i(()=>e("div",{class:"organ-join-desc"},[e("span",{style:{color:"#9e9e9e"}},"组织门牌号可以通过管理员获取")],-1)),ze=i(()=>e("div",{class:"tenant-number"},[e("a",{href:"http://help.qiaoqiaoyun.com/org/new.html",target:"_blank"},"没有组织门牌号？")],-1)),Ee=i(()=>e("span",{style:{"margin-left":"10px"}},"返回",-1)),Je={class:"align-items-center",style:{"margin-top":"20px"}},Fe=i(()=>e("div",{class:"organ-title"}," 创建组织 ",-1)),Ve=i(()=>e("div",{class:"organ-join-desc"},[e("span",{style:{color:"#9e9e9e"}},"您当前账号默认成为组织的管理员")],-1)),Ae={class:"content-item"},Pe=i(()=>e("div",{class:"active-form-title"}," 行业 ",-1)),qe={class:"content-item"},Me=i(()=>e("div",{class:"active-form-title"}," 规模 ",-1)),Le={class:"content-item"},$e=i(()=>e("div",{class:"active-form-title"}," 您的职级 ",-1)),Ke={class:"content-item"},We=i(()=>e("div",{class:"active-form-title"}," 您的部门 ",-1)),De=K({name:"app-organization"}),Ge=K(q(P({},De),{props:{tenantType:{type:String,default:""}},emits:["success"],setup(a,{emit:l}){const s=a,{createMessage:f}=be(),h=v(),C=v(),d=v("home"),m=M({houseNumber:""}),n=M({name:"",trade:void 0,companySize:void 0,position:void 0,department:void 0}),c=v(""),D=S(()=>m.houseNumber!=""||U(c)==="houseNumber"?"current-active":""),G=S(()=>n.name!=""||U(c)==="name"?"current-active":""),I=v(),B=v(),Q={houseNumber:[{required:!0,message:"请输入组织门牌号"}]},{t:Qe}=he(),X=S(()=>ne("请输入组织名称")),Y=S(()=>({name:U(X)})),Z=v([{label:"信息传输、软件和信息技术服务业",value:"1"},{label:"制造业",value:"2"},{label:"租赁和商务服务业",value:"3"},{label:"教育",value:"4"},{label:"金融业",value:"5"},{label:"建筑业",value:"6"},{label:"科学研究和技术服务业",value:"7"},{label:"批发和零售业",value:"8"},{label:"住宿和餐饮业",value:"9"},{label:"电子商务",value:"10"},{label:"线下零售与服务业",value:"11"},{label:"文化、体育和娱乐业",value:"12"},{label:"房地产业",value:"13"},{label:"交通运输、仓储和邮政业",value:"14"},{label:"卫生和社会工作",value:"15"},{label:"公共管理、社会保障和社会组织",value:"16"},{label:"电力、热力、燃气及水生产和供应业",value:"17"},{label:"水利、环境和公共设施管理业",value:"18"},{label:"居民服务、修理和其他服务业",value:"19"},{label:"政府机构",value:"20"},{label:"农、林、牧、渔业",value:"21"},{label:"采矿业",value:"22"},{label:"国际组织",value:"23"},{label:"其他",value:"24"}]),ee=v([{label:"20人以下",value:"1"},{label:"21-99人",value:"2"},{label:"100-499人",value:"3"},{label:"500-999人",value:"4"},{label:"1000-9999人",value:"5"},{label:"10000人以上",value:"6"}]),te=v([{label:"总裁/总经理/CEO",value:"1"},{label:"副总裁/副总经理/VP",value:"2"},{label:"总监/主管/经理",value:"3"},{label:"员工/专员/执行",value:"4"},{label:"其他",value:"5"}]),ae=v([{label:"总经办",value:"1"},{label:"技术/IT/研发",value:"2"},{label:"产品/设计",value:"3"},{label:"销售/市场/运营",value:"4"},{label:"人事/财务/行政",value:"5"},{label:"资源/仓储/采购",value:"6"},{label:"其他",value:"7"}]),y=ge();function ne(r){return[{required:!0,message:r,trigger:"change"}]}function se(){d.value="join"}function le(){d.value="create"}function H(r){c.value=r,r==="houseNumber"?I.value.focus():B.value.focus()}function O(){c.value=""}function oe(){return T(this,null,function*(){h.value.validateFields().then(r=>T(this,null,function*(){r.status="1",yield ke(r).then(t=>{t.success?(f.success(t.message),y.setTenant(t.result),L.replace(y.getUserInfo&&y.getUserInfo.homePath||$.BASE_HOME),l("success")):f.warning(t.message)})}))})}function ie(){C.value.validateFields().then(r=>T(this,null,function*(){yield xe(r).then(t=>{t.success?(f.success(t.message),s.tenantType||L.replace(y.getUserInfo&&y.getUserInfo.homePath||$.BASE_HOME),l("success")):f.warning(t.message)}).catch(t=>{f.warning(t.message)})}))}function z(){d.value="home"}return me(()=>s.tenantType,r=>{r&&(d.value=r)},{immediate:!0}),(r,t)=>{const E=k("Icon"),J=k("a-input"),_=k("a-form-item"),F=k("a-form"),N=k("a-select");return g(),b("div",Ce,[e("div",{class:x(["organ-subject",a.tenantType!==""?"subject-margin":""])},[o(_e,{showLocalePicker:!1}),d.value==="home"?(g(),b(j,{key:0},[Ne,e("div",{class:"organ-desc align-items-center"},[e("div",{class:"content-box pointer",onClick:se},Re),e("div",{class:"content-box pointer",style:{"margin-top":"35px"},onClick:le},we)])],64)):d.value==="join"?(g(),b(j,{key:1},[a.tenantType===""?(g(),b("div",{key:0,class:"margin-top40 pointer",style:{display:"flex"},onClick:z},[o(E,{icon:"ant-design:arrow-left-outlined",style:{color:"#757575","margin-top":"2px"}}),Ie])):w("",!0),e("div",Be,[He,Oe,o(F,{ref_key:"joinRef",ref:C,model:m,rules:Q},{default:p(()=>[e("div",{class:x(["content-item",D.value]),onClick:t[1]||(t[1]=u=>H("houseNumber"))},[o(_,{name:"houseNumber"},{default:p(()=>[o(J,{ref_key:"hoseNumberRef",ref:I,value:m.houseNumber,"onUpdate:value":t[0]||(t[0]=u=>m.houseNumber=u),style:{height:"40px"},onBlur:O},null,8,["value"]),e("div",{class:x(["form-title",c.value==="houseNumber"?"active-title":""])}," 示例: J9A2K8R ",2)]),_:1})],2),ze,e("div",{class:"create-btn pointer",onClick:ie}," 加入 ")]),_:1},8,["model"])])],64)):d.value==="create"?(g(),b(j,{key:2},[a.tenantType===""?(g(),b("div",{key:0,class:"margin-top40 pointer",style:{display:"flex"},onClick:z},[o(E,{icon:"ant-design:arrow-left-outlined",style:{color:"#757575","margin-top":"2px"}}),Ee])):w("",!0),e("div",Je,[Fe,Ve,o(F,{ref_key:"createRef",ref:h,model:n,rules:Y.value},{default:p(()=>[e("div",{class:x(["content-item",G.value]),onClick:t[3]||(t[3]=u=>H("name"))},[o(_,{name:"name"},{default:p(()=>[o(J,{ref_key:"nameRef",ref:B,value:n.name,"onUpdate:value":t[2]||(t[2]=u=>n.name=u),style:{height:"40px","font-size":"13px",color:"rgba(0, 0, 0, 0.65)"},onBlur:O},null,8,["value"]),e("div",{class:x(["form-title",c.value==="name"?"active-title":""])}," 组织名称 ",2)]),_:1})],2),e("div",Ae,[o(_,{name:"trade"},{default:p(()=>[o(N,{placeholder:"请选择",style:{height:"40px"},options:Z.value,value:n.trade,"onUpdate:value":t[4]||(t[4]=u=>n.trade=u)},null,8,["options","value"]),Pe]),_:1})]),e("div",qe,[o(_,{name:"companySize"},{default:p(()=>[o(N,{placeholder:"请选择",style:{height:"40px"},options:ee.value,value:n.companySize,"onUpdate:value":t[5]||(t[5]=u=>n.companySize=u)},null,8,["options","value"]),Me]),_:1})]),e("div",Le,[o(_,{name:"position"},{default:p(()=>[o(N,{placeholder:"请选择",style:{height:"40px"},options:te.value,value:n.position,"onUpdate:value":t[6]||(t[6]=u=>n.position=u)},null,8,["options","value"]),$e]),_:1})]),e("div",Ke,[o(_,{name:"department"},{default:p(()=>[o(N,{placeholder:"请选择",style:{height:"40px"},options:ae.value,value:n.department,"onUpdate:value":t[7]||(t[7]=u=>n.department=u)},null,8,["options","value"]),We]),_:1})]),e("div",{class:"create-btn pointer",onClick:oe}," 创建 ")]),_:1},8,["model","rules"])])],64)):w("",!0)],2)])}}}));const nt=ye(Ge,[["__scopeId","data-v-8e46d5e8"]]);export{nt as default};

var h=Object.defineProperty;var B=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var _=(i,e,o)=>e in i?h(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o,f=(i,e)=>{for(var o in e||(e={}))w.call(e,o)&&_(i,o,e[o]);if(B)for(var o of B(e))F.call(e,o)&&_(i,o,e[o]);return i};var g=(i,e,o)=>new Promise((c,n)=>{var l=r=>{try{p(o.next(r))}catch(a){n(a)}},d=r=>{try{p(o.throw(r))}catch(a){n(a)}},p=r=>r.done?c(r.value):Promise.resolve(r.value).then(l,d);p((o=o.apply(i,e)).next())});import{d as k,f as M,e as R,u as m,V as x,a6 as E,af as P,ai as C,k as v,E as V,ag as A}from"./vue-vendor-24c7dc61.js";import{B as D}from"./index-1c3affea.js";import"./index-52c8c841.js";import{f as L}from"./page.data-58dba86c.js";import{s as O}from"./page.api-9d0cf9bc.js";import{j as T,bl as U,b8 as j,bm as G,b7 as I}from"./index-831af9dd.js";import{u as N,B as S}from"./useForm-14b2bc77.js";import"./BasicModal-58413bab.js";import"./antd-vue-vendor-0d72f01e.js";import"./useWindowSizeFn-8f085f6f.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./vxe-table-vendor-8813019a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./helper-22dafba0.js";const jo=k({__name:"PageModal",emits:["success","register"],setup(i,{emit:e}){const o=M(!0),[c,{resetFields:n,setFieldsValue:l,validate:d}]=N({schemas:L,showActionButtonGroup:!1}),[p,{setModalProps:r,closeModal:a}]=T(s=>g(this,null,function*(){if(yield n(),r({confirmLoading:!1}),o.value=!!(s!=null&&s.isUpdate),m(o)){let t=f({},s.record);t.protectionCode&&t.protectionCode.length>0&&(t.protectionCode=U(t.protectionCode)),yield l(f({},t))}})),b=R(()=>m(o)?"编辑":"新增");function y(s=0){return g(this,null,function*(){try{const t=yield d();r({confirmLoading:!0}),t.protectionCode&&(t.protectionCode=j(t.protectionCode));const u=yield O(t,o.value);t.id&&G(I.DRAG_CACHE_PREFIX+t.id),a(),e("success",s===1?u:null)}finally{r({confirmLoading:!1})}})}return(s,t)=>{const u=x("a-button");return E(),P(m(D),A(s.$attrs,{onRegister:m(p),okText:"保存",title:b.value,onOk:y,width:700,destroyOnClose:""}),{appendFooter:C(()=>[v(u,{type:"primary",onClick:t[0]||(t[0]=$=>y(1))},{default:C(()=>[V("保存并设计")]),_:1})]),default:C(()=>[v(m(S),{onRegister:m(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"])}}});export{jo as default};

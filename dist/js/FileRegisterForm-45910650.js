var y=(l,_,a)=>new Promise((o,d)=>{var i=e=>{try{t(a.next(e))}catch(m){d(m)}},c=e=>{try{t(a.throw(e))}catch(m){d(m)}},t=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,c);t((a=a.apply(l,_)).next())});import{d as E,f as k,r as V,V as f,a6 as M,af as S,ai as r,k as n,u as b,E as z,a5 as v,a3 as B,a4 as N,I as q}from"./vue-vendor-24c7dc61.js";import{C as L}from"./index-f99b266a.js";import{o as T,a as U,bo as j,bx as A,bt as D,bu as G,l as O}from"./index-831af9dd.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";const H=l=>(B("data-v-93faffb4"),l=l(),N(),l),J=H(()=>v("span",null,"已有账号",-1)),K=E({__name:"FileRegisterForm",emits:["success","account-login","forget-password","login-data"],setup(l,{expose:_,emit:a}){const{t:o}=T(),d={mobile:[{required:!0,message:"请输入手机号"}],sms:[{required:!0,message:"请输入验证码"}]},{createMessage:i}=U(),c=k(),t=k(!1),e=V({mobile:"",sms:""}),{validForm:m}=j(c);function w(){return y(this,null,function*(){const u=yield m();if(u)try{t.value=!0;const s=yield A(q({phone:u.mobile,smscode:u.sms}));s.data.success?(i.success(s.data.message||o("sys.api.registerMsg")),a("login-data",{username:u.mobile,password:"123456"}),x()):i.warn(s.data.message||o("sys.api.networkExceptionMsg"))}catch(s){i.error(s.message||o("sys.api.networkExceptionMsg"))}finally{t.value=!1}})}function C(){return D({mobile:e.mobile,smsmode:G.REGISTER})}function x(){Object.assign(e,{mobile:"",sms:""}),c.value.clearValidate()}function h(){a("account-login")}return _({initFrom:x}),(u,s)=>{const F=f("a-input"),p=f("a-form-item"),I=f("a-button"),R=f("a-form");return M(),S(R,{class:"p-4 enter-x",model:e,rules:d,ref_key:"formRef",ref:c},{default:r(()=>[n(p,{name:"mobile",class:"enter-x"},{default:r(()=>[n(F,{size:"large",value:e.mobile,"onUpdate:value":s[0]||(s[0]=g=>e.mobile=g),placeholder:b(o)("sys.login.mobile"),class:"input-background"},null,8,["value","placeholder"])]),_:1}),n(p,{name:"sms",class:"enter-x"},{default:r(()=>[n(b(L),{size:"large",value:e.sms,"onUpdate:value":s[1]||(s[1]=g=>e.sms=g),placeholder:b(o)("sys.login.smsCode"),sendCodeApi:C,class:"sms-code-background"},null,8,["value","placeholder"])]),_:1}),n(p,{class:"enter-x"},{default:r(()=>[n(I,{type:"primary",size:"large",block:"",onClick:w,loading:t.value},{default:r(()=>[z("注册")]),_:1},8,["loading"])]),_:1}),n(p,{class:"enter-x"},{default:r(()=>[v("div",{class:"exit-account"},[J,v("span",{class:"sign-now-login pointer",onClick:h},"立即登录")])]),_:1})]),_:1},8,["model"])}}});const $=O(K,[["__scopeId","data-v-93faffb4"]]);export{$ as default};

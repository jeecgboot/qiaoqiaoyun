var P=(e,o,a)=>new Promise((t,i)=>{var r=c=>{try{V(a.next(c))}catch(q){i(q)}},f=c=>{try{V(a.throw(c))}catch(q){i(q)}},V=c=>c.done?t(c.value):Promise.resolve(c.value).then(r,f);V((a=a.apply(e,o)).next())});import{f as y,r as Le,w as ce,u as Ae,I as qe,o as Re,b as Ze,e as Be,a5 as z,V as X,a6 as Fe,a7 as Ne,F as Ge,k as ne,a8 as Pe,af as ke,W as Ye,ag as je,D as Ke}from"./vue-vendor-24c7dc61.js";import{F as Je,m as He,a as Xe,i as ze}from"./fullcalendar-vendor-e153c929.js";import"./index-1c3affea.js";import{a as Ee,k as $e,e as et,l as tt}from"./index-831af9dd.js";import{i as U,a as Jt,a$ as at,bt as lt,av as nt}from"./antd-vue-vendor-0d72f01e.js";import ot from"./AutoDesformDataFullScreen-bd93fbb9.js";import{a as it,g as rt}from"./LinkRecordSelect-385d0eae.js";import{p as st}from"./auto.desform.api-839115ed.js";import{a as Me}from"./useAuth-d62eecf0.js";import{g as dt}from"./useSuperQueryCurd-0a66a14b.js";import ut from"./CalendarTagSelect-abbe5135.js";import ct from"./CalendarLeftTab-c5daf030.js";import{u as mt}from"./useViewCommon-0bf8ef6c.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./vxe-table-vendor-8813019a.js";import"./SelectItem-04dd2229.js";import"./lowAppUtils-56892d30.js";import"./desformUtils-c7daaa89.js";import"./LinkRecordTags-cf4c2463.js";import"./type.definition-4eb605ee.js";import"./FormSchemaFactory-ec827fa7.js";import"./index-bff0b654.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./lowAppAuth-3d637b7d.js";import"./useFuncSwitch-b7681246.js";import"./DictColors-73058d23.js";import"./TableImage-14ca1f5d.js";import"./SubTableTag-81763fd6.js";import"./CardCellFile-92b3c8c8.js";import"./InfoItem-08fdcae7.js";const{createConfirm:ft}=Ee();function pt(e,o){const a=y(),t=y([]),i=y([]),r=y([]),f=y(0),V=y(!1),c=y(),q=y({}),F=y({}),C=y(),k={setProps(){}},me=Le({notDesignForm:!1}),{allColumns:$,loadColumnsInfo:fe}=it({desformCode:c,translData:q,remoteOptionsMap:F,dynamicConfig:e.dynamicConfig,desformName:C,notBaseList:1},{loadData:pe,openLinkRecord:ve,tableAction:k},me);function pe(){}function ve(){}ce(()=>e.code,()=>P(this,null,function*(){c.value=e.code,yield Y()}),{immediate:!0}),ce(()=>e.timestamp,n=>P(this,null,function*(){if(n&&(yield Y(),f.value=n,a.value)){let s=a.value.getApi();setTimeout(()=>{s.updateSize()},3e3)}}),{immediate:!1});function Y(){return P(this,null,function*(){if(c.value)try{const n=yield fe(c.value);r.value=n.calendarColumnList,yield K()}finally{}else return})}const x=y({});ce(()=>e.superQuery,n=>{n&&(x.value={matchType:n.matchType,superQueryParams:n.superQueryParams}),K()},{immediate:!1,deep:!0});const j=y({});function K(){return P(this,null,function*(){yield rt(a);let n=a.value.getApi();const{currentStart:s,currentEnd:v}=n.view,d="/desform/data/calendarList";let g={code:c.value,appId:Ae(o),listViewId:e.dynamicConfig.id,superQuery:dt(x.value,j.value),global_keyword:e.keyword,begin_date:U(s).format("YYYY-MM-DD")+" 00:00:00",end_date:U(v).format("YYYY-MM-DD")+" 00:00:00"};const h=yield $e.get({url:d,params:g,timeout:3e4});!h||h.length==0?t.value=[]:Ve(h)})}function Ve(n){let s=r.value,v=[],d=Ae(R);if(!d){let g=$.value;g&&g.length>0&&(d=g[0].dataIndex,R.value=d)}for(let g=0;g<n.length;g++){let h=n[g],w=h.desformData,J=!0;if(s&&s.length>0)for(let Z=0;Z<s.length;Z++){let{beginDateField:_,endDateField:M,seq:N,tag:I}=s[Z];if(N===w.jeecgCalendarViewTag){J=!1;let b=0,T=0;_&&(b=w[_]),M&&(T=w[M]);let L=w[d];w[d+"_dictText"]&&(L=w[d+"_dictText"]);let S={id:h.id,title:L||"无标题",start:new Date(w[_])};if(M&&w[M]&&(S.end=new Date(w[M])),b&&T){let E=ie(b,T);S.allDay=E,E&&(S.end=U(S.end).endOf("d").add(1,"ms").toDate())}let A=oe(w);Object.keys(A).map(E=>{S[E]=A[E]}),S.extendedProps={tag:I,metaData:qe(h),index:g,records:n},v.push(S)}}J===!0&&he(h,s,d,v,n,g)}t.value=v}function he(n,s,v,d,g,h){let w=n.desformData;if(s&&s.length>0){let J=a.value.getApi();const{currentStart:Z,currentEnd:_}=J.view;let M=U(Z).valueOf(),N=U(_).valueOf();for(let I=0;I<s.length;I++){let{beginDateField:b,endDateField:T,tag:L}=s[I],S=0,A=0;if(b&&(S=w[b],M<=S&&N>=S)){T&&(A=w[T]);let E=w[v];w[v+"_dictText"]&&(E=w[v+"_dictText"]);let O={id:n.id,title:E||"无标题",start:new Date(w[b])};if(T&&w[T]&&(O.end=new Date(w[T])),S&&A){let H=ie(S,A);O.allDay=H,H&&(O.end=U(O.end).endOf("d").add(1,"ms").toDate())}let ue=oe(w);Object.keys(ue).map(H=>{O[H]=ue[H]}),O.extendedProps={tag:L,metaData:qe(n),index:h,records:g},d.push(O);break}}}}function oe(n){let s=i.value,v={};if(s&&s.length>0)for(let d of s)v[d.field]=n[d.field];return v}function ie(n,s){let v=U(new Date(n)).format("YYYY-MM-DD"),d=U(new Date(s)).format("YYYY-MM-DD");return v!=d}function we(n){ft({iconType:"warning",title:"删除",content:"确定要删除吗？",onOk:()=>P(this,null,function*(){yield st.delete(c.value,n),K()})})}const R=y(""),ee=y("dayGridMonth"),re=y(1),se=y([]),de=y(!1),te=y(!1);ce(()=>e.dynamicConfig,n=>{if(n&&e.viewId===n.id){if(R.value=n.titleField,V.value=n.hourStatus,a.value){let s=a.value.getApi();n.calendarDefault&&s.changeView(n.calendarDefault)}ee.value=n.calendarDefault||"dayGridMonth",re.value=Number(n.firstDay||"1"),n.weekDayList&&(se.value=n.weekDayList.map(s=>Number(s))),de.value=!!n.weekStatus,n.lunarStatus?te.value=n.lunarStatus:te.value=!1,n.orders&&(i.value=qe(n.orders))}},{immediate:!0,deep:!0});function ge(n,s){let v=i.value;return ae(v,0,n,s)}function ae(n,s,v,d){if(s==n.length)return 0;let g=n[s],h=g.field;return g.type=="desc"?v[h]>d[h]?-1:v[h]<d[h]?1:ae(n,++s,v,d):v[h]>d[h]?1:v[h]<d[h]?-1:ae(n,++s,v,d)}function ye(){let n=r.value,s=[];if(n&&n.length>0){for(let d of n)if(d.beginDateField){let g=d.tag;g||(g=v(d.beginDateField)),s.push({seq:d.seq,tag:g,field:d.beginDateField,endField:d.endDateField})}return s}function v(d){let g=$.value,h="";for(let w of g)w.dataIndex===d&&(h=w.title);return h&&"使用 "+h}return[]}function De(n){j.value={},j.value.matchType=n.matchType,j.value.superQueryGroup=n.conditions}return{calendar:a,dateColumnList:r,routeCode:c,deleteOne:we,allEvents:t,allColumns:$,titleField:R,hourStatus:V,loadEvent:K,getDateFieldOptions:ye,compareEvent:ge,leftTimestamp:f,superQueryParams:x,weekStatus:de,weekDayList:se,calendarDefault:ee,firstDay:re,lunarStatus:te,setSuperQueryGroup:De}}function vt(e){const{hasCreateAuth:o}=Me();let a=null;function t(r){if(r.preventDefault(),r.stopPropagation(),o(e.code)===!0){let V=document.getElementById("calendar-tips"+e.viewId);V&&(a!=null&&clearTimeout(a),V.style.top=r.clientY+"px",V.style.left=r.clientX+"px",V.style.display="block",a=setTimeout(()=>{V.style.display="none"},1e3))}}function i(){let r=document.getElementById("calendar-tips"+e.viewId);r&&(r.style.display="none")}Re(()=>{let r=document.querySelector("#a"+e.viewId+" ");if(r){let f=r.querySelector("table tbody");f&&(f.addEventListener("mouseover",t),f.addEventListener("mouseout",i))}}),Ze(()=>{let r=document.querySelector("#a"+e.viewId+" ");if(r){let f=r.querySelector("table tbody");f&&(f.removeEventListener("mouseover",t),f.removeEventListener("mouseout",i))}})}function Vt(e){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=[];for(let t=0;t<e.length;t++){let i=o.indexOf(e[t]);a.push(i.toString(2).padStart(6,"0"))}return a.join("")}function ht(e,o,a){if(e<1901||e>2100)throw new Error("Invalid Year");if(o<1||o>12)throw new Error("Invalid Month");if(a<1||a>31)throw new Error("Invalid Date");if([4,6,9,11].indexOf(o)!=-1&&a>30)throw new Error("Invalid Date");if(o==2){if(a>29)throw new Error("Invalid Date");{let t=!1;if((e%400==0||e%4==0&&e%100!=0)&&(t=!0),!t&&a>28)throw new Error("Invalid Date")}}}var Ie={base64ToBit:Vt,checkDate:ht};const{base64ToBit:wt,checkDate:gt}=Ie,yt=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],Dt=[4,19,3,18,4,19,4,19,4,20,4,20,6,22,6,22,6,22,7,22,6,21,6,21],Oe=[];function St(){const e="ABCDAECDAECDFGHIJKHILKMILABNOABNOAENOAENOAEPQRGSTUGSTLAVTOAWXOAWXOAYXOAYZOabcdebcQUfgThijkOilXOimXOimXOimcOnocdpqcQrsgktujkvumXvumXvumcvumcvwocxyqcz0sj10s213u243um43um53wm56wq567q589s+/0s~/3u~!3u@#3um",o="paaqmqqpqaquqqqqqvruruqq6qWaWZqlqaqqqqqqlaaqmqqppaaqqqqqqrququqqqqWaWZaVlaaampqlpaaqqqqplaWampqlqaququqqqqWZWZVVlaWaWZqlqqVZWZVVlaWaWZaVlaaqmpqpqmVZVZVVVaWaWZaVlaWampqpqlVZVZVVqVVZVVVVVaWZWZVVqVVVVVVVVaVZWZVVpaaqmpqpqVFVVVVVVaVZVZVVlaWaWZalpaaampqppVFVRVVVVWVZVZVVlaWaWpqlpVFVRVVUVVVZVVVVVaWZWZaVVFVZVVVVVFVVVVVVpVFVRUVUVFFVVVVVpVFFRUVUVFFVRVVVlVBFRUVUUFFVRVVVlVBFBEVUUFFVRVVUlVBFBEVQUFFFRUVUlVBFBEFQUFBFRUVUlVBEBEFAQFBFBEVUVVBEBEFAVVVVVVVVQFBFBEVQVVBEBEAAVVAEAEAAQFBFBEFQUFBFBUVUQFBEBEFAUFBFBEVUVQAEAAAAAFBEBEFAVQAAAAAAAFBEBEAAVAAAAAAAAFBEAEAA",a=[];for(let i=0;i<o.length;i+=8){const r=wt(o.substr(i,8)),f=[];for(let V=0;V<r.length;V+=2)f.push(+`0b${r.substr(V,2)}`);a.push(f)}const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/~!@#";for(let i=0;i<e.length;i++)Oe.push(a[t.indexOf(e[i])])}St();function qt(e,o,a){e=Math.floor(+e),o=Math.floor(+o),a=Math.floor(+a),gt(e,o,a);const t=(o-1)*2+(a<15?0:1),i=Dt[t]+Oe[e-1901][t];return a==i?yt[t]:null}var Ft={getSolarTerm:qt};const{base64ToBit:Ct,checkDate:bt}=Ie,{getSolarTerm:Tt}=Ft,be=[],At="甲乙丙丁戊己庚辛壬癸",Bt="子丑寅卯辰巳午未申酉戌亥",kt="鼠牛虎兔龙蛇马羊猴鸡狗猪",Lt="正二三四五六七八九十冬腊",Ce="一二三四五六七八九十";function Et(){const o=Ct("hLaCVwUrqpNDSYNlUaqgrUE1pJXQSuak2FJoaSrqlC1QNailtBK26TcElwpLWyWDUoNqJW1ArYJVySXgkuzJYNSg6lVtSC1oFbHJuCS58loZKhqU20oLVQVqSq2BLoSWlkrCpV7SoNlBaqqrUE2gpbNSuClcVKg6VBqpq1QVaglslK4KVwUmPpMGyrrVQVqCW1UroJWhSamk0NJY1ShaoFtTS2glbBJtKS4Ul1ZLBqUG1GraBVsEq6pLwSXBks2pQdSw1lBawKtlk2hJcGSyalQ1KDaUlqoK1PVbAl0JLVyVhUqFpSWqgrVlVqCXQUtspXBSsKk0dKg1UFapJtQS2alcFJwaTL0mDVMFqja1BLbaV0ErQpNbSWGkoapLtUC1oFbSStgk29JcKSwqlW1KDaQVtGq2CTeEl4JLgyWzUoOpQaqSrYFVwSXHkuDJZ9SoalBtKq1UFagptRS6ClsVKwqVC0prVQVqgq0lLoKWwUrOpODSbuUwaqCtVU2oJbBSuik4NFo6TBqkG1TNagVtBK5KToUWhoqWyUNUg");let a={y:1900,m:1,d:31,obj:new Date(1900,0,31,0,0,0,0)},t=6,i=0;for(let r=0;r<o.length&&!(r+16>=o.length);){const f=o.substr(r,4);r+=4;const V=+`0b${f}`,c=V>0?13:12,q=o.substr(r,c).split("").map(k=>+k);r+=c,be.push({solarDate:a,leapMonth:V,months:q,heavenlyStem:t,earthlyBranch:i});const F=c*29+q.filter(k=>k==1).length,C=new Date(a.y,a.m-1,a.d+F,0,0,0,0);a={y:C.getFullYear(),m:C.getMonth()+1,d:C.getDate(),obj:C},t=(t+1)%10,i=(i+1)%12}}Et();function Mt(e,o){return e.y!=o.y?e.y>o.y:e.m!=o.m?e.m>o.m:e.d!=o.d?e.d>o.d:!1}function It(e,o,a){const t=`${a?"闰":""}${Lt[e-1]}月`;return o<=10?`${t}初${Ce[o-1]}`:o<20?`${t}十${Ce[o-11]}`:o==20?`${t}廿十`:o>20?`${t}廿${Ce[o-21]}`:`${t}三十`}function Ot(e,o,a){e=Math.floor(+e),o=Math.floor(+o),a=Math.floor(+a),bt(e,o,a);let t=e-1900,i=be[t];if(Mt(i.solarDate,{y:e,m:o,d:a})&&(t-=1,i=be[t]),!i)throw new Error("Invalid Date");const r=new Date(e,o-1,a,0,0,0,0);let f=Math.round((r.getTime()-i.solarDate.obj.getTime())/(24*60*60*1e3)),V=!1;for(let c=0;c<i.months.length;c++){const q=i.leapMonth>0&&c==i.leapMonth;q&&(V=!0);const F=29+i.months[c];if(f<F){let C=V?c:c+1;return{lunarMonth:C,lunarDate:f+1,isLeap:q,solarTerm:Tt(e,o,a),lunarYear:`${At[i.heavenlyStem]}${Bt[i.earthlyBranch]}年`,zodiac:`${kt[i.earthlyBranch]}`,dateStr:It(C,f+1,q)}}else f-=F}throw new Error("There's something wrong!")}var Ut={getLunar:Ot};const xt={name:"CalendarList",components:{FullCalendar:Je,DeleteOutlined:at,AutoDesformDataFullScreen:ot,CalendarTagSelect:ut,MenuFoldOutlined:lt,CalendarLeftTab:ct,CloseOutlined:nt},props:{code:String,timestamp:{type:Number,default:0},keyword:{type:String,default:""},superQuery:{type:Object,default:()=>{}},dynamicConfig:{type:Object,default:()=>{}},viewId:{type:String,default:""}},setup(e){const{createMessage:o}=Ee(),a=y({}),t=y(0);let i=window.innerHeight-70-100;t.value=i;const r=Le({top:0,left:0,visible:!1,options:[]}),{hasUpdateAuth:f,hasDeleteAuth:V,hasCreateAuth:c}=Me(),q=Be(()=>c(e.code));vt(e);const{appId:F,showComment:C,showFiles:k,showDataLog:me,showCreateBtn:$,showRecordShare:fe,showRecordSysPrint:pe,showDesignFormBtn:ve,dataPageTotal:Y,currentIndex:x}=mt(),{calendar:j,loadEvent:K,allEvents:Ve,titleField:he,deleteOne:oe,getDateFieldOptions:ie,dateColumnList:we,routeCode:R,leftTimestamp:ee,superQueryParams:re,allColumns:se,hourStatus:de,weekDayList:te,weekStatus:ge,calendarDefault:ae,firstDay:ye,lunarStatus:De,compareEvent:n,setSuperQueryGroup:s}=pt(e,F),[v,{openModal:d}]=et();window["clickThenAdd"+e.viewId]=M;let g=0,h=400;function w(l){let{clientX:p,clientY:u}=l.jsEvent;r.top=u,r.left=p,l.view.type=="timeGridWeek"||l.view.type=="timeGridDay"?b(l.start.getTime(),l.end.getTime()-30*60*1e3):(g=new Date().getTime(),setTimeout(()=>{b(l.start.getTime(),l.end.getTime()-1e3*60*60*24)},h))}function J(l,p){}const Z=Be(()=>({events:Ve.value,plugins:[He,Xe,ze],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},buttonText:{today:"今天",month:" 月 ",week:" 周 ",day:" 日 "},allDayText:"全天",navLinkHint:"$0 点击新增",firstDay:ye.value,hiddenDays:ge.value?te.value:[],nowIndicator:!0,locale:"zh-cn",initialView:ae.value,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,height:t.value,select:w,eventClick:E,eventsSet:J,navLinks:!0,navLinkDayClick:function(u,m){b(u)},windowResize:function(u){let m=window.innerHeight-70-100;t.value=m},eventOrderStrict:!0,eventOrder:function(u,m){return n(u,m)},eventBackgroundColor:"rgb(201, 230, 252)",eventBorderColor:"rgb(201, 230, 252)",eventColor:"rgb(51, 51, 51)",eventContent:function(u,m){let W=u.event.allDay?"":_e(u.event.start);const Q=D=>{D==null||D.stopPropagation(),D==null||D.preventDefault(),ue(u.event.id)};let B=u.event.extendedProps.metaData;B=B!=null&&B.desformData?B.desformData:B;let G=V(e.code,e.viewId,[B]);if(u.view.type==="dayGridMonth"){let D=[];return D.push(m("div",{class:"fc-daygrid-event-dot"},"")),W&&D.push(m("div",{class:"fc-event-time"},W)),u.event.extendedProps.tag?D.push(m("div",{class:"fc-event-title custom-title"},[m("span",{class:"title-text"},u.event.title),m("span",{class:"tag-text"},u.event.extendedProps.tag)])):D.push(m("div",{class:"fc-event-title"},u.event.title)),G===!0&&D.push(m("span",{class:"anticon anticon-delete diy-cha",title:"删除",onClick:Q},"×")),D}else{let D=[m("div",{class:"fc-event-title-container"},[m("div",{class:"fc-event-title fc-sticky",style:{"font-weight":"bold",color:"rgb(51, 51, 51)"}},[m("span",{class:"titleTxt"},u.event.title),m("span",{class:"tag-text"},u.event.extendedProps.tag)])])];if(W&&D.unshift(m("div",{class:"fc-event-time"},W)),G===!0){let Se=u.view.type=="timeGridDay"?"anticon anticon-delete diy-cha":"anticon anticon-delete diy-cha cha-left";D.push(m("span",{class:Se,title:"删除",onClick:Q},"×"))}return m("div",{class:"fc-event-main-frame custom-info",style:{"font-size":"12px",overflow:"hidden"}},D)}},views:{dayGridMonth:{dayCellContent(u){let m=new Date(u.date),Q=m.toLocaleDateString().split("/"),B=Ut.getLunar(Q[0],Q[1],Q[2]),G="";De.value===!0&&(B.solarTerm?G=B.solarTerm:G=B.dateStr.substring(2));let D=m.getTime();return q.value===!0?{html:'<div class="daygrid-cell-text" id="dt_'+D+'"><span class="lunar">'+G+'</span><a onclick="clickThenAdd'+e.viewId+"(event, "+D+')" class="fc-daygrid-day-number solar" title="点击新增">'+u.dayNumberText+"<span>+</span></a></div>"}:{html:'<div class="daygrid-cell-text" id="dt_'+D+'"><span class="lunar">'+G+'</span><a class="fc-daygrid-day-number solar">'+u.dayNumberText+"</a></div>"}}}}}));function _(){ee.value=new Date().getTime(),K()}function M(l,p){l.preventDefault(),l.stopPropagation(),b(p)}const N=y(0),I=y(0);function b(l,p=0){N.value=l,a.value={},I.value=p;let u=ie();if(u)if(u.length>1)r.options=u,r.visible=!0;else{let{field:m,seq:W,endField:Q}=u[0];T(m,Q,W)}}function T(l,p,u){q.value!==!1&&(l&&(a.value={[l]:N.value,jeecgCalendarViewTag:u}),p&&(I.value>0?a.value[p]=I.value:a.value[p]=N.value),r.visible=!1,d(!0,{mode:"add",desformCode:e.code,dataId:"",isOnline:!1,viewId:e.viewId,lowAppId:F.value}))}function L(l){d(!0,{mode:"edit",desformCode:e.code,dataId:l,isOnline:!1,viewId:e.viewId,lowAppId:F.value})}function S(l){d(!0,{mode:"detail",desformCode:e.code,dataId:l,isOnline:!1,viewId:e.viewId,lowAppId:F.value})}let A=null;function E(l){let{metaData:p,index:u,records:m}=l.event.extendedProps;x.value=u,Y.value=m.length,A=m,p=p!=null&&p.desformData?p.desformData:p,f(e.code,e.viewId,[p])===!0?L(l.event.id):S(l.event.id)}function O({id:l,index:p,mode:u}){if(l){x.value=null,Y.value=null,u==="detail"?S(l):L(l),_();return}if(x.value=p,!A||!A[p]){o.error("数据不存在");return}let m=A[p];u==="detail"?S(m.id):L(m.id)}function ue(l){oe(l)}function H(){let l=document.createElement("span");return l.innerHTML="×",l.setAttribute("title","删除"),l.className="anticon anticon-delete diy-cha",l}const le=y(!1);function Ue(l){Te(l),le.value===!0?le.value=!1:le.value=!0}function xe(l){Te(l),le.value=!1}function Te(l){l.preventDefault(),l.stopPropagation()}function _e(l){let p=de.value?"HH:mm":"Ah:mm";return U(l).format(p)}function We(l){l=l!=null&&l.desformData?l.desformData:l,f(e.code,e.viewId,[l])===!0?L(l.id||l._id):S(l.id||l._id)}function Qe(){return P(this,null,function*(){let l={code:R.value,superQuery:JSON.stringify(re.value),listViewId:e.dynamicConfig?e.dynamicConfig.id:"",global_keyword:e.keyword},p=e.dynamicConfig.name;return{columns:se.value,queryParams:l,viewName:p}})}return{appId:F,calendar:j,dateColumnList:we,calendarOptions:Z,containerHeight:t,registerModal:v,reload:_,defaultFormData:a,titleField:he,tagSelectModel:r,showAddModal:T,routeCode:R,showEditModal:L,leftTabVisible:le,currentIndex:x,dataPageTotal:Y,onShowLeft:Ue,onHideLeft:xe,onGoToRecord:O,leftTimestamp:ee,onTapLeftItem:We,getTableColumns:Qe,showComment:C,showFiles:k,showDataLog:me,showCreateBtn:$,showRecordShare:fe,showRecordSysPrint:pe,showDesignFormBtn:ve,setSuperQueryGroup:s}}};const _t=["id"],Wt={style:{position:"relative","margin-top":"8px",flex:"1"}},Qt=z("span",{class:"text"},"排期",-1),Rt=["id"];function Zt(e,o,a,t,i,r){const f=X("CalendarLeftTab"),V=X("MenuFoldOutlined"),c=X("CloseOutlined"),q=X("FullCalendar"),F=X("DesformViewModal"),C=X("CalendarTagSelect");return Fe(),Ne(Ge,null,[z("div",{style:{display:"flex"},class:"calendar-container",id:"a"+a.viewId},[ne(f,{visible:t.leftTabVisible,"app-id":t.appId,"view-id":a.viewId,"route-code":t.routeCode,superQuery:a.superQuery,"calendar-column-list":t.dateColumnList,titleField:t.titleField,timestamp:t.leftTimestamp,onTap:t.onTapLeftItem},null,8,["visible","app-id","view-id","route-code","superQuery","calendar-column-list","titleField","timestamp","onTap"]),z("div",Wt,[z("div",{class:Pe(t.leftTabVisible?"header-icon actived":"header-icon"),onClick:o[0]||(o[0]=(...k)=>t.onShowLeft&&t.onShowLeft(...k))},[ne(V),Qt,t.leftTabVisible?(Fe(),ke(c,{key:0,style:{"margin-left":"7px"},onClick:t.onHideLeft},null,8,["onClick"])):Ye("",!0)],2),ne(q,{ref:"calendar",options:t.calendarOptions},null,8,["options"])])],8,_t),z("div",null,[ne(F,{index:t.currentIndex,total:t.dataPageTotal,showComment:t.showComment,showFiles:t.showFiles,showDataLog:t.showDataLog,showRecordShare:t.showRecordShare,showRecordCopy:t.showCreateBtn,showRecordSysPrint:t.showRecordSysPrint,showDesignFormBtn:t.showDesignFormBtn,defaultFormData:t.defaultFormData,onRegister:t.registerModal,onSuccess:t.reload,onGotoRecord:t.onGoToRecord},null,8,["index","total","showComment","showFiles","showDataLog","showRecordShare","showRecordCopy","showRecordSysPrint","showDesignFormBtn","defaultFormData","onRegister","onSuccess","onGotoRecord"]),ne(C,je(t.tagSelectModel,{onSelect:t.showAddModal,onClose:o[1]||(o[1]=k=>t.tagSelectModel.visible=!1)}),null,16,["onSelect"])]),(Fe(),ke(Ke,{to:"body"},[z("div",{class:"calendar-tips",id:"calendar-tips"+a.viewId},"点击或拖拽创建记录",8,Rt)]))],64)}const ja=tt(xt,[["render",Zt]]);export{ja as default};

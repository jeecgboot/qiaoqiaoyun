var y=(e,t,c)=>new Promise((d,m)=>{var s=n=>{try{o(c.next(n))}catch(r){m(r)}},u=n=>{try{o(c.throw(n))}catch(r){m(r)}},o=n=>n.done?d(n.value):Promise.resolve(n.value).then(s,u);o((c=c.apply(e,t)).next())});import{d as g,b as A,a5 as w,V as l,a6 as b,a7 as R,a8 as D,k as a,ai as p,af as F,W as $}from"./vue-vendor-24c7dc61.js";import"./index-621e597c.js";import{u as S}from"./useListPage-62a041ef.js";import{r as v}from"./low.app.api-97fc250a.js";import{L}from"./index-a964241b.js";import{u as N}from"./index-5f7e4a11.js";import V from"./BasicTable-d435f501.js";import{T as x}from"./componentMap-c857637c.js";import{l as I}from"./index-831af9dd.js";import"./antd-vue-vendor-0d72f01e.js";import"./useMethods-f689b480.js";import"./lowAppStore-499fb8f9.js";import"./index-52c8c841.js";import"./useForm-14b2bc77.js";import"./helper-22dafba0.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./JAreaLinkage-173780c9.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./useFormItem-86503382.js";import"./vxe-table-vendor-8813019a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./JPopup-2a779923.js";import"./EasyCronInput-b2123242.js";import"./JCheckbox-0b89d32a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./JImageUpload-d644253a.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";const O={columns:[{title:"菜单名称",align:"center",dataIndex:"menuName"},{title:"菜单类型",align:"center",dataIndex:"type",customRender({text:e}){let t=L.valueOf(e);return t!=null?t.name:e}}]},j=g({name:"LowAppMenuRecycleBin",components:{BasicTable:V,TableAction:x},setup(){const{reloadApp:e,pagesMap:t}=N(),c=S({tableProps:{api:v.list,columns:O.columns,useSearchForm:!1,showIndexColumn:!0,actionColumn:{width:200}}}),{prefixCls:d,tableContext:m,createConfirm:s}=c,[u,{reload:o},{rowSelection:n,selectedRowKeys:r}]=m;t==null||t.set("recycle-bin",{reload:o}),A(()=>{t==null||t.delete("recycle-bin")});function f(i){s({title:"恢复菜单",iconType:"warning",content:`您确定要恢复这 ${i.length} 个菜单吗？`,centered:!0,onOk(){return y(this,null,function*(){yield v.revertRecycleBin(i.join(",")),o(),e(),r.value=[]})}})}function _(i){s({title:"彻底删除菜单",iconType:"warning",content:`<div>
              <p>您确定要彻底删除这 ${i.length} 个菜单吗？</p>
        <p style="color:red;">注意：彻底删除后将无法恢复，请谨慎操作！</p>
        </div>`,centered:!0,onOk(){return y(this,null,function*(){yield v.deleteRecycleBin(i.join(",")),o(),r.value=[]})}})}function B(i){f([i.id])}function C(){f(r.value)}function h(i){return y(this,null,function*(){_([i.id])})}function k(){_(r.value)}function T(i){return[{label:"还原",icon:"ant-design:redo",onClick:()=>B(i)},{label:"彻底删除",icon:"ant-design:delete",onClick:()=>h(i)}]}return{prefixCls:d,rowSelection:n,selectedRowKeys:r,reload:o,onDeleteBatch:k,onRevertBatch:C,getTableAction:T,registerTable:u}}}),E=w("span",null,"还原",-1),K=w("span",null,"彻底删除",-1),P=w("span",null,"批量操作",-1);function z(e,t,c,d,m,s){const u=l("a-divider"),o=l("a-icon"),n=l("a-menu-item"),r=l("a-menu"),f=l("a-dropdown"),_=l("TableAction"),B=l("BasicTable");return b(),R("div",{class:D([e.prefixCls,"p-2"])},[a(B,{onRegister:e.registerTable,rowSelection:e.rowSelection},{alertAfter:p(()=>[a(u,{type:"vertical"}),e.selectedRowKeys.length>0?(b(),F(f,{key:0},{overlay:p(()=>[a(r,null,{default:p(()=>[a(n,{key:"1",onClick:e.onRevertBatch},{default:p(()=>[a(o,{type:"redo"}),E]),_:1},8,["onClick"]),a(n,{key:"2",onClick:e.onDeleteBatch},{default:p(()=>[a(o,{type:"delete"}),K]),_:1},8,["onClick"])]),_:1})]),default:p(()=>[w("a",null,[P,a(o,{type:"down"})])]),_:1})):$("",!0)]),action:p(({record:C})=>[a(_,{actions:e.getTableAction(C)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"])],2)}const Pe=I(j,[["render",z]]);export{Pe as default};

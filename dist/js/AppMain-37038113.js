var lo=Object.defineProperty;var be=Object.getOwnPropertySymbols;var uo=Object.prototype.hasOwnProperty,so=Object.prototype.propertyIsEnumerable;var De=(e,m,l)=>m in e?lo(e,m,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[m]=l,ue=(e,m)=>{for(var l in m||(m={}))uo.call(m,l)&&De(e,l,m[l]);if(be)for(var l of be(m))so.call(m,l)&&De(e,l,m[l]);return e};var p=(e,m,l)=>new Promise((R,b)=>{var g=c=>{try{w(l.next(c))}catch(h){b(h)}},D=c=>{try{w(l.throw(c))}catch(h){b(h)}},w=c=>c.done?R(c.value):Promise.resolve(c.value).then(g,D);w((l=l.apply(e,m)).next())});import{f as y,r as Le,a2 as ke,as as po,e as Y,w as Se,o as Ge,d as mo,p as de,I as he,av as co,a5 as W,V as s,a6 as I,a7 as se,F as ve,k as f,a8 as fo,ai as O,ao as go,af as N,W as pe,ae as ho,ak as vo}from"./vue-vendor-24c7dc61.js";import{a7 as Te,k as Be,cl as Mo,cm as Ao,d as Pe,b as $e,bB as yo,R as wo,cn as Co,h as Re,e as H,a as Io,co as bo,bI as Do,c as Lo,l as So}from"./index-831af9dd.js";import{q as Ro}from"./page.api-9d0cf9bc.js";import{p as Fe,bM as Fo,bW as _o,aS as No,bX as Uo,bY as ko,M as Go}from"./antd-vue-vendor-0d72f01e.js";import To from"./EmptyFormPage-8fd1ccd0.js";import Bo from"./AppMenu-187d025b.js";import{u as Po}from"./useFuncSwitch-b7681246.js";import"./index-1c3affea.js";import $o from"./AppFormAction-5d891c98.js";import Oo from"./DragAddModal-683440f9.js";import Eo from"./MergeTableModal-5ee5d2b2.js";import Vo from"./DragPageModal-10ed124f.js";import qo from"./AppFormDeleteModal-2d68c670.js";import{m as _e,a as Ho}from"./low.app.api-97fc250a.js";import{u as Wo}from"./useAppTheme-3409245c.js";import{u as Oe}from"./lowAppAuth-3d637b7d.js";import jo from"./AppHeader-78b29eae.js";import zo from"./AppGroupMenu-2f171386.js";import Ko from"./EmptyGroupIcon-42ab2478.js";import Xo from"./AppFormNameIconUpdateModal-8b2f571d.js";import Yo from"./MenuNote-2d2043d1.js";import Jo from"./ButtonLabelUpdateModal-04be1172.js";import Qo from"./AppFormRoute-e10612bb.js";import Zo from"./NoAuthPage-964ea18c.js";import xo from"./MaintainingPage-b7c61618.js";import et from"./AppClosePage-1881d165.js";import ot from"./RightChat-d63bc999.js";import tt from"./DragShareModal-06f7929b.js";import{c as nt,o as at}from"./useWebSocket-df578a5f.js";import"./vxe-table-vendor-8813019a.js";import"./no-form-data-abd68b24.js";import"./vuedraggable-vendor-6ef4bc68.js";import"./MenuAction-5d2e21ef.js";import"./AppIconSelector-c6c055a9.js";import"./AppMenuUpdateModal-457fbbca.js";import"./MoveGroupSelectModal-b21b3188.js";import"./VipPay.api-469f07f9.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./useUndeveloped-598c4bd7.js";import"./index-52c8c841.js";import"./useForm-14b2bc77.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./helper-22dafba0.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./aggregation.api-c441389c.js";import"./AggregationTableAddModal-0bbaa523.js";import"./MergeTableCardList-bd7c3927.js";import"./AggregationTableHandleModal-87af6db2.js";import"./DataSourcesModal-9f42b669.js";import"./page.data-58dba86c.js";import"./DBFormTable-bda07bb7.js";import"./ValidateModal-f0e777cd.js";import"./JCalclateInput-0d22db8c.js";import"./searchcursor-9651c8d5.js";import"./CalculateModal-3ab8a410.js";import"./MergeTableFieldConfig-f5de5ff2.js";import"./RenameModal-eec148b3.js";import"./DynamicTable-6790729c.js";import"./FilterConditionConfig-8b3b3b7c.js";import"./ComponentIcon-f1bbb90f.js";import"./AggregationAdvancedFilter-a52ae827.js";import"./FormSchemaFactory-ec827fa7.js";import"./index-bff0b654.js";import"./type.definition-4eb605ee.js";import"./LinkRecordSelect-385d0eae.js";import"./SelectItem-04dd2229.js";import"./lowAppUtils-56892d30.js";import"./auto.desform.api-839115ed.js";import"./desformUtils-c7daaa89.js";import"./LinkRecordTags-cf4c2463.js";import"./DictColors-73058d23.js";import"./TableImage-14ca1f5d.js";import"./SubTableTag-81763fd6.js";import"./CardCellFile-92b3c8c8.js";import"./SuperQueryValComponent-97f284a9.js";import"./PasswordModal-105dafd8.js";import"./index.umd.min-e2b28327.js";import"./renderers-81963a7f.js";import"./grid-layout-vendor-83979c40.js";import"./BackIndex-47cd6641.js";import"./useCooperationPage-7c852af8.js";import"./index-b510c86d.js";import"./AppActionSelect-b7bf99c4.js";import"./AppNote-078d7e26.js";import"./AppInfoUpdateModal-dfe18a48.js";import"./CommonUserMenu-1452597c.js";import"./HeaderUserIcon-36774302.js";import"./AppMaintainSetModal-aee921bd.js";import"./AppDictDrawer-1f691471.js";import"./index-44229d9b.js";import"./AppDictAddModal-6b1fc137.js";import"./BasicTable-d435f501.js";import"./AppDeleteConfirm-a0947474.js";import"./AppBackupConfirm-c4a19257.js";import"./AppBackupListModal-42af6e7c.js";import"./index-621e597c.js";import"./useListPage-62a041ef.js";import"./no-auth-089a3ce0.js";function it(){let e=[];const m=y([]),l=y([]),R=y(!1),b=y(!1),g=Le({id:"",appName:"",iconType:"",iconBackColor:"",appNote:"",maintStatus:0,maintNote:"",openStatus:1}),D=Oe(),w=ke(),c=po(),h=Le({id:"",menuName:"",iconType:"",menuNote:"",addButtonLabel:"",type:""}),v=y(""),F=y(),L=y(!1);function T(t){return p(this,null,function*(){e=t||[];let n=[];if(t&&t.length>0){let r=t.filter(a=>a.type==="group");if(r.length>0){for(let d of r){let u=Fe(d,"id","menuName","orderNum");me(d.id)&&n.push(u)}if(n.length==0)return;z(n);let a=n[0].id;if(!v.value)v.value=a,yield ie(t);else{let d=r.filter(u=>u.id==v.value);(!d||d.length==0)&&(v.value=a,yield ie(t))}}else v.value=""}m.value=n,j()})}function j(){let t=v.value,n=[];t?n=e.filter(a=>a.parentId===t):n=[...e];let r=[];if(n.length>0){for(let a of n)if(a.type==="form"||a.type==="desform"||a.type==="drag"){let d=Fe(a,"id","menuName","orderNum","iconType","menuUrl","type","appId","hideFlag","addButtonLabel","menuNote");d.hideFlag==1?b.value===!0&&r.push(d):r.push(d)}z(r)}l.value=r}function z(t){t.sort(function(n,r){return n.orderNum-r.orderNum})}function B(t,n,r){return p(this,null,function*(){Object.keys(h).map(u=>{h[u]=t[u]});let a=t.menuUrl,d=t.type==="form";if(t.type==="drag")if(n===!0){let u=`/myapp/${g.id}/drag/${a}`,A=`/myapp/${g.id}/redirect`;yield w.push({path:A,query:{redirectPath:u}})}else{let u=`/myapp/${g.id}/drag/${a}`;r===!0?yield w.replace({path:u}):yield w.push({path:u})}else if(t.type==="desform"||t.type==="form"){let u=d?"form":"desform";if(n===!0){let A=`/myapp/${g.id}/${u}/${a}`,re=`/myapp/${g.id}/redirect`;yield w.push({path:re,query:{redirectPath:A}})}else{let A=`/myapp/${g.id}/${u}/${a}`;r===!0?yield w.replace({path:A}):yield w.push({path:A})}}})}function U(t){return p(this,null,function*(){let r=c.params.code;if(l.value.length>0)if(!r)yield B(l.value[0],!1,!0);else{let a=l.value.filter(d=>d.menuUrl===r);if(t){let d=l.value.filter(A=>A.menuUrl===t),u=!0;a.length>0&&d.length>0&&(u=d[0].type===a[0].type),yield B(d[0],u)}else a.length==0?yield B(l.value[0],!1,!0):yield B(a[0])}})}function k(){return p(this,null,function*(){const t=yield _e.queryMenus({appId:g.id});if(t.success){const n=t.result.menuList;T(n)}})}function E(t){return p(this,null,function*(){v.value=t,j(),yield U()})}function V(t){return p(this,null,function*(){v.value=t,yield k()})}function K(){return p(this,null,function*(){v.value="",yield k()})}function S(t){return p(this,null,function*(){v.value=t,yield k(),yield U()})}function J(t){return p(this,null,function*(){yield k(),h.id===t&&(yield U())})}const C=Y(()=>{v.value;let t=m.value;if(t&&t.length>0){let n=[];for(let r of t){let a={value:r.id,label:r.menuName,disabled:!1};v.value==r.id&&(a.disabled=!0),n.push(a)}return n}return[]}),P=y("blue"),{updateAppTheme:G}=Wo();function _(t){return p(this,null,function*(){const n=yield Ho.queryDetail(t);if(n.success){let r=n.result.record;Object.keys(g).map(a=>{g[a]=r[a]}),P.value=g.iconBackColor||"#fff",g.iconBackColor&&(yield G(g.iconBackColor))}})}const Q=y();function Z(t){h.menuNote=t;let n=l.value,r=n.filter(a=>a.id===h.id);r[0].menuNote=t,l.value=n}const x=y();function ee(t){h.menuName=t.menuName,h.iconType=t.iconType;let n=l.value,r=n.filter(a=>a.id===t.id);r[0].iconType=t.iconType,r[0].menuName=t.menuName,l.value=n}const oe=y();function te(t){h.addButtonLabel=t;let n=l.value,r=n.filter(a=>a.id===h.id);r[0].addButtonLabel=t,l.value=n}function ne(){}Se(()=>c.fullPath,()=>p(this,null,function*(){var a;let n=c.params.appId,r=c.query.type;if(R.value=!1,n&&g.id!=n){L.value=!0,yield _(n);const d=yield _e.queryMenus({appId:n}).catch(()=>{L.value=!1});if(d.success){b.value=d.result.hasAdmin;const u=d.result.menuList;F.value=u,yield T(u),c.query.view||(a=c.meta)!=null&&a.view||(yield U()),D.setLowAppAdminAuth(n,d.result.hasAdmin),yield X(),L.value=!1}else R.value=!0,L.value=!1}else r=="drag"&&F.value&&F.value.length>0&&(L.value=!0,v.value="",yield T(F.value),L.value=!1)}),{immediate:!0}),Se(h,()=>{let t=h.addButtonLabel;c.meta.buttonLabel=t},{deep:!0,immediate:!0});const ae=Te();function X(){return p(this,null,function*(){const n=`/desform/auth/queryUser/${ae.getUserInfo.username}`,r=yield Be.get({url:n}).catch(()=>{L.value=!1});r.roles&&D.setRoles(r.roles),r.departs&&D.setDeparts(r.departs)})}function ie(t){return p(this,null,function*(){var r;let n=(r=c.params)==null?void 0:r.code;if(n){let a=t.find(d=>d.menuUrl===n);a||Mo(n)||(n=yield Ao(n).catch(()=>{L.value=!1}),a=t.find(u=>u.menuUrl===n)),a!=null&&a.parentId&&(v.value=a.parentId)}})}function me(t){for(const n of e)if((n.type==="form"||n.type==="desform"||n.type==="drag")&&n.parentId===t&&n.hideFlag!==1)return!0;return b.value===!0}return{lowAppInfo:g,headerColor:P,leftMenuList:l,groupMenuList:m,activeMenu:h,activeGroupMenuId:v,onMenuChange:U,reloadMenuList:k,onActiveGroupChange:E,onAddFirstGroupSuccess:K,onAddGroupSuccess:V,onReloadGroup:S,leftMoveGroupList:C,moveSuccess:J,onUpdateLocalMenu:ee,onReloadMenu:ne,appFormUpdateRef:x,menuNoteRef:Q,updateLocalMenuNote:Z,buttonLabelRef:oe,updateLocalButtonLabel:te,noAuth:R,hasAdminAuth:b,menuLoading:L}}function rt(){const e=Te(),m=Pe(),l=Oe();function R(){var F;let D=$e(),w=yo(D),c=e.getUserInfo.username;const v=`${(F=m.domainUrl)==null?void 0:F.replace("https://","wss://").replace("http://","ws://")}/taskCountSocket/${c}_${w}`;nt(v),at(b)}function b(D){D.cmd==="taskCount"&&setTimeout(()=>{g()},2e3)}function g(){return p(this,null,function*(){})}Ge(()=>{})}const Me=mo({name:"AppMain",components:{Icon:wo,PartitionOutlined:Fo,ThunderboltOutlined:_o,TeamOutlined:No,EmptyFormPage:To,AppMenu:Bo,DoubleLeftOutlined:Uo,DoubleRightOutlined:ko,AppFormAction:$o,DragAddModal:Oo,AppFormDeleteModal:qo,DragPageModal:Vo,AppHeader:jo,AppGroupMenu:zo,EmptyGroupIcon:Ko,AppFormNameIconUpdateModal:Xo,MenuNote:Yo,ButtonLabelUpdateModal:Jo,AppFormRoute:Qo,NoAuthPage:Zo,MaintainingPage:xo,AppClosePage:et,DragShareModal:tt,RightChat:ot,Loading:Co,MergeTableModal:Eo},setup(){const{prefixCls:e}=Re("low-app-main-layout"),{prefixCls:m}=Re("low-myapps-left-container"),l=y(300);l.value=window.innerHeight-60;const R=y("");function b(o){R.value=o,setTimeout(()=>{R.value=""},2e3)}const[g,{openModal:D}]=H(),[w,{openModal:c,getVisible:h}]=H();de("getDesignerVisible",h);const[v,{openModal:F}]=H(),[L,{openModal:T}]=H(),[j,{openModal:z}]=H(),[B,{openModal:U}]=H(),[k,{openModal:E}]=H(),{}=Po(),{lowAppInfo:V,headerColor:K,leftMenuList:S,groupMenuList:J,activeMenu:C,activeGroupMenuId:P,onMenuChange:G,reloadMenuList:_,onActiveGroupChange:Q,onAddGroupSuccess:Z,onReloadGroup:x,onAddFirstGroupSuccess:ee,leftMoveGroupList:oe,moveSuccess:te,onUpdateLocalMenu:ne,onReloadMenu:ae,appFormUpdateRef:X,menuNoteRef:ie,updateLocalMenuNote:me,buttonLabelRef:t,updateLocalButtonLabel:n,noAuth:r,hasAdminAuth:a,menuLoading:d}=it();de("leftMenuList",S);const u=y(""),A=ke(),re=Y(()=>{var o;return((o=A.currentRoute.value)==null?void 0:o.meta)||{}}),Ee=Y(()=>re.value.hideAppMenu===!0),Ve=Y(()=>re.value.hideAppGroup===!0),qe=Y(()=>re.value.hideViewHeader===!0),ce=y(!1);function He(o){o.preventDefault(),o.stopPropagation(),ce.value=!ce.value}const{createMessage:We,createErrorModal:je}=Io();function Ae(o){return p(this,null,function*(){const i="/desform/queryByIdOrCode",M=yield Be.get({url:i,params:o},{isTransformResponse:!1});return M.success||We.error("表单没找到!"),M.result})}const le=y(""),$=y({});function ye(o){return p(this,null,function*(){let i=yield Ae(o);i&&($.value=ue({},i),le.value&&(le.value===i.desformCode?setTimeout(()=>ge(),600):je({title:"打开表单失败",content:`无法打开表单“${le.value}”，可能是因为表单被删除或不是该应用内的表单。`}),le.value=""))})}const fe=y({});function ze(o){return p(this,null,function*(){let i=yield Ro({id:o});i.success&&(fe.value=ue({},i.result))})}Ge(()=>p(this,null,function*(){var o;le.value=(o=A.currentRoute.value.query.open)!=null?o:""}));function Ke(o){return p(this,null,function*(){if(o==="update")ge();else if(o==="drag-update"){let i=he(fe.value);u.value=i.id,T(!0,{record:i,isUpdate:!0})}else if(o=="delete"){let i=C.id,M=S.value.filter(q=>q.id==i);M&&M.length>0&&Ce(M[0])}else o==="update2"?X.value.openModal(C):o==="note"?ie.value.openNoteModal():o==="buttonLabel"?t.value.openModal(C.addButtonLabel):o==="import"||o==="recycle"?b(o):o==="print_table_temp"?Ie(!1):o==="print_re_table_temp"&&Go.confirm({title:"重新生成打印模板",content:"是否重新生成打印模板，重新生成后模板样式将会重置",okText:"确认",cancelText:"取消",onOk:()=>{Ie(!0)}})})}const we=Y(()=>{var o;return((o=A.currentRoute.value)==null?void 0:o.name)===bo});function ge(){return p(this,null,function*(){we.value&&(yield A.push({name:"myapp-@appId-desform-@code",params:{appId:A.currentRoute.value.params.appId,code:A.currentRoute.value.params.code}}),yield Do(300));let o=he($.value);Xe(o),c(!0,{record:o})})}de("doDesignForm",ge),de("isShareRecordView",we);function Xe(o){const i=[o.id,o.desformCode],M=S.value.find(q=>i.includes(q.menuUrl));u.value=M?M.menuUrl:o.desformCode}function Ye(o){o=="blank"?D(!0,{isUpdate:!1,isListModal:!1,menuGroupId:P.value}):o=="chart"?F(!0,{isUpdate:!1,menuGroupId:P.value}):o=="merge"&&z(!0,{headerColor:K.value})}function Je(o){return p(this,null,function*(){let i=o.desformCode;if(!($.value&&$.value.desformCode==i)){let M=yield Ae({desformCode:i});$.value=ue({},M)}u.value=$.value.id,c(!0,{record:he($.value)}),yield _()})}function Qe(){return p(this,null,function*(){u.value?yield G(u.value):yield G(),u.value=""})}function Ze(o){return p(this,null,function*(){let i=o.result;u.value=i.id,T(!0,{record:i,isUpdate:!0}),yield _()})}function xe(){return p(this,null,function*(){let o=u.value;o&&(yield G(o),u.value="")})}function Ce(o){U(!0,ue({},o))}function eo(o){return p(this,null,function*(){if(S.value.length==1){let i=`/myapp/${V.id}`;yield _(),yield A.replace({path:i})}else if(o==C.id){let i=S.value[0];i.id===o&&(i=S.value[1]),yield _(),yield G(i.menuUrl)}else yield _(),yield G()})}function oo(o){return p(this,null,function*(){let i=`/myapp/${V.id}/redirect`;yield A.push({path:i,query:{redirectPath:o}})})}function to(o){return p(this,null,function*(){if(o)if(typeof o=="string")C.menuName=o;else{C.menuName=o.title,C.type=o.type,C.id=o.id,C.menuNote=o.menuNote,C.addButtonLabel=o.addButtonLabel;let i=o.code;o.type=="drag"?yield ze(i):o.type=="form"?yield ye({id:i}):yield ye({desformCode:i})}})}const no=y(!1);function ao(o){o.preventDefault(),o.stopPropagation();let i="";C.type=="drag"&&(i=fe.value.name),E(!0,{title:i})}function io(){b("exportImage")}rt();const ro=Pe();function Ie(o){let i=A.currentRoute.value.fullPath,M="/jmreport/generateTemplateByDesign";if(i.includes("desform")){let q=i.substring(i.indexOf("desform/")+8);M=M+"?desformCode="+q}else if(i.includes("form")){let q=i.substring(i.indexOf("form/")+5);M=M+"?desformId="+q}M=M+"&token="+$e()+"&regeneration="+o+"&tenantId="+Lo(),window.open(ro.domainUrl+M,"_target")}return{activeMenu:C,prefixCls:e,leftCollapsed:ce,maxHeight:l,headerColor:K,lowAppInfo:V,leftMenuList:S,reloadMenuList:_,hideAppMenu:Ee,hideAppGroup:Ve,hideViewHeader:qe,onAddForm:Ye,onRouteChange:oo,registerModal:g,registerFormDesignerIframeModal:w,onAddFormSuccess:Je,onFormDesignerClose:Qe,onChangeLeftCollapsed:He,appFormInfo:$,onFormTitleChange:to,onFormAction:Ke,registerDragAddModal:v,registerDragPageModal:L,onAddDragSuccess:Ze,onDragPageClose:xe,leftContainer:m,registerDeleteModal:B,onDeleteMenu:Ce,onMenuDeleteSuccess:eo,groupMenuList:J,onActiveGroupChange:Q,activeGroupMenuId:P,onAddGroupSuccess:Z,onAddFirstGroupSuccess:ee,onReloadGroup:x,leftMoveGroupList:oe,moveSuccess:te,onUpdateLocalMenu:ne,onReloadMenu:ae,appFormUpdateRef:X,menuNoteRef:ie,updateLocalMenuNote:me,buttonLabelRef:t,updateLocalButtonLabel:n,topTipVisible:no,noAuth:r,hasAdminAuth:a,appFormOpenStatus:R,onShareDrag:ao,onSaveDragAsImage:io,registerShareModal:k,menuLoading:d,registerMergeTableModal:j}}}),Ne=()=>{co(e=>({"0a1455e0":e.headerColor}))},Ue=Me.setup;Me.setup=Ue?(e,m)=>(Ne(),Ue(e,m)):Ne;const lt=Me;const ut={key:0,class:"router-view-top"},st={class:"collapsed-icon"},pt={class:"app-form-label"},dt=W("div",{class:"flex1"},null,-1),mt={key:0,class:"right-opt-icon"},ct={style:{width:"100px"}};function ft(e,m,l,R,b,g){const D=s("AppGroupMenu"),w=s("EmptyGroupIcon"),c=s("app-header"),h=s("a-skeleton"),v=s("AppMenu"),F=s("a-layout-sider"),L=s("Loading"),T=s("NoAuthPage"),j=s("AppClosePage"),z=s("MaintainingPage"),B=s("EmptyFormPage"),U=s("DoubleRightOutlined"),k=s("DoubleLeftOutlined"),E=s("a-tooltip"),V=s("MenuNote"),K=s("AppFormAction"),S=s("Icon"),J=s("AppFormNameIconUpdateModal"),C=s("AppFormRoute"),P=s("a-layout-content"),G=s("RightChat"),_=s("a-layout"),Q=s("DesformModal"),Z=s("FormDesignerIframeModal"),x=s("drag-add-modal"),ee=s("DragPageModal"),oe=s("MergeTableModal"),te=s("AppFormDeleteModal"),ne=s("ButtonLabelUpdateModal"),ae=s("DragShareModal");return I(),se(ve,null,[f(_,{class:fo(e.prefixCls)},{default:O(()=>[f(c,{info:e.lowAppInfo,noAuth:e.noAuth},go({_:2},[e.hideAppGroup?void 0:{name:"groupMenu",fn:O(()=>[e.groupMenuList.length>0?(I(),N(D,{key:0,appId:e.lowAppInfo.id,groupList:e.groupMenuList,activeId:e.activeGroupMenuId,hasSub:e.leftMenuList.length>0,onActive:e.onActiveGroupChange,onAdded:e.onAddGroupSuccess,onReload:e.onReloadGroup},null,8,["appId","groupList","activeId","hasSub","onActive","onAdded","onReload"])):e.hasAdminAuth?(I(),N(w,{key:1,appId:e.lowAppInfo.id,onAdd:e.onAddFirstGroupSuccess},null,8,["appId","onAdd"])):pe("",!0)]),key:"0"}]),1032,["info","noAuth"]),f(_,null,{default:O(()=>[e.hideAppMenu?pe("",!0):(I(),N(F,{key:0,collapsed:e.leftCollapsed,"onUpdate:collapsed":m[0]||(m[0]=X=>e.leftCollapsed=X),trigger:null,collapsible:"",width:240,inlineIndent:64,theme:"light"},{default:O(()=>[W("div",{class:"left-container",style:ho({height:e.maxHeight+"px","overflow-y":"auto",background:"#fff"})},[e.leftMenuList.length==0?(I(),N(h,{key:0,active:""})):(I(),N(v,{key:1,menus:e.leftMenuList,info:e.lowAppInfo,leftMoveGroupList:e.leftMoveGroupList,hasAdminAuth:e.hasAdminAuth,onAdd:e.onAddForm,onDelete:e.onDeleteMenu,onRouteChange:e.onRouteChange,onUpdateTitle:e.onFormTitleChange,onReload:e.moveSuccess,onCopy:e.reloadMenuList},null,8,["menus","info","leftMoveGroupList","hasAdminAuth","onAdd","onDelete","onRouteChange","onUpdateTitle","onReload","onCopy"]))],4)]),_:1},8,["collapsed"])),f(P,{id:"low_app_page_content",style:{position:"relative"}},{default:O(()=>[f(L,{loading:e.menuLoading,tip:"加载中"},null,8,["loading"]),e.menuLoading?pe("",!0):(I(),se(ve,{key:0},[e.noAuth?(I(),N(T,{key:0})):e.lowAppInfo.openStatus==0?(I(),N(j,{key:1})):e.lowAppInfo.maintStatus==1&&e.hasAdminAuth==!1?(I(),N(z,{key:2,note:e.lowAppInfo.maintNote},null,8,["note"])):e.leftMenuList.length==0?(I(),N(B,{key:3,content:["该分组下暂无菜单！"],hasAdminAuth:e.hasAdminAuth,onAdd:e.onAddForm},null,8,["hasAdminAuth","onAdd"])):(I(),se(ve,{key:4},[!e.hideViewHeader&&e.leftMenuList.length>0?(I(),se("div",ut,[W("div",st,[f(E,{title:e.leftCollapsed?"展开侧边栏":"隐藏侧边栏",placement:"bottom"},{default:O(()=>[e.leftCollapsed?(I(),N(U,{key:0,onClick:e.onChangeLeftCollapsed},null,8,["onClick"])):(I(),N(k,{key:1,onClick:e.onChangeLeftCollapsed},null,8,["onClick"]))]),_:1},8,["title"])]),W("div",pt,vo(e.activeMenu.menuName),1),W("div",null,[f(V,{ref:"menuNoteRef",hasAdminAuth:e.hasAdminAuth,menu:e.activeMenu,onSave:e.updateLocalMenuNote},null,8,["hasAdminAuth","menu","onSave"])]),W("div",null,[f(K,{"menu-type":e.activeMenu.type,onAction:e.onFormAction},null,8,["menu-type","onAction"])]),dt,e.activeMenu.type=="drag"?(I(),se("div",mt,[f(E,{title:"分享",placement:"bottom"},{default:O(()=>[f(S,{icon:"ant-design:share-alt-outlined",class:"icon-item",size:20,onClick:e.onShareDrag},null,8,["onClick"])]),_:1}),f(E,{title:"保存图片",placement:"bottom"},{default:O(()=>[f(S,{icon:"ant-design:download-outlined",class:"icon-item",size:20,onClick:e.onSaveDragAsImage},null,8,["onClick"])]),_:1})])):pe("",!0)])):pe("",!0),W("div",ct,[f(J,{ref:"appFormUpdateRef",activeMenuId:e.activeMenu.id,onUpdate:e.onUpdateLocalMenu,onDbUpdate:e.onReloadMenu},null,8,["activeMenuId","onUpdate","onDbUpdate"])]),f(C,{open:e.appFormOpenStatus,activeMenu:e.activeMenu,appName:e.lowAppInfo.appName},null,8,["open","activeMenu","appName"])],64))],64))]),_:1}),f(G)]),_:1})]),_:1},8,["class"]),f(Q,{onRegister:e.registerModal,onSuccess:e.onAddFormSuccess},null,8,["onRegister","onSuccess"]),f(Z,{onRegister:e.registerFormDesignerIframeModal,onClose:e.onFormDesignerClose,onReloadMenu:e.reloadMenuList},null,8,["onRegister","onClose","onReloadMenu"]),f(x,{onRegister:e.registerDragAddModal,onSuccess:e.onAddDragSuccess},null,8,["onRegister","onSuccess"]),f(ee,{onRegister:e.registerDragPageModal,onClose:e.onDragPageClose,lowAppId:e.lowAppInfo.id},null,8,["onRegister","onClose","lowAppId"]),f(oe,{onRegister:e.registerMergeTableModal,lowAppId:e.lowAppInfo.id},null,8,["onRegister","lowAppId"]),f(te,{onRegister:e.registerDeleteModal,onSuccess:e.onMenuDeleteSuccess},null,8,["onRegister","onSuccess"]),f(ne,{ref:"buttonLabelRef",menuId:e.activeMenu.id,onSave:e.updateLocalButtonLabel},null,8,["menuId","onSave"]),f(ae,{onRegister:e.registerShareModal},null,8,["onRegister"])],64)}const Ea=So(lt,[["render",ft]]);export{Ea as default};

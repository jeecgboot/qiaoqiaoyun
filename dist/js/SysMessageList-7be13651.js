import{cn as A,av as O,cy as P,cz as V,cA as N,cB as j,bx as K}from"./antd-vue-vendor-0d72f01e.js";import{a as U,u as G}from"./useSysMessage-3c166e50.js";import{g as W,a as q}from"./useComment-c2ce47e3.js";import{a3 as me,a4 as ue,V as l,a6 as a,a7 as i,F as _,k as s,ai as o,E as J,W as f,a5 as g,ak as k,af as d,az as Q,al as X,ag as Y}from"./vue-vendor-24c7dc61.js";import{l as Z}from"./index-831af9dd.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./index-d508f1f4.js";import"./index-4b5608cc.js";import"./vxe-table-vendor-8813019a.js";const $={name:"SysMessageList",components:{FilterOutlined:A,CloseOutlined:O,BellFilled:P,ExclamationOutlined:V,MailOutlined:N,InteractionOutlined:j,AlertOutlined:K},props:{star:{type:Boolean,default:!1},isLowApp:{type:Boolean,default:!1}},emits:["close","detail"],setup(b,{emit:x}){const{messageList:S,loadEndStatus:e,loadingMoreStatus:F,onLoadMore:H,noRead:h,getMsgCategory:M,getHrefText:m,searchParams:n,reset:c,loadData:u,updateStarMessage:p}=U();function y(r){let{fromUser:B,rangeDateKey:E,rangeDate:I}=r;n.fromUser=B||"",n.rangeDateKey=E||"",n.rangeDate=I||[],b.star===!0?n.starFlag="1":n.starFlag="",c(),u()}function v(r){p(r),r.starFlag=="1"?r.starFlag="0":r.starFlag="1"}const{goPage:C,currentModal:T,modalRegCache:t,bindParams:L,isDesignFormComment:z}=G(x,b),D=W(),{getHtml:R}=q(D);function w(r){r.readFlag="1",C(r),x("close",r.id)}return{messageList:S,loadEndStatus:e,loadingMoreStatus:F,onLoadMore:H,noRead:h,getMsgCategory:M,getHrefText:m,reload:y,clickStar:v,showMessageDetail:w,isDesignFormComment:z,getHtml:R,modalRegCache:t,currentModal:T,bindParams:L}}};const ee={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},te={key:1,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},ae={key:0,style:{background:"#f7f7f7",color:"#555",padding:"2px 5px","white-space":"nowrap",overflow:"hidden"}},oe=["innerHTML"],se={style:{position:"relative"}},ne=["innerHTML"],le={key:1},re=["onClick"];function ie(b,x,S,e,F,H){const h=l("a-button"),M=l("a-rate"),m=l("mail-outlined"),n=l("a-avatar"),c=l("a-badge"),u=l("interaction-outlined"),p=l("alert-outlined"),y=l("bell-filled"),v=l("a-list-item-meta"),C=l("a-list-item"),T=l("a-list");return a(),i(_,null,[s(T,{"item-layout":"horizontal","data-source":e.messageList},{loadMore:o(()=>[e.messageList&&e.messageList.length>0&&!e.loadEndStatus&&!e.loadingMoreStatus?(a(),i("div",ee,[s(h,{onClick:e.onLoadMore},{default:o(()=>[J("加载更多")]),_:1},8,["onClick"])])):f("",!0),e.messageList&&e.messageList.length>0&&e.loadEndStatus?(a(),i("div",te," 没有更多了 ")):f("",!0)]),renderItem:o(({item:t})=>[s(C,null,{actions:o(()=>[s(M,{value:t.starFlag=="1"?1:0,count:1,onClick:L=>e.clickStar(t),style:{cursor:"pointer"},disabled:""},null,8,["value","onClick"])]),default:o(()=>[s(v,null,{description:o(()=>[e.isDesignFormComment(t)?(a(),i("div",ae,[g("div",{innerHTML:e.getHtml(t.msgContent)},null,8,oe)])):f("",!0),g("div",null,k(t.createTime),1)]),title:o(()=>[g("div",se,[g("span",null,k(e.getMsgCategory(t)),1),t.busType=="bpm"||t.busType=="bpm_cc"||t.busType=="msg_node"||t.busType=="bpm_msg_node"?(a(),i("span",{key:0,class:"bpm-cuiban-content",innerHTML:t.msgContent},null,8,ne)):(a(),i("span",le,k(t.titile),1)),g("a",{onClick:L=>e.showMessageDetail(t),style:{"margin-left":"16px"}},k(e.getHrefText(t)),9,re)])]),avatar:o(()=>[t.busType=="email"?(a(),i(_,{key:0},[e.noRead(t)?(a(),d(c,{key:0,dot:"",class:"msg-no-read"},{default:o(()=>[s(n,{style:{background:"#79919d"}},{default:o(()=>[s(m,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(a(),d(n,{key:1,style:{background:"#79919d"}},{default:o(()=>[s(m,{style:{"font-size":"16px"}})]),_:1}))],64)):t.busType=="bpm_task"?(a(),i(_,{key:1},[e.noRead(t)?(a(),d(c,{key:0,dot:"",class:"msg-no-read"},{default:o(()=>[s(n,{style:{background:"#79919d"}},{default:o(()=>[s(u,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(a(),d(n,{key:1,style:{background:"#79919d"}},{default:o(()=>[s(u,{style:{"font-size":"16px"}})]),_:1}))],64)):t.busType=="bpm"?(a(),i(_,{key:2},[e.noRead(t)?(a(),d(c,{key:0,dot:"",class:"msg-no-read"},{default:o(()=>[s(n,{style:{background:"#79919d"}},{default:o(()=>[s(p,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(a(),d(n,{key:1,style:{background:"#79919d"}},{default:o(()=>[s(p,{style:{"font-size":"16px"}})]),_:1}))],64)):(a(),i(_,{key:3},[e.noRead(t)?(a(),d(c,{key:0,dot:"",class:"msg-no-read"},{default:o(()=>[s(n,{style:{background:"#79919d"}},{default:o(()=>[s(y,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(a(),d(n,{key:1,style:{background:"#79919d"}},{default:o(()=>[s(y,{style:{"font-size":"16px"}})]),_:1}))],64))]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"]),(a(),d(Q,null,[e.currentModal?(a(),d(X(e.currentModal),Y({key:0},e.bindParams,{key:e.currentModal,onRegister:e.modalRegCache[e.currentModal].register}),null,16,["onRegister"])):f("",!0)],1024))],64)}const Me=Z($,[["render",ie],["__scopeId","data-v-abe32d86"]]);export{Me as default};

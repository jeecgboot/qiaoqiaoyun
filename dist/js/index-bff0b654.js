var g=(o,p,t)=>new Promise((m,r)=>{var s=e=>{try{n(t.next(e))}catch(i){r(i)}},u=e=>{try{n(t.throw(e))}catch(i){r(i)}},n=e=>e.done?m(e.value):Promise.resolve(e.value).then(s,u);n((t=t.apply(o,p)).next())});import{U as l,_ as T}from"./JUpload-76e119c7.js";import{d as v,f as k,r as M,e as _,u as f,n as w,a6 as B,af as R,ag as h,ai as x,k as C}from"./vue-vendor-24c7dc61.js";import{B as O}from"./index-1c3affea.js";import{H as c,a as U,j as V}from"./index-831af9dd.js";const H=v({__name:"JUploadModal",props:{value:c.oneOfType([c.string,c.array]),width:c.number.def(520)},emits:["change","update:value","register"],setup(o,{emit:p}){const t=o,{createMessage:m}=U(),r=k(),s=M({props:{}}),u=_(()=>{var a;return((a=s.props)==null?void 0:a.fileType)===l.image?"图片上传":"文件上传"}),[n,{closeModal:e}]=V(a=>g(this,null,function*(){var d;s.props=f(a)||{},[l.image,"img","picture"].includes((d=s.props)==null?void 0:d.fileType)?s.props.fileType=l.image:s.props.fileType=l.file,w(()=>r.value.addActionsListener())}));function i(){e()}function y(a){p("change",a),p("update:value",a)}return(a,d)=>(B(),R(f(O),h({onRegister:f(n),title:u.value,width:o.width,onOk:i},a.$attrs),{default:x(()=>[C(T,h({ref_key:"uploadRef",ref:r,value:o.value},s.props,{onChange:y}),null,16,["value"])]),_:1},16,["onRegister","title","width"]))}});export{H as _};

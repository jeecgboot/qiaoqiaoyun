var g=(o,t,d)=>new Promise((c,u)=>{var p=s=>{try{l(d.next(s))}catch(a){u(a)}},i=s=>{try{l(d.throw(s))}catch(a){u(a)}},l=s=>s.done?c(s.value):Promise.resolve(s.value).then(p,i);l((d=d.apply(o,t)).next())});import{d as T,f as S,a5 as r,V as m,a6 as F,af as w,ai as I,k as f}from"./vue-vendor-24c7dc61.js";import{B as O}from"./index-1c3affea.js";import{aG as b}from"./antd-vue-vendor-0d72f01e.js";import{a7 as D,e as v,j as $,l as N}from"./index-831af9dd.js";import{U as V}from"./UserSelectModal-d78c1490.js";import L from"./TaskAddSignReasonModal-a13ee4d2.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./vxe-table-vendor-8813019a.js";const j=T({name:"TaskAddSignModal",components:{BasicModal:O,RightOutlined:b,UserSelectModal:V,TaskAddSignReasonModal:L},emits:["register","success"],setup(o,{emit:t}){const d=D(),[c,{openModal:u,closeModal:p}]=v(),[i,{openModal:l,closeModal:s}]=v(),a=S(""),n=S(""),[A,{closeModal:B}]=$(e=>g(this,null,function*(){n.value="",a.value=e.taskId}));function M(e){e.preventDefault(),e.stopPropagation()}function _(){let e=d.getUserInfo.id;u(!0,{list:[],excludeUserIdList:[e]})}function R(e){M(e),n.value="before",_()}function U(e){M(e),n.value="after",_()}function h(e){return g(this,null,function*(){if(e&&e.length>0){let E=e.map(k=>({username:k.username,realname:k.realname}));p(),l(!0,{taskId:a.value,userList:E,addSignType:n.value})}})}function y(){return document.querySelector(".low-app-task-add-sign-modal")}function C(){s(),t("success"),B()}return{registerModal:A,addAfter:U,addBefore:R,registerUserModal:c,onSelectedUserOk:h,getContainer:y,registerReasonModal:i,taskOk:C}}});const q={style:{width:"100%"}},G=r("div",{class:"label"}," 在我审批前增加一位审批人 ",-1),H={class:"icon"},P=r("div",{class:"label"}," 通过申请后增加一位审批人 ",-1),z={class:"icon"};function J(o,t,d,c,u,p){const i=m("right-outlined"),l=m("UserSelectModal"),s=m("TaskAddSignReasonModal"),a=m("BasicModal");return F(),w(a,{onRegister:o.registerModal,title:"选择加签方式",canFullscreen:!1,footer:null,minHeight:100,bodyStyle:{height:"160px"},width:480,destroyOnClose:"",wrapClassName:"low-app-task-add-sign-modal"},{default:I(()=>[r("div",q,[r("div",{class:"add-sign-item",onClick:t[0]||(t[0]=(...n)=>o.addBefore&&o.addBefore(...n))},[G,r("div",H,[f(i)])]),r("div",{class:"add-sign-item",style:{"margin-top":"20px"},onClick:t[1]||(t[1]=(...n)=>o.addAfter&&o.addAfter(...n))},[P,r("div",z,[f(i)])])]),f(l,{multi:!1,onRegister:o.registerUserModal,onSelected:o.onSelectedUserOk},null,8,["onRegister","onSelected"]),f(s,{onRegister:o.registerReasonModal,onSuccess:o.taskOk},null,8,["onRegister","onSuccess"])]),_:1},8,["onRegister"])}const te=N(j,[["render",J]]);export{te as default};

var x=Object.defineProperty,N=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var b=(e,t,o)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,a=(e,t)=>{for(var o in t||(t={}))$.call(t,o)&&b(e,o,t[o]);if(B)for(var o of B(t))J.call(t,o)&&b(e,o,t[o]);return e},w=(e,t)=>N(e,U(t));var f=(e,t,o)=>new Promise((d,n)=>{var l=r=>{try{i(o.next(r))}catch(u){n(u)}},c=r=>{try{i(o.throw(r))}catch(u){n(u)}},i=r=>r.done?d(r.value):Promise.resolve(r.value).then(l,c);i((o=o.apply(e,t)).next())});import{u as m,d as L,f as g,e as C,V as _,a6 as V,af as z,ap as H,aq as G,ai as M,k as I}from"./vue-vendor-24c7dc61.js";import{h as A}from"./antd-vue-vendor-0d72f01e.js";import{k as p,H as F,q as E,j as K,l as Q}from"./index-831af9dd.js";import"./index-52c8c841.js";import{B as W}from"./index-1c3affea.js";import{B as X,u as Y}from"./useForm-14b2bc77.js";const Z={list:(e,t)=>p.get({url:"/desform/route/list",params:a({desformCode:e},t)}),delete:e=>Z.batchDelete([e]),batchDelete(e){return p.delete({url:"/desform/route/deleteBatch",params:{ids:e.join(",")}},{joinParamsToUrl:!0})}},ee={saveOrUpdate(e,t,o){return m(t)?p.put({url:"/desform/route/edit",params:e},a({},o)):p.post({url:"/desform/route/add",params:e},a({},o))}},me=[{title:"启用",key:"switch",width:60,slots:{customRender:"switch"}},{title:"路由名称",dataIndex:"routeName"},{title:"跳转类型",dataIndex:"routeType_dictText"},{title:"路由地址",dataIndex:"routePath",ellipsis:!0}],pe=[{label:"路由名称",field:"routeName",component:"JInput"},{label:"跳转类型",field:"routeType",component:"JDictSelectTag",componentProps:{dictCode:"desform_route_type"}}],te=[{label:"路由名称",field:"routeName",component:"Input",required:!0},{label:"跳转类型",field:"routeType",component:"JDictSelectTag",componentProps:{dictCode:"desform_route_type",getPopupContainer:()=>document.body},required:!0},{label:"路由地址",field:"routePath",component:"Input",required:!0}],oe=L({name:"RouteModal",components:{BasicForm:X,BasicModal:W},props:{desformId:F.string,desformCode:F.string},emits:["register","success"],setup(e,{emit:t}){const o=E(),d=g(!1),n=g(),l=g(!1),c=C(()=>l.value?"编辑":"新增"),[i,{closeModal:r,setModalProps:u}]=K(D),[R,{resetFields:T,setFieldsValue:S,validate:j}]=Y({schemas:te,showActionButtonGroup:!1}),k=C(()=>{let s={width:800,title:m(c),confirmLoading:m(d)};return w(a(a(a({},m(o)),s),e),{onOk:q,onCancel:h,onRegister:i})});function D(s){l.value=!!m(s==null?void 0:s.isUpdate),l.value?v(s==null?void 0:s.record):O()}function h(){r()}function O(){v({})}function v(s){return f(this,null,function*(){yield T(),n.value=A(s),yield S(a({},n.value))})}function q(){return f(this,null,function*(){try{let s=yield j(),y=Object.assign({},n.value,s,{desformId:e.desformId,desformCode:e.desformCode});P(!0),yield ee.saveOrUpdate(y,l.value),h(),t("success")}finally{P(!1)}})}function P(s){d.value=s,u({confirmLoading:s})}return{registerForm:R,getProps:k,loading:d}}});function se(e,t,o,d,n,l){const c=_("BasicForm"),i=_("a-spin"),r=_("BasicModal");return V(),z(r,H(G(e.getProps)),{default:M(()=>[I(i,{wrapperClassName:"p-2",spinning:e.loading},{default:M(()=>[I(c,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},8,["spinning"])]),_:1},16)}const re=Q(oe,[["render",se]]),fe=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{re as R,fe as a,me as c,ee as f,Z as p,pe as s};

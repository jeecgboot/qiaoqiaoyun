import{f as l,w as v,e as p,V as _,a6 as h,a7 as y,a8 as k,q as T,a5 as s,at as V,au as F,k as B,ai as M,E as R,W as A}from"./vue-vendor-24c7dc61.js";import{a as D,l as L}from"./index-831af9dd.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";const N={name:"TemplateComment",props:{inputFocus:{type:Boolean,default:!1},commentObj:{type:Object,default:()=>{}}},emits:["cancel","comment"],setup(c,{emit:n}){const{createMessage:d}=D(),e=l(!1),a=l(""),r=l(0),m=l(!1),i=l();function o(){let t=a.value,C=r.value;if(!t){d.warn("请写下您的评价！");return}if(!C){d.warn("打个评分吧！");return}!t&&t!=="0"?u.value=!0:(e.value=!0,n("comment",t,C),setTimeout(()=>{e.value=!1},350))}const u=l(!1);v(a,()=>{let t=a.value;!t&&t!=="0"?u.value=!0:u.value=!1}),v(()=>c.commentObj,t=>{t!=null&&t.comment&&(a.value=t.comment,r.value=t.rate)},{deep:!0,immediate:!0}),v(()=>c.inputFocus,()=>{m.value=!1},{deep:!0,immediate:!0});function w(t){t.preventDefault(),t.stopPropagation(),m.value=!0}const b=p(()=>{let t=a.value;return t||"请输入你的评论"}),f=l(!1);function g(t){t.preventDefault(),t.stopPropagation(),f.value=!1,i.value.focus(),m.value=!0}function x(){f.value=!0}const H=p(()=>!(a.value.length>0));return{myRate:r,myComment:a,sendComment:o,disabledButton:u,buttonLoading:e,commentRef:i,handleClickBlank:w,commentHtml:b,showHtml:f,handleClickHtmlShower:g,handleBlur:x,commentActive:m,noConent:H}}};const j=["innerHTML"],O={class:"comment-buttons"},S={style:{cursor:"pointer"}},E={title:"评分",style:{display:"inline-block"}},K={key:0};function P(c,n,d,e,a,r){const m=_("a-rate"),i=_("a-button");return h(),y("div",{class:k({"comment-active":e.commentActive}),style:{border:"1px solid #eee",margin:"0",position:"relative"},onClick:n[5]||(n[5]=(...o)=>e.handleClickBlank&&e.handleClickBlank(...o))},[T(s("textarea",{ref:"commentRef","onUpdate:modelValue":n[0]||(n[0]=o=>e.myComment=o),onKeyup:n[1]||(n[1]=V((...o)=>e.sendComment&&e.sendComment(...o),["enter"])),onBlur:n[2]||(n[2]=(...o)=>e.handleBlur&&e.handleBlur(...o)),class:"comment-content","show-count":"",rows:3,maxlength:100,placeholder:"请输入你的评论"},null,544),[[F,e.myComment]]),s("div",{class:k(["comment-content comment-html-shower",{"no-content":e.noConent,"top-div":e.showHtml,"bottom-div":e.showHtml==!1}]),innerHTML:e.commentHtml,onClick:n[3]||(n[3]=(...o)=>e.handleClickHtmlShower&&e.handleClickHtmlShower(...o))},null,10,j),s("div",O,[s("div",S,[s("span",E,[B(m,{value:e.myRate,"onUpdate:value":n[4]||(n[4]=o=>e.myRate=o)},null,8,["value"])])]),e.commentActive?(h(),y("div",K,[B(i,{type:"primary",onClick:e.sendComment,loading:e.buttonLoading,disabled:e.disabledButton},{default:M(()=>[R("发 送")]),_:1},8,["onClick","loading","disabled"])])):A("",!0)])],2)}const G=L(N,[["render",P]]);export{G as default};

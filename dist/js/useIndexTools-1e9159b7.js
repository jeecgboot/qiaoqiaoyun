var w=Object.defineProperty,F=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var g=(t,o,e)=>o in t?w(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,i=(t,o)=>{for(var e in o||(o={}))x.call(o,e)&&g(t,e,o[e]);if(v)for(var e of v(o))M.call(o,e)&&g(t,e,o[e]);return t},y=(t,o)=>F(t,q(o));var C=(t,o,e)=>new Promise((c,s)=>{var d=n=>{try{a(e.next(n))}catch(u){s(u)}},m=n=>{try{a(e.throw(n))}catch(u){s(u)}},a=n=>n.done?c(n.value):Promise.resolve(n.value).then(d,m);a((e=e.apply(t,o)).next())});import{f as _,e as $}from"./vue-vendor-24c7dc61.js";import{a as k}from"./index-831af9dd.js";import"./index-52c8c841.js";import{u as K}from"./useForm-14b2bc77.js";const B={actions:{input:[{label:"将数值转为字符串",value:"num2str"},{label:"将字符串转为数字",value:"str2num"}],number:[{label:"将字符串转为数字",value:"str2num"}],date:[{label:"去除时间部分",value:"remove_time"},{label:"增加时间部分",value:"add_time"}]},tips:{input:{num2str:"",str2num:"数据中不能包含非数字的字符，否者将会拒绝执行该操作！"},number:{str2num:"数据中不能包含非数字的字符，否者将会拒绝执行该操作！"},date:{remove_time:"例如：处理前 2020-06-01 15:38:23；处理后 2020-06-01",add_time:"例如：处理前 2020-06-01；处理后 2020-06-01 00:00:00"}},formSchemas:[{label:"组件类型",field:"widgetType",component:"Select",componentProps:{options:[{label:"单行文本",value:"input"},{label:"计数器",value:"number"},{label:"日期选择器",value:"date"}],getPopupContainer:()=>document.body},required:!0},{label:"选择操作",field:"action",component:"Select",componentProps:{options:[],notFoundContent:"暂无操作",getPopupContainer:()=>document.body,placeholder:"请选择操作"},required:!0},{label:"选择操作的组件",field:"model",component:"Select",componentProps:{showSearch:!0,notFoundContent:"暂无操作",options:[],getPopupContainer:()=>document.body,placeholder:"请选择要操作的组件"},required:!0}]},D={formSchemas:[{label:"旧model",field:"oldKey",component:"Input",required:!0},{label:"新model",field:"newKey",component:"Select",componentProps:{options:[],notFoundContent:"暂无操作",getPopupContainer:()=>document.body},dynamicRules({model:t}){return[{required:!0,message:"请选择新model"},{validator(o,e){return t.oldKey===e?Promise.reject("新model不能和旧model相同"):Promise.resolve()}}]}}]};function E(t,{emit:o},e,c){const{createConfirm:s,createErrorModal:d}=k(),m=_(),a=$(()=>{var r;return(r=m.value)==null?void 0:r.formModel}),n=K(i({showActionButtonGroup:!1},e)),[,{resetFields:u,validate:P}]=n;function h(r,f){return r.filter(l=>f?l.type===f:!0).map(l=>({label:`${l.model}（${l.name}）`,value:l.model}))}function S(f){return C(this,arguments,function*({close:r}){try{const l=yield P();p(!0);let{success:T,message:b}=yield c(y(i({},l),{desformCode:t.desformCode}));T?s({content:b,okText:"继续操作",iconType:"success",cancelText:"关闭",onOk:()=>u(),onCancel:()=>r(!0)}):d({content:b})}finally{p(!1)}})}function p(r){o("update:loading",r)}return{useFormRes:n,formRef:m,formModel:a,execute:S,packageWidgetOptions:h}}export{D as a,B as c,E as u};

var Bt=Object.defineProperty,Ut=Object.defineProperties;var Rt=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var Tt=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var Oe=(t,n,p)=>n in t?Bt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:p}):t[n]=p,W=(t,n)=>{for(var p in n||(n={}))Tt.call(n,p)&&Oe(t,p,n[p]);if(Me)for(var p of Me(n))Mt.call(n,p)&&Oe(t,p,n[p]);return t},Pe=(t,n)=>Ut(t,Rt(n));var c=(t,n,p)=>new Promise((C,y)=>{var S=u=>{try{U(p.next(u))}catch(F){y(F)}},_=u=>{try{U(p.throw(u))}catch(F){y(F)}},U=u=>u.done?C(u.value):Promise.resolve(u.value).then(S,_);U((p=p.apply(t,n)).next())});import{d as Ot,f,r as Y,c as Pt,w as Lt,e as Nt,n as pe,u as P,I as Le,a3 as Kt,a4 as $t,a5 as a,V as d,a6 as D,a7 as B,F as ce,k as l,ai as i,ak as E,am as Ne,W as z,a8 as Ke,E as A,z as fe,af as me}from"./vue-vendor-24c7dc61.js";import{e as Z,a7 as zt,a as Ht,ap as Vt,L as jt,l as Qt}from"./index-831af9dd.js";import{h as Jt}from"./header-55b09394.js";import{l as Xt,T as qt}from"./componentMap-c857637c.js";import{q as he,a as Gt,d as Wt,c as Yt,g as Zt,b as xt}from"./depart.api-339f4da6.js";import ea from"./JSelectUserByDept-bd619076.js";import"./index-621e597c.js";import{u as ta}from"./useListPage-62a041ef.js";import{b as aa,e as ge,s as na,f as sa,h as oa,i as la,j as ia,k as ra,l as ua}from"./organization.api-98a6e46c.js";import{u as ve,a as da}from"./organization.data-23f4609c.js";import pa from"./OrganUserDrawer-1dd70577.js";import ca from"./OrganUserBathEdit-71eca43b.js";import{u as fa}from"./index-44229d9b.js";import{B as ma}from"./index-1c3affea.js";import"./index-52c8c841.js";import{J as ha}from"./JDictSelectTag-54dc3bdb.js";import{J as ga,D as va}from"./JSelectDept-a90caee3.js";import Ca from"./UserQuitAgentModal-ed48508d.js";import ya from"./OrganInvitationUserModal-240d8c8b.js";import{U as Da}from"./index-4d0525a5.js";import{aP as _a,aA as wa,M as $e}from"./antd-vue-vendor-0d72f01e.js";import{u as ka}from"./useMethods-f689b480.js";import Ea from"./BasicTable-d435f501.js";import{B as Fa}from"./useForm-14b2bc77.js";import"./vxe-table-vendor-8813019a.js";import"./useFormItem-86503382.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./JCheckbox-0b89d32a.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./UserSelectModal-d78c1490.js";import"./UserSelectByDepModal-db060ece.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./renderUtils-7ad8f436.js";import"./index-b845562c.js";import"./validator-bc7dc032.js";import"./user.api-ffaaa05b.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./user.data-965c1456.js";import"./helper-22dafba0.js";const ba="/assets/personCharge-e61048c2.png",Ia=Ot({name:"OrganDepartForm",components:{JTreeSelect:Xt,JSelectUserByDept:ea,BasicTable:Ea,TableAction:qt,OrganUserDrawer:pa,OrganUserBathEdit:ca,BasicModal:ma,BasicForm:Fa,JDictSelectTag:ha,JSelectDept:ga,UserSelect:Da,UserOutlined:_a,MoreOutlined:wa,UserQuitAgentModal:Ca,OrganInvitationUserModal:ya,DeptSelectModal:va},setup(){const{createMessage:t}=Ht(),n=f(""),p=f({userList:[],departList:[]}),C=f({}),y=f("all"),S=f(!1),_=f("全组织"),U=f(2),u=f([]),F=f(!1),w=f([]),b=f([]),$=f(!1),T=f(!1),[x,{openModal:j}]=Z(),M=Y({departName:"",parentId:""}),{handleExportXls:H,handleImportXls:ee}=ka(),k=Y({departId:"",departName:"",parentId:"",chargePerson:[],hasSub:""}),{prefixCls:Ce,onExportXls:ye,onImportXls:te,tableContext:ae}=ta({tableProps:{api:ge,beforeFetch(e){h.userId&&(e.id=h.userId),h.departId&&(e.departId=h.departId);let s=C.value;s&&s.id&&(e.departId=s.id),P(y)==="approval"?(e.userTenantStatus="3,4",e.type="createBy"):e.userTenantStatus="1"},columns:ve,bordered:!1,formConfig:{showActionButtonGroup:!1}},importConfig:{url:"/sys/user/importAppUser",success:Te}}),[ne,{reload:g,setSelectedRowKeys:Q,getPaginationRef:se,setProps:o,setColumns:m},{rowSelection:J,selectedRowKeys:oe}]=ae,[ze,{openDrawer:le}]=fa(),[He,{openModal:Ve}]=Z(),[je,{openModal:Qe}]=Z(),De=f(0),[Je,{openModal:Xe}]=Z(),_e=f([]),qe=f({label:"realname",value:"id"});function Ge(){return c(this,null,function*(){let e=n.value;if(e){e=e.trim();const s=yield na(e);let r=[],v=[];if(s.userList&&s.userList.length>0)for(let I of s.userList)r.push(W({},I));if(s.departList&&s.departList.length>0)for(let I of s.departList){let V=I.orgName,K="";V&&V.length>0&&(K=V.join("-")),v.push(Pe(W({},I),{departName:K}))}p.value={userList:r,departList:v},S.value=!0}else S.value=!1,h.departId&&O(),h.userId="",h.departId="",h.showRightTitle=!0,X("all")})}function We(){P(n)&&(S.value=!0)}function X(e){pe(()=>{e==="approval"?(o({api:sa}),m(da)):(o({api:ge}),m(ve)),y.value=e,w.value=[],_.value="全组织",C.value={},g()})}function Ye(){try{return se().total||""}catch(e){return""}}function Ze(e){return e?Vt(e):Jt}const ie=f(!1),q=f(""),we=f("");function xe(e){we.value=e.id,q.value="",ie.value=!0}function et(){return c(this,null,function*(){if(!P(q)){t.warning("请输入密码! ");return}yield oa({id:we.value,password:q.value},tt)})}function tt(){g(),ie.value=!1}const h=Y({departId:"",userId:"",showRightTitle:!0});function at(e){S.value=!1,y.value="",w.value=[],C.value={},h.userId=e.id,h.departId="",h.showRightTitle=!1,g()}function nt(e){S.value=!1,y.value="",C.value={},h.userId="",h.departId=e.id,h.showRightTitle=!0,st(e.orgId),g()}function ke(e,s){let r=s[0].id,v=e.filter(I=>I.parentId==r);v&&v.length>0&&(s[0].chidlren=v,ke(e,v))}function st(e){return c(this,null,function*(){if(b.value=[],w.value=[],!e||e.length==0)return;let s={ids:e.join(",")};const r=yield he(s);if(!r||r.length==0)return;let v=e[0],I=r.filter(K=>K.id==v);if(e.length>1){ke(r,I);let K=[];for(let de=0;de<e.length-1;de++)K.push(e[de]);b.value=K}let V=e[e.length-1];w.value=[V],u.value=[],u.value=[...I],N()})}function ot(){}function lt({key:e}){e==="export"&&H("部门导出",la)}const L=Pt("myTenantInfo",Y({}));Lt(L,e=>c(this,null,function*(){e&&e.id&&(yield O(),yield g(),yield G())}),{immediate:!0,deep:!0});const it=Nt(()=>{let e={};return L&&L.id&&(e.tenant_id=L.id),JSON.stringify(e)});function O(){return c(this,null,function*(){const e=yield he();Array.isArray(e)&&(u.value=e),b.value.length===0&&Ee()})}function rt(e){return c(this,null,function*(){try{const s=yield he({pid:e.dataRef.id});if(s.length==0)e.dataRef.isLeaf=!0;else if(e.dataRef.children=s,b.value.length>0){let r=[];for(let v of b.value)s.findIndex(I=>I.id===v)!==-1&&r.push(v);r.length>0&&(b.value=[...b.value])}u.value=[...u.value]}catch(s){}return Promise.resolve()})}function Ee(){let e=u.value[0];e&&(e.isLeaf||(b.value=[e.key]),N())}function N(){return c(this,null,function*(){yield pe(),F.value=!0,yield pe(),F.value=!1})}function ut(e,s){y.value="",e.length>0&&w.value[0]!==e[0]?Fe(e[0],s.selectedNodes[0]):Fe(w.value[0],s.selectedNodes[0]),g()}function Fe(e,s){w.value=[e],s&&(o({api:ge}),m(ve),C.value=s,_.value=s.title)}function dt({key:e}){e=="0"?be():Ie()}function be(){$.value=!0,M.departName="",M.parentId=""}function Ie(){T.value=!0}function pt(){return c(this,null,function*(){let e=Le(M);yield Gt(e,!1),yield O(),yield N(),$.value=!1})}function Ae(e){return c(this,null,function*(){yield Wt(e),T.value=!1,yield O(),yield N(),X(P(y))})}function ct(e){return[{label:"编辑",onClick:re.bind(null,e)}]}function ft(e){let s;return P(y)==="approval"?e.status==="3"?s=[{label:"拒绝",onClick:wt.bind(null,e)},{label:"审批",onClick:Be.bind(null,e)}]:e.status==="4"&&(s=[{label:"重新审核",onClick:Be.bind(null,e)}]):(s=[{label:"编辑",onClick:re.bind(null,e)}],e.username!==L.createBy&&s.push({label:"离职",onClick:Ue.bind(null,e)})),C.value&&C.value.id&&(Re(e)===!0?s.push({label:"取消部门负责人",onClick:Se.bind(null,e,!1)}):s.push({label:"设为部门负责人",onClick:Se.bind(null,e,!0)})),ue.getUserInfo.username===L.createBy&&e.username!==L.createBy&&s.unshift({label:"删除",onClick:xe.bind(null,e)}),s}function Se(e,s){return c(this,null,function*(){let r=C.value.id;yield Yt({status:s,departId:r,userId:e.id}),yield g()})}function re(e){le(!0,{isUpdate:!0,record:e,status:"1"})}function Be(e){le(!0,{isUpdate:!0,record:e,status:e.status})}function Ue(e){j(!0,{userName:e.username,userId:e.id})}function mt(){let e=ht();le(!0,{isUpdate:!1,leftSelectedDepartId:e})}function ht(){let e=C.value;return e&&e.id?e.id:h.departId?h.departId:""}function gt(){Ve(!0,{userIds:P(oe)})}function vt(){Q([]),g()}function Ct(){setTimeout(()=>{S.value=!1},1e3)}function yt(e,s){let r=e.key;r=="sub"?(M.parentId=s,M.departName="",$.value=!0):r=="edit"?Dt(s):r=="delete"&&$e.confirm({title:"删除部门",content:"确定要删除部门",type:"warning",okText:"确认",cancelText:"取消",onOk:()=>c(this,null,function*(){yield Ae(s)})})}function Dt(e){return c(this,null,function*(){const s=yield ia({departId:e});s.success&&(_e.value=s.result);const r=yield Zt(e);k.departId=r.departId,k.departName=r.departName,k.parentId=r.parentId,k.hasSub=r.hasSub||!1;let v=r.chargePersonList;v&&v.length>0?k.chargePerson=v:k.chargePerson=[],T.value=!0})}function _t(){return c(this,null,function*(){let e=W({},Le(k));e.chargePersonList=e.chargePerson,yield xt(e),T.value=!1,yield O(),yield N(),e.chargePerson&&(yield g())})}function Re(e){let s=C.value;return!!(s.id&&e.departIds&&e.departIds.indexOf(s.id)>=0)}function wt(e){$e.confirm({title:"拒绝此用户加入",okText:"确认",cancelText:"取消",onOk:()=>{ra({status:"4",userId:e.id}).then(s=>{s.success&&g()}).catch(s=>{t.warning(s.message)})}})}G();function G(){return c(this,null,function*(){yield aa({status:"3"}).then(e=>{e.success&&(De.value=e.result)})})}function kt(){Q([]),g(),G()}function Et(){return c(this,null,function*(){Xe(!0,{departId:C.value.id})})}function Ft(e){return c(this,null,function*(){yield ee(e,ua,bt)})}function bt(){return c(this,null,function*(){yield O(),yield N(),X(P(y))})}function It(){if(P(y)=="all"){H("用户列表","/sys/user/exportAppUser",{});return}Qe(!0,{})}function At(e,s){let r={departIds:s.join(",")};H("用户列表","/sys/user/exportAppUser",jt(r))}function Te(){return c(this,null,function*(){yield g(),yield O(),yield N(),yield G(),oe.value=[]})}const ue=zt();function St(e){let s=ue.getUserInfo.username;if(s&&e===s){ue.setTenant(null);let r="/myapps/index";window.location.replace(r)}else g()}return{searchValue:n,activeKey:y,searchHandleClick:We,onSearchValueChange:Ge,searchList:p,allLiHandleClick:X,showSearchResult:S,rightTitle:_,rightNum:U,treeData:u,treeReloading:F,selectedKeys:w,expandedKeys:b,departAddModal:$,departEditModal:T,updateDepartInfo:k,addDepartInfo:M,registerTable:ne,registerDrawer:ze,registerModal:He,getPageSize:Ye,getAvatar:Ze,rowSelection:J,userHandleClick:at,departHandleClick:nt,refreshClick:ot,excelClick:lt,loadChildrenTreeData:rt,loadTree:O,autoExpandParentNode:Ee,onSelect:ut,departClick:dt,departAddClick:be,departEditClick:Ie,handleDepartAddOk:pt,deleteDepartClick:Ae,getTableAction:ct,handleUserEdit:re,handleLeaveDelete:Ue,handleBatchEdit:gt,handleDepartCreate:mt,clearAndReload:vt,selectedRowKeys:oe,reload:g,searchParams:h,onSearchBlur:Ct,onUpdateDepartInfo:_t,onDepartAction:yt,showDepartChargeIcon:Re,getDropDownActions:ft,treeSelectCondition:it,approvalCount:De,reloadCount:kt,registerQuitAgentModal:x,invitationPeople:Et,registerUserModal:Je,importDepartExcel:Ft,chargePersonOption:_e,fieldNames:qe,personCharge:ba,registerDepart:je,exportXlsClick:It,getSelectResult:At,onImportXls:te,handleSuccess:Te,handleQuitSuccess:St,visible:ie,handleOk:et,password:q}}});const R=t=>(Kt("data-v-90309b92"),t=t(),$t(),t),Aa={class:"admin-structure-box"},Sa={class:"admin-structure-content flex-row"},Ba={class:"admin-structure"},Ua={class:"structure-navigator"},Ra=R(()=>a("div",{class:"admin-left-title"}," 成员与部门",-1)),Ta={class:"search-container"},Ma={key:0,class:"search-result"},Oa={class:"search-user-list"},Pa={class:"title"},La=["onClick"],Na=["src","alt"],Ka={class:"info"},$a={class:"job"},za={class:"search-department-list"},Ha={class:"title"},Va=["onClick"],ja={class:"department-top"},Qa=R(()=>a("div",{class:"flex"},[a("span",null,"全组织")],-1)),Ja={class:"ant-dropdown-trigger",style:{width:"24px"}},Xa={class:"flex"},qa={key:0,class:"approved-count"},Ga={class:"create-depart"},Wa={class:"flex",style:{position:"relative","z-index":"0","min-height":"0",width:"100%","overflow-y":"auto"}},Ya={class:"department-tree-box"},Za={class:"department-name word-break ellipsis"},xa={class:"structure-content flex"},en={key:0,class:"Font15 department-title"},tn={class:"department-name-value"},an={class:"txt-middle"},nn={class:"list-info"},sn={class:"table-content"},on=R(()=>a("div",{style:{height:"0"}},null,-1)),ln={key:0,style:{display:"flex","align-items":"center"}},rn={class:"card-content-box"},un={class:"card-content"},dn={class:"card-header"},pn=["src"],cn={style:{flex:"1"}},fn={class:"user-pop-name ellipsis"},mn={class:"card-content-desc user-card"},hn={class:"ellipsis content-item"},gn=["src"],vn=["src"],Cn={class:"user-name",style:{display:"flex"}},yn={class:"user-name-text",style:{"margin-right":"5px"}},Dn=["src"],_n={class:"depart-single-info"},wn={class:"modal-body"},kn=R(()=>a("span",{class:"info-label"},"部门名称",-1)),En={class:"modal-body"},Fn={class:"depart-single-info"},bn=R(()=>a("span",{class:"info-label"},"部门名称",-1)),In={class:"depart-single-info"},An=R(()=>a("span",{class:"info-label"},"上级部门",-1)),Sn=R(()=>a("div",{style:{"font-size":"12px",color:"#9f9f9f"}},"有子部门时不可变更上级部门",-1)),Bn={class:"depart-single-info"},Un=R(()=>a("span",{class:"info-label"},"部门负责人",-1)),Rn={class:"delete-user"},Tn=R(()=>a("span",{class:"delete-desc"},"注意：当前操作不仅将用户移除组织，还会将用户从平台彻底删除!",-1));function Mn(t,n,p,C,y,S){const _=d("Icon"),U=d("a-input"),u=d("a-menu-item"),F=d("a-menu"),w=d("a-dropdown"),b=d("a-upload"),$=d("a-tree"),T=d("a-button"),x=d("a-badge"),j=d("a-tooltip"),M=d("MoreOutlined"),H=d("TableAction"),ee=d("BasicTable"),k=d("a-modal"),Ce=d("j-tree-select"),ye=d("a-select"),te=d("OrganUserDrawer"),ae=d("OrganUserBathEdit"),ne=d("UserQuitAgentModal"),g=d("OrganInvitationUserModal"),Q=d("DeptSelectModal"),se=d("a-input-password");return D(),B(ce,null,[a("div",Aa,[a("div",Sa,[a("div",Ba,[a("div",Ua,[Ra,a("div",Ta,[l(U,{placeholder:"搜索",bordered:!1,value:t.searchValue,"onUpdate:value":n[0]||(n[0]=o=>t.searchValue=o),onChange:t.onSearchValueChange,onClick:t.searchHandleClick,onBlur:t.onSearchBlur,"allow-clear":""},{prefix:i(()=>[l(_,{icon:"ant-design:search-outlined"})]),_:1},8,["value","onChange","onClick","onBlur"]),t.showSearchResult?(D(),B("div",Ma,[a("div",Oa,[a("div",Pa,E("员工（"+t.searchList.userList.length+"）"),1),(D(!0),B(ce,null,Ne(t.searchList.userList,o=>(D(),B("div",{class:"user-item clearfix",onClick:m=>t.userHandleClick(o)},[a("img",{src:t.getAvatar(o.avatar),alt:o.realname,class:"avatar"},null,8,Na),a("div",Ka,E(o.realname),1),a("div",$a,E(o.post),1)],8,La))),256))]),a("div",za,[a("div",Ha,E("部门（"+t.searchList.departList.length+"）"),1),(D(!0),B(ce,null,Ne(t.searchList.departList,o=>(D(),B("div",{class:"dept-item",onClick:m=>t.departHandleClick(o)},[a("span",null,E(o.departName),1)],8,Va))),256))])])):z("",!0)]),a("div",ja,[a("ul",null,[a("li",{class:Ke(["pointer flex-row",t.activeKey==="all"?"current":""]),onClick:n[2]||(n[2]=o=>t.allLiHandleClick("all"))},[Qa,a("div",Ja,[l(w,{trigger:["click"]},{overlay:i(()=>[l(F,{onClick:t.refreshClick},{default:i(()=>[l(u,{key:"1"},{default:i(()=>[A("刷新成员所有信息")]),_:1})]),_:1},8,["onClick"])]),default:i(()=>[a("a",{class:"ant-dropdown-link",onClick:n[1]||(n[1]=fe(()=>{},["prevent"]))},[l(_,{icon:"ant-design:more-outlined"})])]),_:1})])],2),a("li",{class:Ke(["pointer flex-row",t.activeKey==="approval"?"current":""]),onClick:n[3]||(n[3]=o=>t.allLiHandleClick("approval"))},[a("div",Xa,[a("span",null,[A("可审批 "),t.approvalCount>0?(D(),B("span",qa,E(t.approvalCount),1)):z("",!0)])])],2)])]),a("span",Ga,[a("span",{class:"creat-department-txt pointer",onClick:n[4]||(n[4]=(...o)=>t.departAddClick&&t.departAddClick(...o))},[l(_,{icon:"ant-design:plus-outlined",style:{"margin-right":"3px"}}),A(" 创建部门 ")]),l(w,{trigger:["click"]},{overlay:i(()=>[l(F,{onClick:t.excelClick},{default:i(()=>[l(u,{key:"import"},{default:i(()=>[l(b,{name:"file",showUploadList:!1,multiple:!1,customRequest:o=>t.importDepartExcel(o)},{default:i(()=>[A(" 导入部门 ")]),_:1},8,["customRequest"])]),_:1}),l(u,{key:"export"},{default:i(()=>[A("导出部门")]),_:1})]),_:1},8,["onClick"])]),default:i(()=>[a("a",{class:"ant-dropdown-link",onClick:n[5]||(n[5]=fe(()=>{},["prevent"]))},[l(_,{icon:"ant-design:more-outlined",style:{"font-size":"20px !important"}})])]),_:1})]),a("div",Wa,[a("div",Ya,[t.treeReloading?z("",!0):(D(),me($,{key:0,clickRowToExpand:!1,treeData:t.treeData,selectedKeys:t.selectedKeys,"load-data":t.loadChildrenTreeData,expandedKeys:t.expandedKeys,"onUpdate:expandedKeys":n[7]||(n[7]=o=>t.expandedKeys=o),onSelect:t.onSelect,class:"depart-tree","show-icon":""},{icon:i(({key:o,selected:m})=>[l(_,{icon:"ant-design:folder-outlined",style:{"vertical-align":"center"}})]),title:i(({title:o,key:m})=>[a("span",Za,[A(E(o)+" ",1),l(w,{trigger:["click"]},{overlay:i(()=>[l(F,{onClick:J=>t.onDepartAction(J,m)},{default:i(()=>[l(u,{key:"sub"},{default:i(()=>[A("添加子部门")]),_:1}),l(u,{key:"edit"},{default:i(()=>[A("编辑部门")]),_:1}),l(u,{key:"delete"},{default:i(()=>[A("删除部门")]),_:1})]),_:2},1032,["onClick"])]),default:i(()=>[a("a",{class:"ant-dropdown-link depart-action",onClick:n[6]||(n[6]=fe(()=>{},["stop"]))},[l(_,{icon:"ant-design:more-outlined",style:{"font-size":"20px !important"}})])]),_:2},1024)])]),_:1},8,["treeData","selectedKeys","load-data","expandedKeys","onSelect"]))])])])]),a("div",xa,[t.searchParams.showRightTitle?(D(),B("div",en,[a("span",tn,E(t.rightTitle),1),a("span",an,E(t.getPageSize()),1)])):z("",!0),a("div",nn,[a("div",sn,[l(ee,{onRegister:t.registerTable,rowSelection:t.rowSelection,style:{"margin-bottom":"20px"}},{tableTitle:i(()=>[l(T,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:t.handleDepartCreate},{default:i(()=>[A("添加成员")]),_:1},8,["onClick"]),l(T,{preIcon:"ant-design:edit-outlined",disabled:t.selectedRowKeys.length<1,onClick:t.handleBatchEdit},{default:i(()=>[A("批量编辑 ")]),_:1},8,["disabled","onClick"])]),tableTop:i(()=>[on]),bodyCell:i(({column:o,record:m,text:J})=>[o.key==="realname"?(D(),B("div",ln,[l(j,{placement:"top",color:"#FFFFFF"},{title:i(()=>[a("div",rn,[a("div",un,[a("div",dn,[a("img",{src:t.getAvatar(m.avatar),style:{height:"47px",width:"47px","border-radius":"50%"}},null,8,pn),a("div",cn,[a("span",fn,E(m.realname),1),a("div",mn,[a("span",hn,E(m.phone),1)])])])])])]),default:i(()=>[m.izBindThird?(D(),B("img",{key:1,src:t.getAvatar(m.avatar),class:"user-avatar"},null,8,vn)):(D(),me(x,{key:0,color:"yellow",dot:!0,status:"default"},{default:i(()=>[a("img",{src:t.getAvatar(m.avatar),class:"user-avatar"},null,8,gn)]),_:2},1024))]),_:2},1024),a("span",Cn,[a("span",yn,E(m.realname),1),t.showDepartChargeIcon(m)?(D(),me(j,{key:0,placement:"top",title:"部门负责人"},{default:i(()=>[a("img",{src:t.personCharge,style:{width:"18px",height:"18px"}},null,8,Dn)]),_:1})):z("",!0)])])):z("",!0)]),action:i(({record:o})=>[l(H,{dropDownActions:t.getDropDownActions(o)},{more:i(()=>[l(M,{style:{"font-size":"18px",cursor:"pointer"}})]),_:2},1032,["dropDownActions"])]),_:1},8,["onRegister","rowSelection"])])])])])]),l(k,{open:t.departAddModal,"onUpdate:open":n[11]||(n[11]=o=>t.departAddModal=o),title:"添加部门"},{footer:i(()=>[a("a",{class:"no-text",onClick:n[9]||(n[9]=o=>t.departAddModal=!1)},"取消"),a("a",{class:"yes-text",onClick:n[10]||(n[10]=(...o)=>t.handleDepartAddOk&&t.handleDepartAddOk(...o))},"创建")]),default:i(()=>[a("div",_n,[a("div",wn,[kn,l(U,{value:t.addDepartInfo.departName,"onUpdate:value":n[8]||(n[8]=o=>t.addDepartInfo.departName=o),placeholder:"请输入部门名称"},null,8,["value"])])])]),_:1},8,["open"]),l(k,{open:t.departEditModal,"onUpdate:open":n[17]||(n[17]=o=>t.departEditModal=o),title:"编辑部门"},{footer:i(()=>[a("a",{class:"no-text",onClick:n[15]||(n[15]=o=>t.departEditModal=!1)},"取消"),a("a",{class:"yes-text",onClick:n[16]||(n[16]=(...o)=>t.onUpdateDepartInfo&&t.onUpdateDepartInfo(...o))},"保存")]),default:i(()=>[a("div",En,[a("div",Fn,[bn,l(U,{value:t.updateDepartInfo.departName,"onUpdate:value":n[12]||(n[12]=o=>t.updateDepartInfo.departName=o),placeholder:"请输入部门名称"},null,8,["value"])]),a("div",In,[An,l(Ce,{value:t.updateDepartInfo.parentId,"onUpdate:value":n[13]||(n[13]=o=>t.updateDepartInfo.parentId=o),loadTriggleChange:"",pidField:"parent_id",dict:"sys_depart,depart_name,id",condition:t.treeSelectCondition,placeholder:"请选择上级部门",disabled:t.updateDepartInfo.hasSub},null,8,["value","condition","disabled"]),Sn]),a("div",Bn,[Un,l(ye,{style:{width:"100%"},value:t.updateDepartInfo.chargePerson,"onUpdate:value":n[14]||(n[14]=o=>t.updateDepartInfo.chargePerson=o),options:t.chargePersonOption,mode:"multiple",notFoundContent:"当前部门下暂无用户",placeholder:"请选择部门负责人",fieldNames:t.fieldNames},null,8,["value","options","fieldNames"])])])]),_:1},8,["open"]),l(te,{onRegister:t.registerDrawer,onReload:t.reload,onReloadCount:t.reloadCount},null,8,["onRegister","onReload","onReloadCount"]),l(ae,{onRegister:t.registerModal,onReload:t.clearAndReload},null,8,["onRegister","onReload"]),l(ne,{onRegister:t.registerQuitAgentModal,onSuccess:t.handleQuitSuccess},null,8,["onRegister","onSuccess"]),l(g,{onRegister:t.registerUserModal,onSuccess:t.reloadCount},null,8,["onRegister","onSuccess"]),l(Q,{onRegister:t.registerDepart,checkStrictly:"",sync:!1,onGetSelectResult:t.getSelectResult},null,8,["onRegister","onGetSelectResult"]),l(k,{open:t.visible,"onUpdate:open":n[19]||(n[19]=o=>t.visible=o),title:"删除组织用户",width:450,destroyOnClose:"",onOk:t.handleOk,okButtonProps:{disabled:t.password===""}},{default:i(()=>[a("div",Rn,[l(se,{value:t.password,"onUpdate:value":n[18]||(n[18]=o=>t.password=o),autocomplete:"new-password",placeholder:"请输入当前组织管理员密码"},null,8,["value"]),Tn])]),_:1},8,["open","onOk","okButtonProps"])],64)}const zs=Qt(Ia,[["render",Mn],["__scopeId","data-v-90309b92"]]);export{zs as default};

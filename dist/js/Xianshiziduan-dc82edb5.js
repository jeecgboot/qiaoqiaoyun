var I=Object.defineProperty,O=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var E=(e,s,n)=>s in e?I(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,S=(e,s)=>{for(var n in s||(s={}))$.call(s,n)&&E(e,n,s[n]);if(F)for(var n of F(s))D.call(s,n)&&E(e,n,s[n]);return e},x=(e,s)=>O(e,L(s));import{d as U,f as g,e as X,h as j,a3 as T,a4 as W,a5 as u,V as r,a6 as p,a7 as h,k as d,ai as C,E as V,ak as H,W as N,ae as G,F as b,am as J}from"./vue-vendor-24c7dc61.js";import{n as K,p as M}from"./antd-vue-vendor-0d72f01e.js";import{C as P}from"./ComponentIcon-f1bbb90f.js";import{l as Q}from"./index-831af9dd.js";import"./vxe-table-vendor-8813019a.js";const R=U({name:"Xianshiziduan",props:{columnList:{type:Array,default:()=>[]},info:{type:Object,require:!1,default:{}}},components:{SearchOutlined:K,ComponentIcon:P},emits:["save"],setup(e,{emit:s}){const n=g([]),_=g("");function k(t){let o=_.value;return o?t.name.indexOf(o)>=0:!0}const B=X(()=>{let t=n.value;return t.length==0?0:t.filter(o=>o.show===!0).length});function v(){let t=n.value;for(let o of t)o.show=!0;n.value=t,i()}function w(){let t=n.value;for(let o of t)o.show=!1;n.value=t,i()}j(()=>{let t=e.columnList,o=[];if(t&&t.length>0)if(e.info&&e.info.showColumnList){let a=e.info.showColumnList;for(let l of t){let{show:c,seq:z}=f(l.key,a),A={name:l.name,field:l.key,show:c,seq:z,type:l.type};o.push(A)}o.sort(function(l,c){return l.seq-c.seq})}else for(let a of t){let l=M(a,"name","key","type");o.push(x(S({},l),{show:!0}))}n.value=o});function f(t,o){let a=!0,l=99;for(let c=0;c<o.length;c++)o[c].field==t&&(a=o[c].show,l=o[c].seq);return{show:a,seq:l}}const m=g(300);y();function y(){let t=window.innerHeight-400;t<300&&(t=300),m.value=t}function i(){let t=n.value,o=[];for(let a=0;a<t.length;a++){let l={field:t[a].field,show:t[a].show};o.push(l)}s("save",{showColumnList:o})}return{myFields:n,filterValue:_,allHide:w,allShow:v,showColumnNum:B,isFilterField:k,maxHeight:m,handleChangeShow:i}}});const q=e=>(T("data-v-c079563d"),e=e(),W(),e),Y={class:"inner-content"},Z=q(()=>u("div",{class:"title"},"显示字段",-1)),ee=q(()=>u("div",{class:"tip"},"设置此视图下的表单中需要对用户隐藏的字段",-1)),te={class:"config-detail",style:{width:"320px","padding-top":"0"}},oe={class:"config-item"},ne={style:{width:"360px","border-bottom":"1px solid #eee"}},se={class:"buttons"},le={key:0,class:"column-num"},ie={key:0,class:"field"},ae=["title"],ue={class:"ellipsis",style:{"margin-left":"10px"}};function ce(e,s,n,_,k,B){const v=r("SearchOutlined"),w=r("a-input"),f=r("a-button"),m=r("a-switch"),y=r("component-icon");return p(),h("div",Y,[Z,ee,u("div",te,[u("div",null,[u("div",oe,[u("div",ne,[d(w,{placeholder:"搜索字段",class:"my-input",value:e.filterValue,"onUpdate:value":s[0]||(s[0]=i=>e.filterValue=i)},{prefix:C(()=>[d(v,{style:{color:"#c0c0c0"}})]),_:1},8,["value"])]),u("div",se,[u("div",null,[d(f,{type:"text",onClick:e.allShow},{default:C(()=>[V("显示全部")]),_:1},8,["onClick"]),d(f,{type:"text",onClick:e.allHide},{default:C(()=>[V("隐藏全部")]),_:1},8,["onClick"])]),e.showColumnNum?(p(),h("div",le,"显示"+H(e.showColumnNum)+"列",1)):N("",!0)]),u("div",{class:"field-warp all-fields",style:G({maxHeight:e.maxHeight+"px"})},[(p(!0),h(b,null,J(e.myFields,i=>(p(),h(b,null,[e.isFilterField(i)?(p(),h("div",ie,[u("div",{style:{display:"flex",width:"350px"},title:i.name},[d(m,{checked:i.show,"onUpdate:checked":t=>i.show=t,onChange:e.handleChangeShow,size:"small",style:{"margin-right":"12px","align-self":"center"}},null,8,["checked","onUpdate:checked","onChange"]),d(y,{type:i.type},null,8,["type"]),u("span",ue,H(i.name),1)],8,ae)])):N("",!0)],64))),256))],4)])])])])}const _e=Q(R,[["render",ce],["__scopeId","data-v-c079563d"]]);export{_e as default};

var Qt=Object.defineProperty,Kt=Object.defineProperties;var Zt=Object.getOwnPropertyDescriptors;var Ze=Object.getOwnPropertySymbols;var Xt=Object.prototype.hasOwnProperty,en=Object.prototype.propertyIsEnumerable;var ye=Math.pow,Xe=(e,t,n)=>t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))Xt.call(t,n)&&Xe(e,n,t[n]);if(Ze)for(var n of Ze(t))en.call(t,n)&&Xe(e,n,t[n]);return e},X=(e,t)=>Kt(e,Zt(t));var z=(e,t,n)=>new Promise((a,s)=>{var o=r=>{try{i(n.next(r))}catch(u){s(u)}},l=r=>{try{i(n.throw(r))}catch(u){s(u)}},i=r=>r.done?a(r.value):Promise.resolve(r.value).then(o,l);i((n=n.apply(e,t)).next())});import{H as b,q as te,o as he,z as ke,l as J,O as mt,P as We,Q as tn,R as vt,T as nn,U as an,h as Ae,V as sn,W as ln,j as $e,a as De,X as on,Y as rn,e as Se,w as yt,Z as ge,_ as me,$ as et,a0 as tt,a1 as nt,a2 as un,a3 as cn,k as Z,a4 as re,a5 as at,D as bt,a6 as st,a7 as dn,a8 as fn,a9 as pn}from"./index-831af9dd.js";import{R as be,o as Ee,az as He,F as _t,ak as Ct,Y as Qe,_ as St,aA as hn,T as wt,ay as gn,aj as mn,a0 as Be,U as vn,G as yn,l as Ie,aB as bn,aC as _n,a8 as Le,n as Cn,av as Sn,af as wn,aD as kn,O as In,J as kt,ah as Tn,ae as Rn,ai as Mn,K as Ue,L as $n}from"./antd-vue-vendor-0d72f01e.js";import{d as V,f as I,e as j,u as $,h as ce,w as N,V as S,a6 as _,af as E,ag as x,ai as P,a7 as F,F as Y,am as K,E as W,ak as q,ao as Fe,O as _e,ap as Ce,aq as Ne,k as R,a5 as H,o as It,p as fe,c as Dn,I as pe,a8 as ue,W as Q,n as ze,r as Te,H as Tt,a3 as Fo,a4 as No,ae as Pn,G as On}from"./vue-vendor-24c7dc61.js";import{u as de}from"./useFormItem-86503382.js";import{B as Pe}from"./index-1c3affea.js";import{u as An}from"./BasicModal-58413bab.js";import{d as En}from"./download-1ac6acce.js";import{C as Ln}from"./index-f99b266a.js";import{J as Un}from"./JSelectUser-a44af43a.js";import{u as Rt}from"./useSelectBiz-2f560b0b.js";import{s as Mt}from"./props-8a7ac45b.js";import{J as $t}from"./JSelectBiz-55a9591f.js";import{J as Fn}from"./JImageUpload-d644253a.js";import{J as Nn}from"./JDictSelectTag-54dc3bdb.js";import{J as jn}from"./JSelectDept-a90caee3.js";import{g as Re,a as Ge,p as Bn,r as Vn}from"./areaDataUtil-cdeee717.js";import{J as Jn,a as xn}from"./JPopup-2a779923.js";import zn from"./JCheckbox-0b89d32a.js";import Gn from"./JSelectUserByDept-bd619076.js";import{_ as Yn}from"./JUpload-76e119c7.js";import{T as qn}from"./index-6507b9cd.js";import{U as Wn}from"./index-4d0525a5.js";import{S as Dt}from"./UserSelectModal-d78c1490.js";const Hn=V({name:"ApiRadioGroup",components:{RadioGroup:be.Group,RadioButton:be.Button,Radio:be},props:{api:{type:Function,default:null},params:{type:[Object,String],default:()=>({})},value:{type:[String,Number,Boolean]},isBtn:{type:[Boolean],default:!1},numberToString:b.bool,resultField:b.string.def(""),labelField:b.string.def("label"),valueField:b.string.def("value"),immediate:b.bool.def(!0)},emits:["options-change","change"],setup(e,{emit:t}){const n=I([]),a=I(!1),s=I(!0),o=I([]),l=te(),{t:i}=he(),[r]=de(e),u=j(()=>{const{labelField:h,valueField:p,numberToString:y}=e;return $(n).reduce((m,g)=>{if(g){const v=g[p];m.push(B({label:g[h],value:y?`${v}`:v},Ee(g,[h,p])))}return m},[])});ce(()=>{e.immediate&&c()}),N(()=>e.params,()=>{!$(s)&&c()},{deep:!0});function c(){return z(this,null,function*(){const h=e.api;if(!(!h||!ke(h))){n.value=[];try{a.value=!0;const p=yield h(e.params);if(Array.isArray(p)){n.value=p,f();return}e.resultField&&(n.value=He(p,e.resultField)||[]),f()}catch(p){}finally{a.value=!1}}})}function f(){t("options-change",$(u))}function d(h,...p){o.value=p}return{state:r,getOptions:u,attrs:l,loading:a,t:i,handleChange:d,props:e}}});function Qn(e,t,n,a,s,o){const l=S("RadioButton"),i=S("Radio"),r=S("RadioGroup");return _(),E(r,x(e.attrs,{value:e.state,"onUpdate:value":t[0]||(t[0]=u=>e.state=u),"button-style":"solid",onChange:e.handleChange}),{default:P(()=>[(_(!0),F(Y,null,K(e.getOptions,u=>(_(),F(Y,{key:`${u.value}`},[e.props.isBtn?(_(),E(l,{key:0,value:u.value,disabled:u.disabled},{default:P(()=>[W(q(u.label),1)]),_:2},1032,["value","disabled"])):(_(),E(i,{key:1,value:u.value,disabled:u.disabled},{default:P(()=>[W(q(u.label),1)]),_:2},1032,["value","disabled"]))],64))),128))]),_:1},16,["value","onChange"])}const Kn=J(Hn,[["render",Qn]]),Zn=V({name:"RadioButtonGroup",components:{RadioGroup:be.Group,RadioButton:be.Button},props:{value:{type:[String,Number,Boolean]},options:{type:Array,default:()=>[]}},setup(e){const t=te(),[n]=de(e),a=j(()=>{const{options:s}=e;return!s||(s==null?void 0:s.length)===0?[]:s.some(l=>mt(l))?s.map(l=>({label:l,value:l})):s});return{state:n,getOptions:a,attrs:t}}});function Xn(e,t,n,a,s,o){const l=S("RadioButton"),i=S("RadioGroup");return _(),E(i,x(e.attrs,{value:e.state,"onUpdate:value":t[0]||(t[0]=r=>e.state=r),"button-style":"solid"}),{default:P(()=>[(_(!0),F(Y,null,K(e.getOptions,r=>(_(),E(l,{key:`${r.value}`,value:r.value,disabled:r.disabled},{default:P(()=>[W(q(r.label),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},16,["value"])}const ea=J(Zn,[["render",Xn]]),ta=V({name:"ApiSelect",components:{Select:_t,LoadingOutlined:Ct},inheritAttrs:!1,props:{value:[Array,Object,String,Number],numberToString:b.bool,api:{type:Function,default:null},params:{type:Object,default:()=>({})},resultField:b.string.def(""),labelField:b.string.def("label"),valueField:b.string.def("value"),immediate:b.bool.def(!0)},emits:["options-change","change"],setup(e,{emit:t}){const n=I([]),a=I(!1),s=I(!0),o=I([]),l=te(),{t:i}=he(),[r,u]=de(e,"value","change",o);let c;const f=j(()=>{let v=$(l)||{};return v&&v["onUpdate:value"]&&(c=v["onUpdate:value"],delete v["onUpdate:value"]),v.filterOption===void 0&&(v.filterOption=(C,A)=>typeof A.label=="string"?A.label.toLowerCase().indexOf(C.toLowerCase())!=-1:!0),v}),d=j(()=>{const{labelField:v,valueField:C,numberToString:A}=e;return $(n).reduce((M,U)=>{if(U){const T=U[C];M.push(X(B({},Ee(U,[v,C])),{label:U[v],value:A?`${T}`:T}))}return M},[])});ce(()=>{e.immediate&&h()}),N(()=>e.params,()=>{!$(s)&&h()},{deep:!0}),ce(()=>{e.value&&y()});function h(){return z(this,null,function*(){const v=e.api;if(!(!v||!ke(v))){n.value=[];try{a.value=!0;const C=yield v(e.params);if(Array.isArray(C)){n.value=C,m();return}e.resultField&&(n.value=He(C,e.resultField)||[]),m()}catch(C){}finally{a.value=!1,$(l).mode=="multiple"&&!Array.isArray($(r))&&u([]),p()}}})}function p(){let v=e.value;v&&typeof v=="string"&&v!="null"&&v!="undefined"&&(r.value=v.split(","))}function y(){return z(this,null,function*(){!e.immediate&&$(s)&&(yield h(),s.value=!1)})}function m(){t("options-change",$(d))}function g(v,...C){c&&c(v),o.value=C}return{state:r,attrs_:f,attrs:l,getOptions:d,loading:a,t:i,handleFetch:y,handleChange:g}}});function na(e,t,n,a,s,o){const l=S("LoadingOutlined"),i=S("Select");return _(),E(i,x({onDropdownVisibleChange:e.handleFetch},e.attrs_,{onChange:e.handleChange,options:e.getOptions,value:e.state,"onUpdate:value":t[0]||(t[0]=r=>e.state=r)}),Fe({_:2},[K(Object.keys(e.$slots),r=>({name:r,fn:P(u=>[_e(e.$slots,r,Ce(Ne(u||{})))])})),e.loading?{name:"suffixIcon",fn:P(()=>[R(l,{spin:""})]),key:"0"}:void 0,e.loading?{name:"notFoundContent",fn:P(()=>[H("span",null,[R(l,{spin:"",class:"mr-1"}),W(" "+q(e.t("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1040,["onDropdownVisibleChange","onChange","options","value"])}const aa=J(ta,[["render",na]]),sa=V({name:"ApiTreeSelect",components:{ATreeSelect:Qe,LoadingOutlined:Ct},props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:b.string.def("")},emits:["options-change","change"],setup(e,{attrs:t,emit:n}){const a=I([]),s=I(!1),o=I(!1),l=j(()=>B(B({},e.api?{treeData:$(a)}:{}),t));function i(...u){n("change",...u)}N(()=>e.params,()=>{$(s)&&r()},{deep:!0}),N(()=>e.immediate,u=>{u&&!s.value&&r()}),It(()=>{e.immediate&&r()});function r(){return z(this,null,function*(){const{api:u}=e;if(!u||!ke(u))return;o.value=!0,a.value=[];let c;try{c=yield u(e.params)}catch(f){}o.value=!1,c&&(We(c)||(c=He(c,e.resultField)),a.value=c||[],s.value=!0,n("options-change",a.value))})}return{getAttrs:l,loading:o,handleChange:i}}});function la(e,t,n,a,s,o){const l=S("LoadingOutlined"),i=S("a-tree-select");return _(),E(i,x(e.getAttrs,{onChange:e.handleChange}),Fe({_:2},[K(Object.keys(e.$slots),r=>({name:r,fn:P(u=>[_e(e.$slots,r,Ce(Ne(u||{})))])})),e.loading?{name:"suffixIcon",fn:P(()=>[R(l,{spin:""})]),key:"0"}:void 0]),1040,["onChange"])}const oa=J(sa,[["render",la]]),{t:Ve}=he();function ra({acceptRef:e,helpTextRef:t,maxNumberRef:n,maxSizeRef:a}){const s=j(()=>{const i=$(e);return i&&i.length>0?i:[]}),o=j(()=>$(s).map(i=>i.indexOf("/")>0||i.startsWith(".")?i:`.${i}`).join(",")),l=j(()=>{const i=$(t);if(i)return i;const r=[],u=$(e);u.length>0&&r.push(Ve("component.upload.accept",[u.join(",")]));const c=$(a);c&&r.push(Ve("component.upload.maxSize",[c]));const f=$(n);return f&&f!==1/0&&r.push(Ve("component.upload.maxNumber",[f])),r.join("，")});return{getAccept:s,getStringAccept:o,getHelpText:l}}var ee=(e=>(e.SUCCESS="success",e.ERROR="error",e.UPLOADING="uploading",e))(ee||{});const Pt={helpText:{type:String,default:""},maxSize:{type:Number,default:2},maxNumber:{type:Number,default:1/0},accept:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!0},uploadParams:{type:Object,default:{}},api:{type:Function,default:null,required:!0},name:{type:String,default:"file"},filename:{type:String,default:null}},ia=X(B({value:{type:Array,default:()=>[]}},Pt),{showPreviewNumber:{type:Boolean,default:!0},emptyHidePreview:{type:Boolean,default:!1}}),ua={value:{type:Array,default:()=>[]}},ca={columns:{type:[Array],default:null},actionColumn:{type:Object,default:null},dataSource:{type:Array,default:null}};function da(e,t){const n=t.join("|");return new RegExp("\\.("+n+")$","i").test(e.name)}function fa(e){return Ot(e.name)}function Ot(e){return/\.(jpg|jpeg|png|gif)$/i.test(e)}function pa(e){return new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t({result:a.result,file:e}),a.onerror=s=>n(s)})}const At=Symbol("basic-table");function lr(e){fe(At,e)}function ha(){return Dn(At)}const{table:ga}=tn,{pageSizeOptions:ma,defaultPageSize:va,defaultSize:ya,fetchSetting:ba,defaultSortFn:_a,defaultFilterFn:Ca}=ga,or="key",rr=ma,ir=va,ur=ba,cr=_a,dr=Ca,fr="center",pr=ya,hr="INDEX",Sa="ACTION",wa=V({name:"TableAction",components:{Icon:vt,PopConfirmButton:nn,Divider:St,Dropdown:an,MoreOutlined:hn,Tooltip:wt},props:{actions:{type:Array,default:null},dropDownActions:{type:Array,default:null},divider:b.bool.def(!0),outside:b.bool,stopButtonPropagation:b.bool.def(!1)},setup(e){const{prefixCls:t}=Ae("basic-table-action");let n={};e.outside||(n=ha());const{hasPermission:a}=sn();function s(d){const h=d.ifShow;let p=!0;return ln(h)&&(p=h),ke(h)&&(p=h(d)),p}const o=j(()=>(pe(e.actions)||[]).filter(d=>a(d.auth)&&s(d)).map(d=>{const{popConfirm:h}=d;if(h){const p=h.overlayClassName;h.overlayClassName=`${p||""} ${t}-popconfirm`}return X(B(B({getPopupContainer:()=>{var p;return(p=$(n==null?void 0:n.wrapRef.value))!=null?p:document.body},type:"link",size:"small"},d),h||{}),{onConfirm:i(h==null?void 0:h.confirm),onCancel:h==null?void 0:h.cancel,enable:!!h})})),l=j(()=>{const d=(pe(e.dropDownActions)||[]).filter(h=>a(h.auth)&&s(h));return d.map((h,p)=>{const{label:y,popConfirm:m}=h;if(m){const g=m.overlayClassName;m.overlayClassName=`${g||""} ${t}-popconfirm`}return m&&(m.confirm=i(m==null?void 0:m.confirm)),X(B(B({},h),m),{onConfirm:i(m==null?void 0:m.confirm),onCancel:m==null?void 0:m.cancel,text:y,divider:p<d.length-1?e.divider:!1})})}),i=d=>typeof d!="function"?d:()=>new Promise(p=>{const y=d();Object.prototype.toString.call(y)==="[object Promise]"?y.finally(()=>{p()}).catch(m=>{}):p()}),r=j(()=>$(l).filter(d=>d.slot)),u=j(()=>{var p,y;const h=(((p=n==null?void 0:n.getColumns)==null?void 0:p.call(n))||[]).find(m=>m.flag===Sa);return(y=h==null?void 0:h.align)!=null?y:"left"});function c(d){return B({getPopupContainer:()=>{var h;return(h=$(n==null?void 0:n.wrapRef.value))!=null?h:document.body},placement:"bottom"},mt(d)?{title:d}:d)}function f(d){if(!e.stopButtonPropagation)return;d.composedPath().find(y=>{var m;return((m=y.tagName)==null?void 0:m.toUpperCase())==="BUTTON"})&&d.stopPropagation()}return{prefixCls:t,getActions:o,getDropdownList:l,getDropdownSlotList:r,getAlign:u,onCellClick:f,getTooltip:c}}});function ka(e,t,n,a,s,o){const l=S("Icon"),i=S("PopConfirmButton"),r=S("Tooltip"),u=S("Divider"),c=S("a-button"),f=S("Dropdown");return _(),F("div",{class:ue([e.prefixCls,e.getAlign]),onClick:t[0]||(t[0]=(...d)=>e.onCellClick&&e.onCellClick(...d))},[(_(!0),F(Y,null,K(e.getActions,(d,h)=>(_(),F(Y,{key:`${h}-${d.label}`},[d.slot?_e(e.$slots,"customButton",{key:0}):(_(),F(Y,{key:1},[d.tooltip?(_(),E(r,Ce(x({key:0},e.getTooltip(d.tooltip))),{default:P(()=>[R(i,Ce(Ne(d)),{default:P(()=>[d.icon?(_(),E(l,{key:0,icon:d.icon,class:ue({"mr-1":!!d.label})},null,8,["icon","class"])):Q("",!0),d.label?(_(),F(Y,{key:1},[W(q(d.label),1)],64)):Q("",!0)]),_:2},1040)]),_:2},1040)):(_(),E(i,Ce(x({key:1},d)),{default:P(()=>[d.icon?(_(),E(l,{key:0,icon:d.icon,class:ue({"mr-1":!!d.label})},null,8,["icon","class"])):Q("",!0),d.label?(_(),F(Y,{key:1},[W(q(d.label),1)],64)):Q("",!0)]),_:2},1040))],64)),e.divider&&h<e.getActions.length-1?(_(),E(u,{key:2,type:"vertical",class:"action-divider"})):Q("",!0)],64))),128)),e.dropDownActions&&e.getDropdownList.length>0?(_(),E(f,{key:0,trigger:["hover"],dropMenuList:e.getDropdownList,popconfirm:""},Fe({default:P(()=>[_e(e.$slots,"more"),e.$slots.more?Q("",!0):(_(),E(c,{key:0,type:"link",size:"small"},{default:P(()=>[W(" 更多 "),R(l,{icon:"mdi-light:chevron-down"})]),_:1}))]),_:2},[K(e.getDropdownSlotList,(d,h)=>({name:d.slot,fn:P(()=>[_e(e.$slots,d.slot)])}))]),1032,["dropMenuList"])):Q("",!0)],2)}const Et=J(wa,[["render",ka]]),Ia=V({components:{Image:gn},props:{fileUrl:b.string.def(""),fileName:b.string.def("")}});const Ta={class:"thumb"};function Ra(e,t,n,a,s,o){const l=S("Image");return _(),F("span",Ta,[e.fileUrl?(_(),E(l,{key:0,src:e.fileUrl,width:104},null,8,["src"])):Q("",!0)])}const Lt=J(Ia,[["render",Ra]]),{t:ae}=he();function Ma(){return[{dataIndex:"thumbUrl",title:ae("component.upload.legend"),width:100,customRender:({record:e})=>{const{thumbUrl:t}=e||{};return t&&R(Lt,{fileUrl:t},null)}},{dataIndex:"name",title:ae("component.upload.fileName"),align:"left",customRender:({text:e,record:t})=>{const{percent:n,status:a}=t||{};let s="normal";return a===ee.ERROR?s="exception":a===ee.UPLOADING?s="active":a===ee.SUCCESS&&(s="success"),R("span",null,[R("p",{class:"truncate mb-1",title:e},[e]),R(mn,{percent:n,size:"small",status:s},null)])}},{dataIndex:"size",title:ae("component.upload.fileSize"),width:100,customRender:({text:e=0})=>e&&(e/1024).toFixed(2)+"KB"},{dataIndex:"status",title:ae("component.upload.fileStatue"),width:100,customRender:({text:e})=>e===ee.SUCCESS?R(Be,{color:"green"},{default:()=>ae("component.upload.uploadSuccess")}):e===ee.ERROR?R(Be,{color:"red"},{default:()=>ae("component.upload.uploadError")}):e===ee.UPLOADING?R(Be,{color:"blue"},{default:()=>ae("component.upload.uploading")}):e}]}function $a(e){return{width:120,title:ae("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:t})=>{const n=[{label:ae("component.upload.del"),color:"error",onClick:e.bind(null,t)}];return R(Et,{actions:n,outside:!0},null)}}}function Da(){return[{dataIndex:"url",title:ae("component.upload.legend"),width:100,customRender:({record:e})=>{const{url:t}=e||{};return Ot(t)&&R(Lt,{fileUrl:t},null)}},{dataIndex:"name",title:ae("component.upload.fileName"),align:"left"}]}function Pa({handleRemove:e,handleDownload:t}){return{width:160,title:ae("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:n})=>{const a=[{label:ae("component.upload.del"),color:"error",onClick:e.bind(null,n)},{label:ae("component.upload.download"),onClick:t.bind(null,n)}];return R(Et,{actions:a,outside:!0},null)}}}const Ut=V({name:"FileList",props:ca,setup(e){const t=An();return N(()=>e.dataSource,()=>{ze(()=>{var n;(n=t==null?void 0:t.redoModalHeight)==null||n.call(t)})}),()=>{const{columns:n,actionColumn:a,dataSource:s}=e,o=[...n,a];return R("table",{class:"file-table"},[R("colgroup",null,[o.map(l=>{const{width:i=0,dataIndex:r}=l,u={width:`${i}px`,minWidth:`${i}px`};return R("col",{style:i?u:{},key:r},null)})]),R("thead",null,[R("tr",{class:"file-table-tr"},[o.map(l=>{const{title:i="",align:r="center",dataIndex:u}=l;return R("th",{class:["file-table-th",r],key:u},[i])})])]),R("tbody",null,[s.map((l={},i)=>R("tr",{class:"file-table-tr",key:`${i+l.name||""}`},[o.map(r=>{const{dataIndex:u="",customRender:c,align:f="center"}=r,d=c&&ke(c);return R("td",{class:["file-table-td",f],key:u},[d?c==null?void 0:c({text:l[u],record:l}):l[u]])})]))])])}}});const Oa=V({components:{BasicModal:Pe,Upload:vn,Alert:yn,FileList:Ut},props:X(B({},Pt),{previewFileList:{type:Array,default:()=>[]}}),emits:["change","register","delete"],setup(e,{emit:t}){const n=Te({fileList:[]}),a=I(!1),s=I([]),{accept:o,helpText:l,maxNumber:i,maxSize:r}=Tt(e),{t:u}=he(),[c,{closeModal:f}]=$e(),{getAccept:d,getStringAccept:h,getHelpText:p}=ra({acceptRef:o,helpTextRef:l,maxNumberRef:i,maxSizeRef:r}),{createMessage:y}=De(),m=j(()=>s.value.length>0&&!s.value.every(w=>w.status===ee.SUCCESS)),g=j(()=>{const w=s.value.some(D=>D.status===ee.SUCCESS);return{disabled:a.value||s.value.length===0||!w}}),v=j(()=>{const w=s.value.some(D=>D.status===ee.ERROR);return a.value?u("component.upload.uploading"):u(w?"component.upload.reUploadFailed":"component.upload.startUpload")});function C(w){const{size:D,name:G}=w,{maxSize:ne}=e,oe=$(d);if(ne&&w.size/1024/1024>=ne)return y.error(u("component.upload.maxSizeMultiple",[ne])),!1;if(oe.length>0&&!da(w,oe))return y.error(u("component.upload.acceptUpload",[oe.join(",")])),!1;const le={uuid:on(),file:w,size:D,name:G,percent:0,type:G.split(".").pop()};return fa(w)?pa(w).then(({result:je})=>{s.value=[...$(s),B({thumbUrl:je},le)]}):s.value=[...$(s),le],!1}function A(w){const D=s.value.findIndex(G=>G.uuid===w.uuid);D!==-1&&s.value.splice(D,1),t("delete",w)}function M(w){return z(this,null,function*(){var G;const{api:D}=e;if(!D||!ke(D))return rn("upload api must exist and be a function");try{w.status=ee.UPLOADING;const{data:ne}=yield(G=e.api)==null?void 0:G.call(e,{data:B({},e.uploadParams||{}),file:w.file,name:e.name,filename:e.filename},function(le){const je=le.loaded/le.total*100|0;w.percent=je});return w.status=ee.SUCCESS,w.responseData=ne,{success:!0,error:null}}catch(ne){return w.status=ee.ERROR,{success:!1,error:ne}}})}function U(){return z(this,null,function*(){var D;const{maxNumber:w}=e;if(s.value.length+((D=e.previewFileList)==null?void 0:D.length)>w)return y.warning(u("component.upload.maxNumber",[w]));try{a.value=!0;const G=s.value.filter(le=>le.status!==ee.SUCCESS)||[],ne=yield Promise.all(G.map(le=>M(le)));a.value=!1;const oe=ne.filter(le=>!le.success);if(oe.length>0)throw oe}catch(G){throw a.value=!1,G}})}function T(){const{maxNumber:w}=e;if(s.value.length>w)return y.warning(u("component.upload.maxNumber",[w]));if(a.value)return y.warning(u("component.upload.saveWarn"));const D=[];for(const G of s.value){const{status:ne,responseData:oe}=G;ne===ee.SUCCESS&&oe&&D.push(oe.url)}if(D.length<=0)return y.warning(u("component.upload.saveError"));s.value=[],f(),t("change",D)}function O(){return z(this,null,function*(){return a.value?(y.warning(u("component.upload.uploadWait")),!1):(s.value=[],!0)})}return{columns:Ma(),actionColumn:$a(A),register:c,closeModal:f,getHelpText:p,getStringAccept:h,getOkButtonProps:g,beforeUpload:C,fileListRef:s,state:n,isUploadingRef:a,handleStartUpload:U,handleOk:T,handleCloseFunc:O,getIsSelectFile:m,getUploadBtnText:v,t:u}}});const Aa={class:"upload-modal-toolbar"};function Ea(e,t,n,a,s,o){const l=S("a-button"),i=S("Alert"),r=S("Upload"),u=S("FileList"),c=S("BasicModal");return _(),E(c,x({width:"800px",title:e.t("component.upload.upload"),okText:e.t("component.upload.save")},e.$attrs,{onRegister:e.register,onOk:e.handleOk,closeFunc:e.handleCloseFunc,maskClosable:!1,keyboard:!1,wrapClassName:"upload-modal",okButtonProps:e.getOkButtonProps,cancelButtonProps:{disabled:e.isUploadingRef}}),{centerFooter:P(()=>[R(l,{onClick:e.handleStartUpload,color:"success",disabled:!e.getIsSelectFile,loading:e.isUploadingRef},{default:P(()=>[W(q(e.getUploadBtnText),1)]),_:1},8,["onClick","disabled","loading"])]),default:P(()=>[H("div",Aa,[R(i,{message:e.getHelpText,type:"info",banner:"",class:"upload-modal-toolbar__text"},null,8,["message"]),R(r,{accept:e.getStringAccept,multiple:e.multiple,"before-upload":e.beforeUpload,class:"upload-modal-toolbar__btn"},{default:P(()=>[R(l,{type:"primary"},{default:P(()=>[W(q(e.t("component.upload.choose")),1)]),_:1})]),_:1},8,["accept","multiple","before-upload"])]),R(u,{dataSource:e.fileListRef,columns:e.columns,actionColumn:e.actionColumn},null,8,["dataSource","columns","actionColumn"])]),_:1},16,["title","okText","onRegister","onOk","closeFunc","okButtonProps","cancelButtonProps"])}const La=J(Oa,[["render",Ea]]),Ua=V({components:{BasicModal:Pe,FileList:Ut},props:ua,emits:["list-change","register","delete"],setup(e,{emit:t}){const[n,{closeModal:a}]=$e(),{t:s}=he(),o=I([]);N(()=>e.value,r=>{We(r)||(r=[]),o.value=r.filter(u=>!!u).map(u=>({url:u,type:u.split(".").pop()||"",name:u.split("/").pop()||""}))},{immediate:!0});function l(r){const u=o.value.findIndex(c=>c.url===r.url);if(u!==-1){const c=o.value.splice(u,1);t("delete",c[0].url),t("list-change",o.value.map(f=>f.url))}}function i(r){const{url:u=""}=r;En({url:u})}return{t:s,register:n,closeModal:a,fileListRef:o,columns:Da(),actionColumn:Pa({handleRemove:l,handleDownload:i})}}});function Fa(e,t,n,a,s,o){const l=S("FileList"),i=S("BasicModal");return _(),E(i,x({width:"800px",title:e.t("component.upload.preview"),wrapClassName:"upload-preview-modal"},e.$attrs,{onRegister:e.register,showOkBtn:!1}),{default:P(()=>[R(l,{dataSource:e.fileListRef,columns:e.columns,actionColumn:e.actionColumn},null,8,["dataSource","columns","actionColumn"])]),_:1},16,["title","onRegister"])}const Na=J(Ua,[["render",Fa]]),ja=V({name:"BasicUpload",components:{UploadModal:La,UploadPreviewModal:Na,Icon:vt,Tooltip:wt},props:ia,emits:["change","delete","preview-delete","update:value"],setup(e,{emit:t,attrs:n}){const{t:a}=he(),[s,{openModal:o}]=Se(),[l,{openModal:i}]=Se(),r=I([]),u=j(()=>{const{emptyHidePreview:y}=e;return y&&y?r.value.length>0:!0}),c=j(()=>{const y=B(B({},n),e);return Ee(y,"onChange")});N(()=>e.value,(y=[])=>{r.value=We(y)?y:[]},{immediate:!0});function f(y){r.value=[...$(r),...y||[]],t("update:value",r.value),t("change",r.value)}function d(y){r.value=[...y||[]],t("update:value",r.value),t("change",r.value)}function h(y){t("delete",y)}function p(y){t("preview-delete",y)}return{registerUploadModal:s,openUploadModal:o,handleChange:f,handlePreviewChange:d,registerPreviewModal:l,openPreviewModal:i,fileList:r,showPreview:u,bindValue:c,handleDelete:h,handlePreviewDelete:p,t:a}}});function Ba(e,t,n,a,s,o){const l=S("a-button"),i=S("Icon"),r=S("Tooltip"),u=S("a-button-group"),c=S("UploadModal"),f=S("UploadPreviewModal");return _(),F("div",null,[R(u,null,{default:P(()=>[R(l,{type:"primary",onClick:e.openUploadModal,preIcon:"carbon:cloud-upload"},{default:P(()=>[W(q(e.t("component.upload.upload")),1)]),_:1},8,["onClick"]),e.showPreview?(_(),E(r,{key:0,placement:"bottom"},{title:P(()=>[W(q(e.t("component.upload.uploaded"))+" ",1),e.fileList.length?(_(),F(Y,{key:0},[W(q(e.fileList.length),1)],64)):Q("",!0)]),default:P(()=>[R(l,{onClick:e.openPreviewModal},{default:P(()=>[R(i,{icon:"bi:eye"}),e.fileList.length&&e.showPreviewNumber?(_(),F(Y,{key:0},[W(q(e.fileList.length),1)],64)):Q("",!0)]),_:1},8,["onClick"])]),_:1})):Q("",!0)]),_:1}),R(c,x(e.bindValue,{previewFileList:e.fileList,onRegister:e.registerUploadModal,onChange:e.handleChange,onDelete:e.handleDelete}),null,16,["previewFileList","onRegister","onChange","onDelete"]),R(f,{value:e.fileList,onRegister:e.registerPreviewModal,onListChange:e.handlePreviewChange,onDelete:e.handlePreviewDelete},null,8,["value","onRegister","onListChange","onDelete"])])}const Va=J(ja,[["render",Ba]]),Ja=yt(Va),Ye=(e,t)=>e.push.apply(e,t),we=e=>e.sort((t,n)=>t.i-n.i||t.j-n.j),lt=e=>{const t={};let n=1;return e.forEach(a=>{t[a]=n,n+=1}),t};var xa={4:[[1,2],[2,3]],5:[[1,3],[2,3],[2,4]],6:[[1,2],[2,4],[4,5]],7:[[1,3],[2,3],[4,5],[4,6]],8:[[2,4],[4,6]]};const ot=2050,rt=1e3,za=xa,Ga=10,Ya=1e4,Ft=10,Nt=50,jt=20,Bt=/^[A-Z\xbf-\xdf][^A-Z\xbf-\xdf]+$/,qa=/^[^A-Z\xbf-\xdf]+[A-Z\xbf-\xdf]$/,Wa=/^[A-Z\xbf-\xdf]+$/,Vt=/^[^a-z\xdf-\xff]+$/,Ha=/^[a-z\xdf-\xff]+$/,Qa=/^[^A-Z\xbf-\xdf]+$/,Ka=/[a-z\xdf-\xff]/,Za=/[A-Z\xbf-\xdf]/,Xa=/[^A-Za-z\xbf-\xdf]/gi,es=/^\d+$/,Ke=new Date().getFullYear(),ts={recentYear:/19\d\d|200\d|201\d|202\d/g},Jt=[" ",",",";",":","|","/","\\","_",".","-"],ns=Jt.length;class as{match({password:t}){const n=[...this.getMatchesWithoutSeparator(t),...this.getMatchesWithSeparator(t)],a=this.filterNoise(n);return we(a)}getMatchesWithSeparator(t){const n=[],a=/^(\d{1,4})([\s/\\_.-])(\d{1,2})\2(\d{1,4})$/;for(let s=0;s<=Math.abs(t.length-6);s+=1)for(let o=s+5;o<=s+9&&!(o>=t.length);o+=1){const l=t.slice(s,+o+1||9e9),i=a.exec(l);if(i!=null){const r=this.mapIntegersToDayMonthYear([parseInt(i[1],10),parseInt(i[3],10),parseInt(i[4],10)]);r!=null&&n.push({pattern:"date",token:l,i:s,j:o,separator:i[2],year:r.year,month:r.month,day:r.day})}}return n}getMatchesWithoutSeparator(t){const n=[],a=/^\d{4,8}$/,s=o=>Math.abs(o.year-Ke);for(let o=0;o<=Math.abs(t.length-4);o+=1)for(let l=o+3;l<=o+7&&!(l>=t.length);l+=1){const i=t.slice(o,+l+1||9e9);if(a.exec(i)){const r=[],u=i.length;if(za[u].forEach(([f,d])=>{const h=this.mapIntegersToDayMonthYear([parseInt(i.slice(0,f),10),parseInt(i.slice(f,d),10),parseInt(i.slice(d),10)]);h!=null&&r.push(h)}),r.length>0){let f=r[0],d=s(r[0]);r.slice(1).forEach(h=>{const p=s(h);p<d&&(f=h,d=p)}),n.push({pattern:"date",token:i,i:o,j:l,separator:"",year:f.year,month:f.month,day:f.day})}}}return n}filterNoise(t){return t.filter(n=>{let a=!1;const s=t.length;for(let o=0;o<s;o+=1){const l=t[o];if(n!==l&&l.i<=n.i&&l.j>=n.j){a=!0;break}}return!a})}mapIntegersToDayMonthYear(t){if(t[1]>31||t[1]<=0)return null;let n=0,a=0,s=0;for(let o=0,l=t.length;o<l;o+=1){const i=t[o];if(i>99&&i<rt||i>ot)return null;i>31&&(a+=1),i>12&&(n+=1),i<=0&&(s+=1)}return a>=2||n===3||s>=2?null:this.getDayMonth(t)}getDayMonth(t){const n=[[t[2],t.slice(0,2)],[t[0],t.slice(1,3)]],a=n.length;for(let s=0;s<a;s+=1){const[o,l]=n[s];if(rt<=o&&o<=ot){const i=this.mapIntegersToDayMonth(l);return i!=null?{year:o,month:i.month,day:i.day}:null}}for(let s=0;s<a;s+=1){const[o,l]=n[s],i=this.mapIntegersToDayMonth(l);if(i!=null)return{year:this.twoToFourDigitYear(o),month:i.month,day:i.day}}return null}mapIntegersToDayMonth(t){const n=[t,t.slice().reverse()];for(let a=0;a<n.length;a+=1){const s=n[a],o=s[0],l=s[1];if(o>=1&&o<=31&&l>=1&&l<=12)return{day:o,month:l}}return null}twoToFourDigitYear(t){return t>99?t:t>50?t+1900:t+2e3}}const ie=new Uint32Array(65536),ss=(e,t)=>{const n=e.length,a=t.length,s=1<<n-1;let o=-1,l=0,i=n,r=n;for(;r--;)ie[e.charCodeAt(r)]|=1<<r;for(r=0;r<a;r++){let u=ie[t.charCodeAt(r)];const c=u|l;u|=(u&o)+o^o,l|=~(u|o),o&=u,l&s&&i++,o&s&&i--,l=l<<1|1,o=o<<1|~(c|l),l&=c}for(r=n;r--;)ie[e.charCodeAt(r)]=0;return i},ls=(e,t)=>{const n=t.length,a=e.length,s=[],o=[],l=Math.ceil(n/32),i=Math.ceil(a/32);for(let p=0;p<l;p++)o[p]=-1,s[p]=0;let r=0;for(;r<i-1;r++){let p=0,y=-1;const m=r*32,g=Math.min(32,a)+m;for(let v=m;v<g;v++)ie[e.charCodeAt(v)]|=1<<v;for(let v=0;v<n;v++){const C=ie[t.charCodeAt(v)],A=o[v/32|0]>>>v&1,M=s[v/32|0]>>>v&1,U=C|p,T=((C|M)&y)+y^y|C|M;let O=p|~(T|y),w=y&T;O>>>31^A&&(o[v/32|0]^=1<<v),w>>>31^M&&(s[v/32|0]^=1<<v),O=O<<1|A,w=w<<1|M,y=w|~(U|O),p=O&U}for(let v=m;v<g;v++)ie[e.charCodeAt(v)]=0}let u=0,c=-1;const f=r*32,d=Math.min(32,a-f)+f;for(let p=f;p<d;p++)ie[e.charCodeAt(p)]|=1<<p;let h=a;for(let p=0;p<n;p++){const y=ie[t.charCodeAt(p)],m=o[p/32|0]>>>p&1,g=s[p/32|0]>>>p&1,v=y|u,C=((y|g)&c)+c^c|y|g;let A=u|~(C|c),M=c&C;h+=A>>>a-1&1,h-=M>>>a-1&1,A>>>31^m&&(o[p/32|0]^=1<<p),M>>>31^g&&(s[p/32|0]^=1<<p),A=A<<1|m,M=M<<1|g,c=M|~(v|A),u=A&v}for(let p=f;p<d;p++)ie[e.charCodeAt(p)]=0;return h},os=(e,t)=>{if(e.length<t.length){const n=t;t=e,e=n}return t.length===0?e.length:e.length<=32?ss(e,t):ls(e,t)};const rs=(e,t,n)=>{const a=e.length<=t.length,s=e.length<=n;return a||s?Math.ceil(e.length/4):n},is=(e,t,n)=>{let a=0;const s=Object.keys(t).find(o=>{const l=rs(e,o,n);if(Math.abs(e.length-o.length)>l)return!1;const i=os(e,o),r=i<=l;return r&&(a=i),r});return s?{levenshteinDistance:a,levenshteinDistanceEntry:s}:{}};var it={a:["4","@"],b:["8"],c:["(","{","[","<"],d:["6","|)"],e:["3"],f:["#"],g:["6","9","&"],h:["#","|-|"],i:["1","!","|"],k:["<","|<"],l:["!","1","|","7"],m:["^^","nn","2n","/\\\\/\\\\"],n:["//"],o:["0","()"],q:["9"],u:["|_|"],s:["$","5"],t:["+","7"],v:["<",">","/"],w:["^/","uu","vv","2u","2v","\\\\/\\\\/"],x:["%","><"],z:["2"]},Je={warnings:{straightRow:"straightRow",keyPattern:"keyPattern",simpleRepeat:"simpleRepeat",extendedRepeat:"extendedRepeat",sequences:"sequences",recentYears:"recentYears",dates:"dates",topTen:"topTen",topHundred:"topHundred",common:"common",similarToCommon:"similarToCommon",wordByItself:"wordByItself",namesByThemselves:"namesByThemselves",commonNames:"commonNames",userInputs:"userInputs",pwned:"pwned"},suggestions:{l33t:"l33t",reverseWords:"reverseWords",allUppercase:"allUppercase",capitalization:"capitalization",dates:"dates",recentYears:"recentYears",associatedYears:"associatedYears",sequences:"sequences",repeated:"repeated",longerKeyboardPattern:"longerKeyboardPattern",anotherWord:"anotherWord",useWords:"useWords",noNeed:"noNeed",pwned:"pwned"},timeEstimation:{ltSecond:"ltSecond",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days",month:"month",months:"months",year:"year",years:"years",centuries:"centuries"}};class Me{constructor(t=[]){this.parents=t,this.children=new Map}addSub(t,...n){const a=t.charAt(0);this.children.has(a)||this.children.set(a,new Me([...this.parents,a]));let s=this.children.get(a);for(let o=1;o<t.length;o+=1){const l=t.charAt(o);s.hasChild(l)||s.addChild(l),s=s.getChild(l)}return s.subs=(s.subs||[]).concat(n),this}getChild(t){return this.children.get(t)}isTerminal(){return!!this.subs}addChild(t){this.hasChild(t)||this.children.set(t,new Me([...this.parents,t]))}hasChild(t){return this.children.has(t)}}var ut=(e,t)=>(Object.entries(e).forEach(([n,a])=>{a.forEach(s=>{t.addSub(s,n)})}),t);class us{constructor(){this.matchers={},this.l33tTable=it,this.trieNodeRoot=ut(it,new Me),this.dictionary={userInputs:[]},this.rankedDictionaries={},this.rankedDictionariesMaxWordSize={},this.translations=Je,this.graphs={},this.useLevenshteinDistance=!1,this.levenshteinThreshold=2,this.l33tMaxSubstitutions=100,this.maxLength=256,this.setRankedDictionaries()}setOptions(t={}){t.l33tTable&&(this.l33tTable=t.l33tTable,this.trieNodeRoot=ut(t.l33tTable,new Me)),t.dictionary&&(this.dictionary=t.dictionary,this.setRankedDictionaries()),t.translations&&this.setTranslations(t.translations),t.graphs&&(this.graphs=t.graphs),t.useLevenshteinDistance!==void 0&&(this.useLevenshteinDistance=t.useLevenshteinDistance),t.levenshteinThreshold!==void 0&&(this.levenshteinThreshold=t.levenshteinThreshold),t.l33tMaxSubstitutions!==void 0&&(this.l33tMaxSubstitutions=t.l33tMaxSubstitutions),t.maxLength!==void 0&&(this.maxLength=t.maxLength)}setTranslations(t){if(this.checkCustomTranslations(t))this.translations=t;else throw new Error("Invalid translations object fallback to keys")}checkCustomTranslations(t){let n=!0;return Object.keys(Je).forEach(a=>{if(a in t){const s=a;Object.keys(Je[s]).forEach(o=>{o in t[s]||(n=!1)})}else n=!1}),n}setRankedDictionaries(){const t={},n={};Object.keys(this.dictionary).forEach(a=>{t[a]=lt(this.dictionary[a]),n[a]=this.getRankedDictionariesMaxWordSize(this.dictionary[a])}),this.rankedDictionaries=t,this.rankedDictionariesMaxWordSize=n}getRankedDictionariesMaxWordSize(t){const n=t.map(a=>typeof a!="string"?a.toString().length:a.length);return n.length===0?0:n.reduce((a,s)=>Math.max(a,s),-1/0)}buildSanitizedRankedDictionary(t){const n=[];return t.forEach(a=>{const s=typeof a;(s==="string"||s==="number"||s==="boolean")&&n.push(a.toString().toLowerCase())}),lt(n)}extendUserInputsDictionary(t){this.dictionary.userInputs||(this.dictionary.userInputs=[]);const n=[...this.dictionary.userInputs,...t];this.rankedDictionaries.userInputs=this.buildSanitizedRankedDictionary(n),this.rankedDictionariesMaxWordSize.userInputs=this.getRankedDictionariesMaxWordSize(n)}addMatcher(t,n){this.matchers[t]||(this.matchers[t]=n)}}const L=new us;class cs{constructor(t){this.defaultMatch=t}match({password:t}){const n=t.split("").reverse().join("");return this.defaultMatch({password:n}).map(a=>X(B({},a),{token:a.token.split("").reverse().join(""),reversed:!0,i:t.length-1-a.j,j:t.length-1-a.i}))}}class ds{constructor({substr:t,limit:n,trieRoot:a}){this.buffer=[],this.finalPasswords=[],this.substr=t,this.limit=n,this.trieRoot=a}getAllPossibleSubsAtIndex(t){const n=[];let a=this.trieRoot;for(let s=t;s<this.substr.length;s+=1){const o=this.substr.charAt(s);if(a=a.getChild(o),!a)break;n.push(a)}return n}helper({onlyFullSub:t,isFullSub:n,index:a,subIndex:s,changes:o,lastSubLetter:l,consecutiveSubCount:i}){if(this.finalPasswords.length>=this.limit)return;if(a===this.substr.length){t===n&&this.finalPasswords.push({password:this.buffer.join(""),changes:o});return}const r=[...this.getAllPossibleSubsAtIndex(a)];let u=!1;for(let c=a+r.length-1;c>=a;c-=1){const f=r[c-a];if(f.isTerminal()){if(l===f.parents.join("")&&i>=3)continue;u=!0;const d=f.subs;for(const h of d){this.buffer.push(h);const p=o.concat({i:s,letter:h,substitution:f.parents.join("")});if(this.helper({onlyFullSub:t,isFullSub:n,index:c+1,subIndex:s+h.length,changes:p,lastSubLetter:f.parents.join(""),consecutiveSubCount:l===f.parents.join("")?i+1:1}),this.buffer.pop(),this.finalPasswords.length>=this.limit)return}}}if(!t||!u){const c=this.substr.charAt(a);this.buffer.push(c),this.helper({onlyFullSub:t,isFullSub:n&&!u,index:a+1,subIndex:s+1,changes:o,lastSubLetter:l,consecutiveSubCount:i}),this.buffer.pop()}}getAll(){return this.helper({onlyFullSub:!0,isFullSub:!0,index:0,subIndex:0,changes:[],lastSubLetter:void 0,consecutiveSubCount:0}),this.helper({onlyFullSub:!1,isFullSub:!0,index:0,subIndex:0,changes:[],lastSubLetter:void 0,consecutiveSubCount:0}),this.finalPasswords}}const fs=(e,t,n)=>new ds({substr:e,limit:t,trieRoot:n}).getAll(),ps=(e,t,n)=>{const s=e.changes.filter(u=>u.i<t).reduce((u,c)=>u-c.letter.length+c.substitution.length,t),o=e.changes.filter(u=>u.i>=t&&u.i<=n),l=o.reduce((u,c)=>u-c.letter.length+c.substitution.length,n-t+s),i=[],r=[];return o.forEach(u=>{i.findIndex(f=>f.letter===u.letter&&f.substitution===u.substitution)<0&&(i.push({letter:u.letter,substitution:u.substitution}),r.push(`${u.substitution} -> ${u.letter}`))}),{i:s,j:l,subs:i,subDisplay:r.join(", ")}};class hs{constructor(t){this.defaultMatch=t}isAlreadyIncluded(t,n){return t.some(a=>Object.entries(a).every(([s,o])=>s==="subs"||o===n[s]))}match({password:t}){const n=[],a=fs(t,L.l33tMaxSubstitutions,L.trieNodeRoot);let s=!1,o=!0;return a.forEach(l=>{if(s)return;const i=this.defaultMatch({password:l.password,useLevenshtein:o});o=!1,i.forEach(r=>{s||(s=r.i===0&&r.j===t.length-1);const u=ps(l,r.i,r.j),c=t.slice(u.i,+u.j+1||9e9),f=B(X(B({},r),{l33t:!0,token:c}),u),d=this.isAlreadyIncluded(n,f);c.toLowerCase()!==r.matchedWord&&!d&&n.push(f)})}),n.filter(l=>l.token.length>1)}}class gs{constructor(){this.l33t=new hs(this.defaultMatch),this.reverse=new cs(this.defaultMatch)}match({password:t}){const n=[...this.defaultMatch({password:t}),...this.reverse.match({password:t}),...this.l33t.match({password:t})];return we(n)}defaultMatch({password:t,useLevenshtein:n=!0}){const a=[],s=t.length,o=t.toLowerCase();return Object.keys(L.rankedDictionaries).forEach(l=>{const i=L.rankedDictionaries[l],r=L.rankedDictionariesMaxWordSize[l],u=Math.min(r,s);for(let c=0;c<s;c+=1){const f=Math.min(c+u,s);for(let d=c;d<f;d+=1){const h=o.slice(c,+d+1||9e9),p=h in i;let y={};const m=c===0&&d===s-1;L.useLevenshteinDistance&&m&&!p&&n&&(y=is(h,i,L.levenshteinThreshold));const g=Object.keys(y).length!==0;if(p||g){const v=g?y.levenshteinDistanceEntry:h,C=i[v];a.push(B({pattern:"dictionary",i:c,j:d,token:t.slice(c,+d+1||9e9),matchedWord:h,rank:C,dictionaryName:l,reversed:!1,l33t:!1},y))}}}}),a}}class ms{match({password:t,regexes:n=ts}){const a=[];return Object.keys(n).forEach(s=>{const o=n[s];o.lastIndex=0;let l;for(;l=o.exec(t);)if(l){const i=l[0];a.push({pattern:"regex",token:i,i:l.index,j:l.index+l[0].length-1,regexName:s,regexMatch:l})}}),we(a)}}var ve={nCk(e,t){let n=e;if(t>n)return 0;if(t===0)return 1;let a=1;for(let s=1;s<=t;s+=1)a*=n,a/=s,n-=1;return a},log10(e){return e===0?0:Math.log(e)/Math.log(10)},log2(e){return Math.log(e)/Math.log(2)},factorial(e){let t=1;for(let n=2;n<=e;n+=1)t*=n;return t}},vs=({token:e})=>{let t=ye(Ga,e.length);t===Number.POSITIVE_INFINITY&&(t=Number.MAX_VALUE);let n;return e.length===1?n=Ft+1:n=Nt+1,Math.max(t,n)},ys=({year:e,separator:t})=>{let a=Math.max(Math.abs(e-Ke),jt)*365;return t&&(a*=4),a};const bs=e=>{const t=e.split(""),n=t.filter(l=>l.match(Za)).length,a=t.filter(l=>l.match(Ka)).length;let s=0;const o=Math.min(n,a);for(let l=1;l<=o;l+=1)s+=ve.nCk(n+a,l);return s};var _s=e=>{const t=e.replace(Xa,"");if(t.match(Qa)||t.toLowerCase()===t)return 1;const n=[Bt,qa,Vt],a=n.length;for(let s=0;s<a;s+=1){const o=n[s];if(t.match(o))return 2}return bs(t)};const ct=(e,t)=>{let n=0,a=e.indexOf(t);for(;a>=0;)n+=1,a=e.indexOf(t,a+t.length);return n},Cs=({sub:e,token:t})=>{const n=t.toLowerCase(),a=ct(n,e.substitution),s=ct(n,e.letter);return{subbedCount:a,unsubbedCount:s}};var Ss=({l33t:e,subs:t,token:n})=>{if(!e)return 1;let a=1;return t.forEach(s=>{const{subbedCount:o,unsubbedCount:l}=Cs({sub:s,token:n});if(o===0||l===0)a*=2;else{const i=Math.min(l,o);let r=0;for(let u=1;u<=i;u+=1)r+=ve.nCk(l+o,u);a*=r}}),a},ws=({rank:e,reversed:t,l33t:n,subs:a,token:s,dictionaryName:o})=>{const l=e,i=_s(s),r=Ss({l33t:n,subs:a,token:s}),u=t&&2||1;let c;return o==="diceware"?c=ye(6,5)/2:c=l*i*r*u,{baseGuesses:l,uppercaseVariations:i,l33tVariations:r,calculation:c}},ks=({regexName:e,regexMatch:t,token:n})=>{const a={alphaLower:26,alphaUpper:26,alpha:52,alphanumeric:62,digits:10,symbols:33};if(e in a)return ye(a[e],n.length);switch(e){case"recentYear":return Math.max(Math.abs(parseInt(t[0],10)-Ke),jt)}return 0},Is=({baseGuesses:e,repeatCount:t})=>e*t,Ts=({token:e,ascending:t})=>{const n=e.charAt(0);let a=0;return["a","A","z","Z","0","1","9"].includes(n)?a=4:n.match(/\d/)?a=10:a=26,t||(a*=2),a*e.length};const Rs=e=>{let t=0;return Object.keys(e).forEach(n=>{const a=e[n];t+=a.filter(s=>!!s).length}),t/=Object.entries(e).length,t},Ms=({token:e,graph:t,turns:n})=>{const a=Object.keys(L.graphs[t]).length,s=Rs(L.graphs[t]);let o=0;const l=e.length;for(let i=2;i<=l;i+=1){const r=Math.min(n,i-1);for(let u=1;u<=r;u+=1)o+=ve.nCk(i-1,u-1)*a*ye(s,u)}return o};var $s=({graph:e,token:t,shiftedCount:n,turns:a})=>{let s=Ms({token:t,graph:e,turns:a});if(n){const o=t.length-n;if(n===0||o===0)s*=2;else{let l=0;for(let i=1;i<=Math.min(n,o);i+=1)l+=ve.nCk(n+o,i);s*=l}}return Math.round(s)},Ds=()=>ns;const Ps=(e,t)=>{let n=1;return e.token.length<t.length&&(e.token.length===1?n=Ft:n=Nt),n},dt={bruteforce:vs,date:ys,dictionary:ws,regex:ks,repeat:Is,sequence:Ts,spatial:$s,separator:Ds},Os=(e,t)=>dt[e]?dt[e](t):L.matchers[e]&&"scoring"in L.matchers[e]?L.matchers[e].scoring(t):0;var As=(e,t)=>{const n={};if("guesses"in e&&e.guesses!=null)return e;const a=Ps(e,t),s=Os(e.pattern,e);let o=0;typeof s=="number"?o=s:e.pattern==="dictionary"&&(o=s.calculation,n.baseGuesses=s.baseGuesses,n.uppercaseVariations=s.uppercaseVariations,n.l33tVariations=s.l33tVariations);const l=Math.max(o,a);return X(B(B({},e),n),{guesses:l,guessesLog10:ve.log10(l)})};const se={password:"",optimal:{},excludeAdditive:!1,separatorRegex:void 0,fillArray(e,t){const n=[];for(let a=0;a<e;a+=1){let s=[];t==="object"&&(s={}),n.push(s)}return n},makeBruteforceMatch(e,t){return{pattern:"bruteforce",token:this.password.slice(e,+t+1||9e9),i:e,j:t}},update(e,t){const n=e.j,a=As(e,this.password);let s=a.guesses;t>1&&(s*=this.optimal.pi[a.i-1][t-1]);let o=ve.factorial(t)*s;this.excludeAdditive||(o+=ye(Ya,t-1));let l=!1;Object.keys(this.optimal.g[n]).forEach(i=>{const r=this.optimal.g[n][i];parseInt(i,10)<=t&&r<=o&&(l=!0)}),l||(this.optimal.g[n][t]=o,this.optimal.m[n][t]=a,this.optimal.pi[n][t]=s)},bruteforceUpdate(e){let t=this.makeBruteforceMatch(0,e);this.update(t,1);for(let n=1;n<=e;n+=1){t=this.makeBruteforceMatch(n,e);const a=this.optimal.m[n-1];Object.keys(a).forEach(s=>{a[s].pattern!=="bruteforce"&&this.update(t,parseInt(s,10)+1)})}},unwind(e){const t=[];let n=e-1,a=0,s=1/0;const o=this.optimal.g[n];for(o&&Object.keys(o).forEach(l=>{const i=o[l];i<s&&(a=parseInt(l,10),s=i)});n>=0;){const l=this.optimal.m[n][a];t.unshift(l),n=l.i-1,a-=1}return t}};var qe={mostGuessableMatchSequence(e,t,n=!1){se.password=e,se.excludeAdditive=n;const a=e.length;let s=se.fillArray(a,"array");t.forEach(r=>{s[r.j].push(r)}),s=s.map(r=>r.sort((u,c)=>u.i-c.i)),se.optimal={m:se.fillArray(a,"object"),pi:se.fillArray(a,"object"),g:se.fillArray(a,"object")};for(let r=0;r<a;r+=1)s[r].forEach(u=>{u.i>0?Object.keys(se.optimal.m[u.i-1]).forEach(c=>{se.update(u,parseInt(c,10)+1)}):se.update(u,1)}),se.bruteforceUpdate(r);const o=se.unwind(a),l=o.length,i=this.getGuesses(e,l);return{password:e,guesses:i,guessesLog10:ve.log10(i),sequence:o}},getGuesses(e,t){const n=e.length;let a=0;return e.length===0?a=1:a=se.optimal.g[n-1][t],a}};class Es{match({password:t,omniMatch:n}){const a=[];let s=0;for(;s<t.length;){const l=this.getGreedyMatch(t,s),i=this.getLazyMatch(t,s);if(l==null)break;const{match:r,baseToken:u}=this.setMatchToken(l,i);if(r){const c=r.index+r[0].length-1,f=this.getBaseGuesses(u,n);a.push(this.normalizeMatch(u,c,r,f)),s=c+1}}return a.some(l=>l instanceof Promise)?Promise.all(a):a}normalizeMatch(t,n,a,s){const o={pattern:"repeat",i:a.index,j:n,token:a[0],baseToken:t,baseGuesses:0,repeatCount:a[0].length/t.length};return s instanceof Promise?s.then(l=>X(B({},o),{baseGuesses:l})):X(B({},o),{baseGuesses:s})}getGreedyMatch(t,n){const a=/(.+)\1+/g;return a.lastIndex=n,a.exec(t)}getLazyMatch(t,n){const a=/(.+?)\1+/g;return a.lastIndex=n,a.exec(t)}setMatchToken(t,n){const a=/^(.+?)\1+$/;let s,o="";if(n&&t[0].length>n[0].length){s=t;const l=a.exec(s[0]);l&&(o=l[1])}else s=n,s&&(o=s[1]);return{match:s,baseToken:o}}getBaseGuesses(t,n){const a=n.match(t);return a instanceof Promise?a.then(o=>qe.mostGuessableMatchSequence(t,o).guesses):qe.mostGuessableMatchSequence(t,a).guesses}}class Ls{constructor(){this.MAX_DELTA=5}match({password:t}){const n=[];if(t.length===1)return[];let a=0,s=null;const o=t.length;for(let l=1;l<o;l+=1){const i=t.charCodeAt(l)-t.charCodeAt(l-1);if(s==null&&(s=i),i!==s){const r=l-1;this.update({i:a,j:r,delta:s,password:t,result:n}),a=r,s=i}}return this.update({i:a,j:o-1,delta:s,password:t,result:n}),n}update({i:t,j:n,delta:a,password:s,result:o}){if(n-t>1||Math.abs(a)===1){const l=Math.abs(a);if(l>0&&l<=this.MAX_DELTA){const i=s.slice(t,+n+1||9e9),{sequenceName:r,sequenceSpace:u}=this.getSequence(i);return o.push({pattern:"sequence",i:t,j:n,token:s.slice(t,+n+1||9e9),sequenceName:r,sequenceSpace:u,ascending:a>0})}}return null}getSequence(t){let n="unicode",a=26;return Ha.test(t)?(n="lower",a=26):Wa.test(t)?(n="upper",a=26):es.test(t)&&(n="digits",a=10),{sequenceName:n,sequenceSpace:a}}}class Us{constructor(){this.SHIFTED_RX=/[~!@#$%^&*()_+QWERTYUIOP{}|ASDFGHJKL:"ZXCVBNM<>?]/}match({password:t}){const n=[];return Object.keys(L.graphs).forEach(a=>{const s=L.graphs[a];Ye(n,this.helper(t,s,a))}),we(n)}checkIfShifted(t,n,a){return!t.includes("keypad")&&this.SHIFTED_RX.test(n.charAt(a))?1:0}helper(t,n,a){let s;const o=[];let l=0;const i=t.length;for(;l<i-1;){let r=l+1,u=null,c=0;for(s=this.checkIfShifted(a,t,l);;){const f=t.charAt(r-1),d=n[f]||[];let h=!1,p=-1,y=-1;if(r<i){const m=t.charAt(r),g=d.length;for(let v=0;v<g;v+=1){const C=d[v];if(y+=1,C){const A=C.indexOf(m);if(A!==-1){h=!0,p=y,A===1&&(s+=1),u!==p&&(c+=1,u=p);break}}}}if(h)r+=1;else{r-l>2&&o.push({pattern:"spatial",i:l,j:r-1,token:t.slice(l,r),graph:a,turns:c,shiftedCount:s}),l=r;break}}}return o}}const Fs=new RegExp(`[${Jt.join("")}]`);class Oe{static getMostUsedSeparatorChar(t){const n=[...t.split("").filter(s=>Fs.test(s)).reduce((s,o)=>{const l=s.get(o);return l?s.set(o,l+1):s.set(o,1),s},new Map).entries()].sort(([s,o],[l,i])=>i-o);if(!n.length)return;const a=n[0];if(!(a[1]<2))return a[0]}static getSeparatorRegex(t){return new RegExp(`([^${t}
])(${t})(?!${t})`,"g")}match({password:t}){const n=[];if(t.length===0)return n;const a=Oe.getMostUsedSeparatorChar(t);if(a===void 0)return n;const s=Oe.getSeparatorRegex(a);for(const o of t.matchAll(s)){if(o.index===void 0)continue;const l=o.index+1;n.push({pattern:"separator",token:a,i:l,j:l})}return n}}class Ns{constructor(){this.matchers={date:as,dictionary:gs,regex:ms,repeat:Es,sequence:Ls,spatial:Us,separator:Oe}}match(t){const n=[],a=[];return[...Object.keys(this.matchers),...Object.keys(L.matchers)].forEach(o=>{if(!this.matchers[o]&&!L.matchers[o])return;const l=this.matchers[o]?this.matchers[o]:L.matchers[o].Matching,r=new l().match({password:t,omniMatch:this});r instanceof Promise?(r.then(u=>{Ye(n,u)}),a.push(r)):Ye(n,r)}),a.length>0?new Promise((o,l)=>{Promise.all(a).then(()=>{o(we(n))}).catch(i=>{l(i)})}):we(n)}}const xt=1,zt=xt*60,Gt=zt*60,Yt=Gt*24,qt=Yt*31,Wt=qt*12,js=Wt*100,xe={second:xt,minute:zt,hour:Gt,day:Yt,month:qt,year:Wt,century:js};class Bs{translate(t,n){let a=t;n!==void 0&&n!==1&&(a+="s");const{timeEstimation:s}=L.translations;return s[a].replace("{base}",`${n}`)}estimateAttackTimes(t){const n={onlineThrottling100PerHour:t/.027777777777777776,onlineNoThrottling10PerSecond:t/10,offlineSlowHashing1e4PerSecond:t/1e4,offlineFastHashing1e10PerSecond:t/1e10},a={onlineThrottling100PerHour:"",onlineNoThrottling10PerSecond:"",offlineSlowHashing1e4PerSecond:"",offlineFastHashing1e10PerSecond:""};return Object.keys(n).forEach(s=>{const o=n[s];a[s]=this.displayTime(o)}),{crackTimesSeconds:n,crackTimesDisplay:a,score:this.guessesToScore(t)}}guessesToScore(t){return t<1e3+5?0:t<1e6+5?1:t<1e8+5?2:t<1e10+5?3:4}displayTime(t){let n="centuries",a;const s=Object.keys(xe),o=s.findIndex(l=>t<xe[l]);return o>-1&&(n=s[o-1],o!==0?a=Math.round(t/xe[n]):n="ltSecond"),this.translate(n,a)}}var Vs=()=>null,Js=()=>({warning:L.translations.warnings.dates,suggestions:[L.translations.suggestions.dates]});const xs=(e,t)=>{let n=null;return t&&!e.l33t&&!e.reversed?e.rank<=10?n=L.translations.warnings.topTen:e.rank<=100?n=L.translations.warnings.topHundred:n=L.translations.warnings.common:e.guessesLog10<=4&&(n=L.translations.warnings.similarToCommon),n},zs=(e,t)=>{let n=null;return t&&(n=L.translations.warnings.wordByItself),n},Gs=(e,t)=>t?L.translations.warnings.namesByThemselves:L.translations.warnings.commonNames,Ys=(e,t)=>{let n=null;const a=e.dictionaryName,s=a==="lastnames"||a.toLowerCase().includes("firstnames");return a==="passwords"?n=xs(e,t):a.includes("wikipedia")?n=zs(e,t):s?n=Gs(e,t):a==="userInputs"&&(n=L.translations.warnings.userInputs),n};var qs=(e,t)=>{const n=Ys(e,t),a=[],s=e.token;return s.match(Bt)?a.push(L.translations.suggestions.capitalization):s.match(Vt)&&s.toLowerCase()!==s&&a.push(L.translations.suggestions.allUppercase),e.reversed&&e.token.length>=4&&a.push(L.translations.suggestions.reverseWords),e.l33t&&a.push(L.translations.suggestions.l33t),{warning:n,suggestions:a}},Ws=e=>e.regexName==="recentYear"?{warning:L.translations.warnings.recentYears,suggestions:[L.translations.suggestions.recentYears,L.translations.suggestions.associatedYears]}:{warning:null,suggestions:[]},Hs=e=>{let t=L.translations.warnings.extendedRepeat;return e.baseToken.length===1&&(t=L.translations.warnings.simpleRepeat),{warning:t,suggestions:[L.translations.suggestions.repeated]}},Qs=()=>({warning:L.translations.warnings.sequences,suggestions:[L.translations.suggestions.sequences]}),Ks=e=>{let t=L.translations.warnings.keyPattern;return e.turns===1&&(t=L.translations.warnings.straightRow),{warning:t,suggestions:[L.translations.suggestions.longerKeyboardPattern]}},Zs=()=>null;const ft={warning:null,suggestions:[]};class Xs{constructor(){this.matchers={bruteforce:Vs,date:Js,dictionary:qs,regex:Ws,repeat:Hs,sequence:Qs,spatial:Ks,separator:Zs},this.defaultFeedback={warning:null,suggestions:[]},this.setDefaultSuggestions()}setDefaultSuggestions(){this.defaultFeedback.suggestions.push(L.translations.suggestions.useWords,L.translations.suggestions.noNeed)}getFeedback(t,n){if(n.length===0)return this.defaultFeedback;if(t>2)return ft;const a=L.translations.suggestions.anotherWord,s=this.getLongestMatch(n);let o=this.getMatchFeedback(s,n.length===1);return o!=null?o.suggestions.unshift(a):o={warning:null,suggestions:[a]},o}getLongestMatch(t){let n=t[0];return t.slice(1).forEach(s=>{s.token.length>n.token.length&&(n=s)}),n}getMatchFeedback(t,n){return this.matchers[t.pattern]?this.matchers[t.pattern](t,n):L.matchers[t.pattern]&&"feedback"in L.matchers[t.pattern]?L.matchers[t.pattern].feedback(t,n):ft}}const Ht=()=>new Date().getTime(),el=(e,t,n)=>{const a=new Xs,s=new Bs,o=qe.mostGuessableMatchSequence(t,e),l=Ht()-n,i=s.estimateAttackTimes(o.guesses);return X(B(B({calcTime:l},o),i),{feedback:a.getFeedback(i.score,o.sequence)})},tl=(e,t)=>(t&&L.extendUserInputsDictionary(t),new Ns().match(e)),nl=(e,t)=>{const n=Ht(),a=tl(e,t);if(a instanceof Promise)throw new Error("You are using a Promised matcher, please use `zxcvbnAsync` for it.");return el(a,e,n)};const al=V({name:"StrengthMeter",components:{InputPassword:Ie.Password},props:{value:b.string,showInput:b.bool.def(!0),disabled:b.bool},emits:["score-change","change"],setup(e,{emit:t}){const n=I(""),{prefixCls:a}=Ae("strength-meter"),s=j(()=>{const{disabled:l}=e;if(l)return-1;const r=$(n)?nl($(n)).score:-1;return t("score-change",r),r});function o(l){n.value=l.target.value,t("change",l.target.value)}return ce(()=>{n.value=e.value||""}),{getPasswordStrength:s,handleChange:o,prefixCls:a,innerValueRef:n}}});const sl=["data-score"];function ll(e,t,n,a,s,o){const l=S("InputPassword");return _(),F("div",{class:ue([e.prefixCls,"relative"])},[e.showInput?(_(),E(l,x({key:0},e.$attrs,{allowClear:"",value:e.innerValueRef,onChange:e.handleChange,disabled:e.disabled}),Fe({_:2},[K(Object.keys(e.$slots),i=>({name:i,fn:P(r=>[_e(e.$slots,i,Ce(Ne(r||{})),void 0,!0)])}))]),1040,["value","onChange","disabled"])):Q("",!0),H("div",{class:ue(`${e.prefixCls}-bar`)},[H("div",{class:ue(`${e.prefixCls}-bar--fill`),"data-score":e.getPasswordStrength},null,10,sl)],2)],2)}const ol=J(al,[["render",ll],["__scopeId","data-v-06316133"]]),rl=yt(ol),il=V({name:"PositionSelectModal",components:{BasicModal:Pe,BasicTable:ge(()=>me(()=>import("./BasicTable-d435f501.js"),["js/BasicTable-d435f501.js","js/vue-vendor-24c7dc61.js","js/antd-vue-vendor-0d72f01e.js","js/index-52c8c841.js","js/useForm-14b2bc77.js","js/index-831af9dd.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css","js/helper-22dafba0.js","js/index-1c3affea.js","js/BasicModal-58413bab.js","js/useWindowSizeFn-8f085f6f.js","assets/BasicModal-d929f5ce.css","assets/index-ad7edbf1.css","assets/useForm-9101c3b7.css","js/JAreaLinkage-173780c9.js","js/areaDataUtil-cdeee717.js","js/china-area-data-vendor-556d14ee.js","js/useFormItem-86503382.js","js/JSelectUser-a44af43a.js","js/useSelectBiz-2f560b0b.js","js/props-8a7ac45b.js","js/JSelectBiz-55a9591f.js","assets/JSelectBiz-ba37f0a8.css","assets/JSelectUser-7fda8076.css","js/JSelectDept-a90caee3.js","js/index-f2fd5a28.js","js/useContextMenu-810f9346.js","assets/useContextMenu-aed8cfe5.css","assets/index-a95e0833.css","assets/JSelectDept-2ce3f5d2.css","js/JCodeEditor-66bd225e.js","js/codemirror-17b6f671.js","js/codemirror-26b29690.js","js/active-line-512fef49.js","assets/active-line-8a3c1e84.css","assets/JCodeEditor-d0a9ffd7.css","js/JPopup-2a779923.js","js/useMethods-f689b480.js","assets/JPopup-2f2ed00d.css","js/EasyCronInput-b2123242.js","assets/EasyCronInput-0e4d0046.css","js/JCheckbox-0b89d32a.js","assets/JCheckbox-ce9c44dd.css","js/JDictSelectTag-54dc3bdb.js","assets/JDictSelectTag-72919d86.css","js/JSelectUserByDept-bd619076.js","js/UserSelectByDepModal-db060ece.js","js/depart.api-339f4da6.js","assets/JSelectUserByDept-f5671717.css","js/JEditor-249b2194.js","js/index-b845562c.js","js/JImageUpload-d644253a.js","assets/JImageUpload-d7ba7f20.css","js/download-1ac6acce.js","js/index-f99b266a.js","assets/index-15cc10f8.css","js/JUpload-76e119c7.js","js/index-d508f1f4.js","assets/index-27837f17.css","assets/JUpload-557f03ea.css","js/index-6507b9cd.js","js/index-4d0525a5.js","js/UserSelectModal-d78c1490.js","assets/UserSelectModal-aaef1bbb.css","assets/index-89763e09.css","assets/BasicTable-adf414bd.css"]),{loading:!0})},props:X(B({},Mt),{modalTitle:{type:String,default:"职务选择"}}),emits:["register","getSelectResult"],setup(e,{emit:t,refs:n}){const[a,{closeModal:s}]=$e(),o=te(),l={canResize:!1,bordered:!0,size:"small",rowKey:e.rowKey},i=Object.assign({},$(e),$(o),l),[{rowSelection:r,visibleChange:u,indexColumnProps:c,getSelectResult:f,handleDeleteSelected:d,selectRows:h}]=Rt(et,i),p=I(e.params),y={labelCol:{span:4},baseColProps:{xs:24,sm:10,md:10,lg:10,xl:10,xxl:10},actionColOptions:{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8},schemas:[{label:"职务名称",field:"name",component:"JInput",colProps:{span:10}}]},m=[{title:"职务编码",dataIndex:"code",width:180,align:"left"},{title:"职务名称",dataIndex:"name"},{title:"职务等级",dataIndex:"postRank_dictText",width:180}],g={pagination:!1,showIndexColumn:!1,scroll:{y:390},size:"small",canResize:!1,bordered:!0,rowKey:"id",columns:[{title:"职务名称",dataIndex:"name",width:40},{title:"操作",dataIndex:"action",align:"center",width:40,slots:{customRender:"action"}}]};function v(){f((C,A)=>{t("getSelectResult",C,A),s()})}return{handleOk:v,getPositionList:et,register:a,visibleChange:u,getBindValue:i,formConfig:y,indexColumnProps:c,columns:m,rowSelection:r,selectedTable:g,selectRows:h,handleDeleteSelected:d,searchInfo:p}}}),ul=["onClick"];function cl(e,t,n,a,s,o){const l=S("BasicTable"),i=S("a-col"),r=S("Icon"),u=S("a-row"),c=S("BasicModal");return _(),F("div",null,[R(c,x(e.$attrs,{onRegister:e.register,title:e.modalTitle,width:"1100px",wrapClassName:"j-user-select-modal",onOk:e.handleOk,destroyOnClose:"",onVisibleChange:e.visibleChange}),{default:P(()=>[R(u,null,{default:P(()=>[R(i,{span:e.showSelected?18:24},{default:P(()=>[R(l,x({columns:e.columns,bordered:!0,useSearchForm:!0,formConfig:e.formConfig,api:e.getPositionList,searchInfo:e.searchInfo,rowSelection:e.rowSelection,indexColumnProps:e.indexColumnProps},e.getBindValue),null,16,["columns","formConfig","api","searchInfo","rowSelection","indexColumnProps"])]),_:1},8,["span"]),R(i,{span:e.showSelected?6:0},{default:P(()=>[R(l,x(e.selectedTable,{dataSource:e.selectRows,useSearchForm:!0,formConfig:{showActionButtonGroup:!1,baseRowStyle:{minHeight:"40px"}}}),{action:P(({record:f})=>[H("a",{href:"javascript:void(0)",onClick:d=>e.handleDeleteSelected(f)},[R(r,{icon:"ant-design:delete-outlined"})],8,ul)]),_:1},16,["dataSource"])]),_:1},8,["span"])]),_:1})]),_:1},16,["onRegister","title","onOk","onVisibleChange"])])}const dl=J(il,[["render",cl]]),fl=V({name:"JSelectPosition",components:{PositionSelectModal:dl,JSelectBiz:$t},inheritAttrs:!1,props:{value:b.oneOfType([b.string,b.array]),labelKey:{type:String,default:"name"},rowKey:{type:String,default:"id"},params:{type:Object,default:()=>{}}},emits:["options-change","change","update:value"],setup(e,{emit:t,refs:n}){const a=I(),[s,{openModal:o}]=Se(),[l]=de(e,"value","change",a),i=I([]);let r=Te({value:[],change:!1});const u=I(!1);fe("selectOptions",i),fe("selectValues",r),fe("loadingEcho",u);const c=I(!1),f=te();ce(()=>{e.value&&h()}),N(r,()=>{r&&(l.value=r.value)});function d(){c.value=!0,o(!0,{isUpdate:!1})}function h(){let m=e.value?e.value:[];m&&typeof m=="string"&&m!="null"&&m!="undefined"&&(l.value=m.split(","),r.value=m.split(","))}function p(m,g){i.value=m,l.value=g,r.value=g,t("update:value",g.join(","))}const y=Object.assign({},$(e),$(f));return{state:l,getBindValue:y,attrs:f,selectOptions:i,selectValues:r,loadingEcho:u,tag:c,regModal:s,setValue:p,handleOpen:d}}});function pl(e,t,n,a,s,o){const l=S("JSelectBiz"),i=S("PositionSelectModal");return _(),F("div",null,[R(l,x({onHandleOpen:e.handleOpen,loading:e.loadingEcho},e.attrs),null,16,["onHandleOpen","loading"]),R(i,x({onRegister:e.regModal,onGetSelectResult:e.setValue},e.getBindValue),null,16,["onRegister","onGetSelectResult"])])}const hl=J(fl,[["render",pl],["__scopeId","data-v-62d3e2f8"]]),gl=V({name:"UserSelectModal",components:{BasicModal:Pe,BasicTable:ge(()=>me(()=>import("./BasicTable-d435f501.js"),["js/BasicTable-d435f501.js","js/vue-vendor-24c7dc61.js","js/antd-vue-vendor-0d72f01e.js","js/index-52c8c841.js","js/useForm-14b2bc77.js","js/index-831af9dd.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css","js/helper-22dafba0.js","js/index-1c3affea.js","js/BasicModal-58413bab.js","js/useWindowSizeFn-8f085f6f.js","assets/BasicModal-d929f5ce.css","assets/index-ad7edbf1.css","assets/useForm-9101c3b7.css","js/JAreaLinkage-173780c9.js","js/areaDataUtil-cdeee717.js","js/china-area-data-vendor-556d14ee.js","js/useFormItem-86503382.js","js/JSelectUser-a44af43a.js","js/useSelectBiz-2f560b0b.js","js/props-8a7ac45b.js","js/JSelectBiz-55a9591f.js","assets/JSelectBiz-ba37f0a8.css","assets/JSelectUser-7fda8076.css","js/JSelectDept-a90caee3.js","js/index-f2fd5a28.js","js/useContextMenu-810f9346.js","assets/useContextMenu-aed8cfe5.css","assets/index-a95e0833.css","assets/JSelectDept-2ce3f5d2.css","js/JCodeEditor-66bd225e.js","js/codemirror-17b6f671.js","js/codemirror-26b29690.js","js/active-line-512fef49.js","assets/active-line-8a3c1e84.css","assets/JCodeEditor-d0a9ffd7.css","js/JPopup-2a779923.js","js/useMethods-f689b480.js","assets/JPopup-2f2ed00d.css","js/EasyCronInput-b2123242.js","assets/EasyCronInput-0e4d0046.css","js/JCheckbox-0b89d32a.js","assets/JCheckbox-ce9c44dd.css","js/JDictSelectTag-54dc3bdb.js","assets/JDictSelectTag-72919d86.css","js/JSelectUserByDept-bd619076.js","js/UserSelectByDepModal-db060ece.js","js/depart.api-339f4da6.js","assets/JSelectUserByDept-f5671717.css","js/JEditor-249b2194.js","js/index-b845562c.js","js/JImageUpload-d644253a.js","assets/JImageUpload-d7ba7f20.css","js/download-1ac6acce.js","js/index-f99b266a.js","assets/index-15cc10f8.css","js/JUpload-76e119c7.js","js/index-d508f1f4.js","assets/index-27837f17.css","assets/JUpload-557f03ea.css","js/index-6507b9cd.js","js/index-4d0525a5.js","js/UserSelectModal-d78c1490.js","assets/UserSelectModal-aaef1bbb.css","assets/index-89763e09.css","assets/BasicTable-adf414bd.css"]),{loading:!0})},props:X(B({},Mt),{modalTitle:{type:String,default:"角色选择"}}),emits:["register","getSelectResult"],setup(e,{emit:t,refs:n}){const[a,{closeModal:s}]=$e(),o=te(),l={canResize:!1,bordered:!0,size:"small",rowKey:$(e).rowKey},i=Object.assign({},$(e),$(o),l),[{rowSelection:r,indexColumnProps:u,visibleChange:c,getSelectResult:f}]=Rt(tt,i),d=I(e.params),h={baseColProps:{xs:24,sm:24,md:24,lg:14,xl:14,xxl:14},actionColOptions:{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8},schemas:[{label:"角色名称",field:"roleName",component:"Input"}]},p=[{title:"角色名称",dataIndex:"roleName",width:240,align:"left"},{title:"角色编码",dataIndex:"roleCode"}];function y(){f((m,g)=>{t("getSelectResult",m,g),s()})}return{config:l,handleOk:y,searchInfo:d,register:a,indexColumnProps:u,visibleChange:c,getRoleList:tt,formConfig:h,getBindValue:i,columns:p,rowSelection:r}}});function ml(e,t,n,a,s,o){const l=S("BasicTable"),i=S("BasicModal");return _(),F("div",null,[R(i,x(e.$attrs,{onRegister:e.register,title:e.modalTitle,width:"800px",onOk:e.handleOk,destroyOnClose:"",onVisibleChange:e.visibleChange}),{default:P(()=>[R(l,x({columns:e.columns},e.config,{useSearchForm:!0,formConfig:e.formConfig,api:e.getRoleList,searchInfo:e.searchInfo,rowSelection:e.rowSelection,indexColumnProps:e.indexColumnProps}),null,16,["columns","formConfig","api","searchInfo","rowSelection","indexColumnProps"])]),_:1},16,["onRegister","title","onOk","onVisibleChange"])])}const vl=J(gl,[["render",ml]]),yl=V({name:"JSelectRole",components:{RoleSelectModal:vl,JSelectBiz:$t},inheritAttrs:!1,props:{value:b.oneOfType([b.string,b.array]),labelKey:{type:String,default:"roleName"},rowKey:{type:String,default:"id"},params:{type:Object,default:()=>{}}},emits:["options-change","change"],setup(e,{emit:t,refs:n}){const a=I(),[s,{openModal:o}]=Se(),[l]=de(e,"value","change",a),i=I([]);let r=Te({value:[],change:!1});const u=I(!1);fe("selectOptions",i),fe("selectValues",r),fe("loadingEcho",u);const c=I(!1),f=te();ce(()=>{e.value&&h(),e.value||(r.value=[])}),N(r,()=>{r&&(l.value=r.value)});function d(){c.value=!0,o(!0,{isUpdate:!1})}function h(){let m=e.value?e.value:[];m&&typeof m=="string"&&m!="null"&&m!="undefined"?(l.value=m.split(","),r.value=m.split(",")):r.value=m}function p(m,g){i.value=m,l.value=g,r.value=g}const y=Object.assign({},$(e),$(f));return{state:l,attrs:f,getBindValue:y,selectOptions:i,selectValues:r,loadingEcho:u,tag:c,regModal:s,setValue:p,handleOpen:d}}});function bl(e,t,n,a,s,o){const l=S("JSelectBiz"),i=S("RoleSelectModal");return _(),F("div",null,[R(l,x({onHandleOpen:e.handleOpen,loading:e.loadingEcho},e.attrs),null,16,["onHandleOpen","loading"]),R(i,x({onRegister:e.regModal,onGetSelectResult:e.setValue},e.getBindValue),null,16,["onRegister","onGetSelectResult"])])}const _l=J(yl,[["render",bl],["__scopeId","data-v-995a92d0"]]),Cl=V({name:"JAreaSelect",props:{value:[Array,String],province:[String],city:[String],area:[String],level:b.number.def(3),disabled:b.bool.def(!1),codeField:b.string,size:b.string,placeholder:b.string,formValues:b.any,allowClear:b.bool.def(!1),getPopupContainer:{type:Function,default:e=>e==null?void 0:e.parentNode}},emits:["change","update:value","update:area","update:city","update:province"],setup(e,{emit:t,refs:n}){const a=I([]),s=Te({province:"",city:"",area:""}),[o]=de(e,"value","change",a),l=j(()=>s.province?Re(s.province):[]),i=j(()=>s.city?Re(s.city):[]);ce(()=>{e&&r()}),N(s,d=>{e.value||(t("update:province",s.province),t("update:city",s.city),t("update:area",s.area))});function r(){if(e.value)if(Array.isArray(e.value))s.province=e.value[0],s.city=e.value[1]?e.value[1]:"",s.area=e.value[2]?e.value[2]:"";else{let d=Ge(e.value,e.level);d&&(s.province=d[0],s.city=e.level>=2&&d[1]?d[1]:"",s.area=e.level>=3&&d[2]?d[2]:"")}else s.province=e.province?e.province:"",s.city=e.city?e.city:"",s.area=e.area?e.area:""}function u(d){var h,p;s.city=d&&((h=Re(d)[0])==null?void 0:h.value),s.area=s.city&&((p=Re(s.city)[0])==null?void 0:p.value),o.value=e.level<=1?d:e.level<=2?s.city:s.area,t("update:value",$(o))}function c(d){var h;s.area=d&&((h=Re(d)[0])==null?void 0:h.value),o.value=e.level<=2?d:s.area,t("update:value",$(o))}function f(d){o.value=d,t("update:value",$(o))}return X(B({},Tt(s)),{provinceOptions:Bn,cityOptions:l,areaOptions:i,proChange:u,cityChange:c,areaChange:f})}});const Sl={class:"area-select"};function wl(e,t,n,a,s,o){const l=S("a-select-option"),i=S("a-select"),r=S("a-form-item-rest");return _(),E(r,null,{default:P(()=>[H("div",Sl,[R(i,{value:e.province,"onUpdate:value":t[0]||(t[0]=u=>e.province=u),onChange:e.proChange,allowClear:"",disabled:e.disabled},{default:P(()=>[(_(!0),F(Y,null,K(e.provinceOptions,u=>(_(),E(l,{key:`${u.value}`,value:u.value},{default:P(()=>[W(q(u.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange","disabled"]),e.level>=2?(_(),E(i,{key:0,value:e.city,"onUpdate:value":t[1]||(t[1]=u=>e.city=u),onChange:e.cityChange,disabled:e.disabled},{default:P(()=>[(_(!0),F(Y,null,K(e.cityOptions,u=>(_(),E(l,{key:`${u.value}`,value:u.value},{default:P(()=>[W(q(u.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange","disabled"])):Q("",!0),e.level>=3?(_(),E(i,{key:1,value:e.area,"onUpdate:value":t[2]||(t[2]=u=>e.area=u),onChange:e.areaChange,disabled:e.disabled},{default:P(()=>[(_(!0),F(Y,null,K(e.areaOptions,u=>(_(),E(l,{key:`${u.value}`,value:u.value},{default:P(()=>[W(q(u.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange","disabled"])):Q("",!0)])]),_:1})}const kl=J(Cl,[["render",wl],["__scopeId","data-v-0e771ab6"]]),Il=V({name:"JSelectInput",props:{options:b.array.def(()=>[])},emits:["change","update:value"],setup(e,{emit:t,attrs:n}){const a=I([]);N(()=>e.options,()=>{a.value=[...e.options]},{deep:!0,immediate:!0});const s=j(()=>Object.assign({showSearch:!0},e,n,{options:a.value}));function o(...r){i(r[0]),t("change",...r),t("update:value",r[0])}function l(r){let u=a.value.findIndex(c=>c.value.toString()===r.toString())!==-1;!u&&r?(i(r),a.value.push({value:r,searchAdd:!0})):u&&o(r)}function i(r=""){let u=[];a.value.forEach((c,f)=>{var d;c.searchAdd&&((d=c.value)!=null?d:"").toString()!==r.toString()&&u.push(f)});for(let c of u.reverse())a.value.splice(c,1)}return{bindProps:s,onChange:o,onSearch:l}}});function Tl(e,t,n,a,s,o){const l=S("a-select");return _(),E(l,x(e.bindProps,{onChange:e.onChange,onSearch:e.onSearch}),null,16,["onChange","onSearch"])}const Rl=J(Il,[["render",Tl]]),{createMessage:pt,createErrorModal:gr}=De(),Ml=V({name:"JCategorySelect",components:{},inheritAttrs:!1,props:{value:b.oneOfType([b.string,b.array]),placeholder:{type:String,default:"请选择",required:!1},disabled:{type:Boolean,default:!1,required:!1},condition:{type:String,default:"",required:!1},multiple:{type:[Boolean,String],default:!1},loadTriggleChange:{type:Boolean,default:!1,required:!1},pid:{type:String,default:"",required:!1},pcode:{type:String,default:"",required:!1},back:{type:String,default:"",required:!1}},emits:["options-change","change","update:value"],setup(e,{emit:t,refs:n}){const a=I([]),s=I([]),o=I(),l=te(),[i]=de(e,"value","change",a);N(()=>e.value,()=>{u()},{deep:!0}),N(()=>e.pcode,()=>{r()},{deep:!0,immediate:!0});function r(){let g={pid:e.pid,pcode:e.pcode?e.pcode:"0",condition:e.condition};nt(g).then(v=>{if(v&&v.length>0){for(let C of v)C.value=C.key,C.leaf==!1?C.isLeaf=!1:C.leaf==!0&&(C.isLeaf=!0);s.value=v}})}function u(){!e.value||e.value=="0"?e.multiple?o.value=[]:o.value={value:null,label:null}:un({ids:e.value}).then(g=>{let v=e.value.split(",");o.value=g.map((C,A)=>({key:v[A],value:v[A],label:C})),e.multiple||(o.value=o.value[0]),c(g[0])})}function c(g){!e.multiple&&e.loadTriggleChange&&f(e.value,g)}function f(g,v){let C={};e.back&&(C[e.back]=v),t("change",g,C),t("update:value",g)}function d(g){let v=g.dataRef;return new Promise(C=>{if(g.children&&g.children.length>0){C();return}let A=v.key,M={pid:A,condition:e.condition};nt(M).then(U=>{if(U){for(let T of U)T.value=T.key,T.leaf==!1?T.isLeaf=!1:T.leaf==!0&&(T.isLeaf=!0);h(A,U,s.value),C()}})})}function h(g,v,C){if(C&&C.length>0)for(let A of C)if(A.key==g){!v||v.length==0?A.isLeaf=!0:A.children=v;break}else h(g,v,A.children)}function p(g){if(!g)t("change",""),o.value="",t("update:value","");else if(Array.isArray(g)){let v=[],C=g.map(A=>(v.push(A.label),A.value));f(C.join(","),v.join(",")),o.value=g}else f(g.value,g.label),o.value=g}function y(){return s}function m(){let g=e.condition;return new Promise((v,C)=>{if(!g)v();else try{let A=JSON.parse(g);typeof A=="object"&&A?v():(pt.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),C())}catch(A){pt.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),C()}})}return{state:i,attrs:l,onChange:p,treeData:s,treeValue:o,asyncLoadTreeData:d}}});function $l(e,t,n,a,s,o){const l=S("a-tree-select");return _(),E(l,{allowClear:"",labelInValue:"",style:{width:"100%"},disabled:e.disabled,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,loadData:e.asyncLoadTreeData,value:e.treeValue,treeData:e.treeData,multiple:e.multiple,onChange:e.onChange},null,8,["disabled","placeholder","loadData","value","treeData","multiple","onChange"])}const Dl=J(Ml,[["render",$l]]),{createMessage:mr,createErrorModal:vr}=De(),Pl=V({name:"JSelectMultiple",components:{},inheritAttrs:!1,props:{value:b.oneOfType([b.string,b.array]),placeholder:{type:String,default:"请选择",required:!1},readOnly:{type:Boolean,required:!1,default:!1},options:{type:Array,default:()=>[],required:!1},triggerChange:{type:Boolean,required:!1,default:!0},spliter:{type:String,required:!1,default:","},popContainer:{type:String,default:"",required:!1},dictCode:{type:String,required:!1},disabled:{type:Boolean,default:!1},useDicColor:{type:Boolean,default:!1}},emits:["options-change","change","input","update:value"],setup(e,{emit:t,refs:n}){const a=I([]),s=I(e.value?e.value.split(e.spliter):[]),o=I([]),l=te(),[i]=de(e,"value","change",a);It(()=>{e.dictCode?c():o.value=e.options}),N(()=>e.value,d=>{d?s.value=e.value.split(e.spliter):s.value=[]}),N(()=>e.options,()=>{e.dictCode||(o.value=e.options)});function r(d){e.triggerChange?(t("change",d.join(e.spliter)),t("update:value",d.join(e.spliter))):(t("input",d.join(e.spliter)),t("update:value",d.join(e.spliter)))}function u(d){return e.popContainer?document.querySelector(e.popContainer):d==null?void 0:d.parentNode}function c(){let d=e.dictCode||"";d.indexOf(",")>0&&d.indexOf(" ")>0&&(d=encodeURI(d)),cn(d).then(h=>{h?o.value=h.map(p=>({value:p.value,label:p.text,color:p.color})):o.value=[]})}function f(d,h){return h.children()[0].children.toLowerCase().indexOf(d.toLowerCase())>=0}return{state:i,attrs:l,dictOptions:o,onChange:r,arrayValue:s,getParentContainer:u,filterOption:f}}});function Ol(e,t,n,a,s,o){const l=S("a-select-option"),i=S("a-select");return _(),E(i,{value:e.arrayValue,onChange:e.onChange,mode:"multiple","filter-option":e.filterOption,disabled:e.disabled,placeholder:e.placeholder,allowClear:"",getPopupContainer:e.getParentContainer},{default:P(()=>[(_(!0),F(Y,null,K(e.dictOptions,(r,u)=>(_(),E(l,{key:u,getPopupContainer:e.getParentContainer,value:r.value},{default:P(()=>[H("span",{class:ue([e.useDicColor&&r.color?"colorText":""]),style:Pn({backgroundColor:`${e.useDicColor&&r.color}`})},q(r.text||r.label),7)]),_:2},1032,["getPopupContainer","value"]))),128))]),_:1},8,["value","onChange","filter-option","disabled","placeholder","getPopupContainer"])}const Al=J(Pl,[["render",Ol],["__scopeId","data-v-1fb80842"]]),ht=Te({getColumns:"/online/cgreport/api/getRpColumns/",getData:"/online/cgreport/api/getData/"}),El=V({name:"JPopupDict",components:{JPopupOnlReportModal:Jn},inheritAttrs:!1,props:{dictCode:b.string.def(""),value:b.string.def(""),sorter:b.string.def(""),multi:b.bool.def(!1),param:b.object.def({}),spliter:b.string.def(","),getContainer:b.func},emits:["update:value","register","change"],setup(e,{emit:t}){const{createMessage:n}=De(),a=te(),s=I(e.multi?[]:""),o=I([]),l=I(""),i=I(!1),r=e.dictCode.split(",")[0],u=e.dictCode.split(",")[1],c=e.dictCode.split(",")[2];(!r||!c||!u)&&n.error("popupDict参数未正确配置!");const[f,{openModal:d}]=Se();function h(){!e.disabled&&d(!0)}N(()=>e.value,g=>{const v=()=>{e.multi?s.value=g&&g.length>0?g.split(e.spliter):[]:s.value=g!=null?g:""};e.value||e.defaultValue?l.value?y({callBack:v}):p({callBack:v}):v()},{immediate:!0}),N(()=>s.value,g=>{let v;e.multi?v=g.join(","):v=g,ze(()=>{t("change",v),t("update:value",v)})});function p({callBack:g}){i.value=!0;let v=`${ht.getColumns}${r}`;Z.get({url:v},{isTransformResponse:!1,successMessageMode:"none"}).then(C=>{C.success&&(l.value=C.result.cgRpConfigId,y({callBack:g}))}).catch(C=>{i.value=!1,g==null||g()})}function y({callBack:g}){i.value=!0;let v=`${ht.getData}${$(l)}`;Z.get({url:v,params:{["force_"+c]:e.value||e.defaultValue}},{isTransformResponse:!1,successMessageMode:"none"}).then(C=>{var M;let A=C.result;(M=A.records)!=null&&M.length&&(o.value=A.records.map(U=>({value:U[c],text:U[u]})))}).finally(()=>{i.value=!1,g==null||g()})}function m(g){const v=[],C=[];let A;g.forEach(M=>{v.push({value:M[c],text:M[u]}),C.push(M[c])}),o.value=v,e.multi?(s.value=C,A=C.join(e.spliter)):(s.value=C[0],A=C[0]),ze(()=>{t("change",A),t("update:value",A)})}return{showText:s,attrs:a,regModal:f,handleOpen:h,callBack:m,code:r,options:o,loading:i}}});const Ll={class:"components-input-demo-presuffix"};function Ul(e,t,n,a,s,o){const l=S("a-select-option"),i=S("a-select"),r=S("JPopupOnlReportModal");return _(),F("div",Ll,[R(i,x({value:e.showText,"onUpdate:value":t[0]||(t[0]=u=>e.showText=u)},e.attrs,{mode:e.multi?"multiple":"",onClick:e.handleOpen,readOnly:"",loading:e.loading}),{default:P(()=>[(_(!0),F(Y,null,K(e.options,u=>(_(),E(l,{value:u.value},{default:P(()=>[W(q(u.text),1)]),_:2},1032,["value"]))),256))]),_:1},16,["value","mode","onClick","loading"]),R(r,{onRegister:e.regModal,code:e.code,multi:e.multi,sorter:e.sorter,groupId:"",param:e.param,onOk:e.callBack,getContainer:e.getContainer},null,8,["onRegister","code","multi","sorter","param","onOk","getContainer"])])}const Fl=J(El,[["render",Ul],["__scopeId","data-v-812c231e"]]),Nl=V({__name:"JSwitch",props:{value:b.oneOfType([b.string,b.number]),options:b.array.def(()=>["Y","N"]),labelOptions:b.array.def(()=>["是","否"]),query:b.bool.def(!1),disabled:b.bool.def(!1)},emits:["change","update:value"],setup(e,{emit:t}){const n=e,{prefixCls:a}=Ae("j-switch"),s=te(),o=I(!1),[l]=de(n,"value","change");N(()=>n.value,f=>{n.query||(!f&&!n.options.includes(f)?(o.value=!1,c(n.options[1])):o.value=n.options[0]==f)},{immediate:!0});const i=j(()=>{let f=[];return f.push({value:n.options[0],label:n.labelOptions[0]}),f.push({value:n.options[1],label:n.labelOptions[1]}),f});function r(f){let d=f===!1?n.options[1]:n.options[0];c(d)}function u(f){c(f)}function c(f){t("change",f),t("update:value",f)}return(f,d)=>{const h=S("a-select"),p=S("a-switch");return _(),F("div",{class:ue($(a))},[e.query?(_(),E(h,x({key:0,value:$(l),"onUpdate:value":d[0]||(d[0]=y=>On(l)?l.value=y:null),options:i.value,disabled:e.disabled,style:{width:"100%"}},$(s),{onChange:u}),null,16,["value","options","disabled"])):(_(),E(p,x({key:1,checked:o.value,"onUpdate:checked":d[1]||(d[1]=y=>o.value=y),disabled:e.disabled},$(s),{onChange:r}),null,16,["checked","disabled"]))],2)}}});const jl=V({__name:"JTreeDict",props:{value:b.string.def(""),field:b.string.def("id"),parentCode:b.string.def(""),async:b.bool.def(!1)},emits:["change","update:value"],setup(e,{emit:t}){const n=e,{prefixCls:a}=Ae("j-tree-dict"),s=te(),o=I([]),l=I(null);N(()=>n.value,()=>i(),{deep:!0,immediate:!0}),N(()=>n.parentCode,()=>r(),{deep:!0,immediate:!0});function i(){return z(this,null,function*(){if(!n.value||n.value=="0")l.value={value:null,label:null};else{let p={field:n.field,val:n.value},y=yield Z.get({url:"/sys/category/loadOne",params:p});l.value={value:n.value,label:y.name}}})}function r(){return z(this,null,function*(){let p={async:n.async,pcode:n.parentCode},y=yield Z.get({url:"/sys/category/loadTreeRoot",params:p});o.value=[...y],f(y)})}function u(p){return z(this,null,function*(){if(!n.async||p.dataRef.children)return Promise.resolve();let y=p.dataRef.key,m={pid:y},g=yield Z.get({url:"/sys/category/loadTreeChildren",params:m});return f(g),c(y,g,o.value),o.value=[...o.value],Promise.resolve()})}function c(p,y,m){if(m&&m.length>0)for(let g of m)if(g.key==p){!y||y.length==0?g.leaf=!0:g.children=y;break}else c(p,y,g.children)}function f(p){let y=n.field=="code"?"code":"key";for(let m of p)m.value=m[y],m.isLeaf=m.leaf,m.children&&m.children.length>0&&f(m.children)}function d(p){h(p?p.value:""),l.value=p}function h(p){t("change",p),t("update:value",p)}return(p,y)=>(_(),E($(Qe),x({class:$(a),value:l.value,treeData:o.value,loadData:u,allowClear:"",labelInValue:"",dropdownStyle:{maxHeight:"400px",overflow:"auto"},style:{width:"100%"}},$(s),{onChange:d}),null,16,["class","value","treeData"]))}});const Bl=V({name:"JInput",inheritAttrs:!1,props:{value:b.string.def(""),type:b.string.def(re.JINPUT_QUERY_LIKE),placeholder:b.string.def(""),trim:b.bool.def(!1)},emits:["change","update:value"],setup(e,{emit:t}){const n=te(),a=I(""),s=j(()=>Ee(Object.assign({},$(e),$(n)),["value"]));N(()=>e.type,i=>{i&&l({target:{value:$(a)}})}),N(()=>e.value,()=>{o()},{immediate:!0});function o(){if(!e.value)a.value="";else{let i=e.value;switch(e.type){case re.JINPUT_QUERY_LIKE:i.indexOf("*")!=-1&&(i=i.substring(1,i.length-1));break;case re.JINPUT_QUERY_NE:i=i.substring(1);break;case re.JINPUT_QUERY_GE:i=i.substring(2);break;case re.JINPUT_QUERY_LE:i=i.substring(2);break;default:}a.value=i}}function l(i){var u,c;let r=(c=(u=i==null?void 0:i.target)==null?void 0:u.value)!=null?c:"";switch(r&&e.trim&&(r=r.trim()),e.type){case re.JINPUT_QUERY_LIKE:r="*"+r+"*";break;case re.JINPUT_QUERY_NE:r="!"+r;break;case re.JINPUT_QUERY_GE:r=">="+r;break;case re.JINPUT_QUERY_LE:r="<="+r;break;default:}t("change",r),t("update:value",r)}return{showText:a,attrs:n,getBindValue:s,backValue:l}}});function Vl(e,t,n,a,s,o){const l=S("a-input");return _(),E(l,x(e.getBindValue,{value:e.showText,"onUpdate:value":t[0]||(t[0]=i=>e.showText=i),onInput:e.backValue}),null,16,["value","onInput"])}const Jl=J(Bl,[["render",Vl]]);const xl=V({__name:"JTreeSelect",props:{value:b.string.def(""),placeholder:b.string.def("请选择"),dict:b.string.def("id"),parentCode:b.string.def(""),pidField:b.string.def("pid"),pidValue:b.string.def(""),hasChildField:b.string.def(""),converIsLeafVal:b.integer.def(1),condition:b.string.def(""),multiple:b.bool.def(!1),loadTriggleChange:b.bool.def(!1),reload:b.number.def(1),url:b.string.def(""),params:b.object.def({}),treeCheckAble:b.bool.def(!1)},emits:["change","update:value"],setup(e,{emit:t}){const n=e,a=te(),{createMessage:s}=De(),o=I([]),l=I(null),i=I(""),r=I(""),u=I("");N(()=>n.value,()=>c(),{deep:!0,immediate:!0}),N(()=>n.dict,()=>{d(),h()},{deep:!0,immediate:!0}),N(()=>n.reload,()=>z(this,null,function*(){o.value=[],yield h()}),{immediate:!1});function c(){return z(this,null,function*(){if(!n.value||n.value=="0")n.multiple?l.value=[]:l.value={label:null,value:null};else if(n.url)M();else{let T={key:n.value},O=yield Z.get({url:`/sys/dict/loadDictItem/${n.dict}`,params:T},{isTransformResponse:!1});if(O.success){if(n.multiple){let w=n.value.split(",");l.value=O.result.map((D,G)=>({key:w[G],value:w[G],label:D}))}else l.value={key:n.value,value:n.value,label:O.result[0]};f(O.result[0])}}})}function f(T){!n.multiple&&n.loadTriggleChange&&t("change",n.value,T)}function d(){var O;let T=(O=n.dict)==null?void 0:O.split(",");i.value=T[0],r.value=T[1],u.value=T[2]}function h(){return z(this,null,function*(){let T={pid:n.pidValue,pidField:n.pidField,hasChildField:n.hasChildField,converIsLeafVal:n.converIsLeafVal,condition:n.condition,tableName:$(i),text:$(r),code:$(u)},O=yield Z.get({url:"/sys/dict/loadTreeData",params:T},{isTransformResponse:!1});if(O.success&&O.result){for(let w of O.result)w.value=w.key,w.isLeaf=!!w.leaf;o.value=[...O.result]}})}function p(T){return z(this,null,function*(){if(T.dataRef.children||n.url)return Promise.resolve();let O=T.dataRef.key,w={pid:O,pidField:n.pidField,hasChildField:n.hasChildField,converIsLeafVal:n.converIsLeafVal,condition:n.condition,tableName:$(i),text:$(r),code:$(u)},D=yield Z.get({url:"/sys/dict/loadTreeData",params:w},{isTransformResponse:!1});if(D.success){for(let G of D.result)G.value=G.key,G.isLeaf=!!G.leaf;y(O,D.result,o.value),o.value=[...o.value]}return Promise.resolve()})}function y(T,O,w){if(w&&w.length>0)for(let D of w)if(D.key==T){!O||O.length==0?D.isLeaf=!0:D.children=O;break}else y(T,O,D.children)}function m(T){T?T instanceof Array?g(T.map(O=>O.value).join(",")):g(T.value):g(""),l.value=T}function g(T){t("change",T),t("update:value",T)}function v(T){}function C(){let T=n.condition;return new Promise((O,w)=>{if(!T)O();else try{let D=JSON.parse(T);typeof D=="object"&&D?O():(s.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),w())}catch(D){s.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),w()}})}N(()=>n.url,T=>z(this,null,function*(){T&&(yield A())}));function A(){return z(this,null,function*(){let T=n.url,O=n.params,w=yield Z.get({url:T,params:O},{isTransformResponse:!1});if(w.success&&w.result){for(let D of w.result)D.key=D.value,D.isLeaf=!!D.leaf;o.value=[...w.result]}})}function M(){let T=o.value,O=[];U(T,O),O.length>0&&(l.value=O,f(O[0]))}function U(T,O){let w=n.value;if(T&&T.length)for(let D of T)w===D.value?O.push({key:D.key,value:D.value,label:D.label||D.title}):U(D.children,O)}return C().then(()=>{d(),h(),c()}),(T,O)=>{const w=S("a-tree-select");return _(),E(w,x({allowClear:"",labelInValue:"",style:{width:"100%"},getPopupContainer:D=>D==null?void 0:D.parentNode,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,loadData:p,value:l.value,treeData:o.value,multiple:e.multiple},$(a),{onChange:m,onSearch:v,"tree-checkable":e.treeCheckAble}),null,16,["getPopupContainer","placeholder","value","treeData","multiple","tree-checkable"])}}}),zl=V({__name:"JEllipsis",props:{value:b.oneOfType([b.string,b.number,b.array]),length:b.number.def(25)},setup(e){const t=e,n=j(()=>t.value&&t.value.length>t.length?t.value.slice(0,t.length)+"...":t.value);return(a,s)=>{const o=S("a-tooltip");return _(),E(o,{placement:"topLeft"},{title:P(()=>[H("span",null,q(e.value),1)]),default:P(()=>[W(" "+q(n.value),1)]),_:1})}}}),Gl=V({name:"JSearchSelect",inheritAttrs:!1,props:{value:b.oneOfType([b.string,b.number]),dict:b.string,dictOptions:{type:Array,default:()=>[]},async:b.bool.def(!1),placeholder:b.string,popContainer:b.string,pageSize:b.number.def(10),getPopupContainer:{type:Function,default:e=>e==null?void 0:e.parentNode},adjustY:b.bool.def(!0),immediateChange:b.bool.def(!1),params:{type:Object,default:()=>{}}},emits:["change","update:value"],setup(e,{emit:t,refs:n}){const a=I([]),s=I(!1),o=te({excludeDefaultKeys:!1}),l=I([]),i=I([]),r=I(0),u=I(!0),c=j(()=>e.dict?e.dict.split(",").length>=2:!1);N(()=>e.dict,()=>{e.dict&&(c.value?h():p())},{immediate:!0}),N(()=>e.value,M=>{M||M===0?d():(l.value=[],i.value=[])},{immediate:!0}),N(()=>e.dictOptions,M=>{M&&M.length>=0&&(a.value=[...M])},{immediate:!0});function f(M){return z(this,null,function*(){if(!c.value)return;r.value+=1;const U=$(r);a.value=[],s.value=!0;let T=A(M);Z.get({url:`/sys/dict/loadDict/${e.dict}`,params:{keyword:T,pageSize:e.pageSize}}).then(O=>{if(s.value=!1,O&&O.length>0){if(U!=$(r))return;a.value=O}})})}function d(){if(u.value===!1){u.value=!0;return}let{async:M,value:U,dict:T}=e;M?(!i||!i.key||i.key!==U)&&Z.get({url:`/sys/dict/loadDictItem/${T}`,params:{key:U}}).then(O=>{if(O&&O.length>0){let w={key:U,label:O};i.value=B({},w),e.immediateChange==!0&&t("change",U)}}):(l.value=U.toString(),e.immediateChange==!0&&t("change",U.toString()))}function h(){return z(this,null,function*(){let{dict:M,async:U,dictOptions:T,pageSize:O}=e;if(U){if(M){s.value=!0;let w=A("");Z.get({url:`/sys/dict/loadDict/${M}`,params:{pageSize:O,keyword:w}}).then(D=>{s.value=!1,D&&D.length>0&&(a.value=D)})}}else if(T&&T.length>0)a.value=T;else{let w="";if(M){let D=M.split(",");if(D[0].indexOf("where")>0){let ne=D[0].split("where");w=ne[0].trim()+","+D[1]+","+D[2]+","+encodeURIComponent(ne[1])}else w=M;const G=yield at(w);a.value=G}}})}function p(){return z(this,null,function*(){a.value=yield at(e.dict)})}function y(M){l.value=M,g()}function m(M){M?(i.value=M,l.value=M.key):(i.value=null,l.value=null,a.value=null,f("")),g()}function g(){u.value=!1,t("change",$(l)),t("update:value",$(l))}function v(M,U){let T="",O="";try{T=U.value,O=U.children()[0].children}catch(D){}let w=M.toLowerCase();return T.toLowerCase().indexOf(w)>=0||O.toLowerCase().indexOf(w)>=0}function C(M){return e.popContainer?document.querySelector(e.popContainer):typeof e.getPopupContainer=="function"?e.getPopupContainer(M):M==null?void 0:M.parentNode}function A(M){if(e.params&&e.params.column&&e.params.order){let U=M||"";return U=U+"[orderby:"+e.params.column+","+e.params.order+"]",encodeURI(U)}else return M}return{attrs:o,options:a,loading:s,isDictTable:c,selectedValue:l,selectedAsyncValue:i,loadData:bt(f,800),getParentContainer:C,filterOption:v,handleChange:y,handleAsyncChange:m}}});function Yl(e,t,n,a,s,o){const l=S("a-spin"),i=S("a-select-option"),r=S("a-select");return e.async?(_(),E(r,x({key:0},e.attrs,{value:e.selectedAsyncValue,"onUpdate:value":t[0]||(t[0]=u=>e.selectedAsyncValue=u),showSearch:"",labelInValue:"",allowClear:"",getPopupContainer:e.getParentContainer,placeholder:e.placeholder,filterOption:e.isDictTable?!1:e.filterOption,notFoundContent:e.loading?void 0:null,onSearch:e.loadData,onChange:e.handleAsyncChange}),{notFoundContent:P(()=>[R(l,{size:"small"})]),default:P(()=>[(_(!0),F(Y,null,K(e.options,u=>(_(),E(i,{key:u.value,value:u.value},{default:P(()=>[W(q(u.text),1)]),_:2},1032,["value"]))),128))]),_:1},16,["value","getPopupContainer","placeholder","filterOption","notFoundContent","onSearch","onChange"])):(_(),E(r,x({key:1,value:e.selectedValue,"onUpdate:value":t[1]||(t[1]=u=>e.selectedValue=u)},e.attrs,{showSearch:"",getPopupContainer:e.getParentContainer,placeholder:e.placeholder,filterOption:e.filterOption,notFoundContent:e.loading?void 0:null,dropdownAlign:{overflow:{adjustY:e.adjustY}},onChange:e.handleChange}),{notFoundContent:P(()=>[e.loading?(_(),E(l,{key:0,size:"small"})):Q("",!0)]),default:P(()=>[(_(!0),F(Y,null,K(e.options,u=>(_(),E(i,{key:u.value,value:u.value},{default:P(()=>[W(q(u.text),1)]),_:2},1032,["value"]))),128))]),_:1},16,["value","getPopupContainer","placeholder","filterOption","notFoundContent","dropdownAlign","onChange"]))}const ql=J(Gl,[["render",Yl]]),Wl=V({name:"JAddInput",props:{value:b.string.def(""),min:b.integer.def(1)},emits:["change","update:value"],setup(e,{emit:t}){const n=Te({params:[]}),a=i=>{let r=n.params.indexOf(i);r!==-1&&n.params.splice(r,1),l()},s=()=>{n.params.push({label:"",value:""}),l()};ce(()=>{o()});function o(){if(n.params=[],e.value&&e.value.indexOf("{")==0){let i=JSON.parse(e.value);Object.keys(i).forEach(r=>{n.params.push({label:r,value:i[r]})})}}function l(){let i={};n.params.length>0&&n.params.forEach(r=>{i[r.label]=r.value}),t("change",st(i)?"":JSON.stringify(i)),t("update:value",st(i)?"":JSON.stringify(i))}return{dynamicInput:n,emitChange:l,remove:a,add:s}},components:{MinusCircleOutlined:bn,PlusOutlined:_n}});function Hl(e,t,n,a,s,o){const l=S("a-input"),i=S("MinusCircleOutlined"),r=S("PlusOutlined"),u=S("a-button");return _(),F(Y,null,[(_(!0),F(Y,null,K(e.dynamicInput.params,(c,f)=>(_(),F("div",{key:f,style:{display:"flex"}},[R(l,{placeholder:"请输入参数key",value:c.label,"onUpdate:value":d=>c.label=d,style:{width:"30%","margin-bottom":"5px"},onInput:e.emitChange},null,8,["value","onUpdate:value","onInput"]),R(l,{placeholder:"请输入参数value",value:c.value,"onUpdate:value":d=>c.value=d,style:{width:"30%",margin:"0 0 5px 5px"},onInput:e.emitChange},null,8,["value","onUpdate:value","onInput"]),e.dynamicInput.params.length>e.min?(_(),E(i,{key:0,class:"dynamic-delete-button",onClick:d=>e.remove(c),style:{width:"50px"}},null,8,["onClick"])):Q("",!0)]))),128)),H("div",null,[R(u,{type:"dashed",style:{width:"60%"},onClick:e.add},{default:P(()=>[R(r),W(" 新增 ")]),_:1},8,["onClick"])])],64)}const Ql=J(Wl,[["render",Hl],["__scopeId","data-v-aea2876b"]]),Kl={name:"JRangeNumber",props:{value:b.oneOfType([b.string,b.array])},emits:["change","update:value"],setup(e,{emit:t}){const n=I(""),a=I(""),s=Le.useInjectFormItemContext();function o(r){n.value=r.target.value,i()}function l(r){a.value=r.target.value,i()}function i(){let r=[],u=n.value||"",c=a.value||"";r.push(u),r.push(c),t("change",r),t("update:value",r),s.onFieldChange()}return N(()=>e.value,r=>{r&&r.length==2?(n.value=r[0],a.value=r[1]):(n.value="",a.value="")},{immediate:!0}),{beginValue:n,endValue:a,handleChangeBegin:o,handleChangeEnd:l}}};function Zl(e,t,n,a,s,o){const l=S("a-input"),i=S("a-input-group");return _(),E(i,null,{default:P(()=>[R(l,{value:a.beginValue,style:{width:"calc(50% - 15px)"},placeholder:"最小值",onChange:a.handleChangeBegin},null,8,["value","onChange"]),R(l,{style:{width:"30px","border-left":"0","pointer-events":"none","background-color":"#fff"},placeholder:"~",disabled:""}),R(l,{value:a.endValue,style:{width:"calc(50% - 15px)","border-left":"0"},placeholder:"最大值",onChange:a.handleChangeEnd},null,8,["value","onChange"])]),_:1})}const Xl=J(Kl,[["render",Zl]]),eo={name:"LinkTableForQuery",props:{getParentContainer:{type:Function,default:e=>e==null?void 0:e.parentNode},placeholder:{type:String,default:"请输入关键字搜索后选择"},code:{type:String,default:""},field:{type:String,default:""},multi:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["update:value","change"],setup(e,{emit:t}){const n=I([]),a=I([]),s=I([]),o=j(()=>{let c=pe(a.value),f=pe(s.value),d=[],h=[];for(let p of c)d.push(B({},p)),h.push(p.value);for(let p of f)h.indexOf(p.value)<0&&d.unshift(B({},p));return d}),l=j(()=>e.multi===!0?"multiple":"combobox");function i(c){let f={order:"desc",column:"createTime",desformCode:e.code};if(c){let d=[{field:e.field,type:"text",rule:"like",val:c}],h={matchType:"and",superQueryParams:encodeURIComponent(JSON.stringify(d))};f.superQuery=JSON.stringify(h)}return f}function r(c){return z(this,null,function*(){const f="/desform/data/list";let d=i(c),h=[];const p=yield Z.get({url:f,params:d},{isTransformResponse:!1});if(p.success){let y=p.result.records;if(y&&y.length>0)for(let m of y)h.push({value:m.id,label:m.desformData[e.field]})}a.value=h})}N(()=>n.value,c=>{let f=pe(c);!f||f.length==0?f="":f instanceof Array&&(f=f.join(",")),t("update:value",f),t("change",f)}),N(()=>e.code,c=>{c&&r("")},{immediate:!0}),N(()=>e.value,c=>z(this,null,function*(){c?(yield u(c),n.value=c.split(",")):n.value=[]}),{immediate:!0});function u(c){return z(this,null,function*(){let f={order:"desc",column:"createTime",desformCode:e.code};if(c){let m={matchType:"and",superQueryParams:encodeURIComponent(JSON.stringify([{field:"_id",type:"text",rule:"in",val:c}]))};f.superQuery=JSON.stringify(m)}const d="/desform/data/list";let h=[];const p=yield Z.get({url:d,params:f},{isTransformResponse:!1});if(p.success){let y=p.result.records;if(y&&y.length>0)for(let m of y)h.push({value:m.id,label:m.desformData[e.field]})}s.value=h})}return{selectedValue:n,loadData:r,mode:l,onSearch:bt(r,600),useOptions:o}}};function to(e,t,n,a,s,o){const l=S("a-select");return _(),E(l,{value:a.selectedValue,"onUpdate:value":t[0]||(t[0]=i=>a.selectedValue=i),"show-search":"","allow-clear":"",getPopupContainer:n.getParentContainer,placeholder:"请输入关键字搜索后选择",onSearch:a.onSearch,"default-active-first-option":!1,"filter-option":!1,"not-found-content":null,options:a.useOptions,mode:a.mode},null,8,["value","getPopupContainer","onSearch","options","mode"])}const no=J(eo,[["render",to]]),ao=V({name:"CascaderPcaForQuery",props:{value:{type:String,default:""},multiple:{type:Boolean,default:!1}},emits:["update:value","change"],setup(e,{emit:t}){const n=I([]),a=j(()=>Vn);function s(l,i){if(!l||l.length==0)t("update:value",""),t("change","");else if(e.multiple){let r=o(i);t("update:value",r),t("change",r)}else l.length==3&&(t("update:value",l[2]),t("change",l[2]))}function o(l){const i=[],r=f=>!f||f.length===0;if(r(l))return i;const u=f=>f.isLeaf||r(f.children),c=f=>u(f)?i.push(f.value):f.children.forEach(c);return l.forEach(f=>{f.length===3?c(f[2]):f.length===2?c(f[1]):f.length===1&&c(f[0])}),i.join(",")}return N(()=>e.value,l=>{if(l)if(e.multiple)n.value=l.split(",").filter(i=>!!i).map(i=>Ge(i,3));else{let i=Ge(l,3);n.value=i}else n.value=[]},{immediate:!0}),{options:a,selectedValue:n,handleChange:s}}});function so(e,t,n,a,s,o){const l=S("a-cascader");return _(),E(l,{value:e.selectedValue,"onUpdate:value":t[0]||(t[0]=i=>e.selectedValue=i),options:e.options,multiple:e.multiple,maxTagCount:"responsive",onChange:e.handleChange},null,8,["value","options","multiple","onChange"])}const lo=J(ao,[["render",so]]),oo=["开始日期","结束日期"],ro=V({name:"JRangeDate",props:{value:b.string.def(""),datetime:b.bool.def(!1),placeholder:b.string.def("")},emits:["change","update:value"],setup(e,{emit:t}){const n=I([]),a=Le.useInjectFormItemContext();N(()=>e.value,l=>{l?n.value=l.split(","):n.value=[]},{immediate:!0});const s=j(()=>e.datetime===!0?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD");function o(l){let i="";l&&l.length>0&&l[1]&&l[0]&&(i=l.join(",")),t("change",i),t("update:value",i),a.onFieldChange()}return{rangeValue:n,placeholder:oo,valueFormat:s,handleChange:o}}});function io(e,t,n,a,s,o){const l=S("a-range-picker");return _(),E(l,{value:e.rangeValue,"onUpdate:value":t[0]||(t[0]=i=>e.rangeValue=i),onChange:e.handleChange,"show-time":e.datetime,placeholder:e.placeholder,valueFormat:e.valueFormat},null,8,["value","onChange","show-time","placeholder","valueFormat"])}const uo=J(ro,[["render",io]]),co=["开始时间","结束时间"],fo=V({name:"JRangeTime",props:{value:b.string.def(""),format:b.string.def("HH:mm:ss"),placeholder:b.string.def("")},emits:["change","update:value"],setup(e,{emit:t}){const n=I([]),a=Le.useInjectFormItemContext();N(()=>e.value,o=>{o?n.value=o.split(","):n.value=[]},{immediate:!0});function s(o){let l="";o&&o.length>0&&o[1]&&o[0]&&(l=o.join(",")),t("change",l),t("update:value",l),a.onFieldChange()}return{rangeValue:n,placeholder:co,handleChange:s}}});function po(e,t,n,a,s,o){const l=S("a-time-range-picker");return _(),E(l,{value:e.rangeValue,"onUpdate:value":t[0]||(t[0]=i=>e.rangeValue=i),onChange:e.handleChange,placeholder:e.placeholder,valueFormat:e.format,format:e.format},null,8,["value","onChange","placeholder","valueFormat","format"])}const ho=J(fo,[["render",po]]),go={name:"RoleSelectModal",components:{BasicModal:Pe,SearchOutlined:Cn,CloseOutlined:Sn,SelectedUserItem:Dt},props:{multi:{type:Boolean,default:!0},getContainer:{type:Function,default:null},title:{type:String,default:""},type:{type:String,default:"sys_role"},appId:{type:String,default:""}},emits:["selected","register"],setup(e,{emit:t}){const n=I(""),a=j(()=>{let h=r.value;return!h||h.length==0?[]:h.map(p=>p.id)});N(()=>e.appId,h=>z(this,null,function*(){h&&(yield c())}),{immediate:!0});const[s]=$e(h=>{let p=l.value;if(!(!p||p.length==0)){let y=h.list||[];for(let m of p)y.indexOf(m.id)>=0?m.checked=!0:m.checked=!1}});function o(){let h=pe(a.value);t("selected",h,pe(r.value))}const l=I([]),i=j(()=>{let h=l.value;if(!h||h.length==0)return[];let p=n.value;return p?h.filter(y=>y.name.indexOf(p)>=0):h}),r=j(()=>{let h=l.value;return!h||h.length==0?[]:h.filter(p=>p.checked)});function u(h){let p=l.value;if(!p||p.length==0)return;let y=p.filter(m=>m.id==h);y[0].checked=!1}function c(){return z(this,null,function*(){let h={pageNo:1,pageSize:200,column:"createTime",order:"desc"};const p="/sys/role/listByTenant",y=yield Z.get({url:p,params:h},{isTransformResponse:!1});if(y.success){const{records:m}=y.result;let g=[];if(m&&m.length>0)for(let v of m)g.push({id:v.id,name:v.name||v.roleName,code:v.roleCode,selectType:e.type,checked:!1});l.value=g}})}function f(h,p){if(d(h),e.multi===!1){let y=l.value;for(let m of y)m.checked=!1}p.checked=!p.checked}function d(h){h.preventDefault(),h.stopPropagation()}return{register:s,showDataList:i,searchText:n,handleOk:o,selectedList:r,selectedIdList:a,unSelect:u,onSelect:f}}};const mo={style:{position:"relative","min-height":"350px"}},vo={style:{width:"100%"}},yo={class:"modal-select-list-container"},bo={class:"scroll"},_o={class:"content",style:{right:"-10px"}},Co=["onClick"],So={class:"text"},wo={class:"selected-users",style:{width:"100%","overflow-x":"hidden"}};function ko(e,t,n,a,s,o){const l=S("SearchOutlined"),i=S("a-input"),r=S("a-checkbox"),u=S("SelectedUserItem"),c=S("BasicModal");return _(),E(c,{onRegister:a.register,getContainer:n.getContainer,canFullscreen:!1,title:n.title,width:500,destroyOnClose:"",onOk:a.handleOk,wrapClassName:"j-user-select-modal2"},{default:P(()=>[H("div",mo,[H("div",vo,[R(i,{value:a.searchText,"onUpdate:value":t[0]||(t[0]=f=>a.searchText=f),allowClear:"",style:{width:"100%"},placeholder:"搜索"},{prefix:P(()=>[R(l,{style:{color:"#c0c0c0"}})]),_:1},8,["value"])]),H("div",yo,[H("div",bo,[H("div",_o,[(_(!0),F(Y,null,K(a.showDataList,f=>(_(),F("label",{class:"item",onClick:d=>a.onSelect(d,f)},[R(r,{checked:f.checked,"onUpdate:checked":d=>f.checked=d},{default:P(()=>[H("span",So,q(f.name),1)]),_:2},1032,["checked","onUpdate:checked"])],8,Co))),256))])])]),H("div",wo,[(_(!0),F(Y,null,K(a.selectedList,f=>(_(),E(u,{info:f,onUnSelect:a.unSelect},null,8,["info","onUnSelect"]))),256))])])]),_:1},8,["onRegister","getContainer","title","onOk"])}const Io=J(go,[["render",ko],["__scopeId","data-v-29182a3e"]]),gt=2,To=V({name:"RoleSelectInput",components:{RoleSelectModal:Io,SelectedUserItem:Dt},props:{disabled:{type:Boolean,default:!1},store:{type:String,default:"id"},value:{type:String,default:""},multi:{type:Boolean,default:!1},getContainer:{type:Function,default:null},appId:{type:String,default:""}},emits:["update:value","change"],setup(e,{emit:t}){const n=Le.useInjectFormItemContext(),a=I([]),s=I(!0),[o,{openModal:l,closeModal:i}]=Se();function r(m){m.preventDefault(),m.stopPropagation();let g=a.value.map(v=>v.id);l(!0,{list:g})}const u=j(()=>{let m=gt,g=a.value.length;return g>m?{status:!0,count:g-m}:{status:!1}});function c(m){s.value=!1;let g=a.value,v=-1;for(let C=0;C<g.length;C++)if(g[C].id==m){v=C;break}v>=0&&(g.splice(v,1),a.value=g,f())}function f(){let m=[],g=a.value;g&&g.length>0&&(m=g.map(C=>C[e.store]));let v=m.join(",");t("update:value",v),t("change",v),n.onFieldChange()}function d(m,g){s.value=!1,g&&g.length>0?a.value=g:a.value=[],f(),i()}const h=I(""),p=dn();ce(()=>{let m=p.getTenant,g=e.appId;g?h.value=g:h.value=new Date().getTime()+"-"+m}),N(()=>e.value,m=>z(this,null,function*(){m?s.value===!0&&(yield y(m)):a.value=[],s.value=!0}),{immediate:!0});function y(m){return z(this,null,function*(){const g="/sys/role/listByTenant";let v={[e.store]:m,pageSize:200};e.store==="code"&&(v.roleCode=m),a.value=[];const C=yield Z.get({url:g,params:v},{isTransformResponse:!1});if(C.success){const{records:A}=C.result;let M=[];if(A&&A.length>0)for(let U of A)M.push({id:U.id,name:U.name||U.roleName,code:U.roleCode,checked:!0,selectType:"sys_role"});a.value=M}})}return{selectedList:a,ellipsisInfo:u,maxCount:gt,registerRoleModal:o,closeRoleModal:i,showModal:r,onSelected:d,unSelect:c,currentAppId:h}}});const Ro={key:1,style:{height:"30px","line-height":"30px",display:"inline-block","margin-left":"7px",color:"#bfbfbf"}},Mo={key:2,class:"user-selected-item"},$o={class:"user-select-ellipsis"},Do={style:{color:"red"}};function Po(e,t,n,a,s,o){const l=S("SelectedUserItem"),i=S("RoleSelectModal");return _(),F("div",null,[H("div",{onClick:t[0]||(t[0]=(...r)=>e.showModal&&e.showModal(...r)),class:ue(e.disabled?"select-input disabled-select":"select-input")},[e.selectedList.length>0?(_(!0),F(Y,{key:0},K(e.selectedList,(r,u)=>(_(),F(Y,null,[u<e.maxCount?(_(),E(l,{key:0,info:r,onUnSelect:e.unSelect,query:""},null,8,["info","onUnSelect"])):Q("",!0)],64))),256)):(_(),F("span",Ro,"请选择")),e.ellipsisInfo.status?(_(),F("div",Mo,[H("div",$o,[H("span",Do,"+"+q(e.ellipsisInfo.count)+"...",1)])])):Q("",!0)],2),R(i,{appId:e.currentAppId,multi:e.multi,getContainer:e.getContainer,title:"选择组织角色",onRegister:e.registerRoleModal,onSelected:e.onSelected},null,8,["appId","multi","getContainer","onRegister","onSelected"])])}const Oo=J(To,[["render",Po],["__scopeId","data-v-84b88798"]]),k=new Map;k.set("Time",qn);k.set("Input",Ie);k.set("InputGroup",Ie.Group);k.set("InputPassword",Ie.Password);k.set("InputSearch",Ie.Search);k.set("InputTextArea",Ie.TextArea);k.set("InputNumber",wn);k.set("AutoComplete",kn);k.set("Select",_t);k.set("ApiSelect",aa);k.set("TreeSelect",Qe);k.set("ApiTreeSelect",oa);k.set("ApiRadioGroup",Kn);k.set("Switch",In);k.set("RadioButtonGroup",ea);k.set("RadioGroup",be.Group);k.set("Checkbox",kt);k.set("CheckboxGroup",kt.Group);k.set("Cascader",Tn);k.set("Slider",Rn);k.set("Rate",Mn);k.set("DatePicker",Ue);k.set("MonthPicker",Ue.MonthPicker);k.set("RangePicker",Ue.RangePicker);k.set("WeekPicker",Ue.WeekPicker);k.set("TimePicker",$n);k.set("StrengthMeter",rl);k.set("IconPicker",fn);k.set("InputCountDown",Ln);k.set("Upload",Ja);k.set("Divider",St);k.set("JAreaLinkage",ge(()=>me(()=>import("./JAreaLinkage-173780c9.js"),["js/JAreaLinkage-173780c9.js","js/vue-vendor-24c7dc61.js","js/antd-vue-vendor-0d72f01e.js","js/areaDataUtil-cdeee717.js","js/china-area-data-vendor-556d14ee.js","js/useFormItem-86503382.js","js/index-831af9dd.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css"])));k.set("JSelectPosition",hl);k.set("JSelectUser",Un);k.set("JSelectRole",_l);k.set("JImageUpload",Fn);k.set("JDictSelectTag",Nn);k.set("JSelectDept",jn);k.set("JAreaSelect",kl);k.set("JEditor",ge(()=>me(()=>import("./JEditor-249b2194.js"),["js/JEditor-249b2194.js","js/vue-vendor-24c7dc61.js","js/index-b845562c.js","js/index-831af9dd.js","js/antd-vue-vendor-0d72f01e.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css"])));k.set("JMarkdownEditor",ge(()=>me(()=>import("./JMarkdownEditor-20314ffa.js"),["js/JMarkdownEditor-20314ffa.js","js/vue-vendor-24c7dc61.js","js/index-831af9dd.js","js/antd-vue-vendor-0d72f01e.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css","js/index-1c3affea.js","js/BasicModal-58413bab.js","js/useWindowSizeFn-8f085f6f.js","assets/BasicModal-d929f5ce.css","assets/index-ad7edbf1.css","assets/JMarkdownEditor-ec16e2f2.css"])));k.set("JSelectInput",Rl);k.set("JCodeEditor",ge(()=>me(()=>import("./JCodeEditor-66bd225e.js"),["js/JCodeEditor-66bd225e.js","js/vue-vendor-24c7dc61.js","js/index-831af9dd.js","js/antd-vue-vendor-0d72f01e.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css","js/useFormItem-86503382.js","js/codemirror-17b6f671.js","js/codemirror-26b29690.js","js/active-line-512fef49.js","assets/active-line-8a3c1e84.css","assets/JCodeEditor-d0a9ffd7.css"])));k.set("JCategorySelect",Dl);k.set("JSelectMultiple",Al);k.set("JPopup",xn);k.set("JPopupDict",Fl);k.set("JSwitch",Nl);k.set("JTreeDict",jl);k.set("JInputPop",pn);k.set("JEasyCron",ge(()=>me(()=>import("./EasyCronInput-b2123242.js").then(e=>e.E),["js/EasyCronInput-b2123242.js","js/vue-vendor-24c7dc61.js","js/index-831af9dd.js","js/antd-vue-vendor-0d72f01e.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css","js/index-1c3affea.js","js/BasicModal-58413bab.js","js/useWindowSizeFn-8f085f6f.js","assets/BasicModal-d929f5ce.css","assets/index-ad7edbf1.css","assets/EasyCronInput-0e4d0046.css"])));k.set("JCheckbox",zn);k.set("JInput",Jl);k.set("JTreeSelect",xl);k.set("JEllipsis",zl);k.set("JSelectUserByDept",Gn);k.set("JUpload",Yn);k.set("JSearchSelect",ql);k.set("JAddInput",Ql);k.set("JRangeNumber",Xl);k.set("CascaderPcaForQuery",lo);k.set("LinkTableForQuery",no);k.set("UserSelect",Wn);k.set("RangeDate",uo);k.set("RangeTime",ho);k.set("RoleSelect",Oo);function yr(e,t){k.set(e,t)}function br(e){k.delete(e)}export{aa as A,fr as D,ur as F,hr as I,kl as J,ir as P,or as R,Et as T,zl as _,rr as a,oa as b,Sa as c,cr as d,dr as e,pr as f,lr as g,yr as h,br as i,k as j,Io as k,xl as l,Dl as m,Jl as n,ha as u};

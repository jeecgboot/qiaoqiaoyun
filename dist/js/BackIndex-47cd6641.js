var X=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var H=(e,o,l)=>o in e?X(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l,M=(e,o)=>{for(var l in o||(o={}))ee.call(o,l)&&H(e,l,o[l]);if(z)for(var l of z(o))te.call(o,l)&&H(e,l,o[l]);return e},V=(e,o)=>Y(e,Z(o));var R=(e,o,l)=>new Promise((k,x)=>{var g=d=>{try{m(l.next(d))}catch(u){x(u)}},b=d=>{try{m(l.throw(d))}catch(u){x(u)}},m=d=>d.done?k(d.value):Promise.resolve(d.value).then(g,b);m((l=l.apply(e,o)).next())});import{d as se,f as B,w as U,o as oe,b as ne,r as ae,a2 as le,a5 as t,V as f,a6 as i,a7 as h,k as p,af as y,D as ie,a8 as E,ae as $,F as I,am as N,ak as C,z as T,ai as v,W as G}from"./vue-vendor-24c7dc61.js";import{c2 as de,c3 as re,bh as ue,C as pe,bJ as ce,bK as he}from"./antd-vue-vendor-0d72f01e.js";import{R as _e,a7 as fe,k as J,c as ve,l as ge}from"./index-831af9dd.js";import{u as me}from"./useCooperationPage-7c852af8.js";import{g as ke}from"./index-b510c86d.js";import"./vxe-table-vendor-8813019a.js";const K=fe(),we=se({name:"BackIndex",components:{BarsOutlined:de,HomeFilled:re,MessageOutlined:ue,CheckCircleFilled:pe,CalendarOutlined:ce,FolderOpenOutlined:he,Icon:_e},setup(){const e=B(!1),o=B(),l=B([]),k=B("");function x(a){let r=o.value;r&&r.contains(a.target)===!0?e.value=!0:e.value=!1}let g=[];function b(){return R(this,null,function*(){const a="/online/lowAppGroup/back2IndexData",r=yield J.get({url:a},{isTransformResponse:!1});if(g=[],r.success){let c=K.getTenant,_=r.result,A=[];for(let L of _)L.id?c==L.id&&A.push(L):(L.appList=L.appList.filter(Q=>Q.tenantId==c),A.push(L));g=A}m()})}function m(){let a=[];if(g&&g.length>0)for(let r of g){let c=V(M({},r),{show:!0}),_=c.appList;_&&_.length>0&&k.value&&(c.appList=_.filter(A=>A.appName.indexOf(k.value)>=0)),a.push(c)}l.value=a}b(),U(k,()=>{m()}),oe(()=>{window.addEventListener("click",x)}),ne(()=>{window.removeEventListener("click",x)});const d=ae({height:0,transform:"translate3d(-352px, 0px, 0px)"}),u=B("app-back-index-dropdown");U(e,()=>{e.value===!0?(d.height=window.innerHeight+"px",u.value="app-back-index-dropdown app-slow-visible",d.transform="translate3d(0px, 0px, 0px)"):(d.transform="translate3d(-352px, 0px, 0px)",u.value="app-back-index-dropdown app-slow-hidden")});function O(){e.value=!0}const F=B(!1),S=le();function P(a){D(a),S.push({path:"/myapps"})}function D(a){a.preventDefault(),a.stopPropagation()}function s(a,r){return R(this,null,function*(){D(a);let c={id:r.id,starStatus:r.starStatus==1?0:1};const _="/online/lowApp/updateAppStar";yield J.put({url:_,params:c}),yield b()})}function n(a,r){let c=a.key,_=ve();r&&r!=_&&K.setTenant(r),S.push({path:`/myapp/${c}`}),setTimeout(()=>{e.value=!1},300)}const{isCooperationPage:w,goCooperationPage:W}=me();function j(a){w(a.key)&&W(a.key)}function q(a){return ke(a.appCoverImg)}return{overlayStyle:d,visible:e,onShow:O,backIndexDropdown:o,overlayClass:u,cooperationListShow:F,toAppIndex:P,dataList:l,onChangeAppStar:s,goAppPage:n,keyword:k,handleChangeRoute:j,getRandomSrc:q}}});const ye={class:"low-app-back-index-icon"},Ce={ref:"backIndexDropdown"},xe={class:"to-index-warp"},be={style:{"align-items":"center",display:"flex"}},Fe=t("span",{class:"label"},"主页",-1),Se={class:"input-warp"},Le={class:"nano"},Be={class:"app-list-warp"},Ie={class:"content"},Ae={key:0,class:"cooperation-warp"},Oe={class:"title"},De={class:"text"},Ee=["onClick"],Ne={style:{width:"280px",display:"flex"}},Pe={style:{"margin-left":"10px",flex:"1"}},Re=["title"],$e={class:"star-icons",style:{width:"20px"}},Te={class:"cooperation-warp"},ze={class:"title"},He=t("div",{class:"text"},"协作套件",-1),Me=t("span",null,"日程",-1),Ve=t("span",null,"文件",-1),Ue={key:0},Ge={key:1,class:"cooperation-warp"},Je={class:"title"},Ke={class:"text"},We=["onClick"],je={style:{width:"280px",display:"flex"}},qe={style:{"margin-left":"10px",flex:"1"}},Qe=["title"],Xe={class:"star-icons",style:{width:"20px"}};function Ye(e,o,l,k,x,g){const b=f("BarsOutlined"),m=f("HomeFilled"),d=f("a-input"),u=f("Icon"),O=f("a-tooltip"),F=f("a-menu-item"),S=f("a-menu"),P=f("CalendarOutlined"),D=f("FolderOpenOutlined");return i(),h("div",ye,[p(b,{onMouseover:e.onShow,style:{cursor:"pointer","font-size":"24px"}},null,8,["onMouseover"]),(i(),y(ie,{to:"body"},[t("div",Ce,[t("div",{class:E(e.overlayClass),style:$(e.overlayStyle)},[t("div",xe,[t("div",{class:"to-index",onClick:o[0]||(o[0]=(...s)=>e.toAppIndex&&e.toAppIndex(...s))},[t("div",be,[p(m),Fe])])]),t("div",Se,[p(d,{placeholder:"搜索应用名称",style:{width:"100%"},value:e.keyword,"onUpdate:value":o[1]||(o[1]=s=>e.keyword=s)},null,8,["value"])]),t("div",Le,[t("div",Be,[t("div",Ie,[(i(!0),h(I,null,N(e.dataList,s=>(i(),h(I,null,[s.star===!0&&s.appList&&s.appList.length>0?(i(),h("div",Ae,[t("div",Oe,[t("div",De,C(s.name),1),t("div",{class:"display-state",onClick:T(n=>s.show=!s.show,["prevent"])},C(s.show?"隐藏":"展开"),9,Ee)]),p(S,{onClick:n=>e.goAppPage(n,s.id),class:E(["low-app-custom-menu-list",s.show?"":"hidden"])},{default:v(()=>[(i(!0),h(I,null,N(s.appList,n=>(i(),y(F,{key:n.id},{default:v(()=>[t("div",Ne,[t("div",null,[t("span",{style:$([{background:"url("+e.getRandomSrc(n)+")"},{"background-size":"64px 28px",display:"inline-block",width:"64px",height:"28px","vertical-align":"middle"}])},null,4)]),t("div",Pe,[t("span",{class:"app-name-text",title:n.appName},C(n.appName),9,Re)]),t("div",$e,[p(O,{title:n.starStatus==1?"点击取消标星":"点击标星",placement:"right"},{default:v(()=>[n.starStatus==1?(i(),y(u,{key:0,onClick:w=>e.onChangeAppStar(w,n),icon:"ant-design:star-filled",style:{color:"rgb(255, 196, 0)"}},null,8,["onClick"])):(i(),y(u,{key:1,class:"star-hover",icon:"ant-design:star-outlined",style:{color:"rgb(117, 117, 117)"}}))]),_:2},1032,["title"])])])]),_:2},1024))),128))]),_:2},1032,["onClick","class"])])):G("",!0)],64))),256)),t("div",Te,[t("div",ze,[He,t("div",{class:"display-state",onClick:o[2]||(o[2]=T(s=>e.cooperationListShow=!e.cooperationListShow,["prevent"]))},C(e.cooperationListShow?"隐藏":"展开"),1)]),p(S,{onClick:e.handleChangeRoute,class:E(["low-app-custom-menu-list",e.cooperationListShow?"":"hidden"])},{default:v(()=>[p(F,{key:"plan"},{default:v(()=>[p(P,{style:{background:"rgb(255, 109, 108)"}}),Me]),_:1}),p(F,{key:"file"},{default:v(()=>[p(D,{style:{background:"rgb(248, 152, 3)"}}),Ve]),_:1})]),_:1},8,["onClick","class"])]),(i(!0),h(I,null,N(e.dataList,s=>(i(),h(I,null,[s.star===!0?(i(),h("div",Ue)):s.appList&&s.appList.length>0?(i(),h("div",Ge,[t("div",Je,[t("div",Ke,C(s.name),1),t("div",{class:"display-state",onClick:T(n=>s.show=!s.show,["prevent"])},C(s.show?"隐藏":"展开"),9,We)]),p(S,{onClick:n=>e.goAppPage(n,s.id),class:E(["low-app-custom-menu-list",s.show?"":"hidden"])},{default:v(()=>[(i(!0),h(I,null,N(s.appList,n=>(i(),y(F,{key:n.id},{default:v(()=>[t("div",je,[t("div",null,[t("span",{style:$([{background:"url("+e.getRandomSrc(n)+")"},{"background-size":"64px 28px",display:"inline-block",width:"64px",height:"28px","vertical-align":"middle"}])},null,4)]),t("div",qe,[t("span",{class:"app-name-text",title:n.appName},C(n.appName),9,Qe)]),t("div",Xe,[p(O,{title:n.starStatus==1?"点击取消标星":"点击标星",placement:"right"},{default:v(()=>[n.starStatus==1?(i(),y(u,{key:0,onClick:w=>e.onChangeAppStar(w,n),icon:"ant-design:star-filled",style:{color:"rgb(255, 196, 0)"}},null,8,["onClick"])):(i(),y(u,{key:1,class:"star-hover",onClick:w=>e.onChangeAppStar(w,n),icon:"ant-design:star-outlined",style:{color:"rgb(117, 117, 117)"}},null,8,["onClick"]))]),_:2},1032,["title"])])])]),_:2},1024))),128))]),_:2},1032,["onClick","class"])])):G("",!0)],64))),256))])])])],6)],512)]))])}const lt=ge(we,[["render",Ye]]);export{lt as default};

var O=Object.defineProperty,V=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var L=(s,t,e)=>t in s?O(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,T=(s,t)=>{for(var e in t||(t={}))F.call(t,e)&&L(s,e,t[e]);if(S)for(var e of S(t))j.call(t,e)&&L(s,e,t[e]);return s},b=(s,t)=>V(s,E(t));var f=(s,t,e)=>new Promise((x,m)=>{var _=n=>{try{p(e.next(n))}catch(l){m(l)}},o=n=>{try{p(e.throw(n))}catch(l){m(l)}},p=n=>n.done?x(n.value):Promise.resolve(n.value).then(_,o);p((e=e.apply(s,t)).next())});import{_ as q,a7 as J,e as N,c as U,b as z,l as G}from"./index-831af9dd.js";import{d as C,g as H,a2 as K,r as Q,f as I,o as W,V as w,a6 as v,a7 as A,a5 as P,k as M,ak as X,af as Y,u as d,F as Z,a3 as ue,a4 as de}from"./vue-vendor-24c7dc61.js";import"./index-1c3affea.js";import{a as $,e as ee}from"./page.api-9d0cf9bc.js";import te from"./FileLoginModal-147a1764.js";import{J as se}from"./index.umd.min-e2b28327.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./FileLoginForm-d3cceff8.js";import"./checkcode-5ec5fe8f.js";import"./FileMobileForm-03b4c12c.js";import"./index-f99b266a.js";import"./FileForgetPasswordForm-6a66f657.js";import"./FileRegisterForm-45910650.js";import"./FileThirdModal-54f2cb0d.js";import"./searchcursor-9651c8d5.js";import"./codemirror-26b29690.js";import"./china-area-data-vendor-556d14ee.js";import"./renderers-81963a7f.js";import"./vuedraggable-vendor-6ef4bc68.js";import"./grid-layout-vendor-83979c40.js";import"./active-line-512fef49.js";const ae={key:0,class:"container"},oe={class:"lockIcon"},ne={class:"noPassText"},re=C({name:"low-app-drag-share-page"}),ie=C(b(T({},re),{setup(s){var y;(y=H())==null||y.appContext.app.use(se),q(()=>Promise.resolve({}),["assets/index-8f6661ca.css"]);const t=J(),{currentRoute:e,push:x}=K(),[m,{openModal:_}]=N(),o=Q({noPass:!0,noPassText:""}),p=I(),n=I(),l=I();function D(){const{params:a,path:r}=d(e);let i=r.lastIndexOf("/"),c=r.lastIndexOf("/",i-1),h=r.substring(c+1,i);p.value=h,l.value=a.id?a.id:r.substr(i+1);let g=t.getUserInfo;g&&Object.keys(g).length>0?k():_(!0,{})}function k(){return f(this,null,function*(){let a=yield $({id:d(l)});if(a.success)n.value=a.result.tenantId;else{o.noPassText="仪表盘配置有误，请联系管理员";return}B()})}function B(){return f(this,null,function*(){var r;let a=yield ee({appId:d(p)});if(!a.success){o.noPassText=a.message||"您还不是应用成员，无权访问此应用",o.noPass=!0;return}if(!a.result.hasAdmin){let i=((r=a.result)==null?void 0:r.menuList)||[],c=i.filter(u=>u.type=="group")||[],h=i.filter(u=>u.type!=="group")||[],g=[];if(c&&c.length>0&&(g=c.filter(u=>u.children&&u.children.length>0)),h.length==0&&g.length==0){o.noPassText="未分配任何工作表，请联系此应用的管理员",o.noPass=!0;return}}o.noPass=!1})}function R(a){k()}return W(()=>{D()}),(a,r)=>{const i=w("Icon"),c=w("SharePage");return v(),A(Z,null,[P("div",null,[o.noPass?(v(),A("div",ae,[P("div",oe,[M(i,{icon:"lock|svg",style:{width:"60px",height:"60px"}})]),P("div",ne,X(o.noPassText),1)])):(v(),Y(c,{key:1,pageId:l.value,shareTenantId:n.value,lowAppId:p.value,tenantId:d(U)(),token:d(z)()},null,8,["pageId","shareTenantId","lowAppId","tenantId","token"]))]),M(te,{onRegister:d(m),onSuccess:R,closable:!1,maskClosable:!1},null,8,["onRegister"])],64)}}}));const Oe=G(ie,[["__scopeId","data-v-e150383b"]]);export{Oe as default};

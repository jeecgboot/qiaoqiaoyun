var N=Object.defineProperty,O=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var A=(o,n,e)=>n in o?N(o,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[n]=e,u=(o,n)=>{for(var e in n||(n={}))j.call(n,e)&&A(o,e,n[e]);if(k)for(var e of k(n))D.call(n,e)&&A(o,e,n[e]);return o},M=(o,n)=>O(o,V(n));var w=(o,n,e)=>new Promise((m,p)=>{var c=r=>{try{s(e.next(r))}catch(a){p(a)}},i=r=>{try{s(e.throw(r))}catch(a){p(a)}},s=r=>r.done?m(r.value):Promise.resolve(r.value).then(c,i);s((e=e.apply(o,n)).next())});import{d as x,f as d,e as P,u as g,V as f,a6 as z,af as G,ap as J,aq as S,ai as C,k as _}from"./vue-vendor-24c7dc61.js";import{h as E}from"./antd-vue-vendor-0d72f01e.js";import{q as H,j as K,l as Q}from"./index-831af9dd.js";import"./index-52c8c841.js";import{B as W}from"./index-1c3affea.js";import{f as X}from"./low.app.api-97fc250a.js";import Y from"./LowAppIcon-e49e90b9.js";import Z from"./LowAppIconChoose-64241fb5.js";import{B as oo,u as eo}from"./useForm-14b2bc77.js";import"./vxe-table-vendor-8813019a.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./index-a964241b.js";import"./helper-22dafba0.js";const to=x({name:"LowAppModal",components:{BasicForm:oo,BasicModal:W,LowAppIcon:Y,LowAppIconChoose:Z},emits:["register","success"],setup(o,{emit:n}){const e=H(),m=d(),p=d(!1),c=d(),i=d(!1),s=P(()=>i.value?"编辑":"新增"),[r,{closeModal:a,setModalProps:h}]=K(T),[l,{resetFields:b,setFieldsValue:B,validate:F}]=eo({schemas:[{label:"应用名称",field:"appName",component:"Input",required:!0},{label:"应用图标",field:"iconType",component:"Input",slot:"iconType"},{show:!1,label:"iconBackColor",field:"iconBackColor",component:"Input"},{label:"应用Logo",field:"appCoverImg",component:"JImageUpload",componentProps:{text:"上传",class:"app-logo-uploader"}}],showActionButtonGroup:!1}),R=P(()=>{let t={width:800,title:g(s),confirmLoading:g(p)};return M(u(u(u({},g(e)),t),o),{onOk:q,onCancel:v,onRegister:r})});function T(t){i.value=!!g(t==null?void 0:t.isUpdate),i.value?I(t==null?void 0:t.record):U()}function v(){a()}function U(){I({}),m.value.randomIcon()}function I(t){return w(this,null,function*(){yield b(),c.value=E(t),yield B(u({},c.value))})}function $(t){B({iconType:t.iconType,iconBackColor:t.iconBackColor})}function q(){return w(this,null,function*(){try{let t=yield F(),L=Object.assign({},c.value,t);y(!0),yield X.saveOrUpdate(L,i),v(),n("success")}finally{y(!1)}})}function y(t){p.value=t,h({confirmLoading:t})}return{iconChooseRef:m,getProps:R,loading:p,onIconChooseChange:$,registerForm:l}}});function no(o,n,e,m,p,c){const i=f("LowAppIcon"),s=f("LowAppIconChoose"),r=f("BasicForm"),a=f("a-spin"),h=f("BasicModal");return z(),G(h,J(S(o.getProps)),{default:C(()=>[_(a,{wrapperClassName:"p-2",spinning:o.loading},{default:C(()=>[_(r,{onRegister:o.registerForm},{iconType:C(({model:l})=>[_(s,{ref:"iconChooseRef",value:l,onChange:o.onIconChooseChange},{default:C(()=>[_(i,{type:l.iconType,backColor:l.iconBackColor,style:{cursor:"pointer"}},null,8,["type","backColor"])]),_:2},1032,["value","onChange"])]),_:1},8,["onRegister"])]),_:1},8,["spinning"])]),_:1},16)}const oe=Q(to,[["render",no]]);export{oe as default};

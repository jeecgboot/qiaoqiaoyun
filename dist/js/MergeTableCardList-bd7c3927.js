var G=Object.defineProperty,K=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var I=(s,a,o)=>a in s?G(s,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[a]=o,C=(s,a)=>{for(var o in a||(a={}))Y.call(a,o)&&I(s,o,a[o]);if(O)for(var o of O(a))ee.call(a,o)&&I(s,o,a[o]);return s},k=(s,a)=>K(s,X(a));var d=(s,a,o)=>new Promise((S,g)=>{var y=l=>{try{h(o.next(l))}catch(_){g(_)}},w=l=>{try{h(o.throw(l))}catch(_){g(_)}},h=l=>l.done?S(l.value):Promise.resolve(l.value).then(y,w);h((o=o.apply(s,a)).next())});import{d as W,av as te,f as u,e as ae,o as L,j as oe,V as R,a6 as B,a7 as se,a5 as m,k as n,u as r,ai as i,O as M,E as ie,af as ne,ak as z,z as re,a3 as Ne,a4 as Oe}from"./vue-vendor-24c7dc61.js";import{V,T as $,aM as le,Q as pe,aZ as ce,a_ as de,r as ue,a$ as me}from"./antd-vue-vendor-0d72f01e.js";import"./index-52c8c841.js";import{H as P,z as fe,l as ge}from"./index-831af9dd.js";import{u as he,B as _e}from"./useForm-14b2bc77.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./vxe-table-vendor-8813019a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./helper-22dafba0.js";const ve={class:"p-2"},ye={class:"bg-white mb-2 p-4"},we={class:"bg-white p-2"},xe={class:"flex justify-start space-x-2"},be={style:{display:"flex","align-items":"center",color:"#fff","font-weight":"bold"}},Ce={class:"ellipsis",style:{"margin-left":"10px"}},Se=["onClick"],Fe={style:{"white-space":"pre-line"}},ke={class:"ellipsis3",style:{"white-space":"pre-line"}},ze=W({name:"merge-table-card-list"}),Te=W(k(C({},ze),{props:{params:P.object.def({}),api:P.func,searchFormSchema:{type:Array,default:()=>[]},bgColor:{type:String}},emits:["getMethod","delete","edit","view","design","add","copy"],setup(s,{emit:a}){const o=s;te(e=>({"119b03ba":j.value}));const S=V.Item,g=u(!1),y=u(5),w=u(window.innerWidth),h=u([]),[l,{validate:_}]=he({schemas:o.searchFormSchema,labelWidth:80,baseColProps:{span:6},actionColOptions:{xs:24,sm:12,md:12,lg:8,xl:8,xxl:6,style:{textAlign:"left"}},autoSubmitOnEnter:!0,submitFunc:U,resetFunc:Z}),j=ae(()=>{let e=y.value,t=w.value/e;return t>200&&(t-=30),t+"px"});L(()=>{f(),a("getMethod",f)});function f(){return d(this,arguments,function*(e={}){g.value=!0;const{api:t,params:v}=o;if(t&&fe(t)){const p=yield t(C(k(C({},v),{pageNo:x.value,pageSize:b.value}),e));h.value=p.records,T.value=p.total}g.value=!1})}const x=u(1),b=u(15),T=u(0),J=u({showSizeChanger:!1,showQuickJumper:!0,pageSize:b,pageNo:x,total:T,showTotal:e=>`总 ${e} 条`,onChange:A,onShowSizeChange:H});function A(e,t){return d(this,null,function*(){x.value=e,b.value=t,f()})}function H(e,t){return d(this,null,function*(){b.value=t,f()})}function D(e){return d(this,null,function*(){a("edit",e)})}function Q(e,t){return d(this,null,function*(){e.stopPropagation(),e.preventDefault(),a("delete",t)})}function U(){return d(this,null,function*(){const e=yield _();x.value=1,yield f(e)})}function Z(){return d(this,null,function*(){yield f()})}function E(e){let t="";return e!=null&&e.relationForms&&(t+="根据【",JSON.parse(e.relationForms).formList.forEach(p=>{t+=p.label+","}),t=t.substring(0,t.length-1),t+=e!=null&&e.calculateFields?"】":"来渲染表格】"),e!=null&&e.calculateFields&&(t+="计算【",JSON.parse(e.calculateFields).forEach(p=>{t+=p.name+","}),t=t.substring(0,t.length-1),t+="】来渲染表格"),t||"暂未配置表单"}function N(){w.value=window.innerWidth}return L(()=>{window.addEventListener("resize",N)}),oe(()=>{window.removeEventListener("resize",N)}),(e,t)=>{const v=R("a-button"),p=R("a-spin");return B(),se("div",ve,[m("div",ye,[n(r(_e),{onRegister:r(l)},null,8,["onRegister"])]),n(p,{spinning:g.value},{default:i(()=>[m("div",we,[M(e.$slots,"cardTitle",{},void 0,!0),n(r(V),{grid:{gutter:5,xs:1,sm:2,md:3,lg:3,xl:4,xxl:y.value},size:"small","data-source":h.value,pagination:J.value},{header:i(()=>[m("div",xe,[M(e.$slots,"header",{},void 0,!0),n(r($),null,{title:i(()=>[ie("刷新")]),default:i(()=>[n(v,{onClick:f},{default:i(()=>[n(r(le))]),_:1})]),_:1})])]),renderItem:i(({item:c,index:q})=>[(B(),ne(r(S),{style:{"margin-top":"10px"},key:q},{default:i(()=>[n(r(pe),{class:"cardItem",size:"small",headStyle:{background:s.bgColor,minHeight:"36px",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"}},{title:i(()=>[m("div",be,[n(r(ce)),m("div",Ce,z(c.aggregationName),1)])]),extra:i(()=>[n(r(de),{style:{color:"#fff"},onClick:re(F=>D(c),["stop"])},null,8,["onClick"]),n(r(ue),{title:"确定删除吗？",onConfirm:F=>Q(F,c.id)},{default:i(()=>[n(r(me),{style:{"margin-left":"10px",color:"#fff"}})]),_:2},1032,["onConfirm"])]),default:i(()=>[m("div",{style:{height:"80px","padding-top":"15px","text-align":"left"},onClick:F=>D(c)},[n(r($),{mouseEnterDelay:2},{title:i(()=>[m("p",Fe,z(c.aggregationDesc||E(c)),1)]),default:i(()=>[m("p",ke,z(c.aggregationDesc||E(c)),1)]),_:2},1024)],8,Se)]),_:2},1032,["headStyle"])]),_:2},1024))]),_:3},8,["grid","data-source","pagination"])])]),_:3},8,["spinning"])])}}}));const bt=ge(Te,[["__scopeId","data-v-854a8e0f"]]);export{bt as default};

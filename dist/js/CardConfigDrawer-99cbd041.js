var H=Object.defineProperty;var I=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var N=(r,o,t)=>o in r?H(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,B=(r,o)=>{for(var t in o||(o={}))P.call(o,t)&&N(r,t,o[t]);if(I)for(var t of I(o))Z.call(o,t)&&N(r,t,o[t]);return r};var h=(r,o,t)=>new Promise((i,u)=>{var y=m=>{try{n(t.next(m))}catch(d){u(d)}},p=m=>{try{n(t.throw(m))}catch(d){u(d)}},n=m=>m.done?i(m.value):Promise.resolve(m.value).then(y,p);n((t=t.apply(r,o)).next())});import{B as M,a as Q}from"./index-44229d9b.js";import{f as g,r as X,w as E,a5 as s,V as a,a6 as v,af as _,ai as V,k as f,ae as W,a8 as x,E as z,W as w}from"./vue-vendor-24c7dc61.js";import{cc as U,cn as q,b9 as G,av as J,cr as A,n as Y,bH as $,cs as ii,bZ as ei}from"./antd-vue-vendor-0d72f01e.js";import"./vuedraggable-vendor-6ef4bc68.js";import oi from"./Biaogeshezhi-292df70e.js";import{B as ti,S as ni,P as ri,X as li,K as si,a as ai,Z as mi}from"./Zdyan-401b7a2f.js";import ci from"./Paixu-7611295e.js";import di from"./Xianshiziduan-dc82edb5.js";import pi from"./Kuaisushaixuan-9e69d26c.js";import fi from"./Shaixuanliebiao-3594ac3b.js";import ui from"./Kanbanshezhi-5572f145.js";import gi from"./Zidingyianniu-9bb48ba8.js";import{l as vi,k as _i}from"./index-831af9dd.js";import{K as yi}from"./Kbsz-9c827069.js";import{a as wi}from"./useViewTabs-276e2e92.js";import{u as Ci}from"./useWatchDesigner-b7c458e6.js";import hi from"./MultipleQueryGroupFilter-7cdf28cf.js";import"./vxe-table-vendor-8813019a.js";import"./ComponentIcon-f1bbb90f.js";import"./type.definition-4eb605ee.js";import"./KsShaixuanDrawer-b9f976a2.js";import"./useFieldSelect-1dde1da7.js";import"./LinkRecordSelect-385d0eae.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./SelectItem-04dd2229.js";import"./lowAppUtils-56892d30.js";import"./auto.desform.api-839115ed.js";import"./desformUtils-c7daaa89.js";import"./LinkRecordTags-cf4c2463.js";import"./FormSchemaFactory-ec827fa7.js";import"./index-bff0b654.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./lowAppAuth-3d637b7d.js";import"./useFuncSwitch-b7681246.js";import"./DictColors-73058d23.js";import"./TableImage-14ca1f5d.js";import"./SubTableTag-81763fd6.js";import"./CardCellFile-92b3c8c8.js";import"./ZdyanDrawer-58ee121b.js";import"./ButtonColorSelector-58fbd93b.js";import"./ButtonConditions-9a9a88d5.js";import"./useCustomButton-fa741dda.js";import"./FilterFiledListNew-bbda127c.js";import"./SuperQueryValComponent-97f284a9.js";import"./helper-22dafba0.js";import"./ButtonConfirmText-527dd2f0.js";import"./FilterFiledList-8a929f88.js";import"./ButtonFormConfig-7880f3ed.js";import"./FormFieldSelect-9cf3f019.js";const xi={name:"CardConfigDrawer",components:{SlidersOutlined:U,FilterOutlined:q,EyeOutlined:G,CloseOutlined:J,OrderedListOutlined:A,SearchOutlined:Y,AppstoreOutlined:$,ControlOutlined:ii,OrderedListOutlined:A,BasicDrawer:M,MultipleQueryFilter:hi,Biaogeshezhi:oi,Xianshiziduan:di,Paixu:ci,Kuaisushaixuan:pi,Shaixuanliebiao:fi,Kanbanshezhi:ui,ApiOutlined:ei,Zidingyianniu:gi},emits:["reload","register"],props:{dbConfig:{type:Object,default:()=>{}},isLowApp:{type:Boolean,default:!1}},setup(r,{emit:o}){const t=g(""),i=g(""),u=g(""),y=g(""),p=g([]),n=X({bgsz:"",sjgl:"",px:"",xszd:"",kssx:"",sxlb:"",kbsz:""}),[m,{closeDrawer:d,getVisible:k}]=Q(e=>{y.value=e.myTitle,p.value=e.columnList,t.value=e.id});Ci({closeDrawer:d,getVisible:k}),E(()=>r.dbConfig,e=>{e&&e.id&&(b(e),i.value=e.desform_code,u.value=e.desformName,e.designFormTitleField&&n.zdyan&&n.zdyan.setFormTitleField(e.designFormTitleField))},{deep:!0});function b(e){n.bgsz=new ti(e),n.sjgl=new ni(e),n.px=new ri(e),n.xszd=new li(e),n.kssx=new si(e),n.sxlb=new ai(e),n.kbsz=new yi(e),n.zdyan=new mi(e)}const{myHeight:D,getDrawerClass:F}=wi(r),C=g("kbsz");function L(e){e.preventDefault(),e.stopPropagation();let c=e.target.getAttribute("i-flag");c&&(C.value=c)}function K(e){return h(this,null,function*(){let c=B({id:t.value},e);yield l(c,!0)})}function S(e){return h(this,null,function*(){let c=B({id:t.value},e);yield l(c)})}function l(e,c){return h(this,null,function*(){const O="/desform/view/updateViewConfig";_i.put({url:O,params:e},{isTransformResponse:!1}).then(R=>{R.success&&(c===!0?o("reload",t.value,e):o("reload"))})})}function T(){o("reload")}function j(e){let c=e.target.value,O={id:t.value,name:c};l(O)}return{register:m,myHeight:D,title:y,activeKey:C,handleClickItem:L,columnList:p,saveFilterData:K,closeDrawer:d,onChangeTitle:j,saveBase:S,config:n,designFormCode:i,ID:t,refreshView:T,getDrawerClass:F,designFormName:u}}},zi={class:"drawer-title-input"},ki={class:"title-close-icon",title:"关闭"},bi={class:"left-list"},Di={class:"between-padding bottom-border"},Fi={class:"between-padding bottom-border top-padding"},Li=s("p",null,"数据设置",-1),Ki={style:{width:"100%",flex:"1",position:"relative","overflow-y":"auto"}};function Si(r,o,t,i,u,y){const p=a("SlidersOutlined"),n=a("a-input"),m=a("CloseOutlined"),d=a("filter-outlined"),k=a("ordered-list-outlined"),b=a("ApiOutlined"),D=a("Kanbanshezhi"),F=a("MultipleQueryFilter"),C=a("paixu"),L=a("xianshiziduan"),K=a("zidingyianniu"),S=a("BasicDrawer");return v(),_(S,{mask:!1,push:!1,closable:!1,rootClassName:i.getDrawerClass(),onRegister:i.register,width:640,headerStyle:{padding:"10px 20px"}},{title:V(()=>[s("span",null,[f(p,{style:{color:"#4caf50","font-size":"16px"}})]),s("span",zi,[f(n,{value:i.title,"onUpdate:value":o[0]||(o[0]=l=>i.title=l),onBlur:i.onChangeTitle},null,8,["value","onBlur"])]),s("span",ki,[f(m,{onClick:i.closeDrawer},null,8,["onClick"])])]),default:V(()=>[s("div",{class:"view-config-container",style:W({height:i.myHeight+"px"})},[s("div",bi,[s("div",Di,[s("div",{"i-flag":"kbsz",onClick:o[1]||(o[1]=(...l)=>i.handleClickItem&&i.handleClickItem(...l)),class:x(i.activeKey=="kbsz"?"item-active left-list-item":"left-list-item")},[f(p),z(" 看板设置 ")],2)]),s("div",Fi,[Li,s("div",{"i-flag":"sjgl",onClick:o[2]||(o[2]=(...l)=>i.handleClickItem&&i.handleClickItem(...l)),class:x(i.activeKey=="sjgl"?"item-active left-list-item":"left-list-item")},[f(d),z(" 数据过滤 ")],2),s("div",{"i-flag":"px",onClick:o[3]||(o[3]=(...l)=>i.handleClickItem&&i.handleClickItem(...l)),class:x(i.activeKey=="px"?"item-active left-list-item":"left-list-item")},[f(k),z(" 排序 ")],2),s("div",{"i-flag":"zdyan",onClick:o[4]||(o[4]=(...l)=>i.handleClickItem&&i.handleClickItem(...l)),class:x(i.activeKey=="zdyan"?"item-active left-list-item":"left-list-item")},[f(b),z(" 自定义按钮 ")],2)])]),s("div",Ki,[i.activeKey=="kbsz"?(v(),_(D,{key:0,columnList:i.columnList,info:i.config.kbsz,onSave:i.saveFilterData},null,8,["columnList","info","onSave"])):w("",!0),i.activeKey=="sjgl"?(v(),_(F,{key:1,columnList:i.columnList,info:i.config.sjgl,onSave:i.saveFilterData},null,8,["columnList","info","onSave"])):w("",!0),i.activeKey=="px"?(v(),_(C,{key:2,columnList:i.columnList,info:i.config.px,onSave:i.saveFilterData},null,8,["columnList","info","onSave"])):w("",!0),i.activeKey=="xszd"?(v(),_(L,{key:3,columnList:i.columnList,info:i.config.xszd,onSave:i.saveBase},null,8,["columnList","info","onSave"])):w("",!0),i.activeKey=="zdyan"?(v(),_(K,{key:4,isLowApp:t.isLowApp,info:i.config.zdyan,onRefresh:i.refreshView,viewId:i.ID,designFormName:i.designFormName,code:i.designFormCode},null,8,["isLowApp","info","onRefresh","viewId","designFormName","code"])):w("",!0)])],4)]),_:1},8,["rootClassName","onRegister"])}const io=vi(xi,[["render",Si]]);export{io as default};

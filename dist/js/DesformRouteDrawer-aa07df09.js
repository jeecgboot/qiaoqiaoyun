var F=Object.defineProperty,O=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var A=(e,s,t)=>s in e?F(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,w=(e,s)=>{for(var t in s||(s={}))L.call(s,t)&&A(e,t,s[t]);if(I)for(var t of I(s))W.call(s,t)&&A(e,t,s[t]);return e},P=(e,s)=>O(e,K(s));var R=(e,s,t)=>new Promise((u,m)=>{var f=a=>{try{l(t.next(a))}catch(c){m(c)}},d=a=>{try{l(t.throw(a))}catch(c){m(c)}},l=a=>a.done?u(a.value):Promise.resolve(a.value).then(f,d);l((t=t.apply(e,s)).next())});import{d as j,f as G,e as v,u as H,a3 as J,a4 as Q,a5 as U,V as r,a6 as M,a7 as X,k as n,ap as Y,aq as Z,ai as i,E as ee,af as oe,W as te}from"./vue-vendor-24c7dc61.js";import"./index-621e597c.js";import{B as se,a as ae}from"./index-44229d9b.js";import"./index-1c3affea.js";import{h as ne}from"./antd-vue-vendor-0d72f01e.js";import{q as re,e as ie,l as le}from"./index-831af9dd.js";import{u as pe}from"./useListPage-62a041ef.js";import{R as me,p as y,c as ce,s as de,f as ue}from"./RouteModal-91c43680.js";import fe from"./BasicTable-d435f501.js";import{T as _e}from"./componentMap-c857637c.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./vxe-table-vendor-8813019a.js";import"./useMethods-f689b480.js";import"./index-52c8c841.js";import"./useForm-14b2bc77.js";import"./helper-22dafba0.js";import"./JAreaLinkage-173780c9.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./useFormItem-86503382.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./JPopup-2a779923.js";import"./EasyCronInput-b2123242.js";import"./JCheckbox-0b89d32a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./JImageUpload-d644253a.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";const ge=j({name:"DesformRouteDrawer",components:{BasicDrawer:se,BasicTable:fe,TableAction:_e,RouteModal:me},emits:["register"],setup(e){const s=re(),t=G(),u=v(()=>{var o;return(o=t.value)==null?void 0:o.id}),m=v(()=>{var o;return(o=t.value)==null?void 0:o.desformCode}),[f,{closeDrawer:d}]=ae($),l=v(()=>{let o={width:800,title:"下一步路由配置"};return P(w(w(w({},H(s)),o),e),{onOk:S,onCancel:S,onRegister:f})}),a=pe({tableProps:{api:o=>y.list(m.value,o),columns:ce,formConfig:{schemas:de,baseColProps:{xs:24,sm:9,md:9,lg:9,xl:9,xxl:9},actionColOptions:{xs:24,sm:6,md:6,lg:6,xl:6,xxl:6}},actionColumn:{width:120},showTableSetting:!1,tableSetting:{setting:!1,size:!1}}}),{tableContext:c,doRequest:C,doDeleteRecord:b}=a,[h,{reload:_,setLoading:g},{rowSelection:D,selectedRowKeys:p}]=c,[k,{openModal:B}]=ie();function $(o){t.value=ne(o==null?void 0:o.record)}function S(){d()}function x(){B(!0,{isUpdate:!1})}function N(o){return R(this,null,function*(){b(()=>y.delete(o.id))})}function q(){C(()=>y.batchDelete(p.value))}function z(o){return R(this,null,function*(){g(!0);try{let T={id:o.id,status:o.status===1?0:1,desformId:u.value,desformCode:m.value};yield ue.saveOrUpdate(T,!0,{successMessageMode:"none"}),_()}finally{g(!0)}})}function E(o){return[{label:"编辑",onClick:()=>B(!0,{isUpdate:!0,record:o})},{label:"删除",popConfirm:{title:"确定要删除吗？",placement:"left",confirm:()=>N(o)}}]}return{reload:_,getProps:l,desformId:u,desformCode:m,selectedRowKeys:p,onAddRecord:x,onDeleteBatch:q,onUpdateStatus:z,getTableAction:E,rowSelection:D,registerTable:h,registerModal:k}}});const V=e=>(J("data-v-800d97ba"),e=e(),Q(),e),we=V(()=>U("span",null,"删除",-1)),Ce=V(()=>U("span",null,"批量操作",-1));function be(e,s,t,u,m,f){const d=r("a-button"),l=r("a-icon"),a=r("a-menu-item"),c=r("a-menu"),C=r("a-dropdown"),b=r("a-switch"),h=r("TableAction"),_=r("BasicTable"),g=r("BasicDrawer"),D=r("RouteModal");return M(),X("div",null,[n(g,Y(Z(e.getProps)),{default:i(()=>[n(_,{onRegister:e.registerTable,rowSelection:e.rowSelection},{tableTitle:i(()=>[n(d,{onClick:e.onAddRecord,type:"primary",preIcon:"ant-design:plus"},{default:i(()=>[ee("新增")]),_:1},8,["onClick"]),e.selectedRowKeys.length>0?(M(),oe(C,{key:0},{overlay:i(()=>[n(c,null,{default:i(()=>[n(a,{key:"1",onClick:e.onDeleteBatch},{default:i(()=>[n(l,{type:"delete"}),we]),_:1},8,["onClick"])]),_:1})]),default:i(()=>[n(d,null,{default:i(()=>[Ce,n(l,{type:"down"})]),_:1})]),_:1})):te("",!0)]),switch:i(({record:p})=>[n(b,{size:"small",loading:p.loading,checked:p.status===1,onChange:k=>e.onUpdateStatus(p)},null,8,["loading","checked","onChange"])]),action:i(({record:p})=>[n(h,{actions:e.getTableAction(p)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"])]),_:1},16),n(D,{desformId:e.desformId,desformCode:e.desformCode,onRegister:e.registerModal,onSuccess:e.reload},null,8,["desformId","desformCode","onRegister","onSuccess"])])}const wo=le(ge,[["render",be],["__scopeId","data-v-800d97ba"]]);export{wo as default};

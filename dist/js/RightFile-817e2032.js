var Fl=Object.defineProperty,Tl=Object.defineProperties;var Nl=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var zl=Object.prototype.hasOwnProperty,Ul=Object.prototype.propertyIsEnumerable;var Ee=(r,F,T)=>F in r?Fl(r,F,{enumerable:!0,configurable:!0,writable:!0,value:T}):r[F]=T,re=(r,F)=>{for(var T in F||(F={}))zl.call(F,T)&&Ee(r,T,F[T]);if(Ve)for(var T of Ve(F))Ul.call(F,T)&&Ee(r,T,F[T]);return r},ve=(r,F)=>Tl(r,Nl(F));import{d as qe,f,e as Sl,u as i,r as $l,o as Rl,b as Dl,V as R,a6 as o,a7 as v,k as s,ai as d,F as Ml,W as h,a5 as u,ak as j,af as y,z as je,E as Pl,ae as Bl,a3 as Ll,a4 as Ol,n as te}from"./vue-vendor-24c7dc61.js";import{bA as Ge,d as Vl,a7 as El,a as jl,r as Ae,b as Al,ap as Ye,l as Yl}from"./index-831af9dd.js";import{i as Je,h as Wl,M as H}from"./antd-vue-vendor-0d72f01e.js";import{s as Hl,n as We,p as Kl,r as ql,t as Gl,v as Jl,f as Ql,w as He,x as Xl,y as Zl,z as et,A as lt,e as Ke,B as tt,C as it}from"./FileList.api-9749c044.js";import nt from"./SelectFolder-91dc24b4.js";import{u as at}from"./useContextMenu-810f9346.js";import{d as st}from"./renderUtils-7ad8f436.js";import ot from"./UploadNewVersion-627ffa3d.js";import ut from"./FileAttributes-3deed050.js";import ct from"./FileLink-d825cf38.js";import{L as dt}from"./link-d33a2dbc.js";import ft from"./FileIcon-6b648a4f.js";import"./vxe-table-vendor-8813019a.js";import"./index-b845562c.js";import"./FileLog-856778d4.js";import"./FilePopover-961bdae7.js";import"./header-55b09394.js";const me=[{title:"文件名称",dataIndex:"fileName",key:"fileName",width:400,ellipsis:!0},{title:"创建者",dataIndex:"realname",width:200,key:"realname"},{title:"修改时间",dataIndex:"updateTime",key:"updateTime",width:200,customRender:({text:r})=>{if(r)return Je(r).format("YYYY-MM-DD")}},{title:"文件大小",dataIndex:"fileSize",key:"fileSize",customRender:({text:r})=>r?Ge(r):"-"}],pt=[{title:"文件名称",dataIndex:"fileName",key:"fileName",width:300,ellipsis:!0},{title:"创建者",dataIndex:"realname",width:100,key:"realname"},{title:"修改时间",dataIndex:"updateTime",key:"updateTime",width:150,customRender:({text:r})=>r?Je(r).format("YYYY-MM-DD"):"-"},{title:"文件大小",dataIndex:"fileSize",key:"fileSize",customRender:({text:r})=>r?Ge(r):"-"}],w=r=>(Ll("data-v-04d75cc7"),r=r(),Ol(),r),rt={key:0},vt={key:1},mt={key:0,class:"header-icon"},ht={key:1,class:"header-icon"},_t={class:"header-icon"},yt={key:2,class:"header-icon"},kt={key:2},gt={key:0,class:"header-icon"},bt={key:1,class:"header-icon"},wt={key:0,class:"editable-cell"},xt={key:0,class:"editable-cell-input-wrapper"},Ct={key:1,class:"editable-cell-text-wrapper"},It={key:0,style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},class:"pointer"},Ft=["src","onClick"],Tt=["src","onClick"],Nt=["onClick"],zt=["onClick"],Ut={key:1,class:"pointer",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},St=["onClick"],$t={key:2,class:"editable-cell-icon"},Rt={key:0,style:{"text-align":"center",display:"block"}},Dt=["onClick"],Mt=w(()=>u("span",{class:"table-font-size"},"还原",-1)),Pt=["onClick"],Bt=w(()=>u("span",{class:"table-font-size"},"彻底删除",-1)),Lt=["onClick"],Ot=w(()=>u("span",{class:"table-font-size"},"编辑",-1)),Vt=["onClick"],Et={class:"table-font-size"},jt=["onClick"],At=w(()=>u("span",{class:"table-font-size"},"重命名",-1)),Yt=["onClick"],Wt=w(()=>u("span",{class:"table-font-size"},"上传新版本",-1)),Ht=["onClick"],Kt=w(()=>u("span",{class:"table-font-size"},"移动到...",-1)),qt=["onClick"],Gt=w(()=>u("span",{class:"table-font-size"},"复制到...",-1)),Jt=["onClick"],Qt=w(()=>u("span",{class:"table-font-size"},"删除",-1)),Xt=["onClick"],Zt=w(()=>u("span",{class:"table-font-size"},"属性",-1)),ei={class:"share"},li=w(()=>u("span",{style:{"font-size":"17px","font-weight":"normal"}},"分享",-1)),ti={class:"file-form",style:{"margin-top":"20px"}},ii={class:"file-item"},ni=w(()=>u("div",{class:"file-item-label"},"名称",-1)),ai={class:"file-item-content",style:{width:"90%"}},si={class:"file-item"},oi=w(()=>u("div",{class:"file-item-label"},"分享链接",-1)),ui={style:{"padding-top":"6px",width:"280px",float:"left"},class:"pointer"},ci=w(()=>u("span",null,"关闭分享",-1)),di=w(()=>u("span",null,"允许任何人查看",-1)),fi={key:0,class:"file-item closed-tip",style:{float:"left",width:"100%"}},pi=w(()=>u("div",{class:"file-item-label"},null,-1)),ri=w(()=>u("div",{style:{"font-size":"13px"}}," 链接已关闭，开启后可进行共享 ",-1)),vi=[pi,ri],mi={key:1,style:{width:"100px",float:"left"}},hi=w(()=>u("span",null,"复制链接",-1)),_i=qe({name:"eoa-right-file"}),yi=qe(ve(re({},_i),{emits:["register","setTitleData","update-input"],setup(r,{expose:F,emit:T}){const K=f(me),he=Vl(),ki=he.uploadUrl,W=f(!1),a=f(""),Y=El(),S=jl(),z=f([]),Qe=Sl(()=>({selectedRowKeys:i(m),onChange:Xe})),gi=f("allShareFile"),m=f([]);let q={};const Xe=e=>{m.value=e},bi=f([]),x=$l({}),k=f({}),C=f(""),M=f([]),O=f(),$=f("0"),_e={total:0,current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:(e,l)=>l[0]+"-"+l[1]+" 共"+e+"条",showQuickJumper:!0,showSizeChanger:!0},b=f(_e),ie=f(),G=f(""),ye=f(),A=f(),J=f({width:"calc(100% - 260px)"}),Q=f(!1),P=f(""),ne=f(""),V=f(""),ae=f(!1),wi=f(""),X=f("关闭分享"),xi=f(""),ke=f(),Z=f(!1),B=Y.getUserInfo.username,D=f(""),se=f(!1),ge=f();function ee(e){x[e]=Wl(z.value.filter(l=>e===l.id)[0])}function be(e){te(()=>{let l=z.value.filter(t=>e===t.id)[0];if(e==-1)if(!i(x[e]).fileName)S.createMessage.warning("文件名称不能为空"),z.value.shift();else{let t={fileName:i(x[e]).fileName,fileType:"folder",izFolder:"1",storeType:"manage",delFlag:"0",parentId:"",enableDown:"1",enableUpdat:"1"};i(C)&&(t.parentId=i(C)),Hl(ve(re({},t),{rootId:i(P)})).then(c=>{c.success&&(delete x[e],N())})}else{let t={};x[e].izFolder==="1"?t={fileName:x[e].fileName,fileId:x[e].id,type:"rename"}:t={fileName:x[e].fileName+"."+x[e].ext,fileId:x[e].id,type:"rename"},We(t),Object.assign(l,x[e]),delete x[e]}})}const oe=f(),Ze=e=>({onClick:l=>{ll(l,e)},onDblclick:l=>{Ue(l,e)},onContextmenu:l=>{tl(l,e)}}),[we]=at();function el(e){b.value=e,N()}function N(){W.value=!0;let e={parentId:i(C),delFlag:$.value,pageNo:b.value.current,pageSize:b.value.pageSize,type:i(ne),userId:Y.getUserInfo.id,keyword:i(V),searchType:i(D),storeType:"manage"};z.value=[],Kl(e).then(l=>{if(l.success)if(l.result.records&&l.result.records.length>0){let t=l.result.records;for(let c of t)c.showInput=!1,c.izFolder!=="1"&&c.fileName&&(c.ext=xe(c.fileName),c.fileName=c.fileName.substr(0,c.fileName.lastIndexOf(".")));i(se)&&(T("setTitleData",{parentId:i(C),pid:i(C)}),se.value=!1),z.value=t,m.value=[],q={},b.value.total=l.result.total}else m.value=[],z.value=[],b.value.total=0}).finally(()=>{W.value=!1})}function xe(e){let l=e.split(".");return l=l[l.length-1],l}function ll(e,l){let t=[];t.push(l.id),m.value=t,i(Q)?(De({fileName:i(M),firstTitle:i(G)}),l.authority=i(a),A.value.show(l)):te(()=>{A.value.hideVisible(),K.value=me,J.value={width:"calc(100% - 260px)"}})}function tl(e,l){if(k.value=l,e.preventDefault(),i($)=="1"){(i(a)!=="readonly"&&i(a)!=="editable"||i(a)==="editable"&&l.createBy===i(B))&&we({event:e,styles:{"z-index":512,"font-size":"13px"},items:[{label:"彻底删除",icon:"ant-design:delete-filled",handler:()=>{de(l.id)}},{label:"还原",icon:"ant-design:rollback-outlined",handler:()=>{$e(l)}}]});return}let t=[{label:"打开",icon:"bx:bxs-folder-open",handler:()=>{Ue(e,l)}},{label:"下载",icon:"ant-design:cloud-download-outlined",divider:!0,handler:()=>{Te(l)}},{label:"分享",icon:"ant-design:share-alt-outlined",handler:()=>{Me(l)},divider:!0},{label:"重命名",icon:"ant-design:edit-outlined",handler:()=>{ee(l.id)}},{label:"移动到...",icon:"ant-design:swap-outlined",handler:()=>{ce(l.id)}},{label:"复制到...",icon:"ant-design:copy-outlined",handler:()=>{ue(l.id)}},{label:"删除",icon:"ant-design:delete-outlined",handler:()=>{Ce(l.id)}},{label:"属性",icon:"ant-design:info-circle-filled",handler:()=>{Z.value=!0,Ie(l)}}];if(l.izFolder=="0"&&(t.splice(0,1),t.unshift({label:"预览",icon:"ant-design:eye-outlined",handler:()=>{Se(l)}}),t.splice(2,0,{label:l.izStar=="0"?"标星":"取消标星",icon:"ant-design:star-outlined",handler:()=>{ze(l)}}),t.splice(6,0,{label:"上传新版本",icon:"ant-design:cloud-sync-outlined",handler:()=>{Fe(l)}})),l.ext=="url"&&((i(a)!=="readonly"||i(a)==="editable"&&l.enableUpdat=="1")&&t.splice(1,0,{label:"编辑",icon:"ant-design:edit-outlined",handler:()=>{Le(l)}}),t.splice(7,1)),(i(a)=="readonly"||i(a)=="editable"&&l.createBy!==B)&&(i(a)=="editable"&&t.splice(t.length-2,1),i(a)=="readonly"&&l.izFolder=="0"&&(t.splice(4,2),t.splice(4,3)),i(a)=="readonly"&&l.izFolder=="1"&&(t.splice(3,2),t.splice(3,2)),l.enableDown=="0"&&l.createBy!==B&&t.splice(1,1),l.enableUpdat=="0")){let c=-1,U=-1,_=-1;for(let g=0;g<t.length;g++)t[g].label==="移动到..."&&(U=g),t[g].label==="上传新版本"&&l.ext!=="url"&&(c=g),t[g].label==="重命名"&&(_=g);c!=-1&&t.splice(c,1),U!=-1&&t.splice(U,1),_!=-1&&t.splice(_,1)}we({event:e,styles:{"z-index":512,"font-size":"13px"},items:t})}function Ce(e){H.confirm({title:"删除文件",content:"文件的引用和分享链接也将失效，确认删除？",okText:"删除",cancelText:"取消",onOk:()=>{ql({id:e,rootId:i(P)}).then(l=>{l.success&&(i(b).current=1,N())})}})}function il(e){Z.value=!1,Ie(e)}function Ie(e){J.value={width:"calc(100% - 610px)"},e.sharePerms=e.sharePerms?e.sharePerms:"1",te(()=>{K.value=pt,De({fileName:i(M),firstTitle:i(G)});let l=Ae.currentRoute.value.path;(!e.shareUrl||e.shareUrl.indexOf(l)==-1)&&Be(e,l),e.authority=i(a),e.username=i(B),A.value.show(e)})}function ue(e){O.value.copyId=e,O.value.pid=C.value,k.value.id=e,oe.value.copyFile(i(O))}function ce(e){O.value.copyId=e,O.value.pid=C.value,k.value.id=e,oe.value.moveFile(i(O))}function Fe(e){k.value=e,ie.value.click()}function Te(e){Gl({fileId:e.id,userId:Y.getUserInfo.id,operateType:"used"}),e.izFolder=="0"&&e.ext!=="url"?st(e.url):Ne(e.id,e.fileName)}function Ne(e,l){let t=document.createElement("a");t.href=Jl+"?fileIds="+e+"&zipName="+l+"&token="+Al(),t.target="_target",t.click()}function nl(){let e=i(G);i(M).length>0&&(e=i(M)[i(M).length-1]),Ne(i(m).join(","),e)}function ze(e){let l=e.izStar=="0"?"1":"0",t=e.id,c={fileId:e.id,izStar:l,userId:Y.getUserInfo.id,operateType:"star"};Ql(c).then(U=>{if(U.success){S.createMessage.success(e.izStar=="0"?"标星成功":"取消标星成功");let _=z.value.filter(g=>t===g.id)[0];Object.assign(_,{izStar:l})}})}function Ue(e,l){I(l)}function al(e,l){e&&te(()=>{q[l]=e,q[l].focus()})}function I(e){if(e.izFolder==="1"){C.value=e.id;let l=M.value.filter(t=>t.key==e.id);(!l||l.length==0)&&M.value.push({key:e.id,title:e.fileName}),T("setTitleData",{titleData:M.value,parentId:i(C),pid:e.parentId}),ne.value="",V.value="",i($)==="0"?(i(b).current=1,N()):E(),e.izFolder=="1"&&i(Q)&&A.value.clear(!0),T("update-input",e.fileName)}else Se(e)}function Se(e){if(e&&e.url){if(e.ext==="url"){window.open(e.url,"_blank"),He({id:e.id});return}let l=encodeURIComponent(Ye(e.url));(l.endsWith(".pdf")||l.endsWith(".doc")||l.endsWith(".docx"))&&(l=l+"&officePreviewType=pdf");let t=`${he.viewUrl}?url=`+l;window.open(t,"_blank"),He({id:e.id})}}function $e(e){let l=e.fileName;e.izFolder!=="1"&&(l=e.fileName+"."+e.ext),H.confirm({title:"还原文件",content:"确认还原选中的文件？",okText:"还原",cancelText:"取消",onOk:()=>{We({fileId:e.id,fileName:l,delFlag:"0",rootId:i(P),type:"reduction",izFolder:e.izFolder}).then(t=>{t.success&&(S.createMessage.success("还原成功"),E())})}})}function sl(e){H.confirm({title:"还原文件",content:"确认还原选中的文件？",okText:"还原",cancelText:"取消",onOk:()=>{Xl({fileId:e,delFlag:"0",rootId:i(P),type:"reduction"}).then(l=>{l.success&&(S.createMessage.success("还原成功"),E())})}})}function de(e){H.confirm({title:"彻底删除文件",content:"文件的引用和分享链接也将失效，确认删除？",okText:"彻底删除",cancelText:"取消",onOk:()=>{Zl({fileId:e,rootId:i(P)}).then(l=>{l.success&&(S.createMessage.success("彻底删除成功"),E())})}})}function ol(e){return Ye(e)}function ul(e=""){z.value.unshift({id:"-1"}),ee("-1"),C.value=e}function Ci(e){e.key==="rename"&&ee(k.value.id)}function cl(e){O.value=e,M.value=e.fileName,C.value=e.pid,a.value=e.authority,G.value=e.firstTitle,P.value=e.firstPid,$.value="0",ne.value=e.type,b.value=_e,i(b).current=1,V.value="",D.value="list",se.value=e.isShare,N(),i(Q)&&A.value.clear(!1)}function dl(e){let l={copyToFileId:e.pid,fileId:k.value.id,rootId:i(P),userId:Y.getUserInfo.id};i(m).length>1&&(l.fileId=i(m).join(",")),O.value.pid=e.pid,e.folderType=="copy"?et(l).then(t=>{t.success&&(i(b).current=1,N(),S.createMessage.success(t.message))}):lt(l).then(t=>{t.success?S.createMessage.success(t.message):S.createMessage.warning(t.message),i(b).current=1,N()})}function fl(e){C.value=e.fileId,$.value="1",D.value="list",V.value="",b.value=!1,E()}function pl(){i(b).current=1,N()}function rl(e){const t=e.target.files[0];if(!t)return;let c=k.value,U=c.ext,_=t.name.substring(t.name.lastIndexOf(".")+1);if(U!==_){S.createMessage.info("请选择相同格式的文件");return}let g={file:t,fileId:c.id,fileName:t.name};ye.value.upload(g),ie.value.value=null}function Re(){S.createMessage.success("已上传为新版本"),N()}function De(e){let l=e.fileName,t=e.firstTitle;if(l&&l.length>0)for(let c=0;c<l.length;c++)t=t+"/"+l[c].title;A.value.setTitle(t)}function vl(e){Q.value=e}function ml(){i(Z)?(J.value={width:"calc(100% - 260px)"},K.value=me):Z.value=!0}function hl(){i(V)?D.value="allSearch":D.value="list",i($)=="0"?(i(b).current=1,N()):E()}function _l(e,l){e?D.value="search":(D.value="list",C.value=l),V.value=e,i($)=="0"?(i(b).current=1,N()):E()}function yl(){i(V)?D.value="allSearch":D.value="list",C.value="",i($)=="0"?(i(b).current=1,N()):E()}function Me(e){e.sharePerms=e.sharePerms?e.sharePerms:"1",Pe(e);let l=Ae.currentRoute.value.path;(!e.shareUrl||e.shareUrl.indexOf(l)==-1)&&Be(e,l),k.value=e,ae.value=!0,setTimeout(()=>{ge.value.setIconData(e)},100)}function Pe(e){e.sharePerms==="1"?X.value="关闭分享":e.sharePerms==="2"?X.value="允许所有联系人查看":X.value="允许任何人查看"}function kl(e){let l={id:k.value.id,sharePerms:e.key};Ke(l).then(t=>{t.success&&(k.value.sharePerms=e.key,Pe(k.value))})}function Be(e,l){let t=e.id,c=window.location.protocol,U=window.location.host,g=c+"//"+U+"/file/share?id="+t+"&rootId="+i(P)+"&path="+l,fe={id:e.id,shareUrl:g};Ke(fe).then(le=>{le.success&&(k.value.shareUrl=g)})}function gl(){var e=document.createElement("input");e.value=k.value.shareUrl,document.body.appendChild(e),e.select(),document.execCommand("Copy"),document.body.removeChild(e),S.createMessage.success("已经复制到粘贴板，你可以使用Ctrl+V 贴到需要的地方")}function bl(){i(m).length>1&&H.confirm({title:"批量删除文件",content:"文件的引用和分享链接也将失效，确认删除？",okText:"删除",cancelText:"取消",onOk:()=>{tt({ids:i(m).join(","),rootId:i(P)}).then(e=>{e.success&&(i(b).current=1,N())})}})}function Le(e){ke.value.editLink(e)}function E(){W.value=!0;let e={parentId:i(C),userId:Y.getUserInfo.id,keyword:i(V),searchType:i(D)};z.value=[],it(e).then(l=>{if(l.success)if(l.result&&l.result.length>0){let t=l.result;for(let c of t)c.showInput=!1,c.izFolder!=="1"&&c.fileName&&(c.ext=xe(c.fileName),c.fileName=c.fileName.substr(0,c.fileName.lastIndexOf(".")));z.value=t,m.value=[],q={}}else m.value=[],z.value=[]}).finally(()=>{W.value=!1})}let Oe=document.getElementsByTagName("body");return Rl(()=>{Oe[0].style.background="#f0f2f5"}),Dl(()=>{Oe[0].style.background="#ffffff"}),F({addFolder:ul,loadFileList:cl,loadRecycleFileList:fl,uploadFileList:pl,searchList:_l,searchAllList:yl}),(e,l)=>{const t=R("Icon"),c=R("a-tooltip"),U=R("a-input"),_=R("a-menu-item"),g=R("a-menu"),fe=R("a-menu-divider"),le=R("a-dropdown"),wl=R("a-table"),xl=R("a-button"),Cl=R("a-popover"),Il=R("a-modal");return o(),v("div",{style:Bl([J.value,{float:"left","padding-left":"10px"}]),class:"file-menu"},[s(wl,{loading:W.value,pagination:b.value,rowKey:"id","row-selection":Qe.value,columns:K.value,dataSource:z.value,customRow:Ze,onChange:el},{headerCell:d(({column:L})=>[L.key==="fileName"?(o(),v(Ml,{key:0},[m.value.length<2?(o(),v("span",rt," 文件名称 ")):h("",!0),m.value.length>1&&$.value==="0"?(o(),v("div",vt,[u("span",null,"已选中"+j(m.value.length)+"项",1),a.value!=="readonly"?(o(),v("span",mt,[s(c,{title:"批量下载",placement:"bottom"},{default:d(()=>[s(t,{class:"pointer header-icon-color",icon:"ant-design:cloud-download-outlined",onClick:nl})]),_:1})])):h("",!0),a.value!=="readonly"?(o(),v("span",ht,[s(c,{title:"批量移动",placement:"bottom"},{default:d(()=>[s(t,{class:"pointer header-icon-color",icon:"ant-design:swap-outlined",onClick:l[0]||(l[0]=n=>ce(m.value.join(",")))})]),_:1})])):h("",!0),u("span",_t,[s(c,{title:"批量复制",placement:"bottom"},{default:d(()=>[s(t,{class:"pointer header-icon-color",icon:"ant-design:copy-outlined",onClick:l[1]||(l[1]=n=>ue(m.value.join(",")))})]),_:1})]),a.value!=="readonly"&&a.value!=="editable"?(o(),v("span",yt,[s(c,{title:"批量删除",placement:"bottom"},{default:d(()=>[s(t,{class:"pointer header-icon-color",icon:"ant-design:delete-outlined",onClick:bl})]),_:1})])):h("",!0)])):h("",!0),m.value.length>1&&$.value==="1"?(o(),v("div",kt,[u("span",null,"已选中"+j(m.value.length)+"项",1),a.value!=="readonly"&&a.value!=="editable"?(o(),v("span",gt,[s(c,{title:"批量彻底删除",placement:"bottom"},{default:d(()=>[s(t,{class:"pointer header-icon-color",icon:"ant-design:delete-outlined",onClick:l[2]||(l[2]=n=>de(m.value.join(",")))})]),_:1})])):h("",!0),a.value!=="readonly"&&a.value!=="editable"?(o(),v("span",bt,[s(c,{title:"批量还原",placement:"bottom"},{default:d(()=>[s(t,{class:"pointer header-icon-color",icon:"ant-design:rollback-outlined",onClick:l[3]||(l[3]=n=>sl(m.value.join(",")))})]),_:1})])):h("",!0)])):h("",!0)],64)):h("",!0)]),bodyCell:d(({column:L,record:n,text:pe})=>[L.key==="fileName"?(o(),v("div",wt,[x[n.id]?(o(),v("div",xt,[s(U,{ref:p=>al(p,`rename${n.id}`),style:{width:"90%"},value:x[n.id].fileName,"onUpdate:value":p=>x[n.id].fileName=p,onBlur:p=>be(n.id),onPressEnter:p=>be(n.id)},null,8,["value","onUpdate:value","onBlur","onPressEnter"])])):(o(),v("div",Ct,[n.fileType!=="folder"?(o(),v("div",It,[n.fileType==="image"?(o(),v("img",{key:0,class:"file-image",src:ol(n.url),onClick:p=>I(n)},null,8,Ft)):n.fileType==="excel"?(o(),y(t,{key:1,class:"file-icon",icon:"ant-design:file-excel-outlined",style:{color:"rgb(98, 187, 55)"},onClick:p=>I(n)},null,8,["onClick"])):n.fileType==="pdf"?(o(),y(t,{key:2,class:"file-icon",icon:"ant-design:file-pdf-outlined",style:{color:"rgb(211, 47, 47)"},onClick:p=>I(n)},null,8,["onClick"])):n.fileType==="doc"?(o(),y(t,{key:3,class:"file-icon",icon:"ant-design:file-word-outlined",style:{color:"rgb(68, 138, 255)"},onClick:p=>I(n)},null,8,["onClick"])):n.fileType==="pp"?(o(),y(t,{key:4,class:"file-icon",icon:"ant-design:file-ppt-outlined",style:{color:"rgb(245, 124, 0)"},onClick:p=>I(n)},null,8,["onClick"])):n.fileType==="video"?(o(),y(t,{key:5,class:"file-icon",icon:"ant-design:play-square-outlined",style:{color:"rgb(119, 87, 188)"},onClick:p=>I(n)},null,8,["onClick"])):n.fileType==="text"?(o(),y(t,{key:6,class:"file-icon",icon:"ant-design:file-text-outlined",style:{color:"rgb(41, 211, 178)"},onClick:p=>I(n)},null,8,["onClick"])):n.fileType==="zip"?(o(),y(t,{key:7,class:"file-icon",icon:"ant-design:file-zip-outlined",style:{color:"rgb(253, 202, 7)"},onClick:p=>I(n)},null,8,["onClick"])):(n.ext="url")?(o(),v("img",{key:8,src:i(dt),class:"file-image",onClick:p=>I(n)},null,8,Tt)):(o(),y(t,{key:9,class:"file-icon",icon:"ant-design:file-unknown-outlined",onClick:p=>I(n)},null,8,["onClick"])),n.fileType==="image"||n.ext==="url"?(o(),v("span",{key:10,style:{"margin-left":"8px"},class:"file-text",onClick:p=>I(n)},j(pe+"."+n.ext),9,Nt)):(o(),v("span",{key:11,style:{"margin-left":"30px"},class:"file-text",onClick:p=>I(n)},j(pe+"."+n.ext),9,zt))])):(o(),v("div",Ut,[s(t,{onClick:p=>I(n),icon:"ant-design:folder-open-outlined",class:"file-icon",style:{"margin-left":"2px",width:"23px",color:"rgb(253, 202, 7)"}},null,8,["onClick"]),u("span",{class:"file-text",style:{"margin-left":"30px"},onClick:p=>I(n)},j(pe),9,St)])),m.value.length<2?(o(),v("div",$t,[s(t,{style:{top:"-6px"},icon:"ant-design:share-alt-outlined",class:"header-icon-color pointer",onClick:p=>Me(n)},null,8,["onClick"]),a.value==="editable"&&n.enableDown==="1"||n.createBy===i(B)||a.value==="owner"||a.value==="admin"?(o(),y(t,{key:0,style:{top:"-6px",left:"10px"},class:"header-icon-color pointer",icon:"ant-design:cloud-download-outlined",onClick:p=>Te(n)},null,8,["onClick"])):h("",!0),s(le,{trigger:["click"]},{overlay:d(()=>[$.value==="1"?(o(),y(g,{key:0,class:"menu-more"},{default:d(()=>[a.value==="readonly"||a.value==="editable"&&n.createBy!==i(B)?(o(),v("span",Rt,"暂无权限")):h("",!0),a.value!=="readonly"&&a.value!=="editable"||a.value==="editable"&&n.createBy===i(B)?(o(),y(_,{key:"0"},{default:d(()=>[u("div",{onClick:p=>$e(n)},[s(t,{class:"table-icon-color pointer",icon:"ant-design:rollback-outlined"}),Mt],8,Dt)]),_:2},1024)):h("",!0),a.value!=="readonly"&&a.value!=="editable"||a.value==="editable"&&n.createBy===i(B)?(o(),y(_,{key:"0"},{default:d(()=>[u("div",{onClick:p=>de(n.id)},[s(t,{class:"table-icon-color pointer",icon:"ant-design:delete-filled"}),Bt],8,Pt)]),_:2},1024)):h("",!0)]),_:2},1024)):(o(),y(g,{key:1,class:"menu-more"},{default:d(()=>[n.ext==="url"&&(a.value==="editable"&&n.enableUpdat==="1"||a.value==="owner"||a.value==="admin")?(o(),y(_,{key:"0"},{default:d(()=>[u("div",{onClick:p=>Le(n)},[s(t,{class:"table-icon-color pointer",icon:"ant-design:edit-outlined"}),Ot],8,Lt)]),_:2},1024)):h("",!0),n.izFolder==="0"?(o(),y(_,{key:"0"},{default:d(()=>[u("div",{onClick:p=>ze(n)},[s(t,{class:"table-icon-color pointer",icon:"ant-design:star-outlined"}),u("span",Et,j(n.izStar==="0"?"标星":"取消标星"),1)],8,Vt)]),_:2},1024)):h("",!0),n.izFolder==="0"?(o(),y(fe,{key:2})):h("",!0),a.value==="editable"&&n.enableUpdat==="1"||a.value==="owner"||a.value==="admin"?(o(),y(_,{key:"1"},{default:d(()=>[u("div",{onClick:p=>ee(n.id)},[s(t,{class:"table-icon-color pointer",icon:"ant-design:edit-outlined"}),At],8,jt)]),_:2},1024)):h("",!0),n.izFolder==="0"&&(a.value==="editable"&&n.enableUpdat==="1"||a.value==="owner"||a.value==="admin")?(o(),y(_,{key:"3"},{default:d(()=>[u("div",{onClick:p=>Fe(n)},[s(t,{class:"table-icon-color pointer",icon:"ant-design:cloud-sync-outlined"}),Wt],8,Yt)]),_:2},1024)):h("",!0),a.value==="editable"&&n.enableUpdat==="1"||a.value==="owner"||a.value==="admin"?(o(),y(_,{key:"4"},{default:d(()=>[u("div",{onClick:p=>ce(n.id)},[s(t,{class:"table-icon-color pointer",icon:"ant-design:swap-outlined"}),Kt],8,Ht)]),_:2},1024)):h("",!0),s(_,{key:"5"},{default:d(()=>[u("div",{onClick:p=>ue(n.id)},[s(t,{class:"table-icon-color pointer",icon:"ant-design:copy-outlined"}),Gt],8,qt)]),_:2},1024),a.value!=="readonly"&&(a.value!=="editable"||n.createBy===i(B))?(o(),y(_,{key:"6"},{default:d(()=>[u("div",{onClick:p=>Ce(n.id)},[s(t,{class:"table-icon-color pointer",icon:"ant-design:delete-outlined"}),Qt],8,Jt)]),_:2},1024)):h("",!0),s(_,{key:"7"},{default:d(()=>[u("div",{onClick:p=>il(n)},[s(t,{class:"table-icon-color pointer",icon:"ant-design:info-circle-filled"}),Zt],8,Xt)]),_:2},1024)]),_:2},1024))]),default:d(()=>[s(t,{class:"header-icon-color pointer",style:{top:"-6px",left:"20px"},icon:"ant-design:ellipsis-outlined",onClick:l[4]||(l[4]=je(()=>{},["prevent"]))})]),_:2},1024)])):h("",!0)]))])):h("",!0)]),_:1},8,["loading","pagination","row-selection","columns","dataSource"]),s(nt,{ref_key:"selectFolder",ref:oe,onOk:dl},null,512),u("input",{ref_key:"fileUploadRef",ref:ie,class:"img-upload-input",type:"file",onChange:rl,style:{display:"none"}},null,544),s(ot,{ref_key:"uploadNewVersionRef",ref:ye,onOk:Re},null,512),s(ut,{ref_key:"fileAttributesRef",ref:A,onOk:Re,onExpand:vl,onRefresh:ml,onLoadTable:hl},null,512),s(ct,{ref_key:"fileLinkRef",ref:ke,onOk:N},null,512),s(Il,{open:ae.value,"onUpdate:open":l[8]||(l[8]=L=>ae.value=L),wrapClassName:"modal",footer:null},{title:d(()=>[u("div",ei,[li,u("div",null,[s(ft,{ref_key:"fileIconRef",ref:ge},null,512)])])]),default:d(()=>[u("div",ti,[u("div",ii,[ni,u("div",null,[u("span",ai,j(k.value.fileName),1)])]),u("div",si,[oi,u("div",ui,[s(le,{trigger:["click"]},{overlay:d(()=>[s(g,{onClick:kl,value:k.value.sharePerms,"onUpdate:value":l[6]||(l[6]=L=>k.value.sharePerms=L)},{default:d(()=>[s(_,{key:"1"},{default:d(()=>[ci]),_:1}),s(_,{key:"3"},{default:d(()=>[di]),_:1})]),_:1},8,["value"])]),default:d(()=>[u("span",{class:"ant-dropdown-link",onClick:l[5]||(l[5]=je(()=>{},["prevent"]))},[Pl(j(X.value)+" ",1),s(t,{icon:"ant-design:down-outlined"})])]),_:1})])]),k.value.sharePerms==="1"?(o(),v("div",fi,vi)):(o(),v("div",mi,[s(Cl,{placement:"bottom",style:{width:"346px"}},{content:d(()=>[s(U,{id:"copyFile",class:"share-input",value:k.value.shareUrl,"onUpdate:value":l[7]||(l[7]=L=>k.value.shareUrl=L)},null,8,["value"]),u("span",{class:"share-span",onClick:gl},"复制链接")]),default:d(()=>[s(xl,null,{icon:d(()=>[s(t,{icon:"ant-design:link-outlined"})]),default:d(()=>[hi]),_:1})]),_:1})]))])]),_:1},8,["open"])],4)}}}));const Ai=Yl(yi,[["__scopeId","data-v-04d75cc7"]]);export{Ai as default};

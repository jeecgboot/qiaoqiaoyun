var v=(u,a,t)=>new Promise((e,d)=>{var r=n=>{try{l(t.next(n))}catch(o){d(o)}},p=n=>{try{l(t.throw(n))}catch(o){d(o)}},l=n=>n.done?e(n.value):Promise.resolve(n.value).then(r,p);l((t=t.apply(u,a)).next())});import{f as i,as as g,w as y,a5 as c,V as s,a6 as w,af as _,ai as f,k as I,W as h}from"./vue-vendor-24c7dc61.js";import N from"./AppIconSelector-c6c055a9.js";import{m as C,d as U}from"./low.app.api-97fc250a.js";import{l as x}from"./index-831af9dd.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";const M={name:"AppFormNameIconUpdateModal",components:{AppIconSelector:N},props:{activeMenuId:{type:String,default:""}},emits:["update","dbUpdate"],setup(u,{emit:a}){const t=i(""),e=i(""),d=i(""),r=g(),p=i(!1);function l(m){t.value=m.iconType,e.value=m.menuName,d.value=m.type,p.value=!0}function n(){a("update",{id:u.activeMenuId,iconType:t.value,menuName:e.value,type:d.value})}y(p,()=>{p.value===!1&&o()});function o(){return v(this,null,function*(){let m={id:u.activeMenuId,iconType:t.value,menuName:e.value};yield C.update(m),d.value=="drag"&&(yield U.update({id:r.params.code,name:e.value})),a("dbUpdate",{id:u.activeMenuId})})}return{menuName:e,menuIcon:t,showUpdateInfo:p,onDataChange:n,openModal:l}}},A=c("div",{style:{"margin-left":"150px"}},null,-1),k={style:{padding:"0 12px"}};function S(u,a,t,e,d,r){const p=s("a-input"),l=s("AppIconSelector"),n=s("a-dropdown");return e.showUpdateInfo?(w(),_(n,{key:0,overlayStyle:{width:"300px"},open:e.showUpdateInfo,"onUpdate:open":a[2]||(a[2]=o=>e.showUpdateInfo=o),placement:"bottom",trigger:["click"],overlayClassName:"app-update-dropdown"},{overlay:f(()=>[c("div",null,[c("div",k,[I(p,{maxlength:20,"show-count":"",value:e.menuName,"onUpdate:value":a[0]||(a[0]=o=>e.menuName=o),style:{width:"100%","text-align":"center"},onChange:e.onDataChange},null,8,["value","onChange"])]),c("div",null,[I(l,{value:e.menuIcon,"onUpdate:value":a[1]||(a[1]=o=>e.menuIcon=o),onChange:e.onDataChange},null,8,["value","onChange"])])])]),default:f(()=>[A]),_:1},8,["open"])):h("",!0)}const W=x(M,[["render",S]]);export{W as default};

var V=Object.defineProperty,b=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var w=(t,e,o)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,c=(t,e)=>{for(var o in e||(e={}))q.call(e,o)&&w(t,o,e[o]);if(h)for(var o of h(e))N.call(e,o)&&w(t,o,e[o]);return t},F=(t,e)=>b(t,j(e));var f=(t,e,o)=>new Promise((n,s)=>{var p=i=>{try{m(o.next(i))}catch(l){s(l)}},a=i=>{try{m(o.throw(i))}catch(l){s(l)}},m=i=>i.done?n(i.value):Promise.resolve(i.value).then(p,a);m((o=o.apply(t,e)).next())});import{d as S,f as d,e as P,u,V as g,a6 as T,af as x,ap as z,aq as G,ai as C,k}from"./vue-vendor-24c7dc61.js";import"./index-52c8c841.js";import{B as H}from"./index-1c3affea.js";import{h as I}from"./antd-vue-vendor-0d72f01e.js";import{q as E,j as J,l as K}from"./index-831af9dd.js";import{t as Q}from"./desform.data-92c54dbe.js";import{t as W}from"./desform.api-4c557ed3.js";import{B as X,u as Y}from"./useForm-14b2bc77.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./vxe-table-vendor-8813019a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./user.api-ffaaa05b.js";import"./helper-22dafba0.js";const Z=S({name:"DesformTempletModal",components:{BasicForm:X,BasicModal:H},emits:["register","success"],setup(t,{emit:e}){const o=E(),n=d(!1),s=d(),p=d(!1),a=P(()=>p.value?"编辑":"新增"),[m,{closeModal:i,setModalProps:l}]=J(L),[y,{resetFields:D,setFieldsValue:R,validate:$}]=Y({schemas:Q.formSchemas,showActionButtonGroup:!1}),A=P(()=>{let r={width:600,title:u(a),confirmLoading:u(n),minHeight:100};return F(c(c(c({},u(o)),r),t),{onOk:U,onCancel:_,onRegister:m})});function L(r){p.value=!!u(r==null?void 0:r.isUpdate),p.value?v(r==null?void 0:r.record):O()}function _(){i()}function O(){v({})}function v(r){return f(this,null,function*(){yield D(),s.value=I(r),yield R(c({},s.value))})}function U(){return f(this,null,function*(){try{let r=yield $(),M=Object.assign({},s.value,r);B(!0),yield W.saveOrUpdate(M,p),_(),e("success")}finally{B(!1)}})}function B(r){n.value=r,l({confirmLoading:r})}return{registerForm:y,getProps:A,loading:n}}});function oo(t,e,o,n,s,p){const a=g("BasicForm"),m=g("a-spin"),i=g("BasicModal");return T(),x(i,z(G(t.getProps)),{default:C(()=>[k(m,{wrapperClassName:"p-2",spinning:t.loading},{default:C(()=>[k(a,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},8,["spinning"])]),_:1},16)}const Wo=K(Z,[["render",oo]]);export{Wo as default};

var D=Object.defineProperty;var w=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var g=(o,e,t)=>e in o?D(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,l=(o,e)=>{for(var t in e||(e={}))O.call(e,t)&&g(o,t,e[t]);if(w)for(var t of w(e))I.call(e,t)&&g(o,t,e[t]);return o};var n=(o,e,t)=>new Promise((v,i)=>{var c=a=>{try{m(t.next(a))}catch(p){i(p)}},s=a=>{try{m(t.throw(a))}catch(p){i(p)}},m=a=>a.done?v(a.value):Promise.resolve(a.value).then(c,s);m((t=t.apply(o,e)).next())});import{d as N,c as R,f as u,o as S,w as h,V as x,a6 as A,af as U,ai as d,k as f,u as _,a5 as C,E as j}from"./vue-vendor-24c7dc61.js";import"./index-52c8c841.js";import{f as q,s as E}from"./comp.data-1c830b5e.js";import{u as G,B as M}from"./useForm-14b2bc77.js";import"./index-831af9dd.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./helper-22dafba0.js";const P={class:"j-box-bottom-button offset-20",style:{"margin-top":"30px"}},z={class:"j-box-bottom-button-float"},Ut=N({__name:"CompFormTab",props:{data:{type:Object,default:()=>({})},rootTreeData:{type:Array,default:()=>[]}},emits:["success"],setup(o,{emit:e}){const t=o,v=R("prefixCls"),i=u(!1),c=u(!0),s=u({}),[m,{resetFields:a,setFieldsValue:p,validate:B,updateSchema:y,clearValidate:F}]=G({schemas:q,showActionButtonGroup:!1});S(()=>{h(()=>t.data,()=>n(this,null,function*(){let r=_(t.data);s.value=typeof r!="object"?{}:r,yield y([{field:"compType",show:!0,required:!0}]),yield a(),yield p(l({},r)),yield F()}),{deep:!0,immediate:!0}),h(()=>t.rootTreeData,()=>n(this,null,function*(){yield y([{field:"parentId",componentProps:{treeData:t.rootTreeData}}])}),{deep:!0,immediate:!0})});function T(){return n(this,null,function*(){yield a(),yield p(l({},s.value))})}function V(){return n(this,null,function*(){try{i.value=!0;let r=yield B();r=Object.assign({},s.value,r),yield E(r,c.value),e("success"),Object.assign(s.value,r)}finally{i.value=!1}})}return(r,H)=>{const b=x("a-button"),k=x("a-spin");return A(),U(k,{spinning:i.value},{default:d(()=>[f(_(M),{onRegister:_(m)},null,8,["onRegister"]),C("div",P,[C("div",z,[f(b,{preIcon:"ant-design:sync-outlined",onClick:T},{default:d(()=>[j("重置")]),_:1}),f(b,{type:"primary",preIcon:"ant-design:save-filled",onClick:V},{default:d(()=>[j("保存")]),_:1})])])]),_:1},8,["spinning"])}}});export{Ut as default};

var x=Object.defineProperty,V=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var h=(s,e,a)=>e in s?x(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,p=(s,e)=>{for(var a in e||(e={}))z.call(e,a)&&h(s,a,e[a]);if(b)for(var a of b(e))I.call(e,a)&&h(s,a,e[a]);return s},k=(s,e)=>V(s,j(e));var _=(s,e,a)=>new Promise((c,t)=>{var l=o=>{try{u(a.next(o))}catch(n){t(n)}},f=o=>{try{u(a.throw(o))}catch(n){t(n)}},u=o=>o.done?c(o.value):Promise.resolve(o.value).then(l,f);u((a=a.apply(s,e)).next())});import{d as R,r as N,f as C,V as d,a6 as O,af as P,ai as m,k as i,E as T,ag as U,u as q}from"./vue-vendor-24c7dc61.js";import{B as A}from"./BasicModal-58413bab.js";import{a7 as G,j as L,a as $,bt as D,bu as H}from"./index-831af9dd.js";import"./index-1c3affea.js";import{r as J}from"./validator-bc7dc032.js";import{a8 as K}from"./antd-vue-vendor-0d72f01e.js";import{u as Q}from"./UserSetting.api-d09d4ebb.js";import"./useWindowSizeFn-8f085f6f.js";import"./vxe-table-vendor-8813019a.js";import"./user.api-ffaaa05b.js";const W=R({name:"user-replace-email-modal"}),ie=R(k(p({},W),{emits:["register","success"],setup(s,{emit:e}){const a=G(),{createMessage:c}=$(),t=N({email:""}),l=C(),f={email:[p({},J.duplicateCheckRule("sys_user","email",t,{label:"邮箱"})[0]),{required:!0,type:"email",message:"邮箱格式不正确"}]},u=K.useForm,o=C(""),[n,{setModalProps:y,closeModal:M}]=L(r=>_(this,null,function*(){l.value.resetFields(),l.value.clearValidate(),y({confirmLoading:!1}),o.value="修改邮箱",r.record.smscode="",Object.assign(t,r.record)}));function X(){return D({mobile:t.phone,smsmode:H.REGISTER})}function w(){return _(this,null,function*(){yield l.value.validateFields(),Q(t).then(r=>{r.success?(c.success("修改邮箱成功"),e("success"),M()):c.warning(r.message)})})}return(r,g)=>{const B=d("a-input"),v=d("a-form-item"),E=d("a-button"),F=d("a-form");return O(),P(A,U(r.$attrs,{onRegister:q(n),width:"500px",title:o.value,showCancelBtn:!1,showOkBtn:!1}),{default:m(()=>[i(F,{class:"antd-modal-form",ref_key:"formRef",ref:l,model:t,rules:f},{default:m(()=>[i(v,{name:"email"},{default:m(()=>[i(B,{size:"large",value:t.email,"onUpdate:value":g[0]||(g[0]=S=>t.email=S),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),i(v,null,{default:m(()=>[i(E,{size:"large",type:"primary",block:"",onClick:w},{default:m(()=>[T(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","title"])}}}));export{ie as default};

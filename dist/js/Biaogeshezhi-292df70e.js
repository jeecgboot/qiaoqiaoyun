import{f as C,h as Q,w as X,e as Y,a3 as $,a4 as ee,a5 as s,V as f,a6 as v,a7 as p,k as d,ai as h,E as y,F as I,am as j,af as te,ak as U,ae as T,W}from"./vue-vendor-24c7dc61.js";import{aZ as le,cn as oe,b9 as se,cr as ae,n as ne,bH as ie,cs as ue,p as de}from"./antd-vue-vendor-0d72f01e.js";import{d as ce}from"./vuedraggable-vendor-6ef4bc68.js";import{C as re}from"./ComponentIcon-f1bbb90f.js";import{l as he}from"./index-831af9dd.js";import"./vxe-table-vendor-8813019a.js";const fe={name:"Biaogeshezhi",components:{TableOutlined:le,FilterOutlined:oe,EyeOutlined:se,OrderedListOutlined:ae,SearchOutlined:ne,AppstoreOutlined:ie,ControlOutlined:ue,draggable:ce,ComponentIcon:re},props:{columnList:{type:Array,default:()=>[]},info:{type:[Object,String],required:!1},viewColumn:{type:Array,default:()=>[]}},emits:["save"],setup(m,{emit:u}){const k=C("default"),t=C(0),B=C(!1),S=C("default"),E=[{time:0,label:"关闭"},{time:30,label:"30秒"},{time:60,label:"1分钟"},{time:120,label:"2分钟"},{time:180,label:"3分钟"},{time:240,label:"4分钟"},{time:300,label:"5分钟"}],A={display:"block",margin:"0px 0px 10px 0px"},x=[{name:"创建时间",show:!1,field:"create_time",type:"date",seq:100},{name:"创建人",show:!1,field:"create_by",type:"select-user",seq:101},{name:"修改时间",show:!1,field:"update_time",type:"date",seq:102},{name:"修改人",show:!1,field:"update_by",type:"select-user",seq:103},{name:"流程状态",show:!1,field:"bpm_status",type:"select",seq:104}],g=C([]);g.value=[...x];const c=C([]);Q(()=>{let e=m.columnList;if(!e||e.length==0)c.value=[];else{let n=m.info.columnList||[],_=m.info.showColumnList||[],r=[];for(let i of e){let{show:b,seq:R,disabled:P}=L(i,n,_);r.push({name:i.name,key:i.key,show:b,seq:R,disabled:P,type:i.type})}for(let i of x){let{show:b,seq:R}=q(i,n);r.push({disabled:!1,name:i.name,key:i.field,show:b,seq:R,type:i.type})}r.sort(function(i,b){return i.seq-b.seq}),c.value=r}let o=m.info.systemColumnList||[],a=g.value;for(let n of a){let{show:_}=q(n,o);n.show=_}g.value=a}),X(()=>m.info,e=>{e&&(k.value=e.lineHeight,t.value=e.autoRefresh,S.value=e.showColumn,B.value=e.hasSummary)},{immediate:!0});const D=Y(()=>{let e=c.value;return e.length==0?0:e.filter(o=>o.show===!0).length});function L(e,o,a){let n=!0,_=98,r=!1;if(o&&o.length>0)for(let i of o)(i.field===e.key||i.field===e.field)&&(n=i.show,_=i.seq);if(a&&a.length>0)for(let i of a)(i.field===e.key||i.field===e.field)&&(i.show===!1?(n=i.show,r=!0,_=98):r=!1);return{show:n,seq:_,disabled:r}}function q(e,o){let a=o,n=!1,_=99;if(a&&a.length>0)for(let r of a)(r.field===e.key||r.field===e.field)&&(n=r.show,_=r.seq);return{show:n,seq:_}}const O=C("");function H(e){let o=O.value;return o?e.name.indexOf(o)>=0:!0}function z(){let e=c.value;for(let o of e)o.show=!0;c.value=e,V()}function N(){let e=c.value;for(let o of e)o.show=!1;c.value=e,V()}function l(e){if(e==!1){let o=c.value,a=[];for(let n of o)n.show==!0&&a.push(n);for(let n of o)n.show==!1&&a.push(n);c.value=a}V()}function F(){V()}function Z(){u("save",{lineHeight:k.value})}function G(){u("save",{autoRefresh:t.value})}function J(){u("save",{showColumn:S.value})}function K(){let e=g.value,o=[];for(let a of e){let n=de(a,"field","show","seq");o.push(n)}u("save",{systemColumnList:o})}function V(){let e=c.value,o=[];for(let a=0;a<e.length;a++){let n={field:e[a].key,show:e[a].show,seq:a};o.push(n)}u("save",{columnList:o})}function M(){u("save",{hasSummary:B.value})}return{lineHeight:k,refreshList:E,autoRefresh:t,hasSummary:B,radioStyle:A,showColumn:S,systemFields:g,filterValue:O,isFilterField:H,myFields:c,allHide:N,allShow:z,showColumnNum:D,handleChangeShow:l,onDragEnd:F,onChangeLineHeight:Z,onChangeShowColumn:J,onChangeAutoRefresh:G,onChangeHasSummary:M,onChangeSystemFields:K}}};const w=m=>($("data-v-7e2b9e5f"),m=m(),ee(),m),me={class:"inner-content"},_e=w(()=>s("div",{class:"title"},"表格设置",-1)),ve={class:"config-detail"},pe=w(()=>s("div",{class:"label"},"行高",-1)),ye={class:"config-item"},ge=w(()=>s("div",{class:"label"},"自动刷新",-1)),Ce=w(()=>s("div",{class:"tip"},"每隔一段时间后自动刷新当前视图",-1)),we={class:"config-item"},Ee=w(()=>s("div",{class:"label"},"数据统计",-1)),Fe={class:"config-item"},be=w(()=>s("div",{class:"label"},"显示列",-1)),ke={class:"config-item"},Be=w(()=>s("div",{class:"label"},"显示系统字段",-1)),Se={class:"config-item"},Ae={class:"field-warp"},xe={class:"field"},De={key:1,class:"config-item"},Le={style:{width:"360px","border-bottom":"1px solid #eee"}},qe={class:"buttons"},Oe={key:0,class:"column-num"},He={class:"field-warp all-fields"},Ve={key:0,class:"field"},Ue=["title"],ze={class:"ellipsis"},Ne={class:"icon",title:"调整顺序"};function Re(m,u,k,t,B,S){const E=f("a-radio-button"),A=f("a-radio-group"),x=f("a-select-option"),g=f("a-select"),c=f("a-switch"),D=f("a-radio"),L=f("component-icon"),q=f("search-outlined"),O=f("a-input"),H=f("a-button"),z=f("OrderedListOutlined"),N=f("draggable");return v(),p("div",me,[_e,s("div",ve,[s("div",null,[pe,s("div",ye,[d(A,{value:t.lineHeight,"onUpdate:value":u[0]||(u[0]=l=>t.lineHeight=l),onChange:t.onChangeLineHeight},{default:h(()=>[d(E,{value:"small"},{default:h(()=>[y("紧凑")]),_:1}),d(E,{value:"middle"},{default:h(()=>[y("中等")]),_:1}),d(E,{value:"large"},{default:h(()=>[y("高")]),_:1})]),_:1},8,["value","onChange"])]),ge,Ce,s("div",we,[d(g,{style:{width:"280px"},value:t.autoRefresh,"onUpdate:value":u[1]||(u[1]=l=>t.autoRefresh=l),onChange:t.onChangeAutoRefresh},{default:h(()=>[(v(!0),p(I,null,j(t.refreshList,l=>(v(),te(x,{value:l.time},{default:h(()=>[y(U(l.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value","onChange"])]),Ee,s("div",Fe,[d(c,{class:"sjtj",checked:t.hasSummary,"onUpdate:checked":u[2]||(u[2]=l=>t.hasSummary=l),checkedChildren:"开",unCheckedChildren:"关",size:"small",onChange:t.onChangeHasSummary},null,8,["checked","onChange"])]),be,s("div",ke,[d(A,{value:t.showColumn,"onUpdate:value":u[3]||(u[3]=l=>t.showColumn=l),onChange:t.onChangeShowColumn},{default:h(()=>[d(D,{style:T(t.radioStyle),value:"default"},{default:h(()=>[y("与表单中的字段保持一致（仅显示前50个）")]),_:1},8,["style"]),d(D,{style:T(t.radioStyle),value:"diy"},{default:h(()=>[y("自定义显示列")]),_:1},8,["style"])]),_:1},8,["value","onChange"])]),t.showColumn=="default"?(v(),p(I,{key:0},[Be,s("div",Se,[s("div",Ae,[(v(!0),p(I,null,j(t.systemFields,l=>(v(),p("div",xe,[d(c,{checked:l.show,"onUpdate:checked":F=>l.show=F,size:"small",onChange:t.onChangeSystemFields,style:{"margin-right":"12px"}},null,8,["checked","onUpdate:checked","onChange"]),d(L,{type:l.type},null,8,["type"]),s("span",null,U(l.name),1)]))),256))])])],64)):(v(),p("div",De,[s("div",Le,[d(O,{placeholder:"搜索字段",class:"my-input",value:t.filterValue,"onUpdate:value":u[4]||(u[4]=l=>t.filterValue=l)},{prefix:h(()=>[d(q,{style:{color:"#c0c0c0"}})]),_:1},8,["value"])]),s("div",qe,[s("div",null,[d(H,{type:"text",onClick:t.allShow},{default:h(()=>[y("显示全部")]),_:1},8,["onClick"]),d(H,{type:"text",onClick:t.allHide},{default:h(()=>[y("隐藏全部")]),_:1},8,["onClick"])]),t.showColumnNum?(v(),p("div",Oe,"显示"+U(t.showColumnNum)+"列",1)):W("",!0)]),s("div",He,[d(N,{"item-key":"name",animation:"300",modelValue:t.myFields,"onUpdate:modelValue":u[5]||(u[5]=l=>t.myFields=l),dragClass:"dragClass",onEnd:t.onDragEnd},{item:h(({element:l})=>[t.isFilterField(l)?(v(),p("div",Ve,[s("div",{style:{display:"flex",width:"330px"},title:l.name},[d(c,{style:{"margin-right":"12px","align-self":"center"},title:l.disabled?"该列在显示字段配置中被设定为隐藏，此处无法修改！":"",disabled:l.disabled,checked:l.show,"onUpdate:checked":F=>l.show=F,onChange:t.handleChangeShow,size:"small"},null,8,["title","disabled","checked","onUpdate:checked","onChange"]),d(L,{type:l.type},null,8,["type"]),s("span",ze,U(l.name),1)],8,Ue),s("div",Ne,[d(z)])])):W("",!0)]),_:1},8,["modelValue","onEnd"])])]))])])])}const Je=he(fe,[["render",Re],["__scopeId","data-v-7e2b9e5f"]]);export{Je as default};

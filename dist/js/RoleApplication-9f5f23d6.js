var _e=Object.defineProperty,ve=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var H=(r,u,d)=>u in r?_e(r,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[u]=d,P=(r,u)=>{for(var d in u||(u={}))he.call(u,d)&&H(r,d,u[d]);if(F)for(var d of F(u))fe.call(u,d)&&H(r,d,u[d]);return r},X=(r,u)=>ve(r,me(u));import{d as G,f as m,r as ke,V as f,a6 as o,a7 as s,a5 as e,k as l,ai as n,F as b,am as ge,a8 as Ce,ak as A,af as C,W as h,E as y,u as w,a3 as ze,a4 as ye}from"./vue-vendor-24c7dc61.js";import{r as $}from"./application.data-33c48cb5.js";import xe from"./RoleAuthDrawer-e478a562.js";import{u as be}from"./index-44229d9b.js";import we from"./BasicTable-d435f501.js";import{u as Ie}from"./useListPage-62a041ef.js";import{a as De,l as Se}from"./index-831af9dd.js";import"./RoleCheckBox-ff98d496.js";import"./antd-vue-vendor-0d72f01e.js";import"./index-52c8c841.js";import"./useForm-14b2bc77.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./vxe-table-vendor-8813019a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./helper-22dafba0.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./index-621e597c.js";const p=r=>(ze("data-v-8d342a6b"),r=r(),ye(),r),Ae={class:"flex-flow",style:{height:"100%"}},Ue={class:"role-left flex-column"},Ne={class:"create-role"},Ee=p(()=>e("span",{style:{"margin-left":"0 !important"}},"创建角色",-1)),Re={class:"search-role"},Le={class:"role-list flex-flow"},Be=["onClick"],Te={class:"flex-flow flex ellipsis break-all vertical-middle"},Ve=p(()=>e("span",{class:"edit-role"},"复制角色",-1)),Me=p(()=>e("span",{class:"delete-role"},"删除",-1)),Oe={key:0,class:"role-right flex flex-column",style:{position:"relative"}},je={class:"right-form"},Fe={class:"align-center flex-flow"},He=p(()=>e("div",{class:"font-size14 font-blob700 flex"},"角色名称",-1)),Pe={class:"see-user font-size14 pointer flex-flow align-center"},Xe=p(()=>e("span",{style:{"margin-left":"5px"}},"查看用户",-1)),$e={class:"margin-top8"},Ge={key:0,class:"role-name"},Ke={key:1,style:{width:"300px"}},We=p(()=>e("div",{class:"font-size14 margin-top25 font-blob700"}," 描述 ",-1)),qe={class:"margin-top8"},Je={key:0,class:"role-desc"},Qe={key:1,style:{width:"300px"}},Ye=p(()=>e("div",{class:"font-size14 margin-top25 font-blob700"}," 分发哪些应用项 ",-1)),Ze={class:"margin-top8 font-size14"},et=p(()=>e("div",{class:"font-size14 margin-top25 font-blob700"}," 权限 ",-1)),tt={class:"margin-top8 font-size14"},ot={key:0,class:"des-role"},at=p(()=>e("span",{style:{color:"#9e9e9e"}},"（应用管理员为系统内置角色，不可修改）",-1)),lt={key:1},nt=p(()=>e("span",{class:"select-auth"}," 可查看、编辑、删除所有记录 ",-1)),it=p(()=>e("span",{class:"select-auth"}," 可查看所有记录，但只能编辑、删除自己拥有的记录 ",-1)),st=p(()=>e("span",{class:"select-auth"}," 可查看加入的，只能编辑、删除自己拥有的记录 ",-1)),ct=p(()=>e("span",{class:"select-auth"}," 对所有记录只有查看权限 ",-1)),dt={class:"font-size14 margin-top25 font-blob700"},pt=p(()=>e("span",null,"操作权限",-1)),rt={class:"margin-top8 font-size14"},ut=p(()=>e("div",{class:"font-size14",style:{"margin-top":"32px",color:"#757575"}}," 可以访问的视图和数据操作权限 ",-1)),_t={class:"margin-top8 font-size14"},vt={key:5},mt=["onClick"],ht={class:"footer flex-flow"},ft=G({name:"role-application"}),kt=G(X(P({},ft),{setup(r,{expose:u}){const d=m([]),k=m(""),R=m(""),gt=m(""),_=ke({applyDirection:"1",authorityType:"2"}),K=m([{label:"新增",value:"1"},{label:"分享",value:"2"},{label:"导入",value:"3"},{label:"导出",value:"4"},{label:"系统打印",value:"5"},{label:"附件下载",value:"6"},{label:"打印",value:"7"}]),U=m(["1","2","3","4","5","6","7"]),L=m(["1","2","3","4","5","6","7"]),x=m(!0),W=m([{id:"1",applicationName:"仪表盘统计",izSee:"0",izEdit:"1",izDelete:"0",izAdd:"0",parentId:""},{id:"2",applicationName:"issues管理",izSee:"0",izEdit:"1",izDelete:"0",izAdd:"0",parentId:"",children:[{applicationName:"全部",izSee:"1",izEdit:"0",izDelete:"0",izAdd:"0",parentId:"2"},{applicationName:"待办的",izSee:"0",izEdit:"0",izDelete:"1",izAdd:"1",parentId:"2"}]}]),{prefixCls:Ct,tableContext:zt,onImportXls:yt,onExportXls:xt}=Ie({tableProps:{columns:$,showTableSetting:!1,showActionColumn:!1,formConfig:{showActionButtonGroup:!1}}}),B=m(!1),T=m(!1),V=m(!1),M=m(!1),[q,{openDrawer:J}]=be(),{createMessage:Q}=De();function Y(v){d.value=v}function Z(v){w(k)=="-1"&&d.value.pop(),k.value=v.roleCode,Object.assign(_,v)}function ee({key:v}){}function te(){U.value=x.value?[]:w(L),x.value=!x.value}function oe(v){x.value=v.length===w(L).length}function I(v,a,D){v.target.checked?a[D]="1":a[D]="0"}function ae(v){J(!0,{record:v})}function le(){if(k.value==="-1"){Q.warning("请保存当前新增角色");return}d.value.push({id:"-1",roleCode:"-1",roleName:"新角色"}),k.value="-1",Object.assign(_,{id:"-1",roleCode:"-1",roleName:"新角色"})}function ne(){}function ie(){}function se(){}return u({setRoleList:Y}),(v,a)=>{const D=f("a-button"),N=f("Icon"),E=f("a-input"),O=f("a-menu-item"),ce=f("a-menu"),de=f("a-dropdown"),j=f("a-radio"),pe=f("a-radio-group"),S=f("a-select-option"),re=f("a-select"),ue=f("a-checkbox-group"),z=f("a-checkbox");return o(),s(b,null,[e("div",Ae,[e("div",Ue,[e("div",Ne,[l(D,{preIcon:"ant-design:plus-outlined",class:"add-role-btn",onClick:le},{default:n(()=>[Ee]),_:1})]),e("div",Re,[l(E,{value:R.value,"onUpdate:value":a[0]||(a[0]=t=>R.value=t),placeholder:"搜索角色",allowClear:"",style:{border:"none"}},{prefix:n(()=>[l(N,{style:{color:"#9d9d9d"},icon:"ant-design:search-outlined"})]),_:1},8,["value"])]),e("div",Le,[e("ul",null,[(o(!0),s(b,null,ge(d.value,t=>(o(),s("li",{class:Ce(["flex-flow content-li",k.value===t.roleCode?"li-active":""]),style:{position:"relative"},onClick:g=>Z(t)},[e("span",Te,A(t.roleName),1),l(de,{trigger:["click"]},{overlay:n(()=>[l(ce,{onClick:ee},{default:n(()=>[l(O,{key:"edit-role",class:"menu-item-content"},{default:n(()=>[Ve]),_:1}),l(O,{key:"delete-role",class:"menu-item-content"},{default:n(()=>[Me]),_:1})]),_:1})]),default:n(()=>[t.roleCode!="applicationAdmin"?(o(),C(N,{key:0,class:"content-icon",icon:"ant-design:more-outlined",style:{display:"none"}})):h("",!0)]),_:2},1024)],10,Be))),256))])])]),k.value!=""?(o(),s("div",Oe,[e("div",je,[e("div",Fe,[He,e("span",Pe,[l(N,{icon:"ant-design:team-outlined"}),Xe])]),e("div",$e,[k.value==="applicationAdmin"?(o(),s("div",Ge,A(_.roleName),1)):(o(),s("div",Ke,[l(E,{value:_.roleName,"onUpdate:value":a[1]||(a[1]=t=>_.roleName=t)},null,8,["value"])]))]),We,e("div",qe,[k.value==="applicationAdmin"?(o(),s("div",Je,A(_.roleDesc),1)):(o(),s("div",Qe,[l(E,{value:_.roleDesc,"onUpdate:value":a[2]||(a[2]=t=>_.roleDesc=t)},null,8,["value"])]))]),Ye,e("div",Ze,[l(pe,{value:_.applyDirection,"onUpdate:value":a[3]||(a[3]=t=>_.applyDirection=t)},{default:n(()=>[l(j,{value:"1"},{default:n(()=>[y("分发所有应用项（简单）")]),_:1}),l(j,{value:"2"},{default:n(()=>[y("分发有选择的应用项（高级）")]),_:1})]),_:1},8,["value"])]),_.applyDirection==="1"?(o(),s(b,{key:0},[et,e("div",tt,[k.value==="applicationAdmin"?(o(),s("div",ot,[y(" 拥有所有权限 "),at])):(o(),s("div",lt,[l(re,{value:_.authorityType,"onUpdate:value":a[4]||(a[4]=t=>_.authorityType=t),style:{width:"100%"}},{default:n(()=>[l(S,{value:"1"},{default:n(()=>[nt]),_:1}),l(S,{value:"2",class:"select-auth"},{default:n(()=>[it]),_:1}),l(S,{value:"3",class:"select-auth"},{default:n(()=>[st]),_:1}),l(S,{value:"4",class:"select-auth"},{default:n(()=>[ct]),_:1})]),_:1},8,["value"])]))]),e("div",dt,[pt,e("span",{class:"all-check pointer",onClick:te},A(x.value?"取消全选":"全选"),1)]),e("div",rt,[l(ue,{onChange:oe,value:U.value,"onUpdate:value":a[5]||(a[5]=t=>U.value=t),options:K.value},null,8,["value","options"])])],64)):(o(),s(b,{key:1},[ut,e("div",_t,[l(we,{columns:w($),dataSource:W.value,showIndexColumn:!1},{headerCell:n(({column:t})=>[t.dataIndex=="applicationName"?(o(),s(b,{key:0},[y(" 应用项 ")],64)):h("",!0),t.dataIndex==="izSee"?(o(),C(z,{key:1,checked:B.value,"onUpdate:checked":a[6]||(a[6]=g=>B.value=g)},{default:n(()=>[y("查看")]),_:1},8,["checked"])):h("",!0),t.dataIndex==="izEdit"?(o(),C(z,{key:2,checked:M.value,"onUpdate:checked":a[7]||(a[7]=g=>M.value=g)},{default:n(()=>[y("编辑")]),_:1},8,["checked"])):h("",!0),t.dataIndex==="izDelete"?(o(),C(z,{key:3,checked:V.value,"onUpdate:checked":a[8]||(a[8]=g=>V.value=g)},{default:n(()=>[y("删除")]),_:1},8,["checked"])):h("",!0),t.dataIndex==="izAdd"?(o(),C(z,{key:4,checked:T.value,"onUpdate:checked":a[9]||(a[9]=g=>T.value=g)},{default:n(()=>[y("新增")]),_:1},8,["checked"])):h("",!0),t.dataIndex==="operation"?(o(),s("span",vt,"操作")):h("",!0)]),bodyCell:n(({column:t,text:g,record:i})=>[t.dataIndex==="izSee"?(o(),C(z,{key:0,value:i.izSee,"onUpdate:value":c=>i.izSee=c,checked:i.izSee=="1",onChange:c=>I(c,i,"izSee")},null,8,["value","onUpdate:value","checked","onChange"])):h("",!0),t.dataIndex==="izEdit"?(o(),C(z,{key:1,value:i.izEdit,"onUpdate:value":c=>i.izEdit=c,checked:i.izEdit=="1",onChange:c=>I(c,i,"izEdit")},null,8,["value","onUpdate:value","checked","onChange"])):h("",!0),t.dataIndex==="izDelete"?(o(),C(z,{key:2,value:i.izDelete,"onUpdate:value":c=>i.izDelete=c,checked:i.izDelete=="1",onChange:c=>I(c,i,"izDelete")},null,8,["value","onUpdate:value","checked","onChange"])):h("",!0),t.dataIndex==="izAdd"?(o(),C(z,{key:3,value:i.izAdd,"onUpdate:value":c=>i.izAdd=c,checked:i.izAdd=="1",onChange:c=>I(c,i,"izAdd")},null,8,["value","onUpdate:value","checked","onChange"])):h("",!0),t.dataIndex==="operation"?(o(),s("span",{key:4,style:{color:"#1e88e5",cursor:"pointer"},onClick:c=>ae(i)},"设置",8,mt)):h("",!0)]),_:1},8,["columns","dataSource"])])],64))]),e("div",ht,[k.value!=""&&k.value!="-1"?(o(),s("div",{key:0,class:"save-btn pointer flex-flow align-center",onClick:ne}," 保存 ")):(o(),s("div",{key:1,class:"save-btn pointer flex-flow align-center",onClick:ie}," 创建 ")),e("div",{class:"cancel-btn pointer",onClick:se}," 取消 ")])])):h("",!0)]),l(xe,{onRegister:w(q)},null,8,["onRegister"])],64)}}}));const xo=Se(kt,[["__scopeId","data-v-8d342a6b"]]);export{xo as default};

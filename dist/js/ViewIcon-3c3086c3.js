var V=(p,e,u)=>new Promise((t,C)=>{var w=n=>{try{f(u.next(n))}catch(c){C(c)}},v=n=>{try{f(u.throw(n))}catch(c){C(c)}},f=n=>n.done?t(n.value):Promise.resolve(n.value).then(w,v);f((u=u.apply(p,e)).next())});import{f as x,w as S,n as T,a5 as r,V as i,a6 as a,a7 as O,k as o,ai as l,af as m,F as R,z as d,E as g,W as k}from"./vue-vendor-24c7dc61.js";import{aC as L,bJ as j,cc as H,aZ as J,bI as P,aJ as W,cb as q,bR as z,b7 as U,a$ as X,cp as Z,cq as G}from"./antd-vue-vendor-0d72f01e.js";import{H as y,a as K,l as Q}from"./index-831af9dd.js";import{g as Y}from"./lowAppUtils-56892d30.js";import{u as $}from"./useFuncSwitch-b7681246.js";import"./vxe-table-vendor-8813019a.js";const ee={name:"ViewIcon",emits:["config"],components:{PlusOutlined:L,CalendarOutlined:j,SlidersOutlined:H,TableOutlined:J,CaretDownOutlined:P,SettingOutlined:W,SwapOutlined:q,CopyOutlined:z,DownloadOutlined:U,DeleteOutlined:X,ShareAltOutlined:Z,ImportOutlined:G},props:{def:y.bool.def(!0),hasAdminAuth:y.bool.def(!1),operationAuth:y.object,buttonsAuth:y.object,showDelete:y.bool.def(!0)},setup(p,{emit:e}){const{createMessage:u}=K(),{getHasFunc:t}=$(),C=t("VIEW_EXPORT");function w(_){e("config",_)}function v(_){return p.hasAdminAuth===!0?!0:p.operationAuth[_]}function f(){return Y()}const n=x(),c=x(!1);S(c,_=>V(this,null,function*(){var A;if(_){n.value||(yield T());const b=(A=n.value)==null?void 0:A.$el;b&&b.childElementCount===0&&(u.warn("无更多操作！"),c.value=!1)}}),{immediate:!0});function h(){c.value=!1}return{menuRef:n,dropdownVisible:c,clickMenu:w,isLowApp:f,hasViewExport:C,hasAuth:v,onClickMenu:h}}};const ne={class:"design-view-right-icon"},te=r("span",null,"配置视图",-1),oe=r("span",null,"更改视图类型",-1),ue={style:{width:"100px",display:"inline-block"}},le=r("span",null,"复制视图",-1),ie=r("span",null,"导出",-1),se=r("span",{style:{color:"red"}},"删除视图",-1),ae=r("span",null,"配置视图",-1),de=r("span",null,"导入",-1),ce=r("span",null,"导出",-1),re=r("span",null,"回收站",-1);function _e(p,e,u,t,C,w){const v=i("caret-down-outlined"),f=i("setting-outlined"),n=i("a-menu-item"),c=i("swap-outlined"),h=i("table-outlined"),_=i("a-menu-divider"),A=i("sliders-outlined"),b=i("calendar-outlined"),B=i("a-sub-menu"),D=i("copy-outlined"),F=i("download-outlined"),M=i("delete-outlined"),E=i("a-menu"),I=i("import-outlined"),N=i("a-dropdown");return a(),O("span",ne,[o(N,{open:t.dropdownVisible,"onUpdate:open":e[11]||(e[11]=s=>t.dropdownVisible=s),trigger:["click"],overlayClassName:"design-view-menu"},{overlay:l(()=>[t.isLowApp()?(a(),m(E,{key:0,ref:"menuRef",onClick:t.onClickMenu},{default:l(()=>[u.hasAdminAuth&&u.buttonsAuth.customColumn?(a(),O(R,{key:0},[o(n,{key:"0",onClick:e[0]||(e[0]=d(s=>t.clickMenu(1),["prevent"]))},{default:l(()=>[o(f,{style:{}}),te]),_:1}),u.hasAdminAuth&&u.buttonsAuth.customColumn?(a(),m(B,{key:"sub1",class:"design-sub-menu"},{title:l(()=>[o(c,{style:{}}),oe]),default:l(()=>[o(n,{key:"00",onClick:e[1]||(e[1]=d(s=>t.clickMenu(2),["prevent"]))},{default:l(()=>[r("span",ue,[o(h,{style:{color:"#ffa515"}}),g(" 表格 ")])]),_:1}),o(_),o(n,{key:"02",onClick:e[2]||(e[2]=d(s=>t.clickMenu(3),["prevent"]))},{default:l(()=>[o(A,{style:{color:"#4caf50"}}),g(" 看板 ")]),_:1}),o(_),o(n,{key:"01",onClick:e[3]||(e[3]=d(s=>t.clickMenu(4),["prevent"]))},{default:l(()=>[o(b,{style:{color:"#f54081"}}),g(" 日历 ")]),_:1})]),_:1})):k("",!0),o(_),u.hasAdminAuth&&u.buttonsAuth.customColumn?(a(),m(n,{key:"3",onClick:e[4]||(e[4]=d(s=>t.clickMenu(5),["prevent"]))},{default:l(()=>[o(D,{style:{}}),le]),_:1})):k("",!0)],64)):k("",!0),t.hasViewExport&&t.hasAuth("export_table")&&u.buttonsAuth.export?(a(),m(n,{key:"8",onClick:e[5]||(e[5]=d(s=>t.clickMenu(8),["prevent"]))},{default:l(()=>[o(F),ie]),_:1})):k("",!0),u.showDelete&&u.hasAdminAuth&&u.buttonsAuth.customColumn?(a(),m(n,{key:"4",onClick:e[6]||(e[6]=d(s=>t.clickMenu(6),["prevent"]))},{default:l(()=>[o(M,{style:{color:"red"}}),se]),_:1})):k("",!0)]),_:1},8,["onClick"])):(a(),m(E,{key:1,onClick:t.onClickMenu},{default:l(()=>[u.buttonsAuth.customColumn?(a(),m(n,{key:"0",onClick:e[7]||(e[7]=d(s=>t.clickMenu(1),["prevent"]))},{default:l(()=>[o(f,{style:{}}),ae]),_:1})):k("",!0),u.buttonsAuth.import?(a(),m(n,{key:"9",onClick:e[8]||(e[8]=d(s=>t.clickMenu(9),["prevent"]))},{default:l(()=>[o(I),de]),_:1})):k("",!0),u.buttonsAuth.export?(a(),m(n,{key:"8",onClick:e[9]||(e[9]=d(s=>t.clickMenu(8),["prevent"]))},{default:l(()=>[o(F),ce]),_:1})):k("",!0),o(n,{key:"10",onClick:e[10]||(e[10]=d(s=>t.clickMenu(10),["prevent"]))},{default:l(()=>[o(M),re]),_:1})]),_:1},8,["onClick"]))]),default:l(()=>[o(v)]),_:1},8,["open"])])}const we=Q(ee,[["render",_e]]);export{we as default};

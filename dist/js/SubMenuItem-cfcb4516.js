var de=Object.defineProperty;var W=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var j=(e,t,n)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||(t={}))pe.call(t,n)&&j(e,n,t[n]);if(W)for(var n of W(t))ce.call(t,n)&&j(e,n,t[n]);return e};import{e as m,u as r,d as J,f as fe,w as ve,g as K,V as R,a6 as T,a7 as A,a8 as g,z as Q,ae as U,af as B,ai as N,O as M,a5 as P,F as X,r as F,c as be,B as ge,p as Ce,H as G,k as H,q as he,A as Me,ap as Se,aq as $e,ag as ye,W as Ie}from"./vue-vendor-24c7dc61.js";import{v as Pe,x as Te,H as V,bn as we,h as Z,l as x,R as ke,c8 as Ne,W as Oe,ay as Le,c7 as Re}from"./index-831af9dd.js";import{T as Ae,P as Ee}from"./antd-vue-vendor-0d72f01e.js";const _=Symbol();function Ge(e){return Pe(e,_,{readonly:!1,native:!0})}function ee(){return Te(_)}function te(e){const t=m(()=>v(["Menu","SubMenu"])),n=m(()=>v(["Menu"])),l=m(()=>v(["SubMenu"])),p=m(()=>{var S,$,f;let s=e==null?void 0:e.parent;if(!s)return{};const o=($=(S=r(n))==null?void 0:S.props.indentSize)!=null?$:20;let i=o;if((f=r(n))!=null&&f.props.collapse)i=o;else for(;s&&s.type.name!=="Menu";)s.type.name==="SubMenu"&&(i+=o),s=s.parent;return{paddingLeft:i+"px"}});function v(s){let o=e==null?void 0:e.parent;if(!o)return null;for(;o&&s.indexOf(o.type.name)===-1;)o=o.parent;return o}function c(){let s=e;if(!s)return{uidList:[],list:[]};const o=[];for(;s&&s.type.name!=="Menu";)s.type.name==="SubMenu"&&o.push(s),s=s.parent;return{uidList:o.map(i=>i.uid),list:o}}function b(s,o="SubMenu"){let i=s.parent;for(;i;){if(i.type.name!==o)return i;i=i.parent}return i}return{getParentMenu:t,getParentInstance:b,getParentRootMenu:n,getParentList:c,getParentSubMenu:l,getItemStyle:p}}const ze=J({name:"MenuItem",components:{Tooltip:Ae},props:{name:{type:[String,Number],required:!0},disabled:V.bool},setup(e,{slots:t}){const n=K(),l=we(),p=fe(!1),{getItemStyle:v,getParentList:c,getParentMenu:b,getParentRootMenu:s}=te(n),{prefixCls:o}=Z("menu"),{rootMenuEmitter:i,activeName:S}=ee(),$=m(()=>[`${o}-item`,{[`${o}-item-active`]:r(p),[`${o}-item-selected`]:r(p),[`${o}-item-disabled`]:!!e.disabled}]),f=m(()=>{var u;return(u=r(s))==null?void 0:u.props.collapse}),C=m(()=>{var u;return((u=r(b))==null?void 0:u.type.name)==="Menu"&&r(f)&&t.title});function w(){const{disabled:u}=e;if(u||(i.emit("on-menu-item-select",e.name),r(f)))return;const{uidList:d}=c();i.emit("on-update-opened",{opend:!1,parent:n==null?void 0:n.parent,uidList:d})}ve(()=>S.value,u=>{if(u===e.name){const{list:d,uidList:h}=c();p.value=!0,d.forEach(L=>{L.proxy&&(L.proxy.active=!0)}),O(e.name),i.emit("on-update-active-name:submenu",h)}else p.value=!1},{immediate:!0});function O(u){let d="";if(n.attrs){let h=n.attrs.item;h&&(d=h.title)}l&&l.setPathTitle(u,d)}return{getClass:$,prefixCls:o,getItemStyle:v,getCollapse:f,handleClickItem:w,showTooptip:C}}});function Be(e,t,n,l,p,v){const c=R("Tooltip");return T(),A("li",{class:g(e.getClass),onClick:t[0]||(t[0]=Q((...b)=>e.handleClickItem&&e.handleClickItem(...b),["stop"])),style:U(e.getCollapse?{}:e.getItemStyle)},[e.showTooptip?(T(),B(c,{key:0,placement:"right"},{title:N(()=>[M(e.$slots,"title")]),default:N(()=>[P("div",{class:g(`${e.prefixCls}-tooltip`)},[M(e.$slots,"default")],2)]),_:3})):(T(),A(X,{key:1},[M(e.$slots,"default"),M(e.$slots,"title")],64))],6)}const He=x(ze,[["render",Be]]),Y=200,Ve=J({name:"SubMenu",components:{Icon:ke,CollapseTransition:Ne,Popover:Ee},props:{name:{type:[String,Number],required:!0},disabled:V.bool,collapsedShowTitle:V.bool},setup(e){var D;const t=K(),n=F({active:!1,opened:!1}),l=F({timeout:null,mouseInChild:!1,isChild:!1}),{getParentSubMenu:p,getItemStyle:v,getParentMenu:c,getParentList:b}=te(t),{prefixCls:s}=Z("menu"),o=Re(),{rootMenuEmitter:i}=ee(),{addSubMenu:S,removeSubMenu:$,removeAll:f,getOpenNames:C,isRemoveAllPopup:w,sliceIndex:O,level:u,props:d,handleMouseleave:h}=be(`subMenu:${(D=c.value)==null?void 0:D.uid}`),L=m(()=>[`${s}-submenu`,{[`${s}-item-active`]:n.active,[`${s}-opened`]:n.opened,[`${s}-submenu-disabled`]:e.disabled,[`${s}-submenu-has-parent-submenu`]:r(p),[`${s}-child-item-active`]:n.active}]),ne=m(()=>d.accordion),k=m(()=>d.collapse),se=m(()=>d.theme),oe=m(()=>({minWidth:"200px"})),ae=m(()=>{const a=e.name;return r(k)?C().includes(a):n.opened}),le=m(()=>{const a=d.activeSubMenuNames.includes(e.name);return[`${s}-submenu-title`,{[`${s}-submenu-active`]:a,[`${s}-submenu-active-border`]:a&&u===0,[`${s}-submenu-collapse`]:r(k)&&u===0}]});function ie(a){return r(k)?{onMouseenter:re,onMouseleave:()=>q(a)}:{}}function ue(){const{disabled:a}=e;if(a||r(k))return;const y=n.opened;if(r(ne)){const{uidList:I}=b();i.emit("on-update-opened",{opend:!1,parent:t==null?void 0:t.parent,uidList:I})}else i.emit("open-name-change",{name:e.name,opened:!y});n.opened=!y}function re(){if(e.disabled)return;o.emit("submenu:mouse-enter-child");const y=C().findIndex(E=>E===e.name);O(y),u===0&&C().length===2&&f(),l.isChild=C().includes(e.name),clearTimeout(l.timeout),l.timeout=setTimeout(()=>{S(e.name)},Y)}function q(a=!1){var I;((I=c.value)==null?void 0:I.props.name)||(w.value=!0),C().slice(-1)[0]===e.name&&(l.isChild=!1),o.emit("submenu:mouse-leave-child"),l.timeout&&(clearTimeout(l.timeout),l.timeout=setTimeout(()=>{w.value?f():l.mouseInChild||$(e.name)},Y)),a&&p.value&&(h==null||h(!0))}ge(()=>{o.on("submenu:mouse-enter-child",()=>{l.mouseInChild=!0,w.value=!1,clearTimeout(l.timeout)}),o.on("submenu:mouse-leave-child",()=>{l.isChild||(l.mouseInChild=!1,clearTimeout(l.timeout))}),i.on("on-update-opened",a=>{if(!r(k)){if(Oe(a)){n.opened=a;return}if(Le(a)&&d.accordion){const{opend:y,parent:I,uidList:E}=a;I===(t==null?void 0:t.parent)?n.opened=y:E.includes(t==null?void 0:t.uid)||(n.opened=!1);return}e.name&&Array.isArray(a)&&(n.opened=a.includes(e.name))}}),i.on("on-update-active-name:submenu",a=>{t!=null&&t.uid&&(n.active=a.includes(t==null?void 0:t.uid))})});function me(a){n.opened=a}return Ce(`subMenu:${t==null?void 0:t.uid}`,{addSubMenu:S,removeSubMenu:$,getOpenNames:C,removeAll:f,isRemoveAllPopup:w,sliceIndex:O,level:u+1,handleMouseleave:q,props:d}),z(z({getClass:L,prefixCls:s,getCollapse:k,getItemStyle:v,handleClick:ue,handleVisibleChange:me,getParentSubMenu:p,getOverlayStyle:oe,getTheme:se,getIsOpend:ae,getEvents:ie,getSubClass:le},G(n)),G(l))}});function qe(e,t,n,l,p,v){const c=R("Icon"),b=R("CollapseTransition"),s=R("Popover");return T(),A("li",{class:g(e.getClass)},[e.getCollapse?(T(),B(s,{key:1,placement:"right",overlayClassName:`${e.prefixCls}-menu-popover`,open:e.getIsOpend,onOpenChange:e.handleVisibleChange,overlayStyle:e.getOverlayStyle,align:{offset:[0,0]}},{content:N(()=>[P("div",Se($e(e.getEvents(!0))),[P("ul",{class:g([e.prefixCls,`${e.prefixCls}-${e.getTheme}`,`${e.prefixCls}-popup`])},[M(e.$slots,"default")],2)],16)]),default:N(()=>[P("div",ye({class:e.getSubClass},e.getEvents(!1)),[P("div",{class:g([{[`${e.prefixCls}-submenu-popup`]:!e.getParentSubMenu,[`${e.prefixCls}-submenu-collapsed-show-tit`]:e.collapsedShowTitle}])},[M(e.$slots,"title")],2),e.getParentSubMenu?(T(),B(c,{key:0,icon:"eva:arrow-ios-downward-outline",size:14,class:g(`${e.prefixCls}-submenu-title-icon`)},null,8,["class"])):Ie("",!0)],16)]),_:3},8,["overlayClassName","open","onOpenChange","overlayStyle"])):(T(),A(X,{key:0},[P("div",{class:g(`${e.prefixCls}-submenu-title`),onClick:t[0]||(t[0]=Q((...o)=>e.handleClick&&e.handleClick(...o),["stop"])),style:U(e.getItemStyle)},[M(e.$slots,"title",{getIsOpened:e.getIsOpend}),H(c,{icon:"eva:arrow-ios-downward-outline",size:14,class:g(`${e.prefixCls}-submenu-title-icon`)},null,8,["class"])],6),H(b,null,{default:N(()=>[he(P("ul",{class:g(e.prefixCls)},[M(e.$slots,"default")],2),[[Me,e.opened]])]),_:3})],64))],2)}const Ye=x(Ve,[["render",qe]]);export{He as M,Ye as S,Ge as c};

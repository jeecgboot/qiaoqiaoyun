var S=Object.defineProperty;var h=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var T=(o,a,e)=>a in o?S(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,x=(o,a)=>{for(var e in a||(a={}))P.call(a,e)&&T(o,e,a[e]);if(h)for(var e of h(a))j.call(a,e)&&T(o,e,a[e]);return o};var _=(o,a,e)=>new Promise((c,s)=>{var g=l=>{try{u(e.next(l))}catch(r){s(r)}},v=l=>{try{u(e.throw(l))}catch(r){s(r)}},u=l=>l.done?c(l.value):Promise.resolve(l.value).then(g,v);u((e=e.apply(o,a)).next())});import{l as O,d as R,f as b,V as y,a6 as U,a7 as V,k as i,ai as m,E as F,u as p,ag as D,a5 as Y,F as N,a3 as te,a4 as oe}from"./vue-vendor-24c7dc61.js";import{B as $}from"./index-1c3affea.js";import"./index-52c8c841.js";import{a0 as E,i as z}from"./antd-vue-vendor-0d72f01e.js";import{s as M}from"./LowAppTemplate.api-69278405.js";import{u as G,B as q}from"./useForm-14b2bc77.js";import{j as H,l as J}from"./index-831af9dd.js";const pe=[{title:"标题",align:"center",dataIndex:"title"},{title:"副标题",align:"center",dataIndex:"subTitle",ellipsis:!0},{title:"类别",align:"center",dataIndex:"category_dictText"},{title:"行业",align:"center",dataIndex:"industry_dictText"},{title:"应用ID",align:"center",dataIndex:"bindLowAppId"},{title:"状态",align:"center",dataIndex:"status",customRender:({text:o})=>{const a=o==1?"审核中":o==2?"审核通过":o==-1?"审核未通过":"草稿",e=o==1?"blue":o==2?"green":o==-1?"red":"gray";return O(E,{color:e},()=>a)}}],ce=[{label:"标题",field:"title",component:"Input"},{label:"状态",field:"status",component:"Select",componentProps:{options:[{label:"已通过",value:2,key:"2"},{label:"未通过",value:-1,key:"-1"},{label:"草稿",value:0,key:"0"},{label:"审核中",value:1,key:"1"}]}}],K=[{label:"标题",field:"title",component:"Input"},{label:"副标题",field:"subTitle",component:"Input"},{label:"类别",field:"category",component:"Input"},{label:"行业",field:"industry",component:"Input"},{label:"模版标签",field:"tag",component:"Input"},{label:"封面图",field:"coverUrl",component:"Input"},{label:"模版详情介绍",field:"introduce",component:"InputTextArea"},{label:"模版详情轮播图",field:"rotationPics",component:"Input"},{label:"",field:"id",component:"Input",show:!1}];const Q={style:{padding:"24px"}},W=R({__name:"LowAppTemplateModal",emits:["register","success"],setup(o,{emit:a}){const e=b(!1),c=b(""),s=b(!0),[g,{setProps:v,resetFields:u,setFieldsValue:l,getFieldsValue:r}]=G({schemas:K,showActionButtonGroup:!1,baseColProps:{span:24}}),[k,{setModalProps:d,closeModal:I}]=H(t=>_(this,null,function*(){yield u(),d({confirmLoading:!1,showCancelBtn:!!(t!=null&&t.showFooter),showOkBtn:!!(t!=null&&t.showFooter)}),s.value=!!(t!=null&&t.isUpdate),p(s)&&(yield l(x({},t.record))),v({disabled:!(t!=null&&t.showFooter)})}));function L(){return _(this,null,function*(){try{d({confirmLoading:!0});let t=r(),n=z(new Date).format("YYYY-MM-DD hh:mm:ss");yield M({id:t.id,status:2,publishTime:n},s.value),I(),a("success")}finally{d({confirmLoading:!1})}})}function B(){return _(this,null,function*(){try{d({confirmLoading:!0});let t=r();yield M({id:t.id,status:-1,rejectCause:p(c)},s.value),I(),a("success"),e.value=!1}finally{d({confirmLoading:!1})}})}return(t,n)=>{const w=y("a-button"),C=y("a-textarea"),A=y("a-modal");return U(),V(N,null,[i(p($),D(t.$attrs,{onRegister:p(k),destroyOnClose:"",title:"查看",width:800}),{footer:m(()=>[i(w,{type:"primary",onClick:L},{default:m(()=>[F("审核通过")]),_:1}),i(w,{type:"primary",danger:"",onClick:n[0]||(n[0]=f=>e.value=!0)},{default:m(()=>[F("审核不通过")]),_:1})]),default:m(()=>[i(p(q),{onRegister:p(g)},null,8,["onRegister"])]),_:1},16,["onRegister"]),i(A,{open:e.value,"onUpdate:open":n[2]||(n[2]=f=>e.value=f),title:"审核不通过原因",onOk:B},{default:m(()=>[Y("div",Q,[i(C,{rows:"3",value:c.value,"onUpdate:value":n[1]||(n[1]=f=>c.value=f)},null,8,["value"])])]),_:1},8,["open"])],64)}}});const X=J(W,[["__scopeId","data-v-7a98a875"]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{X as L,ue as a,pe as c,ce as s};

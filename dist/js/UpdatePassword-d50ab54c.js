var d=(w,m,t)=>new Promise((p,s)=>{var a=e=>{try{r(t.next(e))}catch(i){s(i)}},f=e=>{try{r(t.throw(e))}catch(i){s(i)}},r=e=>e.done?p(e.value):Promise.resolve(e.value).then(a,f);r((t=t.apply(w,m)).next())});import{d as R,f as u,a6 as k,af as v,ai as N,k as x,u as n,ag as C}from"./vue-vendor-24c7dc61.js";import{r as F}from"./validator-bc7dc032.js";import{bn as I,j as L,o as S,a as j,k as q}from"./index-831af9dd.js";import{B as E}from"./index-1c3affea.js";import{u as O,B as V}from"./useForm-14b2bc77.js";import"./user.api-ffaaa05b.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./helper-22dafba0.js";const Be=R({__name:"UpdatePassword",emits:["register"],setup(w,{expose:m,emit:t}){const p=I(),{t:s}=S(),a=j(),f=u(),r=u(""),e=u(s("layout.changePassword.changePassword")),[i,{resetFields:P,validate:h,clearValidate:y}]=O({schemas:[{label:s("layout.changePassword.oldPassword"),field:"oldpassword",component:"InputPassword",required:!0},{label:s("layout.changePassword.newPassword"),field:"password",component:"StrengthMeter",componentProps:{placeholder:s("layout.changePassword.pleaseEnterNewPassword")},rules:[{required:!0,message:s("layout.changePassword.pleaseEnterNewPassword")}]},{label:s("layout.changePassword.confirmNewPassword"),field:"confirmpassword",component:"InputPassword",dynamicRules:({values:o})=>F.confirmPassword(o,!0)}],showActionButtonGroup:!1,wrapperCol:null,labelWidth:p.getLocale=="zh_CN"?100:160}),[M,{setModalProps:l,closeModal:_}]=L();function b(){return d(this,null,function*(){try{const o=yield h();l({confirmLoading:!0});let g=Object.assign({username:n(r)},o);q.put({url:"/sys/user/updatePassword",params:g},{isTransformResponse:!1}).then(c=>{c.success?(a.createMessage.success(c.message),_()):a.createMessage.warning(c.message)})}finally{l({confirmLoading:!1})}})}function B(o){return d(this,null,function*(){if(o)r.value=o,yield l({visible:!0}),yield P(),yield y();else{a.createMessage.warning("当前系统无登录用户!");return}})}return m({title:e,show:B}),(o,g)=>(k(),v(n(E),C(o.$attrs,{onRegister:n(M),title:e.value,onOk:b,width:"600px"}),{default:N(()=>[x(V,{onRegister:n(i)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{Be as default};

var x=(_,i,t)=>new Promise((e,o)=>{var c=a=>{try{s(t.next(a))}catch(p){o(p)}},n=a=>{try{s(t.throw(a))}catch(p){o(p)}},s=a=>a.done?e(a.value):Promise.resolve(a.value).then(c,n);s((t=t.apply(_,i)).next())});import{l as C,h as D,k as M}from"./index-831af9dd.js";import{as as w,f as h,r as P,V as l,a6 as N,af as k,a8 as b,ai as m,k as r,a5 as f,ak as F}from"./vue-vendor-24c7dc61.js";import R from"./NoAuthPage-9ca43aaa.js";import O from"./AppFormRoute-e10612bb.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";const z={name:"AppShareDragPage",components:{NoAuthPage:R,AppFormRoute:O},setup(){const{prefixCls:_}=D("low-app-main-layout"),i=w(),t=h(""),e=h(!1),o=h(""),c=P({id:"",type:"",menuName:""}),n=h("");function s(u){n.value=u,setTimeout(()=>{n.value=""},2e3)}function a(){s("exportImage")}function p(){return x(this,null,function*(){let u=i.params.appId,d=i.params.code;const v="drag";t.value="",e.value=!0,o.value="";const S="/online/lowAppMenu/getAuthInfo";let I={appId:u,code:d};const g=yield M.get({url:S,params:I},{isTransformResponse:!1});if(g.success){let y=g.result;t.value=y.appName,Object.keys(c).map(A=>{c[A]=y[A]})}else e.value=!1,o.value=g.message})}return p(),{prefixCls:_,hasAuth:e,appName:t,activeMenu:c,msg:o,onSaveDragAsImage:a,appFormOpenStatus:n}}},B={style:{position:"relative",flex:"1",height:"50px"}},V={style:{"font-size":"17px","font-weight":"bold"}},T={style:{position:"absolute",right:"30px",display:"inline-block",height:"50px","line-height":"50px"}};function j(_,i,t,e,o,c){const n=l("Icon"),s=l("a-tooltip"),a=l("a-layout-header"),p=l("AppFormRoute"),u=l("a-layout-content"),d=l("a-layout"),v=l("NoAuthPage");return e.hasAuth?(N(),k(d,{key:0,class:b(e.prefixCls)},{default:m(()=>[r(a,{class:"app-index-header",theme:"light"},{default:m(()=>[f("div",B,[f("span",V,F(e.activeMenu.menuName?e.activeMenu.menuName:" "),1),f("span",T,[r(s,{title:"保存图片",placement:"bottom"},{default:m(()=>[r(n,{icon:"ant-design:download-outlined",class:"share-header-right-icon",size:20,onClick:e.onSaveDragAsImage},null,8,["onClick"])]),_:1})])])]),_:1}),r(d,null,{default:m(()=>[r(u,null,{default:m(()=>[r(p,{open:e.appFormOpenStatus,activeMenu:e.activeMenu,appName:e.appName},null,8,["open","activeMenu","appName"])]),_:1})]),_:1})]),_:1},8,["class"])):(N(),k(v,{key:1,msg:e.msg},null,8,["msg"]))}const Q=C(z,[["render",j]]);export{Q as default};

var je=Object.defineProperty;var Se=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var Ie=(o,i,r)=>i in o?je(o,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[i]=r,me=(o,i)=>{for(var r in i||(i={}))Ve.call(i,r)&&Ie(o,r,i[r]);if(Se)for(var r of Se(i))Je.call(i,r)&&Ie(o,r,i[r]);return o};var _e=(o,i,r)=>new Promise((_,$)=>{var O=d=>{try{h(r.next(d))}catch(C){$(C)}},y=d=>{try{h(r.throw(d))}catch(C){$(C)}},h=d=>d.done?_(d.value):Promise.resolve(d.value).then(O,y);h((r=r.apply(o,i)).next())});import{aH as Te,aI as Qe,a as ye,k as oe,aq as ke,b as He,aJ as Le,aK as Ue,Z as Oe,_ as Re,j as Ge,q as Ee,l as Me,H as P,e as We}from"./index-831af9dd.js";import{G as Ze,w as W,b as xe,f as m,as as Xe,r as le,u as s,l as Ye,a2 as et,Z as tt,ar as nt,I as ot,d as qe,e as ve,h as at,a3 as Ot,a4 as Rt,V as D,a6 as V,a7 as G,k,ag as De,ai as q,at as lt,F as be,am as rt,q as st,af as Pe,A as it,a5 as $e,E as he,ak as ut,W as ze,o as ct}from"./vue-vendor-24c7dc61.js";import{B as dt}from"./index-1c3affea.js";import{u as ft}from"./useMethods-f689b480.js";function ae(o,i,r=1e3*30){return i==null||i===""?o():Te(i)?Promise.resolve(Te(i)):o().then(_=>(Qe(i,_),Promise.resolve(_)))}function pt(o,i){let r;if(Ze(o)){r=o.value;const t=W(o,n=>{r=n});xe(()=>t())}else r=o;const{createMessage:_}=ye(),$=m(!1),O=m(!1),y=m(""),h=m("列表"),d=m(""),C=m([]),w=m({}),E=m({}),z=m({}),S=m([]),I=m([]),R=Xe(),A=le({getColumnsAndData:"/online/cgreport/api/getColumnsAndData/",getColumns:"/online/cgreport/api/getRpColumns/",getData:"/online/cgreport/api/getData/",getQueryInfo:"/online/cgreport/api/getQueryInfo/",export:"/online/cgreport/api/exportManySheetXls/"}),c=m([]),g=m([]);let M=!0;r.clickToRowSelect===!1&&(M=!1);const K={fixed:!0,type:r.multi?"checkbox":"radio",selectedRowKeys:c,selectionRows:g,onChange:se},re={dataIndex:"index",width:"15px"},u=le({current:1,pageSize:10,pageSizeOptions:["10","20","30"],showQuickJumper:!0,showSizeChanger:!0,total:0,showTotal:t=>pe(t),realPageSize:10,realTotal:0,isTotal:"",onShowSizeChange:(t,n)=>fe(t,n)});function se(t){if(r.multi||(g.value=[],c.value=[],t=[t[t.length-1]]),!t||t.length==0)g.value=[],c.value=[];else{if(g.value.length>t.length)g.value.forEach((n,e)=>{const a=T(n);t.find(l=>l===a)||g.value.splice(e,1)});else{const n=[],e=g.value.map(a=>T(a));t.forEach(a=>{if(!e.find(l=>l===a)){const l=Z(a);l&&n.push(l)}}),g.value=[...g.value,...n]}c.value=[...t]}}function ie(){g.value=s(g).filter(t=>{let n=T(t);return s(c).indexOf(n)>=0})}function Z(t){let n=s(S).filter(e=>T(e)===t);return n&&n.length>0?n[0]:""}function T(t){let n=(t==null?void 0:t.id)||"";return Object.keys(t).forEach(e=>{n=e=="rowIndex"?t[e]+n:n+t[e]}),n=n.length>50?n.substring(0,50):n,n}function H(){let t=`${A.getColumns}${r.code}`,n=r.groupId?`${r.groupId}${t}`:"";ae(()=>oe.get({url:t},{isTransformResponse:!1,successMessageMode:"none"}),n).then(e=>{if(e.success){we(e.result.dictOptions),y.value=e.result.cgRpConfigId,h.value=e.result.cgRpConfigName;let a=e.result.columns;for(let l=0;l<a.length;l++){if(a[l].customRender){let f=a[l].customRender;a[l].customRender=({text:p})=>ke(s(z)[f],p+"")}s(d)&&a[l].dataIndex===s(d).column&&(a[l].sortOrder=s(d).order==="asc"?"ascend":"descend")}a[0].key!=="rowIndex"&&a.unshift({title:"序号",dataIndex:"rowIndex",key:"rowIndex",width:60,align:"center",customRender:function({text:l}){return l==null?"":parseInt(l)+1}}),I.value=[...a],te(null)}})}function ue(){u.isTotal="";let t=`${A.getColumnsAndData}${r.id}`,n=r.groupId?`${r.groupId}${t}`:"";ae(()=>oe.get({url:t},{isTransformResponse:!1,successMessageMode:"none"}),n).then(e=>{if(e.success){we(e.result.dictOptions),y.value=r.id;let{columns:a,cgreportHeadName:l,fieldHrefSlots:f,isGroupTitle:p}=e.result;h.value=l;const v={};f.forEach(j=>v[j.slotName]=j);let N=ce(a,v);M===!0&&N.unshift({title:"序号",dataIndex:"rowIndex",key:"rowIndex",width:60,align:"center",customRender:function({text:j}){return parseInt(j)+1}}),p===!0&&(N=L(N)),I.value=[...N],te(e.result.data)}else _.warning(e.message)})}function x(t,n){let e=X(t);if(u.isTotal=="")if(e.length>0){if(u.isTotal=!0,S.value.length==u.pageSize){let a=S.value.pop()}u.realPageSize=u.pageSize-1}else u.isTotal=!1;if(u.isTotal){let a={};e.forEach(l=>{let f=0;S.value.forEach(v=>{v[l]!=null&&v[l]!=""&&(f+=parseFloat(v[l]))}),a[l]=isNaN(f)?"包含非数字内容":f.toFixed(2);let p=t.find(v=>v.dataIndex==l);p&&p.fieldType=="Long"&&(a[l]=parseInt(a[l]))}),S.value.push(a),u.realTotal=n,u.total=Number(n)+Number(Math.floor(n/u.realPageSize))}}function X(t){let n=[];for(let e of t)if(e.isTotal==="1"&&n.push(e.dataIndex),e.children&&e.children.length>0){let a=X(e.children);a.length>0&&n.push(...a)}return n}function ce(t,n){for(let e of t){let{customRender:a,hrefSlotName:l,fieldType:f}=e;if(f=="Date")e.customRender=({text:p})=>p?p.length>10?p.substring(0,10):p:"";else if(!l&&e.scopedSlots&&e.scopedSlots.customRender&&n.hasOwnProperty(e.scopedSlots.customRender)&&(l=e.scopedSlots.customRender),a||l){let p=a,v="_replace_text_";e.customRender=({text:N,record:j})=>{let B=N;if(p)if(p.startsWith(v)){let ne=p.replace(v,"");B=j[ne]}else B=ke(s(z)[p],N+"");if(e.showLength&&B&&B.length>e.showLength&&(B=B.substr(0,e.showLength)+"..."),l){let ne=n[l];if(ne)return Ye("a",{onClick:()=>Y(ne,j)},B)}return B}}}return t}function L(t){let n=[];for(let e of t)if(s(d)&&e.dataIndex===s(d).column&&(e.sortOrder=s(d).order==="asc"?"ascend":"descend"),e.groupTitle){let a=n.findIndex(l=>l.title===e.groupTitle);if(a!==-1)n[a].children.push(e);else{let l={},f=[];f.push(e),l.title=e.groupTitle,l.align="center",l.children=f,n.push(l)}}else n.push(e);return n}let U=et();function Y(t,n){let e=t.href,a=/(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?/,l=/\.vue(\?.*)?$/,f=/{{([^}]+)}}/g;typeof e=="string"&&(e=e.trim().replace(/\${([^}]+)?}/g,(p,v)=>n[v]),f.test(e)&&(e=e.replace(f,function(p,v){try{return v.trim()==="ACCESS_TOKEN"?He():Le(v)}catch(N){return p}})),a.test(e)?window.open(e,"_blank"):l.test(e)?Be(e):U.push(e))}function de(){const{handleExportXls:t}=ft();let n=`${A.export}${y.value}`,e=Q(),a=s(c);a.length>0&&(e.force_id=a.map(l=>{var f;return(f=g.value.find(p=>T(p)===l))==null?void 0:f.id}).filter(l=>l!=null&&l!=="").join(",")),t(h.value,n,e)}function fe(t,n){u.isTotal="",u.pageSize=n,u.isTotal?u.realPageSize=n-1:u.realPageSize=n,u.current=1}function pe(t){let n=(u.current-1)*u.realPageSize+1,e=n+(u.isTotal?S.value.length-1:S.value.length)-1,a=u.isTotal?u.realTotal:t;return n+"-"+e+" 共"+a+"条"}function ee(t){return _e(this,null,function*(){$.value=t,t&&H()})}function te(t){let n=`${A.getQueryInfo}${s(y)}`,e=r.groupId?`${r.groupId}${n}`:"";ae(()=>oe.get({url:n},{isTransformResponse:!1,successMessageMode:"none"}),e).then(a=>{a.success?(Ce(a.result),C.value=a.result,t&&b(t),J(1)):_.warning(a.message)})}function J(t){t==1&&(u.current=1);let n=Q();n.onlRepUrlParamStr=ge(),O.value=!0;let e=`${A.getData}${s(y)}`,a=r.groupId?`${r.groupId}${e}${JSON.stringify(n)}`:"";ae(()=>oe.get({url:e,params:n},{isTransformResponse:!1,successMessageMode:"none"}),a).then(l=>{O.value=!1;let f=l.result;b(f)})}function ge(){let t=R.query,n=[];return t&&Object.keys(t).length>0&&Object.keys(t).map(e=>{n.push(`${e}=${t[e]}`)}),n.join("&")}function b(t){var n,e;if(t){u.total=Number(t.total);let a=(n=u==null?void 0:u.current)!=null?n:1;for(let l=0;l<t.records.length;l++)t.records[l].rowIndex||(t.records[l].rowIndex=l+(a-1)*10);S.value=t.records,i!=null&&i.value&&((e=i==null?void 0:i.value)==null||e.setPagination({total:Number(t.total)}))}else u.total=0,S.value=[];x(I.value,u.total)}function Q(){let t={};s(E)&&Object.keys(s(E)).map(e=>{t["self_"+e]=s(E)[e]});let n=Object.assign(t,s(w),s(d));return n.pageNo=u.current,n.pageSize=u.realPageSize,Ne(n)}function Ce(t){if(t&&t.length>0){let e={};for(let a of t)a.mode==="single"&&(e[a.field]="");w.value=me({},e)}r.routeQuery&&(w.value=Object.assign(w.value,r.routeQuery));let n={};r.param&&Object.keys(r.param).map(e=>{let a=r.param[e];e in w&&(a&&a.startsWith("'")&&a.endsWith("'")&&(a=a.substring(1,a.length-1)),s(w)[e]=a),n[e]=r.param[e]}),E.value=me({},n)}function Ae(t,n,e){Object.keys(e).length>0&&(d.value={column:e.field,order:e.order==="ascend"?"asc":"desc"},s(I).forEach(a=>{a.dataIndex===e.field&&(a.sortOrder=e.order)})),u.current=t.current,u.pageSize=t.pageSize,J()}function Fe(t){if(M===!0){r.multi||(g.value=[],c.value=[]);let n=T(t);if(!s(c)||s(c).length==0){let e=[],a=[];e.push(t),a.push(n),c.value=a}else if(s(c).indexOf(n)<0)c.value.push(n);else{let e=s(c).indexOf(n);c.value.splice(e,1)}i.value.setSelectedRowKeys([...c.value])}}function we(t){let n={};Object.keys(t).map(e=>{n[e]=t[e].filter(a=>a!=null)}),z.value=n}function Ne(t){if(typeof t=="object"){for(let n in t)t.hasOwnProperty(n)&&(t[n]==null||t[n]==null||t[n]==="")&&delete t[n];return t}}const F=m({model:{title:"",okText:"关闭",width:"100%",open:!1,destroyOnClose:!0,style:{top:0,left:0,height:"100%",margin:0,padding:0},bodyStyle:{padding:"8px",height:"calc(100vh - 108px)",overflow:"auto",overflowX:"hidden"},cancelButtonProps:{style:{display:"none"}}},on:{ok:()=>F.value.model.open=!1,cancel:()=>F.value.model.open=!1},is:null,params:{}});function Be(t){let n=t.indexOf("?"),e=t;if(n!==-1){e=t.substring(0,n);let l=t.substring(n+1,t.length).split("&"),f={};l.forEach(p=>{let v=p.split("=");f[v[0]]=v[1]}),F.value.params=f}else F.value.params={};F.value.model.open=!0,F.value.model.title="操作",F.value.is=tt(nt(()=>Ue(e)))}function Ke(){let t=s(g),n=c.value;if(!n||n.length<=0)return[];if(!t||t.length<=0)return[];let e=[];for(let a of n)for(let l=0;l<t.length;l++){let f=T(t[l]);if(a===f){e.push(ot(t[l]));break}}return e}return[{visibleChange:ee,loadColumnsInfo:H,loadColumnsAndData:ue,dynamicParamHandler:Ce,loadData:J,handleChangeInTable:Ae,combineRowKey:T,clickThenCheck:Fe,filterUnuseSelect:ie,handleExport:de,getOkSelectRows:Ke},{hrefComponent:F,visible:$,rowSelection:K,checkedKeys:c,selectRows:g,pagination:u,dataSource:S,columns:I,indexColumnProps:re,loading:O,title:h,iSorter:d,queryInfo:C,queryParam:w,dictOptions:z}]}const gt=qe({name:"JPopupOnlReportModal",components:{BasicModal:dt,SearchFormItem:Oe(()=>Re(()=>import("./SearchFormItem-e54d2216.js"),["js/SearchFormItem-e54d2216.js","js/vue-vendor-24c7dc61.js","js/JDictSelectTag-54dc3bdb.js","js/index-831af9dd.js","js/antd-vue-vendor-0d72f01e.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css","js/useFormItem-86503382.js","assets/JDictSelectTag-72919d86.css","js/index-52c8c841.js","js/useForm-14b2bc77.js","js/componentMap-c857637c.js","js/index-1c3affea.js","js/BasicModal-58413bab.js","js/useWindowSizeFn-8f085f6f.js","assets/BasicModal-d929f5ce.css","assets/index-ad7edbf1.css","js/download-1ac6acce.js","js/index-f99b266a.js","assets/index-15cc10f8.css","js/JSelectUser-a44af43a.js","js/useSelectBiz-2f560b0b.js","js/props-8a7ac45b.js","js/JSelectBiz-55a9591f.js","assets/JSelectBiz-ba37f0a8.css","assets/JSelectUser-7fda8076.css","js/JImageUpload-d644253a.js","assets/JImageUpload-d7ba7f20.css","js/JSelectDept-a90caee3.js","js/index-f2fd5a28.js","js/useContextMenu-810f9346.js","assets/useContextMenu-aed8cfe5.css","assets/index-a95e0833.css","assets/JSelectDept-2ce3f5d2.css","js/areaDataUtil-cdeee717.js","js/china-area-data-vendor-556d14ee.js","js/JCheckbox-0b89d32a.js","assets/JCheckbox-ce9c44dd.css","js/JSelectUserByDept-bd619076.js","js/UserSelectByDepModal-db060ece.js","js/depart.api-339f4da6.js","assets/JSelectUserByDept-f5671717.css","js/JUpload-76e119c7.js","js/index-d508f1f4.js","assets/index-27837f17.css","assets/JUpload-557f03ea.css","js/index-6507b9cd.js","js/index-4d0525a5.js","js/UserSelectModal-d78c1490.js","assets/UserSelectModal-aaef1bbb.css","assets/index-89763e09.css","assets/componentMap-2e742ecf.css","js/helper-22dafba0.js","assets/useForm-9101c3b7.css","js/JAreaLinkage-173780c9.js","js/JCodeEditor-66bd225e.js","js/codemirror-17b6f671.js","js/codemirror-26b29690.js","js/active-line-512fef49.js","assets/active-line-8a3c1e84.css","assets/JCodeEditor-d0a9ffd7.css","js/EasyCronInput-b2123242.js","assets/EasyCronInput-0e4d0046.css","js/JEditor-249b2194.js","js/index-b845562c.js","js/useMethods-f689b480.js","assets/SearchFormItem-b58f207b.css"]),{loading:!1}),BasicTable:Oe(()=>Re(()=>import("./BasicTable-d435f501.js"),["js/BasicTable-d435f501.js","js/vue-vendor-24c7dc61.js","js/antd-vue-vendor-0d72f01e.js","js/index-52c8c841.js","js/useForm-14b2bc77.js","js/componentMap-c857637c.js","js/index-831af9dd.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css","js/useFormItem-86503382.js","js/index-1c3affea.js","js/BasicModal-58413bab.js","js/useWindowSizeFn-8f085f6f.js","assets/BasicModal-d929f5ce.css","assets/index-ad7edbf1.css","js/download-1ac6acce.js","js/index-f99b266a.js","assets/index-15cc10f8.css","js/JSelectUser-a44af43a.js","js/useSelectBiz-2f560b0b.js","js/props-8a7ac45b.js","js/JSelectBiz-55a9591f.js","assets/JSelectBiz-ba37f0a8.css","assets/JSelectUser-7fda8076.css","js/JImageUpload-d644253a.js","assets/JImageUpload-d7ba7f20.css","js/JDictSelectTag-54dc3bdb.js","assets/JDictSelectTag-72919d86.css","js/JSelectDept-a90caee3.js","js/index-f2fd5a28.js","js/useContextMenu-810f9346.js","assets/useContextMenu-aed8cfe5.css","assets/index-a95e0833.css","assets/JSelectDept-2ce3f5d2.css","js/areaDataUtil-cdeee717.js","js/china-area-data-vendor-556d14ee.js","js/JCheckbox-0b89d32a.js","assets/JCheckbox-ce9c44dd.css","js/JSelectUserByDept-bd619076.js","js/UserSelectByDepModal-db060ece.js","js/depart.api-339f4da6.js","assets/JSelectUserByDept-f5671717.css","js/JUpload-76e119c7.js","js/index-d508f1f4.js","assets/index-27837f17.css","assets/JUpload-557f03ea.css","js/index-6507b9cd.js","js/index-4d0525a5.js","js/UserSelectModal-d78c1490.js","assets/UserSelectModal-aaef1bbb.css","assets/index-89763e09.css","assets/componentMap-2e742ecf.css","js/helper-22dafba0.js","assets/useForm-9101c3b7.css","js/JAreaLinkage-173780c9.js","js/JCodeEditor-66bd225e.js","js/codemirror-17b6f671.js","js/codemirror-26b29690.js","js/active-line-512fef49.js","assets/active-line-8a3c1e84.css","assets/JCodeEditor-d0a9ffd7.css","js/EasyCronInput-b2123242.js","assets/EasyCronInput-0e4d0046.css","js/JEditor-249b2194.js","js/index-b845562c.js","js/useMethods-f689b480.js","assets/BasicTable-adf414bd.css"]),{loading:!0})},props:["multi","code","sorter","groupId","param"],emits:["ok","register"],setup(o,{emit:i,refs:r}){const{createMessage:_}=ye(),$=le({xs:{span:24},sm:{span:6}}),O=le({xs:{span:24},sm:{span:18}}),[y,{closeModal:h}]=Ge(),d=m(),C=m(),w=m(!1),E=Ee(),z=m({x:!0}),S=ve(()=>Object.assign({},s(o),s(E))),[{visibleChange:I,loadColumnsInfo:R,dynamicParamHandler:A,loadData:c,handleChangeInTable:g,combineRowKey:M,clickThenCheck:K,filterUnuseSelect:re,getOkSelectRows:u},{visible:se,rowSelection:ie,checkedKeys:Z,selectRows:T,pagination:H,dataSource:ue,columns:x,loading:X,title:ce,iSorter:L,queryInfo:U,queryParam:Y,dictOptions:de}]=pt(S,C),fe=ve(()=>s(U)&&s(U).length>0);W(()=>o.code,()=>{R()}),W(()=>o.param,()=>{se.value&&(A(),c())}),at(()=>{if(o.sorter){let b=o.sorter.split("=");b.length===2&&["asc","desc"].includes(b[1].toLowerCase())&&(L.value={column:b[0],order:b[1].toLowerCase()},s(x).forEach(Q=>{Q.dataIndex===s(L).column?Q.sortOrder=s(L).order==="asc"?"ascend":"descend":Q.sortOrder=!1}))}}),W(()=>H.current,b=>{b&&C.value.setPagination({current:b})});function pe(){w.value=!s(w)}function ee(){h(),Z.value=[],T.value=[],C.value.clearSelectedRowKeys()}function te(){if(re(),!o.multi&&s(T)&&s(T).length>1)return _.warning("只能选择一条记录"),!1;if(!s(T)||s(T).length==0)return _.warning("至少选择一条记录"),!1;let b=u();i("ok",b),ee()}function J(){c(1)}function ge(){Y.value={},c(1)}return{attrs:E,register:y,tableScroll:z,dataSource:ue,pagination:H,columns:x,rowSelection:ie,checkedKeys:Z,loading:X,title:ce,handleCancel:ee,handleSubmit:te,clickThenCheck:K,loadData:c,combineRowKey:M,handleChangeInTable:g,visibleChange:I,queryInfo:U,queryParam:Y,tableRef:C,formRef:d,labelCol:$,wrapperCol:O,dictOptions:de,showSearchFlag:fe,toggleSearchStatus:w,handleToggleSearch:pe,searchQuery:J,searchReset:ge}}});const mt={key:0,class:"jeecg-basic-table-form-container"},ht={style:{float:"left",overflow:"hidden"},class:"table-page-search-submitButtons"};function vt(o,i,r,_,$,O){const y=D("SearchFormItem"),h=D("a-col"),d=D("a-button"),C=D("Icon"),w=D("a-row"),E=D("a-form"),z=D("BasicTable"),S=D("BasicModal");return V(),G("div",null,[k(S,De(o.$attrs,{onRegister:o.register,title:o.title,width:1200,onOk:o.handleSubmit,onCancel:o.handleCancel,cancelText:"关闭",wrapClassName:"j-popup-modal",onVisibleChange:o.visibleChange}),{default:q(()=>[o.showSearchFlag?(V(),G("div",mt,[k(E,{ref:"formRef",model:o.queryParam,"label-col":o.labelCol,"wrapper-col":o.wrapperCol,onKeyup:lt(o.searchQuery,["enter","native"])},{default:q(()=>[k(w,{gutter:24},{default:q(()=>[(V(!0),G(be,null,rt(o.queryInfo,(I,R)=>(V(),G(be,null,[I.hidden==="1"?st((V(),Pe(h,{md:8,sm:24,key:"query"+R},{default:q(()=>[k(y,{formElRef:o.formRef,queryParam:o.queryParam,item:I,dictOptions:o.dictOptions},null,8,["formElRef","queryParam","item","dictOptions"])]),_:2},1024)),[[it,o.toggleSearchStatus]]):(V(),Pe(h,{md:8,sm:24,key:"query"+R},{default:q(()=>[k(y,{formElRef:o.formRef,queryParam:o.queryParam,item:I,dictOptions:o.dictOptions},null,8,["formElRef","queryParam","item","dictOptions"])]),_:2},1024))],64))),256)),k(h,{md:8,sm:8},{default:q(()=>[$e("span",ht,[k(h,{lg:6},{default:q(()=>[k(d,{type:"primary",preIcon:"ant-design:reload-outlined",onClick:o.searchReset},{default:q(()=>[he("重置")]),_:1},8,["onClick"]),k(d,{type:"primary",preIcon:"ant-design:search-outlined",onClick:o.searchQuery,style:{"margin-left":"8px"}},{default:q(()=>[he("查询")]),_:1},8,["onClick"]),$e("a",{onClick:i[0]||(i[0]=(...I)=>o.handleToggleSearch&&o.handleToggleSearch(...I)),style:{"margin-left":"8px"}},[he(ut(o.toggleSearchStatus?"收起":"展开")+" ",1),k(C,{icon:o.toggleSearchStatus?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])]),_:1})])]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col","onKeyup"])])):ze("",!0),k(z,{ref:"tableRef",canResize:!1,bordered:!0,loading:o.loading,rowKey:o.combineRowKey,columns:o.columns,showIndexColumn:!1,dataSource:o.dataSource,pagination:o.pagination,rowSelection:o.rowSelection,onRowClick:o.clickThenCheck,onChange:o.handleChangeInTable},{tableTitle:q(()=>[]),_:1},8,["loading","rowKey","columns","dataSource","pagination","rowSelection","onRowClick","onChange"])]),_:1},16,["onRegister","title","onOk","onCancel","onVisibleChange"])])}const yt=Me(gt,[["render",vt],["__scopeId","data-v-1720f3ed"]]),Ct=qe({name:"JPopup",components:{JPopupOnlReportModal:yt},inheritAttrs:!1,props:{code:P.string.def(""),value:P.string.def(""),sorter:P.string.def(""),width:P.number.def(1200),placeholder:P.string.def("请选择"),multi:P.bool.def(!1),param:P.object.def({}),spliter:P.string.def(","),groupId:P.string.def(""),formElRef:P.object,setFieldsValue:P.func,getContainer:P.func,fieldConfig:{type:Array,default:()=>[]}},emits:["update:value","register","popUpChange","focus"],setup(o,{emit:i,refs:r}){const{createMessage:_}=ye(),$=Ee(),O=m(!0),y=m(""),[h,{openModal:d}]=We();let{code:C,fieldConfig:w}=o;const E=ve(()=>o.groupId?`${o.groupId}_${C}_${w[0].source}_${w[0].target}`:"");ct(()=>{o.fieldConfig.length==0&&(_.error("popup参数未正确配置!"),O.value=!1)}),W(()=>o.value,R=>{y.value=R&&R.length>0?R.split(o.spliter).join(","):""},{immediate:!0});function z(){i("focus"),!o.disabled&&d(!0)}function S(){y.value=""}function I(R){let{fieldConfig:A}=o,c={};for(let g of A){let M=R.map(K=>K[g.source]);M=M.length==1?M[0]:M.join(","),g.target.split(",").forEach(K=>{c[K]=M})}o.formElRef&&o.formElRef.setFieldsValue(c),o.setFieldsValue&&o.setFieldsValue(c),i("popUpChange",c)}return{showText:y,avalid:O,uniqGroupId:E,attrs:$,regModal:h,handleOpen:z,handleEmpty:S,callBack:I}}});const wt={key:0,class:"components-input-demo-presuffix"};function St(o,i,r,_,$,O){const y=D("Icon"),h=D("a-input"),d=D("JPopupOnlReportModal");return o.avalid?(V(),G("div",wt,[k(h,De({onClick:o.handleOpen,value:o.showText,"onUpdate:value":i[0]||(i[0]=C=>o.showText=C),placeholder:o.placeholder,readOnly:""},o.attrs),{prefix:q(()=>[k(y,{icon:"ant-design:cluster-outlined"})]),_:1},16,["onClick","value","placeholder"]),k(d,{onRegister:o.regModal,code:o.code,multi:o.multi,sorter:o.sorter,groupId:o.uniqGroupId,param:o.param,onOk:o.callBack,getContainer:o.getContainer},null,8,["onRegister","code","multi","sorter","groupId","param","onOk","getContainer"])])):ze("",!0)}const $t=Me(Ct,[["render",St],["__scopeId","data-v-e434fda0"]]);export{yt as J,$t as a};

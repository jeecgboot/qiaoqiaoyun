var N=(l,o,n)=>new Promise((e,a)=>{var c=t=>{try{i(n.next(t))}catch(s){a(s)}},u=t=>{try{i(n.throw(t))}catch(s){a(s)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(c,u);i((n=n.apply(l,o)).next())});import{I as C,a_ as E}from"./antd-vue-vendor-0d72f01e.js";import{f as y,w as A,a5 as h,V as m,a6 as d,a7 as v,F as I,af as k,ai as p,k as r,W as w,E as x}from"./vue-vendor-24c7dc61.js";import b from"./JEditor-249b2194.js";import{a as M}from"./low.app.api-97fc250a.js";import{l as B}from"./index-831af9dd.js";import"./index-b845562c.js";import"./vxe-table-vendor-8813019a.js";const F={name:"AppNote",components:{InfoCircleFilled:C,JEditor:b,EditOutlined:E},props:{note:{type:String,default:""},appId:{type:String,default:""},hasAdminAuth:{type:Boolean,default:!1}},emits:["save"],setup(l,{emit:o}){const n=y(!1),e=y(!1);A(()=>l.note,f=>{f?e.value=!0:e.value=!1},{immediate:!0});const a=y(""),c=y(!1);function u(){n.value=!0,c.value=!0,a.value=l.note}function i(){return N(this,null,function*(){yield M.edit({id:l.appId,appNote:a.value}),o("save",a.value),t()})}function t(){n.value=!1}function s(f){f.preventDefault(),f.stopPropagation(),n.value=!0,c.value=!1,a.value=l.note}return{visible:n,saveNote:i,appNote:a,closeNoteModal:t,openNoteModal:u,showIcon:e,onShowAppNote:s,showEditor:c}}},V={class:"app-action-select-icon"},O={style:{display:"flex",height:"55px","line-height":"55px"}},S=h("div",{style:{color:"#333","font-size":"17px","font-weight":"700"}},"应用说明",-1),T=h("div",{style:{flex:"1"}},null,-1),U={key:0},j={key:1},H={key:0,style:{padding:"0px 2px 2px"}},L={key:1,style:{padding:"15px 20px"}},z=["innerHTML"];function D(l,o,n,e,a,c){const u=m("InfoCircleFilled"),i=m("a-tooltip"),t=m("a-button"),s=m("EditOutlined"),f=m("j-editor"),g=m("a-modal");return d(),v(I,null,[h("div",V,[e.showIcon?(d(),k(i,{key:0,title:"应用说明",placement:"bottom"},{default:p(()=>[r(u,{onClick:e.onShowAppNote},null,8,["onClick"])]),_:1})):w("",!0)]),r(g,{open:e.visible,"onUpdate:open":o[3]||(o[3]=_=>e.visible=_),closable:!1,wrapClassName:"low-app-note-modal",width:800,destroyOnClose:"",centered:"",footer:null},{title:p(()=>[h("div",O,[S,T,e.showEditor?(d(),v("div",U,[r(t,{type:"text",onClick:e.closeNoteModal,style:{"margin-right":"10px"}},{default:p(()=>[x("取消")]),_:1},8,["onClick"]),r(t,{type:"primary",onClick:o[0]||(o[0]=_=>e.saveNote())},{default:p(()=>[x("保存")]),_:1})])):(d(),v("div",j,[r(t,{type:"text",onClick:e.closeNoteModal,style:{"margin-right":"10px"}},{default:p(()=>[x("关闭")]),_:1},8,["onClick"]),n.hasAdminAuth?(d(),k(t,{key:0,type:"text",onClick:o[1]||(o[1]=_=>e.showEditor=!0)},{default:p(()=>[r(s,{style:{"margin-right":"2px"}}),x(" 编辑 ")]),_:1})):w("",!0)]))])]),default:p(()=>[e.showEditor?(d(),v("div",H,[r(f,{value:e.appNote,"onUpdate:value":o[2]||(o[2]=_=>e.appNote=_),showImageUpload:!1,menubar:[]},null,8,["value"])])):(d(),v("div",L,[h("div",{innerHTML:e.appNote},null,8,z)]))]),_:1},8,["open"])],64)}const X=B(F,[["render",D]]);export{X as default};

var z=Object.defineProperty,K=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var x=(s,a,t)=>a in s?z(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,C=(s,a)=>{for(var t in a||(a={}))b.call(a,t)&&x(s,t,a[t]);if(y)for(var t of y(a))j.call(a,t)&&x(s,t,a[t]);return s},I=(s,a)=>K(s,L(a));import{d as w,f as l,V as A,a6 as N,af as E,ai as g,k as F,a5 as h,u as i,ak as R,a8 as W,a7 as $,W as q,a3 as se,a4 as oe}from"./vue-vendor-24c7dc61.js";import{k as G,ap as J,l as O}from"./index-831af9dd.js";import{h as S}from"./header-55b09394.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";const P=["src","onerror"],Q={class:"list-item-name"},X={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px",cursor:"pointer"}},Y=w({name:"address-book-more"}),Z=w(I(C({},Y),{emits:["update-detail","update-total"],setup(s,{expose:a,emit:t}){let k;(e=>{e.userList="/sys/user/list"})(k||(k={}));const n=l([]),u=l(!1),_=l(""),r=l(1),v=l(!1),f=l(""),m=l("");c();function B(){r.value=r.value+1,c()}function c(){v.value=!0;let e={pageNo:i(r),pageSize:10,realname:"*"+i(f)+"*",departId:i(m)};G.get({url:"/sys/user/list",params:e},{isTransformResponse:!1}).then(o=>{if(o.result&&o.success){if(o.result.records&&o.result.records.length>0){let d=o.result.records;d.length<10?u.value=!1:u.value=!0,n.value.push(...d)}else u.value=!1;t("update-total",o.result.total)}else t("update-total",0)}).finally(()=>{v.value=!1})}function D(e){return e?J(e):S}function M(e){r.value=1,n.value=[],f.value=e,c()}function V(){r.value=1,n.value=[],m.value="",c()}function H(e){_.value=e.id,e.orgCodeTxt?e.departName=e.orgCodeTxt.split(",").join("|").toString():e.departName="未填写",e.centerActiveKey=i(_),t("update-detail",e)}function T(e,o=""){r.value=1,m.value=e,n.value=[],f.value=o,c()}return a({updateKeyword:M,getUserData:V,updateDepartId:T}),(e,o)=>{const d=A("a-list-item"),U=A("a-list");return N(),E(U,{"item-layout":"horizontal","data-source":n.value,loading:v.value},{renderItem:g(({item:p})=>[F(d,{class:W(["list-item pointer",_.value===p.id?"list-item-active":""]),onClick:ee=>H(p)},{default:g(()=>[h("img",{src:D(p.avatar),onerror:i(S),class:"list-item-avatar"},null,8,P),h("span",Q,R(p.realname),1)]),_:2},1032,["class","onClick"])]),loadMore:g(()=>[u.value?(N(),$("div",X,[h("div",{onClick:B},"加载更多")])):q("",!0)]),_:1},8,["data-source","loading"])}}}));const ie=O(Z,[["__scopeId","data-v-3a359cee"]]);export{ie as default};

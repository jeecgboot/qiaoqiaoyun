var L=Object.defineProperty,O=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var B=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,N=(e,t)=>{for(var o in t||(t={}))x.call(t,o)&&B(e,o,t[o]);if(V)for(var o of V(t))z.call(t,o)&&B(e,o,t[o]);return e},P=(e,t)=>O(e,D(t));import{d as $,a2 as F,f as S,r as R,H as T,u as j,a3 as H,a4 as U,a5 as n,V as s,a6 as m,af as b,a8 as W,ai as i,k as c,a7 as G,ao as J,E as K,W as w}from"./vue-vendor-24c7dc61.js";import{h as M,c as Q,l as X}from"./index-831af9dd.js";import{j as Y}from"./market.api-af34a608.js";import{an as Z}from"./antd-vue-vendor-0d72f01e.js";import q from"./templateEdit-0c696a1f.js";import"./vxe-table-vendor-8813019a.js";import"./JImageUpload-d644253a.js";import"./useFormItem-86503382.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./JDictSelectTag-54dc3bdb.js";const ee=$({name:"templatePublish",components:{TemplateEdit:q},setup(){const{prefixCls:e}=M("low-myapps-layout"),t=F(),o=S(""),_=S("");let u=0;const p=R({appOptions:[],selectValue:{},fetching:!1}),r=Z(a=>{u+=1;const C=u;p.appOptions=[],p.fetching=!0;let I=Q(),l=a;Y({tenantId:I,appName:l}).then(d=>{let E=(d==null?void 0:d.appList)||[];l&&(E=d.appList.filter(f=>f.appName.indexOf(l)>=0));let A=E.map(f=>({label:f.appName,value:f.id}));C===u&&(p.appOptions=A,p.fetching=!1)})},300);function g(a){}function y(){o.value="second"}function v(){t.back()}function k(){const{query:a}=j(t.currentRoute);a!=null&&a.id?(o.value="second",_.value=a.id):(o.value="first",r(""))}return k(),P(N({lowAppLayout:e,goBack:v,currentPage:o,fetchApp:r},T(p)),{handleChange:g,next:y,templateId:_})}});const h=e=>(H("data-v-6feb1c31"),e=e(),U(),e),te={class:"home"},oe=h(()=>n("div",{class:"title"},[n("span",{style:{"font-size":"16px","font-weight":"normal","margin-left":"10px"}}," 返回 ")],-1)),ae={key:0,class:"firse-page"},ne=h(()=>n("p",{style:{"font-size":"30px","font-weight":"500"}},"发布应用",-1)),se={class:"select-area"},le=h(()=>n("span",{style:{"margin-right":"10px"}},"选择要发布的应用",-1)),pe={style:{"text-align":"center"}},ie=h(()=>n("p",null,"暂无数据",-1));function ce(e,t,o,_,u,p){const r=s("Icon"),g=s("a-tooltip"),y=s("a-layout-header"),v=s("smile-outlined"),k=s("a-select"),a=s("a-button"),C=s("template-edit"),I=s("a-layout");return m(),b(I,{class:W(e.lowAppLayout),style:{height:"100%"},theme:"light"},{default:i(()=>[c(y,{class:"app-index-header",theme:"light",style:{padding:"0 0 0 16px",background:"#ffffff"}},{default:i(()=>[n("div",{style:{width:"100%",display:"flex","align-items":"center"},onClick:t[0]||(t[0]=(...l)=>e.goBack&&e.goBack(...l))},[c(g,null,{default:i(()=>[n("div",te,[c(r,{icon:"ant-design:left-outlined"})])]),_:1}),oe])]),_:1}),e.currentPage=="first"?(m(),G("div",ae,[ne,n("div",se,[le,c(k,{value:e.selectValue,"onUpdate:value":t[1]||(t[1]=l=>e.selectValue=l),"label-in-value":"",showSearch:"",allowClear:"",style:{width:"50%"},"filter-option":!1,"not-found-content":e.fetching?void 0:null,options:e.appOptions,onSearch:e.fetchApp,onChange:e.handleChange},J({_:2},[e.fetching?{name:"notFoundContent",fn:i(()=>[n("div",pe,[c(v,{style:{"font-size":"20px"}}),ie])]),key:"0"}:void 0]),1032,["value","not-found-content","options","onSearch","onChange"])]),e.selectValue?(m(),b(a,{key:0,style:{"margin-top":"20px"},type:"primary",onClick:e.next},{default:i(()=>[K("下一步")]),_:1},8,["onClick"])):w("",!0)])):w("",!0),e.currentPage=="second"?(m(),b(C,{key:1,lowAppInfo:e.selectValue,templateId:e.templateId},null,8,["lowAppInfo","templateId"])):w("",!0)]),_:1},8,["class"])}const we=X(ee,[["render",ce],["__scopeId","data-v-6feb1c31"]]);export{we as default};

var c=(e,t,n)=>new Promise((d,r)=>{var l=o=>{try{a(n.next(o))}catch(s){r(s)}},i=o=>{try{a(n.throw(o))}catch(s){r(s)}},a=o=>o.done?d(o.value):Promise.resolve(o.value).then(l,i);a((n=n.apply(e,t)).next())});import{d as v,f as _,r as w,e as u,a3 as O,a4 as R,V as f,a6 as y,af as h,ai as C,a5 as p,ak as b,k as g}from"./vue-vendor-24c7dc61.js";import{f as k}from"./antd-vue-vendor-0d72f01e.js";import{C as $}from"./clipboard-695289c6.js";import{l as B}from"./index-831af9dd.js";import"./vxe-table-vendor-8813019a.js";const S=e=>{const t=(e==null?void 0:e.appendToBody)===void 0?!0:e.appendToBody;return{toClipboard(n,d){return new Promise((r,l)=>{const i=document.createElement("button"),a=new $(i,{text:()=>n,action:()=>"copy",container:d!==void 0?d:document.body});a.on("success",o=>{a.destroy(),r(o)}),a.on("error",o=>{a.destroy(),l(o)}),t&&document.body.appendChild(i),i.click(),t&&document.body.removeChild(i)})}}},U=v({name:"DragShareModal",setup(){const e=_(!1),{toClipboard:t}=S(),n=w({id:"",title:""}),d=u(()=>{let s=window.location.protocol,m=window.location.host;return`${s+"//"+m}/drag/share/${n.id}`}),r=u(()=>`分享页面: ${n.title}`);function l(s){return c(this,null,function*(){n.id=s.id,n.title=s.name,e.value=!0})}function i(s){t(s),k.success("复制成功")}function a(s){window.open(s,"_blank")}function o(){e.value=!1}return{visible:e,showModal:l,handleOk:o,getTitle:r,privateUrl:d,copyUrl:i,openNewWindow:a}}});const D={style:{padding:"24px"}},I={class:"Row marginTB10"},T={class:"urlDiv flex Row"},N={class:"flex ellipsis"};function M(e,t,n,d,r,l){const i=f("Icon"),a=f("a-modal");return y(),h(a,{destroyOnClose:!0,width:"40%",wrapClassName:"drag-share-modal",open:e.visible,"onUpdate:open":t[2]||(t[2]=o=>e.visible=o),footer:null,title:e.getTitle},{default:C(()=>[p("div",D,[p("div",I,[p("div",T,[p("div",N,b(e.privateUrl),1),p("span",{class:"icon",onClick:t[0]||(t[0]=o=>e.openNewWindow(e.privateUrl))},[g(i,{icon:"ant-design:export-outlined"})])]),p("div",{class:"copyBtn",onClick:t[1]||(t[1]=o=>e.copyUrl(e.privateUrl))},"复制")])])]),_:1},8,["open","title"])}const z=B(U,[["render",M],["__scopeId","data-v-efdaaec4"]]);export{z as default};

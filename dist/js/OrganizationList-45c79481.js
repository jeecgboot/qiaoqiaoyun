var C=(t,c,r)=>new Promise((p,e)=>{var u=i=>{try{n(r.next(i))}catch(m){e(m)}},d=i=>{try{n(r.throw(i))}catch(m){e(m)}},n=i=>i.done?p(i.value):Promise.resolve(i.value).then(u,d);n((r=r.apply(t,c)).next())});import{d as R,r as N,p as z,f,as as F,w as T,o as B,e as M,a3 as Y,a4 as Z,V as h,a6 as $,a7 as q,k as y,q as _,A as g,a5 as x}from"./vue-vendor-24c7dc61.js";import D from"./RoleAuthorizeForm-d269a99f.js";import V from"./OrganManageForm-4840fee4.js";import{q as j}from"./organization.api-98a6e46c.js";import E from"./NoAuthNoApply-9f11c94b.js";import H from"./NoAuthCanApply-df762ad5.js";import{cn as U,l as G}from"./index-831af9dd.js";import"./organization.data-23f4609c.js";import"./renderUtils-7ad8f436.js";import"./antd-vue-vendor-0d72f01e.js";import"./index-b845562c.js";import"./OrganMessageForm-4546878f.js";import"./LogoUpload-cdb48019.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./vxe-table-vendor-8813019a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./OrganTenantPositionForm-a326e011.js";import"./useForm-14b2bc77.js";import"./helper-22dafba0.js";import"./index-52c8c841.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./useListPage-62a041ef.js";import"./index-621e597c.js";import"./BasicTable-d435f501.js";import"./OrganDepartForm-cb1c37e8.js";import"./header-55b09394.js";import"./OrganUserDrawer-1dd70577.js";import"./index-44229d9b.js";import"./validator-bc7dc032.js";import"./user.api-ffaaa05b.js";import"./OrganUserBathEdit-71eca43b.js";import"./UserQuitAgentModal-ed48508d.js";import"./user.data-965c1456.js";import"./OrganInvitationUserModal-240d8c8b.js";import"./OrganRoleForm-7d5827d2.js";import"./OrganRoleAddModal-9ba15c43.js";import"./pinyin-pro-vendor-c1fd58fc.js";import"./OrganQuitForm-591e5808.js";import"./OrganApplicationForm-04644500.js";import"./useUndeveloped-598c4bd7.js";import"./UserAvatar-1a3df675.js";import"./OrganWorkflowForm-f8cd3c45.js";import"./OrganWorkFlowList-5316057a.js";import"./Workflow.data-a3a9f000.js";import"./Workflow.api-9dbd14ca.js";import"./OrganWorkFlowMonitor-6cce6815.js";import"./renderers-81963a7f.js";import"./OrganAddressBookForm-e91c110d.js";import"./OrganThirdAppConfigForm-daac4978.js";import"./OrganDingTalkConfigForm-59c573bb.js";import"./OrganAppThird.api-f164f206.js";import"./ThirdAppConfigModal-6a290156.js";import"./OrganEnterpriseConfigForm-2710fed1.js";import"./OrganBindEnterpriseModal-6438a21d.js";import"./OrganBasicInformation-ed53660f.js";import"./VipPay.api-469f07f9.js";import"./lowAppAuth-3d637b7d.js";import"./lowAppUtils-56892d30.js";import"./setting-7861834b.js";import"./MyVipPayExpandModal-712badca.js";import"./Qrcode-8252d989.js";import"./useWebSocket-df578a5f.js";import"./UserPayDetailModal-555d7931.js";import"./ScrollNotice-c6865a25.js";import"./AdminConfigPage-406e3540.js";import"./useAdminConfig-4dc7202c.js";import"./AdminConfigLogList-7b063e7a.js";import"./AdminUserList-a327d7e4.js";import"./ApplyUserListModal-7055ec75.js";const J=R({name:"OrganizationList",components:{RoleAuthorizeForm:D,OrganManageForm:V,NoAuthCanApply:H,NoAuthNoApply:E,Loading:U},setup(){const t=N({id:0,name:"",trade:"",companyAddress:"",companyLogo:"",houseNumber:"",createBy:"",applyStatus:1,packCodes:[],superAdmin:!1,type:""});z("myTenantInfo",t);const c=f(),r=f(!1),p=N({superAdmin:0,accountAdmin:0,appAdmin:0}),e=f(!1),u=F();T(()=>u.params,()=>{d()},{immediate:!0,deep:!0});function d(){return C(this,null,function*(){let o=u.params.tenantId;if(o){e.value=!0,Object.keys(p).map(s=>{p[s]=0});const a=yield j(o).catch(()=>{e.value=!1});if(a){const{superAdmin:s,sysTenant:l,packCountList:b,packCodes:w}=a;r.value=s,Object.keys(t).map(A=>{A=="packCodes"||A=="superAdmin"||(t[A]=l[A])}),n(s,w),i(b);let v=u.params.type;v&&(t.type=v,history.pushState(null,"","/myapps/settings/organization/"+o))}e.value=!1}})}function n(o,a){let s=a||[],l=!1;(o===!0||s.indexOf("superAdmin")>=0)&&(l=!0),t.packCodes=s,t.superAdmin=l}function i(o){if(o&&o.length>0){for(let a of o)p[a.packCode]=a.userCount;c.value.init(p,t.id)}}const m=f(!1),I=f();function O(){m.value=!0}function k(){}B(()=>{O()});const L=M(()=>!!(t&&t.applyStatus==1));function S(){if(t.superAdmin===!0)return!0;let o=t.packCodes||[];return o.indexOf("appAdmin")>=0||o.indexOf("accountAdmin")>=0}return{isAuth:m,goHomeClick:k,manageRef:I,roleAuthRef:c,adminUserCount:p,hasSuperAdminAuth:r,canApplyAuth:L,hasAdminAuth:S,loading:e}}});const K={class:"container"},P={style:{height:"calc(100% - 65px)"}};function Q(t,c,r,p,e,u){const d=h("Loading"),n=h("OrganManageForm"),i=h("NoAuthCanApply"),m=h("NoAuthNoApply");return $(),q("div",K,[y(d,{loading:t.loading,tip:"加载中"},null,8,["loading"]),_(y(n,{ref:"manageRef"},null,512),[[g,t.hasAdminAuth()]]),_(x("div",P,[_(y(i,{ref:"roleAuthRef"},null,512),[[g,t.canApplyAuth]]),_(y(m,null,null,512),[[g,!t.canApplyAuth]])],512),[[g,!t.hasAdminAuth()]])])}const Po=G(J,[["render",Q],["__scopeId","data-v-c4b2c9ff"]]);export{Po as default};

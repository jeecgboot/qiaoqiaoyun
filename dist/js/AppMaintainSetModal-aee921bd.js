var u=(_,t,i)=>new Promise((e,l)=>{var r=s=>{try{n(i.next(s))}catch(o){l(o)}},c=s=>{try{n(i.throw(s))}catch(o){l(o)}},n=s=>s.done?e(s.value):Promise.resolve(s.value).then(r,c);n((i=i.apply(_,t)).next())});import{f as v,a5 as p,V as y,a6 as x,af as B,ai as d,ak as C,a7 as M,F as g,k as m,E as f}from"./vue-vendor-24c7dc61.js";import{B as S}from"./index-1c3affea.js";import{l as V,a as A,j as R,k as T}from"./index-831af9dd.js";import"./BasicModal-58413bab.js";import"./antd-vue-vendor-0d72f01e.js";import"./useWindowSizeFn-8f085f6f.js";import"./vxe-table-vendor-8813019a.js";const U="/online/lowApp/edit",b={name:"AppMaintainSetModal",components:{BasicModal:S},emits:["register","update"],setup(_,{emit:t}){const{createMessage:i}=A(),e=v(""),l=v(0),r=v(""),[c,{closeModal:n}]=R(a=>u(this,null,function*(){r.value=a.id,l.value=a.status||0,e.value=a.note||""}));function s(){return l.value===0?"设为维护状态":"更新维护状态"}function o(a){return u(this,null,function*(){(yield T.put({url:U,params:a},{isTransformResponse:!1})).success&&i.success("操作成功！")})}function k(){return u(this,null,function*(){let a={id:r.value,maintNote:e.value,maintStatus:1};yield o(a),t("update",a),n()})}function w(){return u(this,null,function*(){let a={id:r.value,maintNote:"",maintStatus:0};yield o(a),t("update",a),n()})}function N(){return u(this,null,function*(){let a={id:r.value,maintNote:e.value,maintStatus:1};yield o(a),t("update",a),n()})}return{registerModal:c,note:e,status:l,getTitle:s,doUpdate:k,closeModal:n,endMaintain:w,updateNote:N}}},z={style:{"font-size":"17px","font-weight":"700"}},E={style:{padding:"0px 20px 15px 20px"}},F=p("div",{style:{color:"#757575","font-size":"14px",margin:"16px 0 24px"}}," 应用设为维护状态后，普通成员无法使用应用，管理员可对应用进行更新维护 ",-1),I={class:"inputVerify"},j=p("div",{style:{"font-size":"13px","margin-bottom":"5px"}}," 维护公告 ",-1);function q(_,t,i,e,l,r){const c=y("a-textarea"),n=y("a-button"),s=y("BasicModal");return x(),B(s,{wrapClassName:"low-app-maintain-set-modal",onRegister:e.registerModal,width:"540px",destroyOnClose:"",canFullscreen:!1},{title:d(()=>[p("div",z,[p("span",null,C(e.getTitle()),1)])]),footer:d(()=>[e.status==1?(x(),M(g,{key:0},[m(n,{onClick:t[1]||(t[1]=o=>e.endMaintain())},{default:d(()=>[f("结束维护")]),_:1}),m(n,{type:"primary",onClick:t[2]||(t[2]=o=>e.updateNote())},{default:d(()=>[f("更新公告")]),_:1})],64)):(x(),M(g,{key:1},[m(n,{onClick:t[3]||(t[3]=o=>e.closeModal())},{default:d(()=>[f("取消")]),_:1}),m(n,{type:"primary",onClick:t[4]||(t[4]=o=>e.doUpdate())},{default:d(()=>[f("确定")]),_:1})],64))]),default:d(()=>[p("div",E,[F,p("div",I,[j,p("div",null,[m(c,{value:e.note,"onUpdate:value":t[0]||(t[0]=o=>e.note=o),placeholder:"简短说明维护原因，预计恢复时间...",rows:5},null,8,["value"])])])])]),_:1},8,["onRegister"])}const Q=V(b,[["render",q]]);export{Q as default};

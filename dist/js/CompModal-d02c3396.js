var _=Object.defineProperty;var g=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var h=(e,r,o)=>r in e?_(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,w=(e,r)=>{for(var o in r||(r={}))C.call(r,o)&&h(e,o,r[o]);if(g)for(var o of g(r))F.call(r,o)&&h(e,o,r[o]);return e};var d=(e,r,o)=>new Promise((m,n)=>{var c=i=>{try{p(o.next(i))}catch(a){n(a)}},u=i=>{try{p(o.throw(i))}catch(a){n(a)}},p=i=>i.done?m(i.value):Promise.resolve(i.value).then(c,u);p((o=o.apply(e,r)).next())});import{d as b,f as k,e as R,u as s,a6 as T,af as D,ai as I,k as L,ag as O}from"./vue-vendor-24c7dc61.js";import{B as P}from"./index-1c3affea.js";import"./index-52c8c841.js";import{f as S,s as U}from"./comp.data-1c830b5e.js";import{u as j,B as x}from"./useForm-14b2bc77.js";import{j as A}from"./index-831af9dd.js";import"./BasicModal-58413bab.js";import"./antd-vue-vendor-0d72f01e.js";import"./useWindowSizeFn-8f085f6f.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./helper-22dafba0.js";import"./vxe-table-vendor-8813019a.js";const Oo=b({__name:"CompModal",props:{rootTreeData:{type:Array,default:()=>[]}},emits:["success","register"],setup(e,{emit:r}){const o=e,m=k(!0),[n,{resetFields:c,setFieldsValue:u,validate:p,updateSchema:i}]=j({labelWidth:150,schemas:S,showActionButtonGroup:!1}),[a,{setModalProps:f,closeModal:y}]=A(t=>d(this,null,function*(){yield c(),f({confirmLoading:!1}),m.value=!!(t!=null&&t.isUpdate);let l=s(t==null?void 0:t.isChild);i([{field:"parentId",show:l,componentProps:{disabled:l,treeData:o.rootTreeData}},{field:"compType",required:l,show:!0}]);let M=Object.assign({parentId:"0"},t==null?void 0:t.record);yield u(w({},M))})),B=R(()=>s(m)?"编辑":"新增");function v(){return d(this,null,function*(){try{const t=yield p();f({confirmLoading:!0}),yield U(t,m.value),y(),r("success")}finally{f({confirmLoading:!1})}})}return(t,l)=>(T(),D(s(P),O(t.$attrs,{onRegister:s(a),title:B.value,onOk:v,width:1e3}),{default:I(()=>[L(s(x),{onRegister:s(n)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{Oo as default};

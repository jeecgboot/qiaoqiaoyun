var _=(o,a,t)=>new Promise((c,s)=>{var d=e=>{try{r(t.next(e))}catch(i){s(i)}},p=e=>{try{r(t.throw(e))}catch(i){s(i)}},r=e=>e.done?c(e.value):Promise.resolve(e.value).then(d,p);r((t=t.apply(o,a)).next())});import{d as w,f as v,as as B,a2 as E,e as M,a5 as n,V as m,a6 as R,af as k,ai as f,ak as D,k as h,E as $}from"./vue-vendor-24c7dc61.js";import{B as F}from"./index-1c3affea.js";import{b5 as U,j as I,a as N,l as S}from"./index-831af9dd.js";import"./BasicModal-58413bab.js";import"./antd-vue-vendor-0d72f01e.js";import"./useWindowSizeFn-8f085f6f.js";import"./vxe-table-vendor-8813019a.js";const V=w({name:"DragShareModal",components:{BasicModal:F},emits:["success","register"],setup(o){const a=v(""),t=B(),c=E(),s=v(),d=M(()=>s.value?window.location.origin+s.value.fullPath:""),{clipboardRef:p,copiedRef:r}=U(),{createMessage:e}=N();function i(){let l=t.params.appId,u=t.params.code;return c.resolve({path:`/drag/share/${l}/${u}`})}function g(){window.open(s.value.href,"_blank")}const[C]=I(l=>_(this,null,function*(){a.value="分享页面："+l.title,s.value=i()}));function y(l){const u=document.createElement("input");u.setAttribute("value",l),document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),e.success("复制成功")}function b(){return _(this,null,function*(){})}return{registerModal:C,handleSubmit:b,title:a,shareUrl:d,openWin:g,onCopyUrl:y}}});const x={class:"share-config"},A=n("div",{class:"title"},"嵌入链接",-1),T=n("div",{class:"note"},"仅限应用内成员登录系统后根据权限访问",-1),W={class:"content"},j={class:"info"},z={class:"url"},H={class:"icon"};function O(o,a,t,c,s,d){const p=m("Icon"),r=m("a-tooltip"),e=m("a-button"),i=m("BasicModal");return R(),k(i,{onRegister:o.registerModal,title:o.title,canFullscreen:!1,minHeight:80,footer:null,width:720,destroyOnClose:"",wrapClassName:"low-app-share-config-modal"},{default:f(()=>[n("div",x,[A,T,n("div",W,[n("div",j,[n("div",z,D(o.shareUrl),1),n("div",H,[h(r,{placement:"top",title:"新窗口预览"},{default:f(()=>[h(p,{onClick:o.openWin,icon:"ant-design:fund-view-outlined",style:{"margin-top":"4px"},size:30},null,8,["onClick"])]),_:1})])]),n("div",null,[h(e,{"data-clipboard-text":o.shareUrl,onClick:a[0]||(a[0]=g=>o.onCopyUrl(o.shareUrl))},{default:f(()=>[$("复制")]),_:1},8,["data-clipboard-text"])])])])]),_:1},8,["onRegister","title"])}const Z=S(V,[["render",O]]);export{Z as default};

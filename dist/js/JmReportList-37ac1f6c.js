var U=(e,a,g)=>new Promise((I,c)=>{var C=i=>{try{p(g.next(i))}catch(s){c(s)}},h=i=>{try{p(g.throw(i))}catch(s){c(s)}},p=i=>i.done?I(i.value):Promise.resolve(i.value).then(C,h);p((g=g.apply(e,a)).next())});import{d as j,f as v,u as E,a3 as M,a4 as J,a5 as l,V as d,a6 as m,a7 as k,k as n,ai as u,E as b,F as A,am as q,ak as F,af as G}from"./vue-vendor-24c7dc61.js";import{g as O,u as Q,h as V,i as H,j as K,k as W}from"./screen.api-1b93c7a9.js";import{m as X,M as Y}from"./antd-vue-vendor-0d72f01e.js";import{b5 as Z,a7 as x,d as ee,c as te,a as oe,b as R,l as ne}from"./index-831af9dd.js";import"./index-52c8c841.js";import{B as ae}from"./useForm-14b2bc77.js";import"./vxe-table-vendor-8813019a.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./helper-22dafba0.js";const ie=j({name:"ScreenFrom",components:{BasicForm:ae,Pagination:X},setup(){const{clipboardRef:e,copiedRef:a}=Z(),g=v(""),I=x(),{createMessage:c}=oe(),C=v([]),h=ee(),p=v({current:1,total:0,pageSize:10}),i=v(!1),s=te(),P=v(!1),w=v("");function B(){_(1)}_(1);function _(o=1){p.value.current=o;let r=I.getUserInfo.username,y={pageNo:o,pageSize:p.value.pageSize,createBy:r,name:E(g),tenantId:s};O(y).then(S=>{S.success?(C.value=S.result.records,S.result.records.length>0&&(p.value.total=S.result.total)):c.warning(S.message)})}function z(o){return U(this,null,function*(){Y.confirm({title:"提示",content:"此操作将删除该报表, 是否继续?",okText:"确认",cancelText:"取消",onOk:()=>U(this,null,function*(){yield Q({id:o}).then(y=>{y.success?(c.success(y.message),_(1)):c.warning(y.message)})})})})}function t(o){let r=h.domainUrl+V+o.id+"?token="+R()+"&tenantId="+s;window.open(r,"_blank")}function $(o){let r=h.domainUrl+V+o+"?token="+R()+"&tenantId="+s;w.value=r,P.value=!0}function f(){const o=E(w);e.value=o,E(a)&&c.success("复制成功！")}function D(o){return U(this,null,function*(){yield H({id:o},_)})}function N(){return U(this,null,function*(){yield K({}).then(r=>{if(r.success){let y=h.domainUrl+W+r.result.id+"?token="+R()+"&tenantId="+s;window.open(y)}else c.warning(r.message)})})}function L(o){let r=h.domainUrl+W+o.id+"?token="+R()+"&tenantId="+s;window.open(r)}function T(o,r){p.value.pageSize=r,_(o)}return{enterSearchClick:B,reportList:C,loadJmReport:_,editWork:L,delWork:z,viewWork:t,copyWork:D,addReportClick:N,reportName:g,pagination:p,reportPageChange:T,shareVisible:i,publishReport:$,publishUrl:w,publishVisible:P,copyPublishUrl:f}}});const se=e=>(M("data-v-d19db149"),e=e(),J(),e),re={class:"search-item"},le={style:{display:"flex"}},pe={class:"search-screen"},ue={class:"add-screen"},ce={class:"show-box"},de={key:0,class:"show-list"},me={style:{display:"flex",float:"left"}},ge=se(()=>l("em",{class:"aui-tag"},[l("i",{class:"aui-tag-re"}),l("i",{class:"aui-tag-ye"}),l("i",{class:"aui-tag-bl"})],-1)),he={class:"down-position"},_e={key:0,class:"aui-mould-name"},ke={key:1,class:"aui-mould-name"},fe=["onClick"],ye=["src"],ve={key:1,class:"thumb-size2",src:"https://static.jeecg.com/upload/test/jimu1_1597227851808.png",alt:"封面图"},be={class:"screen-page"},Ce={class:"publish_div"},we={class:"urlDiv flex ellipsis"};function Se(e,a,g,I,c,C){const h=d("a-input-search"),p=d("a-button"),i=d("Icon"),s=d("a-menu-item"),P=d("a-menu"),w=d("a-dropdown"),B=d("a-empty"),_=d("Pagination"),z=d("a-modal");return m(),k("div",re,[l("div",le,[l("div",pe,[n(h,{placeholder:"请填写名称",value:e.reportName,"onUpdate:value":a[0]||(a[0]=t=>e.reportName=t),onSearch:e.enterSearchClick},null,8,["value","onSearch"])]),l("div",ue,[n(p,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:e.addReportClick},{default:u(()=>[b("新增报表")]),_:1},8,["onClick"])])]),l("div",ce,[e.reportList.length>0?(m(),k("ul",de,[(m(!0),k(A,null,q(e.reportList,(t,$)=>(m(),k("li",{key:$},[l("div",me,[ge,l("div",he,[n(w,null,{overlay:u(()=>[n(P,null,{default:u(()=>[n(s,{key:"0",onClick:f=>e.editWork(t)},{default:u(()=>[n(i,{icon:"ant-design:edit-outlined",style:{"margin-right":"5px"}}),b("编辑 ")]),_:2},1032,["onClick"]),n(s,{key:"1",onClick:f=>e.delWork(t.id)},{default:u(()=>[n(i,{icon:"ant-design:delete-outlined",style:{"margin-right":"5px"}}),b("删除 ")]),_:2},1032,["onClick"]),n(s,{key:"3",onClick:f=>e.viewWork(t)},{default:u(()=>[n(i,{icon:"ant-design:eye-outlined",style:{"margin-right":"5px"}}),b("预览 ")]),_:2},1032,["onClick"]),n(s,{key:"4",onClick:f=>e.copyWork(t.id)},{default:u(()=>[n(i,{icon:"ant-design:copy-outlined",style:{"margin-right":"5px"}}),b("复制 ")]),_:2},1032,["onClick"]),n(s,{key:"5",onClick:f=>e.publishReport(t.id)},{default:u(()=>[n(i,{icon:"ant-design:send-outlined",style:{"margin-right":"5px"}}),b("发布 ")]),_:2},1032,["onClick"])]),_:2},1024)]),default:u(()=>[n(i,{icon:"ant-design:setting-outlined"})]),_:2},1024)])]),t.name?(m(),k("p",_e,F(t.name),1)):(m(),k("p",ke," ")),l("div",{class:"aui-mould-img",onClick:f=>e.editWork(t)},[t.thumb?(m(),k("img",{key:0,src:t.thumb},null,8,ye)):(m(),k("img",ve))],8,fe)]))),128))])):(m(),G(B,{key:1,description:"暂无数据"}))]),l("div",be,[n(_,{current:e.pagination.current,"onUpdate:current":a[1]||(a[1]=t=>e.pagination.current=t),total:e.pagination.total,"onUpdate:total":a[2]||(a[2]=t=>e.pagination.total=t),pageSize:e.pagination.pageSize,"onUpdate:pageSize":a[3]||(a[3]=t=>e.pagination.pageSize=t),"show-quick-jumper":"",onChange:e.reportPageChange},null,8,["current","total","pageSize","onChange"])]),n(z,{title:"发布",style:{width:"40%"},open:e.publishVisible,"onUpdate:open":a[5]||(a[5]=t=>e.publishVisible=t),footer:null,"destroy-on-close":""},{default:u(()=>[l("div",Ce,[l("div",we,F(e.publishUrl),1),l("div",{class:"copyBtn",onClick:a[4]||(a[4]=(...t)=>e.copyPublishUrl&&e.copyPublishUrl(...t))},"复制")])]),_:1},8,["open"])])}const kt=ne(ie,[["render",Se],["__scopeId","data-v-d19db149"]]);export{kt as default};

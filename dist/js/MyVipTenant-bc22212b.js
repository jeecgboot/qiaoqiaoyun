var fe=Object.defineProperty,me=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var X=(u,r,l)=>r in u?fe(u,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[r]=l,Y=(u,r)=>{for(var l in r||(r={}))he.call(r,l)&&X(u,l,r[l]);if(Q)for(var l of Q(r))xe.call(r,l)&&X(u,l,r[l]);return u},Z=(u,r)=>me(u,ge(r));var E=(u,r,l)=>new Promise((b,p)=>{var L=i=>{try{I(l.next(i))}catch(y){p(y)}},V=i=>{try{I(l.throw(i))}catch(y){p(y)}},I=i=>i.done?b(i.value):Promise.resolve(i.value).then(L,V);I((l=l.apply(u,r)).next())});import{d as se,f as _,o as ye,V as h,a6 as d,a7 as v,a5 as e,E as x,ak as f,W as we,F as q,am as ee,k as o,ai as a,z as M,af as A,q as ke,A as Ce,a8 as Te,u as g,a3 as be,a4 as Ie}from"./vue-vendor-24c7dc61.js";import{g as Ue,c as ze,e as Ne,a as Se,b as Ve}from"./UserSetting.api-d09d4ebb.js";import{h as Pe,a7 as Oe,a as Me,cv as te,r as J,l as $e}from"./index-831af9dd.js";import{M as ne}from"./antd-vue-vendor-0d72f01e.js";import{U as De}from"./index-4d0525a5.js";import"./vxe-table-vendor-8813019a.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./UserSelectModal-d78c1490.js";const c=u=>(be("data-v-e55e87b4"),u=u(),Ie(),u),Be={class:"my-tenant"},Ee=c(()=>e("span",{style:{flex:"1"}},"我的组织",-1)),Ae={key:0,class:"approved-count"},Le={key:0,class:"tenant-list"},Re=["onClick"],je={class:"tenant-title"},Fe={class:"item-left"},qe={class:"item-name"},Je={class:"vip-message"},We={class:"vip-message-margin"},Ge=["onClick"],He={class:"item-right"},Ke={key:0},Qe=c(()=>e("span",{class:"pointer examine"},"待审核",-1)),Xe=["onClick"],Ye={key:1},Ze=["onClick"],et=["onClick"],tt={key:2,style:{width:"75px"}},nt={style:{"margin-left":"24px"}},st={class:"item-content"},ot={class:"content-box"},at=c(()=>e("div",{class:"content-name"}," 组织名片 ",-1)),lt={class:"content-desc"},it={class:"flex-flow"},ct=c(()=>e("div",{class:"content-des-text"},"姓名",-1)),dt={style:{"font-size":"13px",color:"#000000"}},ut={class:"flex-flow"},rt=c(()=>e("div",{class:"content-des-text"},"部门",-1)),pt={style:{"font-size":"13px"}},_t={class:"flex-flow"},vt=c(()=>e("div",{class:"content-des-text"},"职业",-1)),ft={style:{"font-size":"13px"}},mt={class:"footer-box"},gt=["onClick"],ht=c(()=>e("span",null,"查看组织名片",-1)),xt={key:1,class:"font-color9e flex-flow margin-right40 font-size13"},yt=c(()=>e("span",null,"查看组织名片",-1)),wt=["onClick"],kt=c(()=>e("span",null,"退出组织",-1)),Ct={key:3,class:"font-color9e flex-flow margin-right40 font-size13"},Tt=c(()=>e("span",null,"退出组织",-1)),bt=c(()=>e("div",{style:{"font-size":"17px","font-weight":"700"}},"查看名片",-1)),It=c(()=>e("div",{style:{color:"#9e9e9e","margin-top":"10px","font-size":"13px"}}," 名片是您在该组织下的个人信息，只在本组织中展示。 ",-1)),Ut={style:{"margin-top":"24px","font-size":"13px",padding:"0 24px"}},zt=c(()=>e("div",{class:"font-color75"},"姓名",-1)),Nt={class:"margin-top6 margin-bottom-16"},St=c(()=>e("div",null,"部门",-1)),Vt={class:"margin-top6 margin-bottom-16"},Pt=c(()=>e("div",null,"职位",-1)),Ot={class:"margin-top6 margin-bottom-16"},Mt=c(()=>e("div",null,"工作地点",-1)),$t={class:"margin-top6 margin-bottom-16"},Dt=c(()=>e("div",null,"工号",-1)),Bt={class:"margin-top6 margin-bottom-16"},Et={class:"cancellation"},At={style:{padding:"20px"}},Lt=c(()=>e("div",{class:"change-owen"}," 只有变更拥有着之后,才能退出 ",-1)),Rt=["onClick"],jt=["onClick"],Ft=c(()=>e("div",{style:{height:"20px"}},null,-1)),qt=se({name:"VipPayTenantSetting"}),Jt=se(Z(Y({},qt),{setup(u){const{prefixCls:r}=Pe("j-user-tenant-setting-container"),l=_([]),b=Oe(),{createMessage:p}=Me(),L=_([]),V=_(!1),I=_([]),i=_({realname:b.getUserInfo.realname,workNo:b.getUserInfo.workNo,orgCodeTxt:b.getUserInfo.orgCodeTxt,postText:b.getUserInfo.postText});function y(){return E(this,null,function*(){Ue({userTenantStatus:"1,3,5"}).then(n=>{if(n.success)if(n.result&&n.result.length>0){let t=n.result,N=[],m=[];for(let z=0;z<t.length;z++)t[z].userTenantStatus==="5"&&m.push(t[z]),N.push(t[z]);l.value=N,j.value=m,D.value=m.length}else W();else W()})})}function W(){l.value=[],j.value=[],D.value=0}function oe(n){const t=document.createElement("input");t.setAttribute("value",n),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),p.success("复制成功")}function ae(n){ne.confirm({title:"取消申请",content:"是否取消申请",okText:"确认",cancelText:"取消",onOk:()=>{ze({tenantId:n}).then(t=>{t.success?(p.success("取消申请成功"),y()):p.warning(t.message)}).catch(t=>{p.warning(t.message)})}})}function le(n){n.show?n.show=!1:n.show=!0}function Wt(n){let t=L.value.filter(N=>{N.value==n});return t&&t.length>0?t[0].label:"未填写"}function G(n,t){I.value=t,n==="editTenant"?V.value=!0:n==="exitTenant"&&(w.value={loginPassword:"",tenantName:""},P.value=!0,U.value=!0,k.value=t)}const U=_(!1),w=_({}),k=_({}),P=_(!0),$=_(""),R=_(!1);function ie(){let n=g(k).name,t=g(w).tenantName;n===t?P.value=!1:P.value=!0}function ce(){return E(this,null,function*(){if(!g(w).loginPassword){p.warning("请输入登录密码");return}yield Ne({id:g(k).tenantUserId,loginPassword:g(w).loginPassword}).then(n=>{if(n.success)p.success(n.message),U.value=!1,y(),te(g(k).tenantUserId);else if(n.message==="assignedOwen")R.value=!0,U.value=!1;else if(n.message==="cancelTenant"){U.value=!1;let t=J.currentRoute.value.fullPath;ne.confirm({title:"您是该组织的拥有者",content:"该组织下没有其他成员，需要您前往注销",okText:"前往注销",okType:"danger",cancelText:"取消",onOk:()=>{J.push("/myapps/settings/organization/organMessage/"+g(k).tenantUserId)}})}else p.warning(n.message)}).catch(n=>{p.warning(n.message)})})}function de(){U.value=!1,P.value=!0}function ue(){if(!g($)){p.warning("请选择变更拥有者");return}Se({userId:g($),tenantId:g(k).tenantUserId}).then(n=>{n.success?(p.success(n.message),y(),te(g(k).tenantUserId)):p.warning(n.message)})}const D=_(0),j=_([]),F=_(!1);function re(){F.value=!0}function B(n,t){return E(this,null,function*(){yield Ve({tenantId:Number.parseInt(n),status:t}),y()})}function Gt(n){b.setTenant(n),J.push("/myapps/pay")}return ye(()=>{y()}),(n,t)=>{const N=h("a-tag"),m=h("Icon"),z=h("a-empty"),O=h("a-modal"),C=h("a-col"),pe=h("a-input"),S=h("a-row"),H=h("a-form-item"),_e=h("a-input-password"),ve=h("a-form"),K=h("a-button");return d(),v(q,null,[e("div",{class:Te(["tenant-padding",[`${g(r)}`]])},[e("div",Be,[Ee,e("span",{class:"invited",onClick:re},[x("我的受邀信息"),D.value>0?(d(),v("span",Ae,f(D.value),1)):we("",!0)])]),l.value.length>0?(d(),v("div",Le,[(d(!0),v(q,null,ee(l.value,s=>(d(),v("div",{class:"tenant-list-item",onClick:T=>le(s)},[e("div",je,[e("div",Fe,[e("div",qe,f(s.name),1),e("div",Je,[e("div",We,[e("span",null,[o(N,{color:"orange"},{default:a(()=>[x(" 私有部署版 ")]),_:1})])]),e("div",{class:"item-house",onClick:M(T=>oe(s.houseNumber),["stop"])},[e("span",null,[x(" 组织门牌号："+f(s.houseNumber)+" ",1),o(m,{icon:"ant-design:copy-outlined",style:{"font-size":"13px","margin-left":"2px"}})])],8,Ge)])]),e("div",He,[s.userTenantStatus==="3"?(d(),v("span",Ke,[Qe,e("span",{class:"pointer cancel-apply",onClick:M(T=>ae(s.tenantUserId),["stop"])},"取消申请",8,Xe)])):s.userTenantStatus==="5"?(d(),v("span",Ye,[e("span",{class:"pointer examine",onClick:T=>B(s.tenantUserId,"1")},"加入",8,Ze),e("span",{class:"pointer cancel-apply",onClick:M(T=>B(s.tenantUserId,"4"),["stop"])},"拒绝",8,et)])):(d(),v("div",tt)),e("span",nt,[s.show?(d(),A(m,{key:0,icon:"ant-design:down-outlined",style:{"font-size":"13px",color:"#707070"}})):(d(),A(m,{key:1,icon:"ant-design:right-outlined",style:{"font-size":"13px",color:"#707070"}}))])])]),ke(e("div",st,[e("div",ot,[at,e("div",lt,[e("div",it,[ct,e("div",dt,f(i.value.realname),1)]),e("div",ut,[rt,e("div",pt,f(i.value.orgCodeTxt?i.value.orgCodeTxt:"未填写"),1)]),e("div",_t,[vt,e("div",ft,f(i.value.postText?i.value.postText:"未填写"),1)])])]),e("div",mt,[s.userTenantStatus!=="3"?(d(),v("span",{key:0,onClick:M(T=>G("editTenant",s),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[o(m,{icon:"ant-design:edit-outlined",class:"footer-icon"}),ht],8,gt)):(d(),v("span",xt,[o(m,{icon:"ant-design:edit-outlined",class:"footer-icon"}),yt])),s.userTenantStatus!=="3"?(d(),v("span",{key:2,onClick:M(T=>G("exitTenant",s),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[o(m,{icon:"ant-design:export-outlined",class:"footer-icon"}),kt],8,wt)):(d(),v("span",Ct,[o(m,{icon:"ant-design:export-outlined",class:"footer-icon"}),Tt]))])],512),[[Ce,s.show]])],8,Re))),256))])):(d(),A(z,{key:1,description:"暂无数据",style:{position:"relative",top:"50px"}}))],2),o(O,{visible:V.value,"onUpdate:visible":t[0]||(t[0]=s=>V.value=s),width:"400px",wrapClassName:"edit-tenant-setting"},{title:a(()=>[bt,It]),default:a(()=>[e("div",Ut,[zt,e("div",Nt,f(i.value.realname),1),St,e("div",Vt,f(i.value.orgCodeTxt?i.value.orgCodeTxt:"未填写"),1),Pt,e("div",Ot,f(i.value.postText?i.value.postText:"未填写"),1),Mt,e("div",$t,f(I.value.workPlace?I.value.workPlace:"未填写"),1),Dt,e("div",Bt,f(i.value.workNo?i.value.workNo:"未填写"),1)])]),_:1},8,["visible"]),o(O,{visible:U.value,"onUpdate:visible":t[3]||(t[3]=s=>U.value=s),width:"800","destroy-on-close":""},{title:a(()=>[e("div",Et,[o(m,{icon:"ant-design:warning-outlined",style:{"font-size":"20px",color:"red"}}),x(" 退出组织 "+f(k.value.name),1)])]),footer:a(()=>[o(K,{type:"primary",onClick:ce,disabled:P.value},{default:a(()=>[x("确定")]),_:1},8,["disabled"]),o(K,{onClick:de},{default:a(()=>[x("取消")]),_:1})]),default:a(()=>[o(ve,{model:w.value,ref:"cancelTenantRef"},{default:a(()=>[o(H,{name:"tenantName"},{default:a(()=>[o(S,{span:24,style:{padding:"20px 20px 0","font-size":"13px"}},{default:a(()=>[o(C,{span:24},{default:a(()=>[x(" 请输入组织名称 ")]),_:1}),o(C,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[o(pe,{value:w.value.tenantName,"onUpdate:value":t[1]||(t[1]=s=>w.value.tenantName=s),onChange:ie},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(H,{name:"loginPassword"},{default:a(()=>[o(S,{span:24,style:{padding:"0 20px","font-size":"13px"}},{default:a(()=>[o(C,{span:24},{default:a(()=>[x(" 请输入您的登录密码 ")]),_:1}),o(C,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[o(_e,{value:w.value.loginPassword,"onUpdate:value":t[2]||(t[2]=s=>w.value.loginPassword=s)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"]),o(O,{title:"变更拥有者",visible:R.value,"onUpdate:visible":t[5]||(t[5]=s=>R.value=s),width:"800","destroy-on-close":"",cancelButtonProps:{display:"none"},onOk:ue},{default:a(()=>[e("div",At,[o(S,{span:24},{default:a(()=>[Lt]),_:1}),o(S,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[o(De,{value:$.value,"onUpdate:value":t[4]||(t[4]=s=>$.value=s),izExcludeMy:""},null,8,["value"])]),_:1})])]),_:1},8,["visible"]),o(O,{title:"我的受邀信息",visible:F.value,"onUpdate:visible":t[6]||(t[6]=s=>F.value=s),footer:null},{default:a(()=>[o(S,{span:24,class:"invited-row"},{default:a(()=>[o(C,{span:16},{default:a(()=>[x(" 组织 ")]),_:1}),o(C,{span:8},{default:a(()=>[x(" 操作 ")]),_:1})]),_:1}),(d(!0),v(q,null,ee(j.value,s=>(d(),A(S,{span:24,class:"invited-row-list"},{default:a(()=>[o(C,{span:16},{default:a(()=>[x(f(s.name),1)]),_:2},1024),o(C,{span:8},{default:a(()=>[e("span",{class:"common",onClick:T=>B(s.tenantUserId,"1")},"加入",8,Rt),e("span",{class:"common refuse",onClick:T=>B(s.tenantUserId,"4")},"拒绝",8,jt)]),_:2},1024)]),_:2},1024))),256)),Ft]),_:1},8,["visible"])],64)}}}));const an=$e(Jt,[["__scopeId","data-v-e55e87b4"]]);export{an as default};

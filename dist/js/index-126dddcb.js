var h=(e,u,r)=>new Promise((m,c)=>{var f=o=>{try{i(r.next(o))}catch(a){c(a)}},t=o=>{try{i(r.throw(o))}catch(a){c(a)}},i=o=>o.done?m(o.value):Promise.resolve(o.value).then(f,t);i((r=r.apply(e,u)).next())});import{Z as _,_ as g,H,h as Z,a7 as W,bZ as z,ap as G,e as K,a as Y,o as j,a_ as b,aZ as J,c9 as Q,ca as L,aI as X,l as ee}from"./index-831af9dd.js";import{D as te,q as P}from"./antd-vue-vendor-0d72f01e.js";import{d as oe,f as d,e as U,V as l,a6 as p,a7 as ae,F as se,k as n,ai as M,af as w,W as k,a5 as y,a8 as C,ak as ne}from"./vue-vendor-24c7dc61.js";import{S as re}from"./siteSetting-107c927d.js";import{u as ce}from"./useHeaderSetting-7889be2c.js";import"./index-1c3affea.js";import{h as V}from"./header-55b09394.js";import{r as ie,q as le}from"./dict.api-46b89253.js";import"./vxe-table-vendor-8813019a.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";const{createMessage:E}=Y(),ue=oe({name:"UserDropdown",components:{Dropdown:te,Menu:P,MenuItem:_(()=>g(()=>import("./DropMenuItem-28d740e0.js"),["js/DropMenuItem-28d740e0.js","js/antd-vue-vendor-0d72f01e.js","js/vue-vendor-24c7dc61.js","js/index-831af9dd.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css"])),MenuDivider:P.Divider,LockAction:_(()=>g(()=>import("./LockModal-3a86c014.js"),["js/LockModal-3a86c014.js","js/vue-vendor-24c7dc61.js","js/index-831af9dd.js","js/antd-vue-vendor-0d72f01e.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css","js/index-1c3affea.js","js/BasicModal-58413bab.js","js/useWindowSizeFn-8f085f6f.js","assets/BasicModal-d929f5ce.css","assets/index-ad7edbf1.css","js/useForm-14b2bc77.js","js/componentMap-c857637c.js","js/useFormItem-86503382.js","js/download-1ac6acce.js","js/index-f99b266a.js","assets/index-15cc10f8.css","js/JSelectUser-a44af43a.js","js/useSelectBiz-2f560b0b.js","js/props-8a7ac45b.js","js/JSelectBiz-55a9591f.js","assets/JSelectBiz-ba37f0a8.css","assets/JSelectUser-7fda8076.css","js/JImageUpload-d644253a.js","assets/JImageUpload-d7ba7f20.css","js/JDictSelectTag-54dc3bdb.js","assets/JDictSelectTag-72919d86.css","js/JSelectDept-a90caee3.js","js/index-f2fd5a28.js","js/useContextMenu-810f9346.js","assets/useContextMenu-aed8cfe5.css","assets/index-a95e0833.css","assets/JSelectDept-2ce3f5d2.css","js/areaDataUtil-cdeee717.js","js/china-area-data-vendor-556d14ee.js","js/JPopup-2a779923.js","js/useMethods-f689b480.js","assets/JPopup-2f2ed00d.css","js/JCheckbox-0b89d32a.js","assets/JCheckbox-ce9c44dd.css","js/JSelectUserByDept-bd619076.js","js/UserSelectByDepModal-db060ece.js","js/depart.api-339f4da6.js","assets/JSelectUserByDept-f5671717.css","js/JUpload-76e119c7.js","js/index-d508f1f4.js","assets/index-27837f17.css","assets/JUpload-557f03ea.css","js/index-6507b9cd.js","js/index-4d0525a5.js","js/UserSelectModal-d78c1490.js","assets/UserSelectModal-aaef1bbb.css","assets/index-89763e09.css","assets/componentMap-2e742ecf.css","js/helper-22dafba0.js","assets/useForm-9101c3b7.css","js/lock-73f07a04.js","js/header-55b09394.js","assets/LockModal-aba0abca.css"])),DepartSelect:_(()=>g(()=>import("./DepartSelect-3871e019.js"),["js/DepartSelect-3871e019.js","js/vue-vendor-24c7dc61.js","js/index-1c3affea.js","js/index-831af9dd.js","js/antd-vue-vendor-0d72f01e.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css","js/BasicModal-58413bab.js","js/useWindowSizeFn-8f085f6f.js","assets/BasicModal-d929f5ce.css","assets/index-ad7edbf1.css","js/depart.api-339f4da6.js","assets/DepartSelect-b535c919.css"])),UpdatePassword:_(()=>g(()=>import("./UpdatePassword-d50ab54c.js"),["js/UpdatePassword-d50ab54c.js","js/vue-vendor-24c7dc61.js","js/validator-bc7dc032.js","js/index-831af9dd.js","js/antd-vue-vendor-0d72f01e.js","js/vxe-table-vendor-8813019a.js","assets/index-3d0fbd8d.css","js/user.api-ffaaa05b.js","js/index-1c3affea.js","js/BasicModal-58413bab.js","js/useWindowSizeFn-8f085f6f.js","assets/BasicModal-d929f5ce.css","assets/index-ad7edbf1.css","js/useForm-14b2bc77.js","js/componentMap-c857637c.js","js/useFormItem-86503382.js","js/download-1ac6acce.js","js/index-f99b266a.js","assets/index-15cc10f8.css","js/JSelectUser-a44af43a.js","js/useSelectBiz-2f560b0b.js","js/props-8a7ac45b.js","js/JSelectBiz-55a9591f.js","assets/JSelectBiz-ba37f0a8.css","assets/JSelectUser-7fda8076.css","js/JImageUpload-d644253a.js","assets/JImageUpload-d7ba7f20.css","js/JDictSelectTag-54dc3bdb.js","assets/JDictSelectTag-72919d86.css","js/JSelectDept-a90caee3.js","js/index-f2fd5a28.js","js/useContextMenu-810f9346.js","assets/useContextMenu-aed8cfe5.css","assets/index-a95e0833.css","assets/JSelectDept-2ce3f5d2.css","js/areaDataUtil-cdeee717.js","js/china-area-data-vendor-556d14ee.js","js/JPopup-2a779923.js","js/useMethods-f689b480.js","assets/JPopup-2f2ed00d.css","js/JCheckbox-0b89d32a.js","assets/JCheckbox-ce9c44dd.css","js/JSelectUserByDept-bd619076.js","js/UserSelectByDepModal-db060ece.js","js/depart.api-339f4da6.js","assets/JSelectUserByDept-f5671717.css","js/JUpload-76e119c7.js","js/index-d508f1f4.js","assets/index-27837f17.css","assets/JUpload-557f03ea.css","js/index-6507b9cd.js","js/index-4d0525a5.js","js/UserSelectModal-d78c1490.js","assets/UserSelectModal-aaef1bbb.css","assets/index-89763e09.css","assets/componentMap-2e742ecf.css","js/helper-22dafba0.js","assets/useForm-9101c3b7.css"]))},props:{theme:H.oneOf(["dark","light"])},setup(){const{prefixCls:e}=Z("header-user-dropdown"),{t:u}=j(),{getShowDoc:r,getUseLockPage:m}=ce(),c=W(),f=z(),t=d(!1),i=d(!1),o=d(null),a=U(()=>{const{realname:s="",avatar:S,desc:q}=c.getUserInfo||{};return{realname:s,avatar:S||V,desc:q}}),D=U(()=>{let{avatar:s}=a.value;return s==V?s:G(s)}),[v,{openModal:I}]=K(),R=d();function $(){return h(this,null,function*(){yield b(o),I(!0)})}function O(){c.confirmLoginOut()}function T(){J(re)}function x(){return h(this,null,function*(){if((yield ie()).success){const S=yield le();Q(L),X(L,S.result),E.success(u("layout.header.refreshCacheComplete"))}else E.error(u("layout.header.refreshCacheFailure"))})}function B(){R.value.show()}const A=d();function N(){return h(this,null,function*(){t.value=!0,yield b(A),A.value.show(c.getUserInfo.username)})}function F(s){switch(s.key){case"logout":O();break;case"doc":T();break;case"lock":$();break;case"cache":x();break;case"depart":B();break;case"password":N();break;case"account":f("/system/usersetting");break}}return{prefixCls:e,t:u,getUserInfo:a,getAvatarUrl:D,handleMenuClick:F,getShowDoc:r,register:v,getUseLockPage:m,loginSelectRef:R,updatePasswordRef:A,passwordVisible:t,lockActionVisible:i}}});const de=["src"];function pe(e,u,r,m,c,f){const t=l("MenuItem"),i=l("MenuDivider"),o=l("Menu"),a=l("Dropdown"),D=l("LockAction"),v=l("DepartSelect"),I=l("UpdatePassword");return p(),ae(se,null,[n(a,{placement:"bottomLeft",overlayClassName:`${e.prefixCls}-dropdown-overlay`},{overlay:M(()=>[n(o,{onClick:e.handleMenuClick},{default:M(()=>[e.getShowDoc?(p(),w(t,{key:"doc",text:e.t("layout.header.dropdownItemDoc"),icon:"ion:document-text-outline"},null,8,["text"])):k("",!0),e.getShowDoc?(p(),w(i,{key:1})):k("",!0),n(t,{key:"account",text:e.t("layout.header.dropdownItemSwitchAccount"),icon:"ant-design:setting-outlined"},null,8,["text"]),n(t,{key:"password",text:e.t("layout.header.dropdownItemSwitchPassword"),icon:"ant-design:edit-outlined"},null,8,["text"]),n(t,{key:"depart",text:e.t("layout.header.dropdownItemSwitchDepart"),icon:"ant-design:cluster-outlined"},null,8,["text"]),n(t,{key:"cache",text:e.t("layout.header.dropdownItemRefreshCache"),icon:"ion:sync-outline"},null,8,["text"]),n(t,{key:"logout",text:e.t("layout.header.dropdownItemLoginOut"),icon:"ion:power-outline"},null,8,["text"])]),_:1},8,["onClick"])]),default:M(()=>[y("span",{class:C([[e.prefixCls,`${e.prefixCls}--${e.theme}`],"flex"])},[y("img",{class:C(`${e.prefixCls}__header`),src:e.getAvatarUrl},null,10,de),y("span",{class:C(`${e.prefixCls}__info hidden md:block`)},[y("span",{class:C([`${e.prefixCls}__name  `,"truncate"])},ne(e.getUserInfo.realname),3)],2)],2)]),_:1},8,["overlayClassName"]),e.lockActionVisible?(p(),w(D,{key:0,ref:"lockActionRef",onRegister:e.register},null,8,["onRegister"])):k("",!0),n(v,{ref:"loginSelectRef"},null,512),e.passwordVisible?(p(),w(I,{key:1,ref:"updatePasswordRef"},null,512)):k("",!0)],64)}const Ae=ee(ue,[["render",pe]]);export{Ae as default};

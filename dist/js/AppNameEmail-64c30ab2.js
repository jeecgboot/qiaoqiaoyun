var H=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var M=(a,t,e)=>t in a?H(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,A=(a,t)=>{for(var e in t||(t={}))K.call(t,e)&&M(a,e,t[e]);if(B)for(var e of B(t))O.call(t,e)&&M(a,e,t[e]);return a},F=(a,t)=>G(a,J(t));var C=(a,t,e)=>new Promise((l,c)=>{var y=m=>{try{d(e.next(m))}catch(g){c(g)}},h=m=>{try{d(e.throw(m))}catch(g){c(g)}},d=m=>m.done?l(m.value):Promise.resolve(m.value).then(y,h);d((e=e.apply(a,t)).next())});import{d as T,r as P,f,e as v,u as s,V as k,a6 as Q,a7 as W,k as u,a5 as i,ai as w,a8 as x,ak as X,E as Y,a3 as Z,a4 as ee,I as ae}from"./vue-vendor-24c7dc61.js";import te from"./AppLoginHeader-c75d2fdd.js";import{o as se,a as ne,bx as oe,l as re}from"./index-831af9dd.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";const U=a=>(Z("data-v-b4b94d9c"),a=a(),ee(),a),ie={class:"name-email-subject"},le=U(()=>i("div",{class:"flex-row align-items-center margin-top40"},[i("div",{class:"register-title"}," 请填写昵称和邮箱 ")],-1)),ce=U(()=>i("div",{class:"name-email-desc align-items-center"},[i("span",{style:{color:"#9e9e9e"}},"请填写昵称和邮箱，方便大家与您联系")],-1)),me={class:"name-email-content"},ue=T({name:"app-name-email"}),de=T(F(A({},ue),{emits:["login-account","bind-third-account"],setup(a,{expose:t,emit:e}){const l=P({realname:"",email:""}),{t:c}=se(),y=f(),h=f(),d=f(),m=v(()=>[{required:!0,message:"请填写邮箱",trigger:"change"},{type:"email",message:"请填写正确的邮箱"}]),g=v(()=>[{required:!0,message:"请填写昵称",trigger:"change"}]),V=v(()=>({realname:s(g),email:s(m)})),p=f(""),q=v(()=>l.realname||s(p)==="realname"?"current-active":""),D=v(()=>l.email!=""||s(p)==="email"?"current-active":""),o=f({}),{notification:b,createErrorModal:pe}=ne(),R=f(!1);function fe(r){return[{required:!0,message:r,trigger:"change"}]}function E(r){p.value=r,r==="realname"?y.value.focus():h.value.focus()}function I(){p.value=""}function L(){return C(this,null,function*(){d.value.validateFields().then(r=>C(this,null,function*(){if(s(o).bindThirdAccount)e("bind-third-account",{username:s(o).phone,email:r.email,realname:r.realname,password:s(o).password,phone:s(o).phone,smscode:s(o).smscode});else try{R.value=!0;const n=yield oe(ae({username:s(o).phone,email:r.email,realname:r.realname,password:s(o).password,phone:s(o).phone,smscode:s(o).smscode}));n&&n.data.success?(e("login-account",{account:s(o).phone,password:s(o).password}),b.success({message:void 0,description:n.data.message||c("sys.api.registerMsg"),duration:3})):b.warning({message:c("sys.api.errorTip"),description:n.data.message||c("sys.api.networkExceptionMsg"),duration:3})}catch(n){b.error({message:c("sys.api.errorTip"),description:n.message||c("sys.api.networkExceptionMsg"),duration:3})}finally{R.value=!1}}))})}function $(r){o.value=r}return t({setRegisterData:$}),(r,n)=>{const N=k("a-input"),S=k("a-form-item"),j=k("a-button"),z=k("a-form");return Q(),W("div",ie,[u(te),le,ce,i("div",me,[u(z,{ref_key:"formRef",ref:d,model:l,rules:V.value},{default:w(()=>[i("div",{class:x(["content-item",q.value]),onClick:n[1]||(n[1]=_=>E("realname"))},[u(S,{name:"realname"},{default:w(()=>[u(N,{ref_key:"realNameRef",ref:y,value:l.realname,"onUpdate:value":n[0]||(n[0]=_=>l.realname=_),style:{height:"40px"},onBlur:I},null,8,["value"]),i("div",{class:x(["form-title",p.value==="username"?"active-title":""])}," 昵称 ",2)]),_:1})],2),i("div",{class:x(["content-item",D.value]),onClick:n[3]||(n[3]=_=>E("email"))},[u(S,{name:"email"},{default:w(()=>[u(N,{ref_key:"emailRef",ref:h,value:l.email,"onUpdate:value":n[2]||(n[2]=_=>l.email=_),style:{height:"40px"},onBlur:I},null,8,["value"]),i("div",{class:x(["form-title",p.value==="email"?"active-title":""])},X(s(c)("sys.login.email")),3)]),_:1})],2),i("div",{class:"pointer",onClick:L},[u(j,{type:"primary",class:"next-step",loading:R.value},{default:w(()=>[Y("完成")]),_:1},8,["loading"])])]),_:1},8,["model","rules"])])])}}}));const we=re(de,[["__scopeId","data-v-b4b94d9c"]]);export{we as default};

var O=Object.defineProperty,F=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var T=(e,o,s)=>o in e?O(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,U=(e,o)=>{for(var s in o||(o={}))w.call(o,s)&&T(e,s,o[s]);if(v)for(var s of v(o))N.call(o,s)&&T(e,s,o[s]);return e},h=(e,o)=>F(e,M(o));var f=(e,o,s)=>new Promise((m,r)=>{var y=l=>{try{a(s.next(l))}catch(d){r(d)}},R=l=>{try{a(s.throw(l))}catch(d){r(d)}},a=l=>l.done?m(l.value):Promise.resolve(l.value).then(y,R);a((s=s.apply(e,o)).next())});import{d as B,f as D,r as S,e as I,u as p,V as u,a6 as E,af as $,ai as c,k as i,ag as z,a3 as V,a4 as X,a5 as P,I as H}from"./vue-vendor-24c7dc61.js";import{B as Z}from"./BasicModal-58413bab.js";import"./index-1c3affea.js";import{k as _,j as G,l as J}from"./index-831af9dd.js";import{M as de}from"./antd-vue-vendor-0d72f01e.js";import{p as K}from"./pinyin-pro-vendor-c1fd58fc.js";const ue=e=>_.get({url:"/sys/role/listByTenant",params:e}),ce=(e,o)=>_.delete({url:"/sys/role/delete",params:e},{joinParamsToUrl:!0}).then(()=>{o()});const Q=(e,o)=>{let s=o?"/sys/role/edit":"/sys/role/add";return _.post({url:s,params:e})};const b=e=>(V("data-v-bc47f63b"),e=e(),X(),e),W=b(()=>P("div",{class:"margin-top5 margin-bottom12 font-size14"}," 角色名称 ",-1)),Y=b(()=>P("div",{class:"margin-bottom12 font-size14"}," 备注 ",-1)),A=B({name:"organ-role-add-modal"}),ee=B(h(U({},A),{emits:["success","register"],setup(e,{emit:o}){const s=D(!0),m=D(),r=S({id:"",roleName:"",description:"",tenantId:"",roleCode:""}),y=I(()=>p(s)?"编辑角色":"新增角色"),R=I(()=>p(s)?"保存":"创建"),[a,{setModalProps:l,closeModal:d}]=G(t=>f(this,null,function*(){Object.keys(r).map(n=>{r[n]=t.record[n]||""}),l({confirmLoading:!1}),s.value=!!(t!=null&&t.isUpdate)})),C={roleName:[{required:!0,message:"请填写角色名称!",trigger:"change"}]};function q(){return f(this,null,function*(){let t=H(r);if(t.roleName){if(!t.roleCode){let n=K(t.roleName,{toneType:"none",type:"array",nonZh:"consecutive"}).join("_");t.roleCode=n}yield Q(t,s.value),o("success"),d()}})}return(t,n)=>{const L=u("a-input"),x=u("a-form-item"),k=u("a-textarea"),j=u("a-form");return E(),$(Z,z(t.$attrs,{onRegister:p(a),title:y.value,destroyOnClose:"",okText:R.value,onOk:q}),{default:c(()=>[i(j,{ref_key:"formRef",ref:m,model:r},{default:c(()=>[W,i(x,{name:"roleName"},{default:c(()=>[i(L,{value:r.roleName,"onUpdate:value":n[0]||(n[0]=g=>r.roleName=g),placeholder:"请填写角色名称",rules:C},null,8,["value"])]),_:1}),Y,i(x,{name:"description"},{default:c(()=>[i(k,{value:r.description,"onUpdate:value":n[1]||(n[1]=g=>r.description=g)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","title","okText"])}}}));const se=J(ee,[["__scopeId","data-v-bc47f63b"]]),me=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{se as O,me as a,ce as d,ue as l};

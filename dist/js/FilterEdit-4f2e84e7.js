var D=Object.defineProperty,F=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var S=(r,t,o)=>t in r?D(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,C=(r,t)=>{for(var o in t||(t={}))V.call(t,o)&&S(r,o,t[o]);if(I)for(var o of I(t))R.call(t,o)&&S(r,o,t[o]);return r},b=(r,t)=>F(r,E(t));var O=(r,t,o)=>new Promise((n,i)=>{var v=a=>{try{s(o.next(a))}catch(c){i(c)}},_=a=>{try{s(o.throw(a))}catch(c){i(c)}},s=a=>a.done?n(a.value):Promise.resolve(a.value).then(v,_);s((o=o.apply(r,t)).next())});import{br as T,bO as N}from"./antd-vue-vendor-0d72f01e.js";import j from"./AdvancedFilter-972e0983.js";import{f as h,r as P,w as Q,a5 as u,V as f,a6 as W,a7 as z,k as l,ai as p,ak as G,E as g}from"./vue-vendor-24c7dc61.js";import{u as H}from"./useSuperQueryCurd-0a66a14b.js";import{l as M}from"./index-831af9dd.js";import"./type.definition-4eb605ee.js";import"./LinkRecordSelect-385d0eae.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./SelectItem-04dd2229.js";import"./vxe-table-vendor-8813019a.js";import"./lowAppUtils-56892d30.js";import"./auto.desform.api-839115ed.js";import"./desformUtils-c7daaa89.js";import"./LinkRecordTags-cf4c2463.js";import"./FormSchemaFactory-ec827fa7.js";import"./index-bff0b654.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./lowAppAuth-3d637b7d.js";import"./useFuncSwitch-b7681246.js";import"./DictColors-73058d23.js";import"./TableImage-14ca1f5d.js";import"./SubTableTag-81763fd6.js";import"./CardCellFile-92b3c8c8.js";import"./ComponentIcon-f1bbb90f.js";import"./SuperQueryValComponent-97f284a9.js";import"./helper-22dafba0.js";const q={name:"FilterEdit",components:{ArrowLeftOutlined:T,AdvancedFilter:j,DownOutlined:N},props:{info:{type:Object,default:()=>{}},columnList:{type:Array,default:()=>[]}},emits:["back","save","copy","search"],setup(r,{emit:t}){const o=h(),n=h(),i=P({conditionType:"and",conditions:[],conditionsGroup:[],iconVisible:!1,index:-1,myself:!1,selected:!1,title:"",id:""});Q(()=>r.info,e=>{Object.keys(i).map(d=>{i[d]=e[d]})},{deep:!0,immediate:!0});function v(){t("back")}const{updateSuperQuery:_}=H();function s(e){return O(this,null,function*(){let d=b(C({},e),{id:i.id,title:i.title,myself:i.myself,selected:i.selected});yield _(d),t("save",i.index,d)})}function a(e){let d=b(C({},e),{title:i.title,id:i.id});t("copy",i.index,d)}function c(e){t("search",e)}function x(e){e&&y(e),n.value.saveCondition()}function k(e){e&&y(e),n.value.copyCondition()}function y(e){e.preventDefault(),e.stopPropagation()}const m=h(!1),w=h(100);function L(e){e.preventDefault(),e.stopPropagation(),w.value=e.target.scrollWidth,m.value=!0}function A(){m.value=!1}function B(){i.title=o.value.innerHTML}return{divRef:o,filterInfo:i,onBack:v,save:x,newSave:k,saveInfo:s,copyInfo:a,inputWidth:w,inputStatus:m,clickTitle:L,onInputBlur:A,filterRef:n,onlySearch:c,onInputChange:B}}},J={style:{display:"flex",height:"32px","line-height":"32px",margin:"10px 0px"}},K={style:{width:"60px"}},U={class:"filter-edit-title-div"},X={class:"inner-content filter-select-adding",style:{padding:"1px 10px 15px 1px"}},Y=u("div",null,null,-1);function Z(r,t,o,n,i,v){const _=f("ArrowLeftOutlined"),s=f("a-button"),a=f("a-menu-item"),c=f("a-menu"),x=f("DownOutlined"),k=f("a-dropdown-button"),y=f("AdvancedFilter");return W(),z("div",null,[u("div",J,[u("div",K,[l(s,{type:"text",onClick:n.onBack},{default:p(()=>[l(_,{style:{"font-size":"18px"},title:"返回"})]),_:1},8,["onClick"])]),u("div",U,[u("div",{ref:"divRef",class:"text",contenteditable:"true",onInput:t[0]||(t[0]=(...m)=>n.onInputChange&&n.onInputChange(...m))},G(n.filterInfo.title),545)])]),u("div",null,[u("div",X,[l(y,{ref:"filterRef",columnList:o.columnList,onSave:n.saveInfo,onCopy:n.copyInfo,onSearch:n.onlySearch,info:n.filterInfo,saveButton:!1},{"save-button":p(({saveable:m})=>[l(k,{onClick:n.save,class:"save-button filter-edit-save-button",disabled:!m},{overlay:p(()=>[l(c,null,{default:p(()=>[l(a,{key:"1",onClick:n.save},{default:p(()=>[g("保 存")]),_:1},8,["onClick"]),l(a,{key:"2",onClick:n.newSave},{default:p(()=>[g("另存为")]),_:1},8,["onClick"])]),_:1})]),icon:p(()=>[l(x)]),default:p(()=>[g(" 保 存 ")]),_:2},1032,["onClick","disabled"])]),_:1},8,["columnList","onSave","onCopy","onSearch","info"])])]),Y])}const $t=M(q,[["render",Z]]);export{$t as default};

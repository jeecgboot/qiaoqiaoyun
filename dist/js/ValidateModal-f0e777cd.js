var S=Object.defineProperty,A=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var C=(a,t,e)=>t in a?S(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,b=(a,t)=>{for(var e in t||(t={}))V.call(t,e)&&C(a,e,t[e]);if(x)for(var e of x(t))O.call(t,e)&&C(a,e,t[e]);return a},B=(a,t)=>A(a,D(t));var I=(a,t,e)=>new Promise((s,m)=>{var r=l=>{try{i(e.next(l))}catch(c){m(c)}},d=l=>{try{i(e.throw(l))}catch(c){m(c)}},i=l=>l.done?s(l.value):Promise.resolve(l.value).then(r,d);i((e=e.apply(a,t)).next())});import{r as U,f,H as N,I as R,a3 as T,a4 as J,a5 as o,E as k,V as p,a6 as h,af as E,ai as v,k as _,a7 as w,F as $,am as j,ak as z,W as H}from"./vue-vendor-24c7dc61.js";import{B as K}from"./index-1c3affea.js";import{n as L}from"./antd-vue-vendor-0d72f01e.js";import W from"./JCalclateInput-0d22db8c.js";import{j as X,X as q,l as G}from"./index-831af9dd.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./searchcursor-9651c8d5.js";import"./vxe-table-vendor-8813019a.js";const P={name:"ValidateModal",components:{JCalclateInput:W,BasicModal:K,SearchOutlined:L},emits:["success","register"],setup(a,{emit:t}){const e=U({id:"",name:"公式",formulas:""}),s=f(""),m=f(""),r=f(!1),d=f([]),i=f(),[l,{closeModal:c}]=X(u=>I(this,null,function*(){yield g(),r.value=u.isUpdate,d.value=u.calculateFields,r.value?Object.assign(e,u.record):e.id=q()}));function g(){e.id="",e.name="公式",e.formulas=""}function F(u,M){i.value.insertContent(`$${u.name}@${u.id}$`)}function n(){t("success",R(e),r.value),c()}return B(b({searchText:s,activeKey:m,registerModal:l,calculateFields:d,tagInput:i},N(e)),{addField:F,handleSubmit:n})}};const y=a=>(T("data-v-12050dc8"),a=a(),J(),a),Q={style:{display:"flex"}},Y={style:{width:"320px",height:"500px",background:"rgb(250, 250, 250)"}},Z={class:"settingItem"},ee=y(()=>o("div",{class:"settingTitle"},"检验提示文字",-1)),te={class:"settingItem"},ae={style:{"max-height":"500px","overflow-y":"auto","list-style":"none","padding-inline-start":"0"}},oe=["onClick"],se={class:"title overflow_ellipsis"},le={style:{flex:"1 1 0%",display:"flex","flex-direction":"column"}},ne={style:{flex:"1 1 0%",height:"260px","border-bottom":"1px solid rgb(238, 238, 238)"}},ie=y(()=>o("div",{style:{"font-size":"20px","font-weight":"bold"}},"结果=",-1)),ue={style:{"margin-top":"10px"}},de=y(()=>o("div",{style:{height:"200px",padding:"10px 30px","overflow-y":"auto"}},[o("ul",null,[o("li",null,"请从左侧面板选择要校验的字段"),o("li",{style:{"margin-top":"10px"}},[k("公式编辑样式举例："),o("span",{class:"example-field"},"入库数量"),k(" >10 ")])])],-1));function ce(a,t,e,s,m,r){const d=p("a-input"),i=p("a-tab-pane"),l=p("SearchOutlined"),c=p("a-tabs"),g=p("JCalclateInput"),F=p("BasicModal");return h(),E(F,{onRegister:s.registerModal,title:"添加校验条件",width:1e3,height:500,canFullscreen:!1,destroyOnClose:"",onOk:s.handleSubmit},{default:v(()=>[o("div",Q,[o("div",Y,[_(c,{centered:""},{default:v(()=>[_(i,{key:"1",tab:"提示"},{default:v(()=>[o("div",Z,[ee,_(d,{value:a.name,"onUpdate:value":t[0]||(t[0]=n=>a.name=n)},null,8,["value"])])]),_:1}),_(i,{key:"2",tab:"字段"},{default:v(()=>[o("div",te,[_(d,{placeholder:"搜索"},{suffix:v(()=>[_(l,{style:{color:"rgba(0, 0, 0, 0.45)"}})]),_:1})]),o("ul",ae,[(h(!0),w($,null,j(s.calculateFields,(n,u)=>(h(),w("li",{key:u,class:"fieldItem pointer",onClick:M=>s.addField(n,u)},[o("span",se,z(n.name),1)],8,oe))),128))])]),_:1})]),_:1})]),o("div",le,[o("div",ne,[ie,o("div",ue,[s.calculateFields.length>0?(h(),E(g,{key:0,ref:"tagInput",bizType:"validate",value:a.formulas,"onUpdate:value":t[1]||(t[1]=n=>a.formulas=n),options:s.calculateFields,"onUpdate:options":t[2]||(t[2]=n=>s.calculateFields=n)},null,8,["value","options"])):H("",!0)])]),de])])]),_:1},8,["onRegister","onOk"])}const be=G(P,[["render",ce],["__scopeId","data-v-12050dc8"]]);export{be as default};

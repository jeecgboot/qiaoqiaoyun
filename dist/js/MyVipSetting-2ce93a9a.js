import{d as H,e as O,f as g,a2 as Q,o as X,a5 as s,V as y,a6 as r,a7 as d,F as w,a8 as Z,E as n,ak as o,ae as h,k as c,ai as R,W as f,am as x}from"./vue-vendor-24c7dc61.js";import{b as ss,c as es,a as ts}from"./VipPay.api-469f07f9.js";import{p as N,d as os,s as as,w as ns}from"./setting-7861834b.js";import{h as us,bG as is,c5 as ls,e as $,bA as ps,c as rs,l as ds}from"./index-831af9dd.js";import{i as cs}from"./antd-vue-vendor-0d72f01e.js";import ms from"./MyVipPayExpandModal-712badca.js";import"./index-1c3affea.js";import gs from"./UserPayDetailModal-555d7931.js";import ys from"./ScrollNotice-c6865a25.js";import"./lowAppAuth-3d637b7d.js";import"./lowAppUtils-56892d30.js";import"./vxe-table-vendor-8813019a.js";import"./Qrcode-8252d989.js";import"./download-1ac6acce.js";import"./useWebSocket-df578a5f.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./index-621e597c.js";import"./BasicTable-d435f501.js";import"./index-52c8c841.js";import"./useForm-14b2bc77.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./helper-22dafba0.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./useListPage-62a041ef.js";const vs=H({name:"MyVipSetting",components:{MyVipExpandModal:ms,UserPayDetailModal:gs,ScrollNotice:ys},setup(e){const{prefixCls:u}=us("j-user-vip-setting-container"),{getDarkMode:k}=is(),S=O(()=>k.value===ls.DARK),i=g({}),U=()=>i.value.uploadSizeUsedFormat,F=t=>t+"条",_=Q(),m=g(!1),D=g(1),b=g([{label:"添加成员",img:N,value:"organDepartForm"},{label:"创建部门",img:os,value:"organDepartForm"},{label:"添加角色",img:N,value:"organRoleForm"},{label:"管理员设置",img:as,value:"organAdminForm"}]),M=g({}),[a,{openModal:A}]=$(),[q,{openModal:j}]=$(),z=g([]);function V(){ss().then(t=>{if(t.success){i.value=t.result;let l=t.result.uploadSizeYearUsed?t.result.uploadSizeYearUsed:0,p=t.result.maxUploadSize?t.result.maxUploadSize:0,v=Number(l)/Number(p)*100;i.value.uploadPercent=v.toFixed(2)+"%",i.value.uploadSizeTotalFormat=T(p),i.value.uploadSizeUsedFormat=T(l);let C=t.result.smsCountYearUsed?t.result.smsCountYearUsed:0,P=t.result.maxSmsCount?t.result.maxSmsCount:0,Y=Number(C)/Number(P)*100;if(i.value.smsPercent=Y.toFixed(2)+"%",i.value.uploadSizeYearUsed=l,i.value.maxUploadSize=p,i.value.smsCountYearUsed=C,i.value.maxSmsCount=P,t.result.memberType!=="default"){let B=t.result.endTime;i.value.endTime=cs(B).format("YYYY-MM-DD"),i.value.totalDay=I(B)}let E=[];v>=80&&E.push("附件上传量快要到100%了，请及时购买扩展包，避免影响您的使用！"),Y>=80&&E.push("短信使用量快要到100%了，请及时购买扩展包，避免影响您的使用！"),z.value=E}}),es().then(t=>{t.success&&(M.value=t.result)})}function T(t){if(t==null||t=="")return"0";let l=["MB","GB"],p=parseFloat(t);return ps(p,l)}function L(){_.push("/myapps/pay")}function W(t){if(t==="UserPayDetailModal"){j(!0,{});return}_.push("/myapps/settings/organization/"+t+"/"+rs())}function G(){ts().then(t=>{t.success?m.value=t.result.izVip:m.value=!1})}function I(t){let l,p,v=Date.parse(t),C=new Date().getTime();return v<C?0:(p=Math.abs(v-C),l=Math.round(p/(1e3*3600*24)),l)}function J(t){A(!0,{type:t})}function K(){V()}return X(()=>{V(),G()}),{payMsg:i,uploadFormatter:U,smsFormatter:F,izVip:m,becomingMemberClick:L,checkValue:D,wallet:ns,quickEntryList:b,quickClick:W,userDepartCount:M,prefixCls:u,isDark:S,registerModal:a,buyExtendClick:J,handlePaySuccess:K,registerPayDetailModal:q,textArray:z}}});const Cs={class:"my-vip"},hs=s("div",{class:"vip-title"},"使用",-1),_s={class:"use-count"},Ms={class:"use-count-item"},fs={class:"app-name"},Fs={class:"app-can-use-count"},Ds={class:"app-use-count"},bs={class:"app-name"},Es={class:"app-can-use-count"},ks={class:"app-use-count"},Ss={class:"app-name"},Us={class:"app-can-use-count"},As={class:"app-use-count"},zs={class:"app-name"},Vs={class:"app-can-use-count"},Ts={class:"app-use-count"},Ps={class:"my-vip",style:{height:"120px"}},Ys={class:"use-count"},Bs={class:"use-count-item"},ws={class:"app-name"},Rs={class:"app-can-use-count"},Ns={class:"app-use-count"},$s={class:"app-name"},qs={class:"app-can-use-count"},js={class:"app-use-count"},Ls={class:"app-name"},Ws={class:"app-can-use-count"},Gs={class:"app-use-count"},Is={class:"app-name"},Js={class:"app-can-use-count"},Ks={class:"app-use-count"},Hs={class:"vip-footer"},Os={class:"left-content"},Qs={class:"top"},Xs={class:"version"},Zs=s("div",{class:"vip-title"}," 版本",-1),xs={class:"use-count"},se={class:"use-count-item"},ee={class:"app-name font-size14"},te={key:0,class:"end-time"},oe={class:"total-day-color"},ae={class:"become"},ne={class:"members"},ue=s("div",{class:"vip-title"}," 成员",-1),ie={class:"use-count"},le={class:"use-count-item"},pe=s("div",{class:"app-name"}," 成员 ",-1),re={class:"app-use-count"},de=s("div",{class:"app-name"},[s("span",null,"部门")],-1),ce={class:"app-use-count"},me={class:"bottom bottom-padding"},ge={class:"use-count"},ye={class:"use-count-item"},ve={class:"app-annex"},Ce=s("span",null,"（年）",-1),he=s("span",null,"购买",-1),_e=[he],Me={class:"annex-count"},fe={class:"percent"},Fe={class:"app-annex"},De=s("span",null,"（年）",-1),be=s("span",null,"购买",-1),Ee=[be],ke={class:"annex-count"},Se={class:"percent"},Ue={class:"right-content"},Ae={class:"vip-title"},ze={class:"quick-entry"},Ve=["onClick"],Te={class:"quick-entry-img"},Pe=["src"],Ye={class:"quick-entry-label"},Be={key:0,class:"title-notice"};function we(e,u,k,S,i,U){const F=y("a-radio"),_=y("a-radio-group"),m=y("a-slider"),D=y("ScrollNotice"),b=y("MyVipExpandModal"),M=y("UserPayDetailModal");return r(),d(w,null,[s("div",{class:Z(["vip-padding",[`${e.prefixCls}`]])},[s("div",Cs,[hs,s("div",_s,[s("div",Ms,[s("ul",null,[s("li",null,[s("div",fs,[n(" 应用创建数量 "),s("span",Fs,"(上限"+o(e.payMsg.maxAppCount?e.payMsg.maxAppCount:0)+"个)",1)]),s("div",Ds,o(e.payMsg.appCountUsed?e.payMsg.appCountUsed:0),1)]),s("li",null,[s("div",bs,[n(" 工作表创建数量 "),s("span",Es,"(上限"+o(e.payMsg.maxTableCount?e.payMsg.maxTableCount:0)+"个)",1)]),s("div",ks,o(e.payMsg.appTableCountUsed?e.payMsg.appTableCountUsed:0),1)]),s("li",null,[s("div",Ss,[n(" 工作流创建数量 "),s("span",Us,"(上限"+o(e.payMsg.maxWorkFlowCount?e.payMsg.maxWorkFlowCount:0)+"个)",1)]),s("div",As,o(e.payMsg.appFlowCountUsed?e.payMsg.appFlowCountUsed:0),1)]),s("li",null,[s("div",zs,[n(" 租户创建数量 "),s("span",Vs,"(上限"+o(e.payMsg.maxTenantCount?e.payMsg.maxTenantCount:0)+"个)",1)]),s("div",Ts,o(e.payMsg.tenantCountUsed?e.payMsg.tenantCountUsed:0),1)])])])])]),s("div",{style:h([{height:"10px"},{backgroundColor:e.isDark?"#000000":"#f0f2f5"}])},null,4),s("div",Ps,[s("div",Ys,[s("div",Bs,[s("ul",null,[s("li",null,[s("div",ws,[n(" 仪盘表数量 "),s("span",Rs,"(上限"+o(e.payMsg.maxDragPageCount?e.payMsg.maxDragPageCount:0)+"个)",1)]),s("div",Ns,o(e.payMsg.maxDragPageCountUsed?e.payMsg.maxDragPageCountUsed:0),1)]),s("li",null,[s("div",$s,[n(" 大屏数量 "),s("span",qs,"(上限"+o(e.payMsg.maxBigScreenCount?e.payMsg.maxBigScreenCount:0)+"个)",1)]),s("div",js,o(e.payMsg.bigscreenCountUsed?e.payMsg.bigscreenCountUsed:0),1)]),s("li",null,[s("div",Ls,[n(" 报表数量 "),s("span",Ws,"(上限"+o(e.payMsg.maxJmReportCount?e.payMsg.maxJmReportCount:0)+"个)",1)]),s("div",Gs,o(e.payMsg.jmReportCountUsed?e.payMsg.jmReportCountUsed:0),1)]),s("li",null,[s("div",Is,[n(" 大屏数据源数量 "),s("span",Js,"(上限"+o(e.payMsg.maxBigScreenSourceCount?e.payMsg.maxBigScreenSourceCount:0)+"个)",1)]),s("div",Ks,o(e.payMsg.bigScreenSourceCountUsed?e.payMsg.bigScreenSourceCountUsed:0),1)])])])])]),s("div",{style:h([{height:"20px"},{backgroundColor:e.isDark?"#000000":"#f0f2f5"}])},null,4),s("div",Hs,[s("div",Os,[s("div",Qs,[s("div",Xs,[Zs,s("div",xs,[s("div",se,[s("ul",null,[s("li",null,[c(_,{value:e.checkValue,"onUpdate:value":u[0]||(u[0]=a=>e.checkValue=a)},{default:R(()=>[c(F,{value:1},{default:R(()=>[s("span",ee,o(e.izVip?"会员版":"免费版"),1)]),_:1})]),_:1},8,["value"]),e.payMsg.memberType!=="default"?(r(),d("div",te,[s("span",null,[n("剩余 "),s("span",oe,o(e.payMsg.totalDay),1),n("天")]),s("span",ae,o(e.payMsg.endTime)+"到期",1)])):f("",!0),s("div",{class:"checked-btn",onClick:u[1]||(u[1]=(...a)=>e.becomingMemberClick&&e.becomingMemberClick(...a))},[s("span",null,o(e.izVip?"续费":"购买"),1)])])])])])]),s("div",{style:h([{width:"15px"},{backgroundColor:e.isDark?"#000000":"#f0f2f5"}])},null,4),s("div",ne,[ue,s("div",ie,[s("div",le,[s("ul",null,[s("li",null,[pe,s("div",re,[s("span",null,o(e.userDepartCount.userCount?e.userDepartCount.userCount:0),1)])]),s("li",null,[de,s("div",ce,[s("span",null,o(e.userDepartCount.departCount?e.userDepartCount.departCount:0),1)])])])])])])]),s("div",{style:h([{height:"20px"},{backgroundColor:e.isDark?"#000000":"#f0f2f5"}])},null,4),s("div",me,[s("div",ge,[s("div",ye,[s("ul",null,[s("li",null,[s("div",ve,[n(" 附件上传量 "),Ce,e.payMsg.memberType!=="default"?(r(),d("div",{key:0,class:"buy-btn",onClick:u[2]||(u[2]=a=>e.buyExtendClick("file"))},_e)):f("",!0)]),c(m,{class:"app-upload-slider",value:e.payMsg.uploadSizeYearUsed,"onUpdate:value":u[3]||(u[3]=a=>e.payMsg.uploadSizeYearUsed=a),tipFormatter:e.uploadFormatter,max:e.payMsg.maxUploadSize,disabled:""},null,8,["value","tipFormatter","max"]),s("div",Me,[s("div",null,[n(" 已用 "),s("span",fe,o(e.payMsg.uploadPercent)+"，",1),s("span",null,o(e.payMsg.uploadSizeUsedFormat)+" / "+o(e.payMsg.uploadSizeTotalFormat),1)])])]),s("li",null,[s("div",Fe,[n(" 短信使用量 "),De,e.payMsg.memberType!=="default"?(r(),d("div",{key:0,class:"buy-btn",onClick:u[4]||(u[4]=a=>e.buyExtendClick("sms"))},Ee)):f("",!0)]),c(m,{class:"app-sms-slider",value:e.payMsg.smsCountYearUsed,"onUpdate:value":u[5]||(u[5]=a=>e.payMsg.smsCountYearUsed=a),tipFormatter:e.smsFormatter,max:e.payMsg.maxSmsCount,disabled:""},null,8,["value","tipFormatter","max"]),s("div",ke,[s("div",null,[n(" 已用 "),s("span",Se,o(e.payMsg.smsPercent)+"，",1),s("span",null,o(e.payMsg.smsCountYearUsed?e.payMsg.smsCountYearUsed:0)+"条 / "+o(e.payMsg.maxSmsCount)+"条",1)])])])])])])])]),s("div",{class:"center-content",style:h({backgroundColor:e.isDark?"#000000":"#f0f2f5"})},null,4),s("div",Ue,[s("div",Ae,[n(" 快捷入口 "),s("div",ze,[(r(!0),d(w,null,x(e.quickEntryList,a=>(r(),d("div",{class:"quick-entry-item",onClick:A=>e.quickClick(a.value)},[s("div",Te,[s("img",{src:a.img},null,8,Pe)]),s("div",Ye,o(a.label),1)],8,Ve))),256))]),e.textArray&&e.textArray.length>0?(r(),d("div",Be,[c(D,{"text-array":e.textArray,"notice-background":"rgb(249, 174, 61)","notice-color":"white","notice-icon-color":"white"},null,8,["text-array"])])):f("",!0)])])])],2),c(b,{onRegister:e.registerModal,onSuccess:e.handlePaySuccess},null,8,["onRegister","onSuccess"]),c(M,{onRegister:e.registerPayDetailModal},null,8,["onRegister"])],64)}const $t=ds(vs,[["render",we]]);export{$t as default};

var P=(e,l,c)=>new Promise((M,C)=>{var o=u=>{try{m(c.next(u))}catch(r){C(r)}},y=u=>{try{m(c.throw(u))}catch(r){C(r)}},m=u=>u.done?M(u.value):Promise.resolve(u.value).then(o,y);m((c=c.apply(e,l)).next())});import{d as x,e as H,f as g,a2 as Q,c as X,r as Z,w as ss,o as es,a5 as s,E as i,V as _,a6 as E,a7 as D,F as R,a8 as ts,ak as a,ae as f,k as v,ai as N,am as as,W as os}from"./vue-vendor-24c7dc61.js";import{b as us,c as ns,a as is}from"./VipPay.api-469f07f9.js";import{p as q,d as ls,s as ps,w as rs}from"./setting-7861834b.js";import{i as ds}from"./antd-vue-vendor-0d72f01e.js";import{h as cs,bG as ms,c5 as vs,e as O,bA as gs,a as _s,l as Cs}from"./index-831af9dd.js";import ys from"./MyVipPayExpandModal-712badca.js";import"./index-1c3affea.js";import hs from"./UserPayDetailModal-555d7931.js";import Fs from"./ScrollNotice-c6865a25.js";import"./lowAppAuth-3d637b7d.js";import"./lowAppUtils-56892d30.js";import"./vxe-table-vendor-8813019a.js";import"./Qrcode-8252d989.js";import"./download-1ac6acce.js";import"./useWebSocket-df578a5f.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./index-621e597c.js";import"./BasicTable-d435f501.js";import"./index-52c8c841.js";import"./useForm-14b2bc77.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./helper-22dafba0.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./useListPage-62a041ef.js";const fs=x({name:"OrganBasicInformation",components:{MyVipExpandModal:ys,UserPayDetailModal:hs,ScrollNotice:Fs},emits:["quick-click"],setup(e,{emit:l}){const{prefixCls:c}=cs("j-tenant-vip-setting-container"),{getDarkMode:M}=ms(),C=H(()=>M.value===vs.DARK),o=g({}),y=()=>o.value.uploadSizeUsedFormat,m=t=>t+"条",u=Q(),r=g(!1),U=g(1),k=g([{label:"添加成员",img:q,value:"OrganDepartForm"},{label:"创建部门",img:ls,value:"OrganDepartForm"},{label:"添加角色",img:q,value:"OrganRoleForm"},{label:"管理员设置",img:ps,value:"OrganAdminForm"}]),n=g({}),[A,{openModal:Ve}]=O(),[$,{openModal:I}]=O(),B=g([]);function S(){us().then(t=>{if(t.success){o.value=t.result;let p=t.result.uploadSizeYearUsed?t.result.uploadSizeYearUsed:0,d=t.result.maxUploadSize?t.result.maxUploadSize:0,h=Number(p)/Number(d)*100;o.value.uploadPercent=h.toFixed(2)+"%",o.value.uploadSizeTotalFormat=z(d),o.value.uploadSizeUsedFormat=z(p);let F=t.result.smsCountYearUsed?t.result.smsCountYearUsed:0,V=t.result.maxSmsCount?t.result.maxSmsCount:0,w=Number(F)/Number(V)*100;if(o.value.smsPercent=w.toFixed(2)+"%",o.value.uploadSizeYearUsed=p,o.value.maxUploadSize=d,o.value.smsCountYearUsed=F,o.value.maxSmsCount=V,t.result.memberType!=="default"){let Y=t.result.endTime;o.value.endTime=ds(Y).format("YYYY-MM-DD"),o.value.totalDay=W(Y)}let b=[];h>=80&&b.push("附件上传量快要到100%了，请及时购买扩展包，避免影响您的使用！"),w>=80&&b.push("短信使用量快要到100%了，请及时购买扩展包，避免影响您的使用！"),B.value=b}}),ns().then(t=>{t.success&&(n.value=t.result)})}function z(t){if(t==null||t=="")return"0";let p=["MB","GB"],d=parseFloat(t);return gs(d,p)}function j(){u.push("/myapps/pay")}function L(t){if(t==="UserPayDetailModal"){I(!0,{});return}l("quick-click",t)}function T(){is().then(t=>{t.success?r.value=t.result.izVip:r.value=!1})}function W(t){let p,d,h=Date.parse(t),F=new Date().getTime();return h<F?0:(d=Math.abs(h-F),p=Math.round(d/(1e3*3600*24)),p)}function G(t){const{createMessage:p}=_s();p.warn("私有部署版不受限制，不需要购买！")}function J(){S()}const K=X("myTenantInfo",Z({}));return ss(K,t=>P(this,null,function*(){t&&(T(),S())}),{deep:!0}),es(()=>{S(),T()}),{payMsg:o,uploadFormatter:y,smsFormatter:m,izVip:r,becomingMemberClick:j,checkValue:U,wallet:rs,quickEntryList:k,quickClick:L,userDepartCount:n,prefixCls:c,isDark:C,registerModal:A,buyExtendClick:G,handlePaySuccess:J,registerPayDetailModal:$,textArray:B}}});const Ms={class:"vip-padding"},Es={class:"my-vip"},Ds=s("div",{class:"vip-title"},"使用",-1),Us={class:"use-count"},ks={class:"use-count-item"},Ss={class:"app-name"},bs={class:"app-can-use-count"},As={class:"app-use-count"},Bs={class:"app-name"},zs={class:"app-can-use-count"},Ts={class:"app-use-count"},Vs={class:"app-name"},ws={class:"app-can-use-count"},Ys={class:"app-use-count"},Ps={class:"app-name"},Rs={class:"app-can-use-count"},Ns={class:"app-use-count"},qs={class:"my-vip",style:{height:"120px",display:"none"}},Os={class:"use-count"},$s={class:"use-count-item"},Is={class:"app-name"},js={class:"app-can-use-count"},Ls={class:"app-use-count"},Ws={class:"app-name"},Gs={class:"app-can-use-count"},Js={class:"app-use-count"},Ks={class:"app-name"},xs={class:"app-can-use-count"},Hs={class:"app-use-count"},Qs={class:"app-name"},Xs={class:"app-can-use-count"},Zs={class:"app-use-count"},se={class:"vip-footer"},ee={class:"left-content"},te={class:"top"},ae={class:"version"},oe=s("div",{class:"vip-title"}," 版本",-1),ue={class:"use-count"},ne={class:"use-count-item"},ie=s("span",{class:"app-name font-size14"},"开源部署版",-1),le=s("div",{class:"checked-btn",style:{width:"200px"}},[s("span",null," 终身免费授权 | 只允许一个租户 ")],-1),pe={class:"members"},re=s("div",{class:"vip-title"}," 成员",-1),de={class:"use-count"},ce={class:"use-count-item"},me=s("div",{class:"app-name"}," 成员 ",-1),ve={class:"app-use-count"},ge=s("div",{class:"app-name"},[s("span",null,"部门")],-1),_e={class:"app-use-count"},Ce={class:"bottom bottom-padding"},ye={class:"use-count"},he={class:"use-count-item"},Fe=s("div",{class:"app-annex"},[i(" 附件上传量 "),s("span",null,"（年）")],-1),fe=s("div",{class:"annex-count"}," 不限制，用户需配置阿里云存储账号 ",-1),Me=s("div",{class:"app-annex"},[i(" 短信使用量 "),s("span",null,"（年）")],-1),Ee=s("div",{class:"annex-count"}," 不限制，用户需配置阿里云大鱼短信账号 ",-1),De={class:"right-content"},Ue={class:"vip-title"},ke={class:"quick-entry"},Se=["onClick"],be={class:"quick-entry-img"},Ae=["src"],Be={class:"quick-entry-label"},ze={key:0,class:"title-notice"};function Te(e,l,c,M,C,o){const y=_("a-radio"),m=_("a-radio-group"),u=_("a-slider"),r=_("ScrollNotice"),U=_("MyVipExpandModal"),k=_("UserPayDetailModal");return E(),D(R,null,[s("div",{class:ts([`${e.prefixCls}`])},[s("div",Ms,[s("div",Es,[Ds,s("div",Us,[s("div",ks,[s("ul",null,[s("li",null,[s("div",Ss,[i(" 应用创建数量 "),s("span",bs,"(上限"+a(e.payMsg.maxAppCount?e.payMsg.maxAppCount:0)+"个)",1)]),s("div",As,a(e.payMsg.appCountUsed?e.payMsg.appCountUsed:0),1)]),s("li",null,[s("div",Bs,[i(" 工作表创建数量 "),s("span",zs,"(上限"+a(e.payMsg.maxTableCount?e.payMsg.maxTableCount:0)+"个)",1)]),s("div",Ts,a(e.payMsg.appTableCountUsed?e.payMsg.appTableCountUsed:0),1)]),s("li",null,[s("div",Vs,[i(" 租户下的成员数量 "),s("span",ws,"(上限"+a(e.payMsg.maxTenantUserCount?e.payMsg.maxTenantUserCount:0)+"人)",1)]),s("div",Ys,a(e.payMsg.tenantUserCount?e.payMsg.tenantUserCount:0),1)]),s("li",null,[s("div",Ps,[i(" 租户创建数量 "),s("span",Rs,"(上限"+a(e.payMsg.maxTenantCount?e.payMsg.maxTenantCount:0)+"个)",1)]),s("div",Ns,a(e.payMsg.tenantCountUsed?e.payMsg.tenantCountUsed:0),1)])])])])]),s("div",{style:f([{height:"10px"},{backgroundColor:e.isDark?"#000000":"#f0f2f5"}])},null,4),s("div",qs,[s("div",Os,[s("div",$s,[s("ul",null,[s("li",null,[s("div",Is,[i(" 工作流创建数量 "),s("span",js,"(上限"+a(e.payMsg.maxWorkFlowCount?e.payMsg.maxWorkFlowCount:0)+"个)",1)]),s("div",Ls,a(e.payMsg.appFlowCountUsed?e.payMsg.appFlowCountUsed:0),1)]),s("li",null,[s("div",Ws,[i(" 大屏数量 "),s("span",Gs,"(上限"+a(e.payMsg.maxBigScreenCount?e.payMsg.maxBigScreenCount:0)+"个)",1)]),s("div",Js,a(e.payMsg.bigscreenCountUsed?e.payMsg.bigscreenCountUsed:0),1)]),s("li",null,[s("div",Ks,[i(" 报表数量 "),s("span",xs,"(上限"+a(e.payMsg.maxJmReportCount?e.payMsg.maxJmReportCount:0)+"个)",1)]),s("div",Hs,a(e.payMsg.jmReportCountUsed?e.payMsg.jmReportCountUsed:0),1)]),s("li",null,[s("div",Qs,[i(" 大屏数据源数量 "),s("span",Xs,"(上限"+a(e.payMsg.maxBigScreenSourceCount?e.payMsg.maxBigScreenSourceCount:0)+"个)",1)]),s("div",Zs,a(e.payMsg.bigScreenSourceCountUsed?e.payMsg.bigScreenSourceCountUsed:0),1)])])])])]),s("div",{style:f([{height:"20px"},{backgroundColor:e.isDark?"#000000":"#f0f2f5"}])},null,4),s("div",se,[s("div",ee,[s("div",te,[s("div",ae,[oe,s("div",ue,[s("div",ne,[s("ul",null,[s("li",null,[v(m,{value:e.checkValue,"onUpdate:value":l[0]||(l[0]=n=>e.checkValue=n)},{default:N(()=>[v(y,{value:1},{default:N(()=>[ie]),_:1}),le]),_:1},8,["value"])])])])])]),s("div",{style:f([{width:"15px"},{backgroundColor:e.isDark?"#000000":"#f0f2f5"}])},null,4),s("div",pe,[re,s("div",de,[s("div",ce,[s("ul",null,[s("li",null,[me,s("div",ve,[s("span",null,a(e.userDepartCount.userCount?e.userDepartCount.userCount:0),1)])]),s("li",null,[ge,s("div",_e,[s("span",null,a(e.userDepartCount.departCount?e.userDepartCount.departCount:0),1)])])])])])])]),s("div",{style:f([{height:"20px"},{backgroundColor:e.isDark?"#000000":"#f0f2f5"}])},null,4),s("div",Ce,[s("div",ye,[s("div",he,[s("ul",null,[s("li",null,[Fe,v(u,{class:"app-upload-slider",value:e.payMsg.uploadSizeYearUsed,"onUpdate:value":l[1]||(l[1]=n=>e.payMsg.uploadSizeYearUsed=n),tipFormatter:e.uploadFormatter,max:e.payMsg.maxUploadSize,disabled:""},null,8,["value","tipFormatter","max"]),fe]),s("li",null,[Me,v(u,{class:"app-sms-slider",value:e.payMsg.smsCountYearUsed,"onUpdate:value":l[2]||(l[2]=n=>e.payMsg.smsCountYearUsed=n),tipFormatter:e.smsFormatter,max:e.payMsg.maxSmsCount,disabled:""},null,8,["value","tipFormatter","max"]),Ee])])])])])]),s("div",{class:"center-content",style:f({backgroundColor:e.isDark?"#000000":"#f0f2f5"})},null,4),s("div",De,[s("div",Ue,[i(" 快捷入口 "),s("div",ke,[(E(!0),D(R,null,as(e.quickEntryList,n=>(E(),D("div",{class:"quick-entry-item",onClick:A=>e.quickClick(n.value)},[s("div",be,[s("img",{src:n.img},null,8,Ae)]),s("div",Be,a(n.label),1)],8,Se))),256))]),e.textArray&&e.textArray.length>0?(E(),D("div",ze,[v(r,{"text-array":e.textArray,"notice-background":"rgb(249, 174, 61)","notice-color":"white","notice-icon-color":"white"},null,8,["text-array"])])):os("",!0)])])])])],2),v(U,{onRegister:e.registerModal,onSuccess:e.handlePaySuccess},null,8,["onRegister","onSuccess"]),v(k,{onRegister:e.registerPayDetailModal},null,8,["onRegister"])],64)}const Rt=Cs(fs,[["render",Te]]);export{Rt as default};

var me=Object.defineProperty,ce=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var q=(r,d,l)=>d in r?me(r,d,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[d]=l,G=(r,d)=>{for(var l in d||(d={}))ue.call(d,l)&&q(r,l,d[l]);if(J)for(var l of J(d))fe.call(d,l)&&q(r,l,d[l]);return r},H=(r,d)=>ce(r,pe(d));var N=(r,d,l)=>new Promise((i,h)=>{var _=p=>{try{A(l.next(p))}catch(C){h(C)}},I=p=>{try{A(l.throw(p))}catch(C){h(C)}},A=p=>p.done?i(p.value):Promise.resolve(p.value).then(_,I);A((l=l.apply(r,d)).next())});import{d as W,r as P,f as w,c as _e,w as ve,V as y,a6 as ge,a7 as we,a5 as o,q as $,A as D,k as n,E as k,ai as a,ak as T,u as ye,F as xe,a3 as be,a4 as ke}from"./vue-vendor-24c7dc61.js";import he from"./LogoUpload-cdb48019.js";import{J as Ce}from"./componentMap-c857637c.js";import{J as Pe}from"./JDictSelectTag-54dc3bdb.js";import{a7 as Te,a5 as Ae,a as Oe,ap as Ue,l as Ne}from"./index-831af9dd.js";import{u as K,c as Ie}from"./organization.api-98a6e46c.js";import{a as Se,p as Le,g as Q}from"./areaDataUtil-cdeee717.js";import Re from"./OrganTenantPositionForm-a326e011.js";import"./antd-vue-vendor-0d72f01e.js";import"./useFormItem-86503382.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./vxe-table-vendor-8813019a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./china-area-data-vendor-556d14ee.js";import"./useForm-14b2bc77.js";import"./helper-22dafba0.js";import"./index-52c8c841.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./useListPage-62a041ef.js";import"./index-621e597c.js";import"./BasicTable-d435f501.js";const $e="/assets/jeecg_bg-e3ae838c.png",c=r=>(be("data-v-d3958245"),r=r(),ke(),r),De={class:"message-set-container"},Fe={class:"message-set-box"},ze={class:"message-set-header"},Be={class:"font17"},Me={class:"message-set-content"},Ve={class:"common-info"},je={class:"common-info-row"},Ee=c(()=>o("div",{class:"common-info-row-label"},"组织LOGO",-1)),Je={class:"common-info-row-content"},qe={class:"pointer"},Ge=c(()=>o("div",{class:"set-describe",style:{"margin-top":"10px"}},"推荐尺寸 400*180 px，显示在打印、分享和企业域名页面",-1)),He={class:"common-info-row m-top24"},Ke=c(()=>o("div",{class:"common-info-row-label"},"组织名称",-1)),Qe={class:"m-right16"},We={class:"common-info-row m-top24"},Xe=c(()=>o("div",{class:"common-info-row-label"},"组织门牌号",-1)),Ye={class:"common-info-row-content"},Ze=c(()=>o("div",{class:"set-describe",style:{"margin-top":"4px"}},"成员可输入组织门牌号加入组织",-1)),eo={class:"common-info-row m-top24"},oo=c(()=>o("div",{class:"common-info-row-label"},"组织编号(ID)",-1)),to={class:"common-info-row-content"},no=c(()=>o("div",{class:"set-describe",style:{"margin-top":"4px"}},"组织唯一身份编号，用于沟通反馈问题时使用",-1)),so=c(()=>o("div",{class:"split-line"},null,-1)),ao={class:"common-info-row"},io=c(()=>o("div",{class:"common-info-row-label"},"所在地",-1)),lo={class:"m-right16"},ro={class:"common-info-row m-top24"},mo=c(()=>o("div",{class:"common-info-row-label"},"所在行业",-1)),co={class:"m-right16"},po=c(()=>o("div",{class:"common-info-row-label"},"职位",-1)),uo=c(()=>o("span",{class:"m-right16"},null,-1)),fo={class:"common-info-row m-top24"},_o=c(()=>o("div",{class:"common-info-row-label"},"工作地点",-1)),vo={class:"m-right16"},go=c(()=>o("div",{class:"cancel-split-line"},null,-1)),wo=c(()=>o("div",{class:"common-info-row-label"},"注销组织",-1)),yo={style:{height:"100%"}},xo={class:"form-group"},bo=c(()=>o("span",{class:"form-label"},[k(" 组织名称 "),o("span",{class:"txt-middle red"},"*")],-1)),ko={style:{"margin-top":"20px"}},ho={style:{"margin-top":"20px"}},Co={style:{"margin-top":"20px"}},Po={class:"cancellation"},To=W({name:"organ-message-form"}),Ao=W(H(G({},To),{setup(r){const d=Te(),{createMessage:l}=Oe(),i=P({id:1,companyLogo:"",name:"",companyAddress:"",companyAddress_dictText:"",trade:"",trade_dictText:"",position:"",position_dictText:"",houseNumber:"",workPlace:""}),h=w(!1),_=P({loginPassword:"",tenantName:""}),I=w(!0),A=w(),p=w(!1);let C=[];const x=_e("myTenantInfo",P({}));ve(x,t=>N(this,null,function*(){t&&(Object.keys(t).map(e=>{t[e]?i[e]=t[e]:i[e]=""}),t.companyAddress?i.companyAddress_dictText=X(t.companyAddress):i.companyAddress_dictText="",t.trade?i.trade_dictText=yield Y(t.trade):i.trade_dictText="")}),{immediate:!0,deep:!0});function X(t){let e=Se(t,3),f=Le.filter(b=>b.value==e[0]),g=Q(e[0]),O=Q(e[1]),u="";if(f&&f.length>0&&(u=f[0].label,g&&g.length>0)){let b=g.filter(S=>S.value==e[1]);if(u=u+"/"+b[0].label,O&&O.length>0){let S=O.filter(U=>U.value==e[2]);u=u+"/"+S[0].label}}return u}function Y(t){return N(this,null,function*(){C.length==0&&(C=yield Ae("trade"));let e=C.filter(f=>f.value==t);return e.length>0?e[0].label:""})}const m=P({name:"",trade:"",companyAddress:""}),v=P({name:!1,trade:!1,companyAddress:!1}),F=w(),Z={name:[{required:!0,message:"组织名称不能为空",trigger:"blur"}]};function L(t){v[t]=!0,m[t]=i[t]}function R(t){return N(this,null,function*(){t=="name"&&(yield F.value.validateFields()),t=="companyAddress"&&m[t]instanceof Array&&(m[t]="");let e={id:i.id,[t]:m[t]};yield K(e),x&&(x[t]=m[t]),v[t]=!1})}function ee(t){return N(this,null,function*(){let e={id:x.id,companyLogo:t};yield K(e),x.companyLogo=t})}const z=w(),oe=w(!1),Oo=P({position:""}),Uo=w([{label:"总裁/总经理/CEO",value:"1"},{label:"副总裁/副总经理/VP",value:"2"},{label:"总监/主管/经理",value:"3"},{label:"员工/专员/执行",value:"4"},{label:"其他",value:"5"}]),te=w(),B=w(!1),M=P({workPlace:""});function V(t){const e=document.createElement("input");e.setAttribute("value",t),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),l.success("复制成功")}function ne(){p.value=!0,z.value.getPositionList()}function No(){B.value=!0,Object.assign(M,{workPlace:i.workPlace?i.workPlace:""})}function se(){if(d.getUserInfo.username!==x.createBy){l.warn("不是拥有者，无法注销");return}h.value=!0,setTimeout(()=>{A.value.resetFields()},300)}function Io(){}function So(t){return Ue(t)||$e}function Lo(){oe.value=!1}function Ro(){B.value=!1}function ae(){return N(this,null,function*(){if(!_.loginPassword){l.warn("请输入登录密码");return}yield Ie({id:x.id,loginPassword:_.loginPassword}).then(t=>{t.success?(l.success(t.message),h.value=!1,d.setTenant(null),setTimeout(()=>{window.open("/myapps/index","_self")},500)):l.warn(t.message)}).catch(t=>{l.warn(t.message)})})}function ie(){h.value=!1}function le(){let t=x.name,e=_.tenantName;t===e?I.value=!1:I.value=!0}function de(){p.value=!1}return(t,e)=>{const f=y("Icon"),g=y("a-form"),O=y("a-input"),u=y("a-form-item"),b=y("a-modal"),S=y("a-textarea"),U=y("a-col"),j=y("a-row"),re=y("a-input-password"),E=y("a-button");return ge(),we(xe,null,[o("div",De,[o("div",Fe,[o("div",ze,[$(o("span",Be,"组织信息",512),[[D,!p.value]]),$(o("span",{class:"font17 pointer",onClick:de},[n(f,{icon:"ant-design:arrow-left-outlined",style:{"font-size":"17px","margin-right":"10px"}}),k(" 职位列表 ")],512),[[D,p.value]])]),$(n(g,{model:i},{default:a(()=>[o("div",Me,[o("div",Ve,[o("div",je,[Ee,o("div",Je,[o("div",qe,[n(he,{value:i.companyLogo,"onUpdate:value":e[0]||(e[0]=s=>i.companyLogo=s),onChange:ee},null,8,["value"])]),Ge])]),o("div",He,[Ke,o("span",Qe,T(i.name),1),o("span",{class:"edit-name",onClick:e[1]||(e[1]=s=>L("name"))},"修改")]),o("div",We,[Xe,o("div",Ye,[o("span",{class:"pointer",onClick:e[2]||(e[2]=s=>V(i.houseNumber))},[o("span",null,[k(T(i.houseNumber),1),n(f,{icon:"ant-design:copy-outlined",style:{"font-size":"13px","margin-left":"2px"}})])]),Ze])]),o("div",eo,[oo,o("div",to,[o("span",{class:"pointer",onClick:e[3]||(e[3]=s=>V(i.id))},[o("span",null,[k(T(i.id),1),n(f,{icon:"ant-design:copy-outlined",style:{"font-size":"13px","margin-left":"2px"}})])]),no])]),so,o("div",ao,[io,o("span",lo,T(i.companyAddress_dictText),1),o("span",{class:"edit-name",onClick:e[4]||(e[4]=s=>L("companyAddress"))},"修改")]),o("div",ro,[mo,o("span",co,T(i.trade_dictText),1),o("span",{class:"edit-name",onClick:e[5]||(e[5]=s=>L("trade"))},"修改")]),o("div",{class:"common-info-row m-top24"},[po,uo,o("span",{class:"edit-name",onClick:ne},"设置")]),o("div",fo,[_o,o("span",vo,T(i.workPlace),1),o("span",{class:"edit-name",onClick:e[6]||(e[6]=s=>L("workPlace"))},"修改")]),go,o("div",{class:"common-info-row"},[o("div",{style:{"margin-bottom":"40px",display:"flex"}},[wo,o("span",{class:"pointer delete-color",onClick:se},"注销")])])])])]),_:1},8,["model"]),[[D,!p.value]]),$(o("div",yo,[n(Re,{ref_key:"positionRef",ref:z},null,512)],512),[[D,p.value]])])]),n(b,{open:v.name,"onUpdate:open":e[8]||(e[8]=s=>v.name=s),title:"修改组织名称",width:"500","destroy-on-close":"",onOk:e[9]||(e[9]=s=>R("name"))},{default:a(()=>[n(g,{ref_key:"manageNameRef",ref:F,model:m,rules:Z},{default:a(()=>[n(u,{name:"name",class:"form-item-padding"},{default:a(()=>[o("div",xo,[bo,n(O,{value:m.name,"onUpdate:value":e[7]||(e[7]=s=>m.name=s)},null,8,["value"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),n(b,{open:v.companyAddress,"onUpdate:open":e[11]||(e[11]=s=>v.companyAddress=s),title:"所在地",width:"500","destroy-on-close":"",onOk:e[12]||(e[12]=s=>R("companyAddress"))},{default:a(()=>[n(g,{model:m},{default:a(()=>[n(u,{name:"companyAddress",class:"form-item-padding"},{default:a(()=>[o("div",ko,[n(Ce,{value:m.companyAddress,"onUpdate:value":e[10]||(e[10]=s=>m.companyAddress=s)},null,8,["value"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),n(b,{open:v.trade,"onUpdate:open":e[14]||(e[14]=s=>v.trade=s),title:"设置所在行业",width:"500","destroy-on-close":"",onOk:e[15]||(e[15]=s=>R("trade"))},{default:a(()=>[n(g,{model:m},{default:a(()=>[n(u,{name:"trade",class:"form-item-padding"},{default:a(()=>[o("div",ho,[n(Pe,{value:m.trade,"onUpdate:value":e[13]||(e[13]=s=>m.trade=s),dictCode:"trade"},null,8,["value"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),n(b,{open:v.workPlace,"onUpdate:open":e[17]||(e[17]=s=>v.workPlace=s),title:"设置工作地点",width:"500","destroy-on-close":"",onOk:e[18]||(e[18]=s=>R("workPlace"))},{default:a(()=>[n(g,{ref_key:"workPlaceRef",ref:te,model:M},{default:a(()=>[n(u,{name:"name",class:"form-item-padding"},{default:a(()=>[o("div",Co,[n(S,{placeholder:"请填写工作地点",value:m.workPlace,"onUpdate:value":e[16]||(e[16]=s=>m.workPlace=s)},null,8,["value"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),n(b,{open:h.value,"onUpdate:open":e[21]||(e[21]=s=>h.value=s),width:"800"},{title:a(()=>[o("div",Po,[n(f,{icon:"ant-design:warning-outlined",style:{"font-size":"20px",color:"red"}}),k(" 申请注销 "+T(ye(x).name),1)])]),footer:a(()=>[n(E,{type:"primary",onClick:ae,disabled:I.value},{default:a(()=>[k("确定")]),_:1},8,["disabled"]),n(E,{onClick:ie},{default:a(()=>[k("取消")]),_:1})]),default:a(()=>[n(g,{model:_,ref_key:"cancelTenantRef",ref:A},{default:a(()=>[n(u,{name:"tenantName"},{default:a(()=>[n(j,{span:24,style:{padding:"20px 20px 0","font-size":"13px"}},{default:a(()=>[n(U,{span:24},{default:a(()=>[k(" 请输入租户名称 ")]),_:1}),n(U,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[n(O,{value:_.tenantName,"onUpdate:value":e[19]||(e[19]=s=>_.tenantName=s),onChange:le},null,8,["value"])]),_:1})]),_:1})]),_:1}),n(u,{name:"loginPassword"},{default:a(()=>[n(j,{span:24,style:{padding:"0 20px","font-size":"13px"}},{default:a(()=>[n(U,{span:24},{default:a(()=>[k(" 请输入您的登录密码 ")]),_:1}),n(U,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[n(re,{value:_.loginPassword,"onUpdate:value":e[20]||(e[20]=s=>_.loginPassword=s)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])],64)}}}));const St=Ne(Ao,[["__scopeId","data-v-d3958245"]]);export{St as default};

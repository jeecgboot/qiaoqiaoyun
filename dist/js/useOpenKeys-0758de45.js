var h=(e,p,a)=>new Promise((c,u)=>{var n=o=>{try{r(a.next(o))}catch(t){u(t)}},i=o=>{try{r(a.throw(o))}catch(t){u(t)}},r=o=>o.done?c(o.value):Promise.resolve(o.value).then(n,i);r((a=a.apply(e,p)).next())});import{d as x,f as v,e as _,h as y,w as C,n as b,p as A,o as k,g as w,a6 as K,a7 as I,a8 as T,O as D,I as E,u as M}from"./vue-vendor-24c7dc61.js";import{H as l,h as P,c7 as R,l as z,D as B,p as F,c6 as S}from"./index-831af9dd.js";import{c as q}from"./SubMenuItem-cfcb4516.js";import{bu as H}from"./antd-vue-vendor-0d72f01e.js";const W=x({name:"Menu",props:{theme:l.oneOf(["light","dark"]).def("light"),activeName:l.oneOfType([l.string,l.number]),openNames:{type:Array,default:()=>[]},accordion:l.bool.def(!0),width:l.string.def("100%"),collapsedWidth:l.string.def("48px"),indentSize:l.number.def(16),collapse:l.bool.def(!0),activeSubMenuNames:{type:Array,default:()=>[]}},emits:["select","open-change"],setup(e,{emit:p}){const a=R(),c=w(),u=v(""),n=v([]),{prefixCls:i}=P("menu"),r=v(!1);q({rootMenuEmitter:a,activeName:u});const o=_(()=>{const{theme:s}=e;return[i,`${i}-${s}`,`${i}-vertical`,{[`${i}-collapse`]:e.collapse}]});y(()=>{n.value=e.openNames}),y(()=>{e.activeName&&(u.value=e.activeName)}),C(()=>e.openNames,()=>{b(()=>{t()})});function t(){a.emit("on-update-opened",n.value)}function f(s){n.value.includes(s)||(n.value.push(s),t())}function m(s){n.value=n.value.filter(d=>d!==s),t()}function N(){n.value=[],t()}function O(s){s!==-1&&(n.value=n.value.slice(0,s+1),t())}return A(`subMenu:${c==null?void 0:c.uid}`,{addSubMenu:f,removeSubMenu:m,getOpenNames:()=>n.value,removeAll:N,isRemoveAllPopup:r,sliceIndex:O,level:0,props:e}),k(()=>{n.value=e.collapse?[]:[...e.openNames],t(),a.on("on-menu-item-select",s=>{u.value=s,b(()=>{e.collapse&&N()}),p("select",s)}),a.on("open-name-change",({name:s,opened:d})=>{if(d&&!n.value.includes(s))n.value.push(s);else if(!d){const g=n.value.findIndex($=>$===s);g!==-1&&n.value.splice(g,1)}})}),{getClass:o,openedNames:n}}});function j(e,p,a,c,u,n){return K(),I("ul",{class:T(e.getClass)},[D(e.$slots,"default")],2)}const X=z(W,[["render",j]]);function Y(e,p,a,c,u){const n=B(i,50);function i(o){return h(this,null,function*(){const t=!c.value,f=E(p.value);F(()=>{if((f==null?void 0:f.length)===0){e.activeSubMenuNames=[],e.openNames=[];return}const m=S(f,o);M(a)?e.openNames=m:e.openNames=H([...e.openNames,...m]),e.activeSubMenuNames=e.openNames},30,t)})}const r=_(()=>M(u)?[]:e.openNames);return{setOpenKeys:n,getOpenKeys:r}}export{X as M,Y as u};

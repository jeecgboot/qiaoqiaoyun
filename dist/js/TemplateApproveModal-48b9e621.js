var P=Object.defineProperty;var M=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var C=(s,t,e)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,B=(s,t)=>{for(var e in t||(t={}))R.call(t,e)&&C(s,e,t[e]);if(M)for(var e of M(t))V.call(t,e)&&C(s,e,t[e]);return s};var y=(s,t,e)=>new Promise((n,d)=>{var u=a=>{try{l(e.next(a))}catch(c){d(c)}},x=a=>{try{l(e.throw(a))}catch(c){d(c)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(u,x);l((e=e.apply(s,t)).next())});import{d as Y,f as g,e as D,u as r,V as h,a6 as _,a7 as v,k as p,ai as f,E as L,a5 as w,F as U,am as N,ag as S,a3 as E,a4 as $}from"./vue-vendor-24c7dc61.js";import{B as z}from"./index-1c3affea.js";import{s as I}from"./LowAppTemplate.api-69278405.js";import{i as q}from"./antd-vue-vendor-0d72f01e.js";import{j as G,R as H,l as J}from"./index-831af9dd.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./vxe-table-vendor-8813019a.js";const K=s=>(E("data-v-c83c5076"),s=s(),$(),s),Q={key:0,autoplay:"",loop:"",muted:"",playsinline:"",class:"product-video"},W=["src"],X={key:1,style:{width:"100%",padding:"24px"}},Z=["src"],ee={key:2,style:{width:"100%",padding:"24px",display:"flex","align-items":"center"}},oe=K(()=>w("span",{style:{"margin-left":"10px"}},"未配置应用介绍",-1)),te={style:{padding:"24px"}},se=Y({__name:"TemplateApproveModal",emits:["register","success"],setup(s,{emit:t}){const e=g(!1),n=g({}),d=g(""),u=g(!0),[x,{setModalProps:l,closeModal:a}]=G(o=>y(this,null,function*(){l({confirmLoading:!1,showCancelBtn:!!(o!=null&&o.showFooter),showOkBtn:!!(o!=null&&o.showFooter)}),u.value=!!(o!=null&&o.isUpdate),r(u)&&(n.value=B({},o.record))})),c=D(()=>r(n).rotationPics?r(n).rotationPics.split(","):[]);function b(){return y(this,null,function*(){try{l({confirmLoading:!0});let o=r(n),i=q(new Date).format("YYYY-MM-DD hh:mm:ss");yield I({id:o.id,status:2,publishTime:i},u.value),a(),t("success")}finally{l({confirmLoading:!1})}})}function j(){return y(this,null,function*(){try{l({confirmLoading:!0});let o=r(n);yield I({id:o.id,status:-1,rejectCause:r(d)},u.value),a(),t("success"),e.value=!1}finally{l({confirmLoading:!1})}})}return(o,i)=>{const O=h("a-carousel"),k=h("a-button"),T=h("a-textarea"),A=h("a-modal");return _(),v(U,null,[p(r(z),S(o.$attrs,{onRegister:r(x),destroyOnClose:"",title:"查看",width:800}),{footer:f(()=>[p(k,{type:"primary",onClick:b},{default:f(()=>[L("审核通过")]),_:1}),p(k,{type:"primary",danger:"",onClick:i[0]||(i[0]=m=>e.value=!0)},{default:f(()=>[L("审核不通过")]),_:1})]),default:f(()=>[n.value.videoUrl?(_(),v("video",Q,[w("source",{src:n.value.videoUrl,type:"video/mp4"},null,8,W)])):c.value&&c.value.length>0?(_(),v("div",X,[p(O,{autoplay:""},{default:f(()=>[(_(!0),v(U,null,N(c.value,(m,F)=>(_(),v("div",{key:F},[w("img",{src:m,style:{width:"100%",height:"400px"}},null,8,Z)]))),128))]),_:1})])):(_(),v("div",ee,[p(H,{icon:"ant-design:info-circle-outlined",style:{color:"orange"},size:"30"}),oe]))]),_:1},16,["onRegister"]),p(A,{open:e.value,"onUpdate:open":i[2]||(i[2]=m=>e.value=m),title:"审核不通过原因",onOk:j},{default:f(()=>[w("div",te,[p(T,{rows:"3",value:d.value,"onUpdate:value":i[1]||(i[1]=m=>d.value=m)},null,8,["value"])])]),_:1},8,["open"])],64)}}});const me=J(se,[["__scopeId","data-v-c83c5076"]]);export{me as default};

var M=Object.defineProperty,N=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var O=(e,n,l)=>n in e?M(e,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[n]=l,b=(e,n)=>{for(var l in n||(n={}))$.call(n,l)&&O(e,l,n[l]);if(g)for(var l of g(n))A.call(n,l)&&O(e,l,n[l]);return e},k=(e,n)=>N(e,V(n));import{d as I,f as y,w,a3 as P,a4 as U,a5 as u,V as d,a6 as m,a7 as B,F as D,am as z,k as c,z as E,a8 as R,af as j,ai as q,E as T,W}from"./vue-vendor-24c7dc61.js";import{s as L}from"./type.definition-4eb605ee.js";import{cu as G,aB as H,cm as J,p as K}from"./antd-vue-vendor-0d72f01e.js";import{l as Q}from"./index-831af9dd.js";import"./vxe-table-vendor-8813019a.js";const X=I({name:"Paixu",components:{PlusCircleOutlined:G,MinusCircleOutlined:H,SaveOutlined:J},props:{columnList:{type:Array,default:()=>[]},info:{type:Object,require:!1,default:{}}},emits:["save"],setup(e,{emit:n}){const l=y(""),f=y([]),F=(o,t)=>t.value.toLowerCase().indexOf(o.toLowerCase())>=0||t.label.indexOf(o)>=0,i=y([{name:"",type:"asc",field:""}]);w(()=>e.columnList,o=>{if(o){let t=[];for(let a of o){let s=K(a,"name","model");t.push({label:s.name,value:s.model})}for(let a of L)t.push({label:a.name,value:a.field});f.value=t}},{immediate:!0}),w(()=>e.info,o=>{let t=[];if(o&&o.orders){let a=o.orders;for(let s of a){let S=p(s.field);t.push(k(b({},s),{name:S}))}}t.length==0?i.value=[{name:"",type:"asc",field:""}]:i.value=t},{deep:!0,immediate:!0});function p(o){let t=e.columnList,a="";for(let s of t)s.model===o&&(a=s.name);if(!a)for(let s of L)s.field===o&&(a=s.name);return a}const v=[{value:"asc",label:"升序"},{value:"desc",label:"降序"}];function h(){let o=i.value;o.push({name:"",type:"asc",field:""}),i.value=o}function _(o){let t=i.value;t.length!=1&&(t.splice(o,1),i.value=t)}const C=o=>{};function r(){let t=i.value.map(a=>({type:a.type,field:a.field}));n("save",{orders:t})}return{temp:l,saveCondition:r,fieldOptions:f,typeOptions:v,myFilter:F,handleChange:C,orderList:i,onRemove:_,onAdd:h}}});const x=e=>(P("data-v-b1d0635c"),e=e(),U(),e),Y={class:"inner-content"},Z=x(()=>u("div",{class:"title"},"排序",-1)),ee=x(()=>u("div",{class:"tip"},"选择此视图下的记录默认排序方式",-1)),te={class:"config-detail",style:{width:"320px","padding-top":"0"}},oe={class:"order-config"},ne={class:"order-item"},ae={class:"right-icon"},le={style:{margin:"10px 0 0 5px"}};function se(e,n,l,f,F,i){const p=d("a-select"),v=d("MinusCircleOutlined"),h=d("plus-circle-outlined"),_=d("SaveOutlined"),C=d("a-button");return m(),B("div",Y,[Z,ee,u("div",te,[u("div",oe,[(m(!0),B(D,null,z(e.orderList,(r,o)=>(m(),B("div",ne,[u("div",null,[c(p,{value:r.field,"onUpdate:value":t=>r.field=t,"show-search":"",placeholder:"请选择字段",style:{width:"120px",cursor:"pointer"},options:e.fieldOptions,"filter-option":e.myFilter,onChange:e.handleChange},null,8,["value","onUpdate:value","options","filter-option","onChange"])]),u("div",null,[c(p,{value:r.type,"onUpdate:value":t=>r.type=t,"show-search":"",placeholder:"请选择排序方式",style:{width:"120px",cursor:"pointer"},options:e.typeOptions,onChange:e.handleChange},null,8,["value","onUpdate:value","options","onChange"])]),u("div",ae,[c(v,{onClick:E(t=>e.onRemove(o),["prevent"]),title:"移除",class:R(e.orderList.length==1?"disabled":"")},null,8,["onClick","class"]),c(h,{onClick:E(e.onAdd,["prevent"]),title:"新增"},null,8,["onClick"])])]))),256)),u("div",le,[e.orderList.length>0?(m(),j(C,{key:0,onClick:e.saveCondition,style:{"border-radius":"20px"},type:"primary"},{default:q(()=>[c(_),T("保 存 ")]),_:1},8,["onClick"])):W("",!0)])])])])}const me=Q(X,[["render",se],["__scopeId","data-v-b1d0635c"]]);export{me as default};

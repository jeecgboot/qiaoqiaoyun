var ne=Object.defineProperty,ae=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var I=(i,l,d)=>l in i?ne(i,l,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[l]=d,P=(i,l)=>{for(var d in l||(l={}))re.call(l,d)&&I(i,d,l[d]);if(H)for(var d of H(l))se.call(l,d)&&I(i,d,l[d]);return i},V=(i,l)=>ae(i,oe(l));import{d as R,f as E,V as le,a6 as o,a7 as r,a5 as _,F as C,am as h,af as g,W as u,k as N,ak as s,E as c,a3 as Ie,a4 as Pe}from"./vue-vendor-24c7dc61.js";import{E as de}from"./FileList.api-9749c044.js";import{d as ie,ap as ue,l as ce}from"./index-831af9dd.js";import y from"./FilePopover-961bdae7.js";import{i as p}from"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";import"./header-55b09394.js";const pe={class:"log-detail-list"},fe={class:"ellipsis"},_e={style:{"word-break":"break-all","white-space":"break-spaces"}},Ce={key:0},he={key:1},ge={key:2},Ne={key:3},ye={key:4},Se={key:0},ke=["onClick"],De={key:1},Fe={key:5},Je={key:6},Oe=["onClick"],ve={key:0},we={key:7},xe={key:8},Te={key:9},be={key:10},Ue={key:0},Ye={key:11},me={class:"detail-log-time"},Ae=R({name:"file-log"}),Me=R(V(P({},Ae),{setup(i,{expose:l}){const d=E([]),B=ie(),S=E(0);function W(e){de({fileId:e}).then(a=>{a.success&&(d.value=a.result)})}function $(e){let n=JSON.parse(e.dataContent).sharePerms;return n=="1"?" 修改了文件的链接浏览限制为：关闭该文件的分享":n=="2"?" 修改了文件的链接浏览限制为：允许本网成员查看":" 修改了文件的链接浏览限制为：任何成员都可以观看"}function j(e){return JSON.parse(e.dataContent).enableDown=="0"?" 修改了文件的下载设置为：不可下载":" 修改了文件的下载设置为：可下载"}function G(e){return JSON.parse(e.dataContent).enableUpdat=="0"?" 修改了文件的编辑设置为：不可编辑":" 修改了文件的编辑设置为：可编辑"}function q(e){return" 移动此文件夹到 "+JSON.parse(e.dataContent).fileName}function K(e){let a=JSON.parse(e.dataContent),n=a.newFileName,t=a.oldFileName;return e.izFolder=="1"?" 重命名了文件夹"+t+"为"+n:" 重命名了文件"+t+"为"+n}function Q(e){let a=JSON.parse(e.dataContent),n=a.izFolder,t=a.fileName;return n=="0"?" 将文件 "+t+" 放入回收站":" 将文件夹 "+t+" 放入回收站"}function X(e){let a=JSON.parse(e.dataContent),n=a.izFolder,t=a.fileName;return n=="0"?" 恢复了文件 "+t:" 恢复了文件夹 "+t}function Z(e){let a=JSON.parse(e.dataContent),n=a.izFolder,t=a.fileName;return n=="0"?" 彻底删除了文件 "+t:" 彻底删除了文件夹 "+t}function k(e){let a=JSON.parse(e.dataContent).userData;if(a)return S.value=a.length,a}function ee(e){let a=D(JSON.parse(e.dataContent).oldAuthority),n=D(JSON.parse(e.dataContent).newAuthority);return" 的权限从 "+a+" 调整为 "+n}function D(e){return e==="admin"?"管理员":e==="editable"?"可编辑":"只读"}function F(e){return JSON.parse(e.dataContent).fileName}function J(e){return e.dataContent&&JSON.parse(e.dataContent).type=="sharePerms"}function O(e){return e.dataContent&&JSON.parse(e.dataContent).type=="enableDown"}function v(e){return e.dataContent&&JSON.parse(e.dataContent).type=="enableUpdat"}function w(e){return e.dataContent&&JSON.parse(e.dataContent).type=="move"}function x(e){return e.dataContent&&JSON.parse(e.dataContent).type=="copy"}function T(e){return e.dataContent&&JSON.parse(e.dataContent).type=="rename"}function b(e){return e.dataContent&&JSON.parse(e.dataContent).type=="newFile"}function U(e){return e.dataContent&&JSON.parse(e.dataContent).type=="updateFlag"}function Y(e){return e.dataContent&&JSON.parse(e.dataContent).type=="reduction"}function m(e){return e.dataContent&&JSON.parse(e.dataContent).type=="deleteFile"}function A(e){return e.dataContent&&JSON.parse(e.dataContent).type=="addUser"}function M(e){return e.dataContent&&JSON.parse(e.dataContent).type=="changeAuth"}function z(e){let a=JSON.parse(e.dataContent).url,n=encodeURIComponent(ue(a));(n.endsWith(".pdf")||n.endsWith(".doc")||n.endsWith(".docx"))&&(n=n+"&officePreviewType=pdf");let t=`${B.viewUrl}?url=`+n;window.open(t,"_blank")}function te(e){if(e==null)return"";let a=new Date,n=new Date(e);if(a.getTime()<n.getTime()||a.getFullYear()!=n.getFullYear())return p(n).format("YYYY-MM-DD");if(a.getMonth()!=n.getMonth())return p(n).format("YYYY-MM-DD");if(a.getDate()!=n.getDate()){let t=n.getDate()-a.getDate();return t==-1?"昨天 "+p(n).format("HH:mm"):t==-2?"前天 "+p(n).format("HH:mm"):p(n).format("YYYY-MM-DD")}return"今天 "+p(n).format("HH:mm")}return l({loadFileLog:W}),(e,a)=>{const n=le("Icon");return o(),r("div",null,[_("ul",pe,[(o(!0),r(C,null,h(d.value,(t,ze)=>(o(),r("li",fe,[J(t)||O(t)||v(t)||w(t)||T(t)||b(t)||Y(t)||A(t)||M(t)?(o(),g(n,{key:0,class:"icon-edit",icon:"ant-design:edit-outlined"})):u("",!0),x(t)?(o(),g(n,{key:1,class:"icon-edit",icon:"ant-design:plus-outlined"})):u("",!0),U(t)||m(t)?(o(),g(n,{key:2,class:"icon-edit",icon:"ant-design:delete-outlined"})):u("",!0),_("div",_e,[N(y,{userData:t},null,8,["userData"]),J(t)?(o(),r("span",Ce,s($(t)),1)):O(t)?(o(),r("span",he,s(j(t)),1)):v(t)?(o(),r("span",ge,s(G(t)),1)):w(t)?(o(),r("span",Ne,s(q(t)),1)):x(t)?(o(),r("span",ye,[JSON.parse(t.dataContent).izFolder==="0"?(o(),r("span",Se,[c(" 创建了文件 "),_("a",{href:"javascript:void(0)",onClick:f=>z(t)},s(F(t)),9,ke)])):(o(),r("span",De,s(" 创建了 文件夹 "+JSON.parse(t.dataContent).fileName),1))])):T(t)?(o(),r("span",Fe,s(K(t)),1)):b(t)?(o(),r("span",Je,[c(s(" 上传了新版本")+" "),_("a",{href:"javascript:void(0)",onClick:f=>z(t)},s(F(t)),9,Oe),JSON.parse(t.dataContent).description?(o(),r("span",ve,s(" 版本说明："+JSON.parse(t.dataContent).description),1)):u("",!0)])):U(t)?(o(),r("span",we,s(Q(t)),1)):Y(t)?(o(),r("span",xe,s(X(t)),1)):m(t)?(o(),r("span",Te,s(Z(t)),1)):A(t)?(o(),r("span",be,[c(" 添加了新成员 "),(o(!0),r(C,null,h(k(t),(f,L)=>(o(),r("span",null,[N(y,{userData:f},null,8,["userData"]),c(),L!==S.value-1?(o(),r("span",Ue,"，")):u("",!0)]))),256))])):M(t)?(o(),r("span",Ye,[c(s(" 将 ")+" "),(o(!0),r(C,null,h(k(t),(f,L)=>(o(),r("span",null,[N(y,{userData:f},null,8,["userData"])]))),256)),c(" "+s(ee(t)),1)])):u("",!0)]),_("div",me,s(te(t.createTime)),1)]))),256))])])}}}));const je=ce(Me,[["__scopeId","data-v-2de80095"]]);export{je as default};

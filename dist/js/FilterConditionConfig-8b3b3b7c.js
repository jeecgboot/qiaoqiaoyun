var z=Object.defineProperty,G=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var j=(e,o,u)=>o in e?z(e,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[o]=u,L=(e,o)=>{for(var u in o||(o={}))J.call(o,u)&&j(e,u,o[u]);if(T)for(var u of T(o))K.call(o,u)&&j(e,u,o[u]);return e},W=(e,o)=>G(e,H(o));import{d as M,c as Q,f as Z,e as X,n as Y,a3 as x,a4 as ee,a5 as i,V as d,a6 as l,a7 as s,k as p,ai as a,F as c,am as f,af as g,E as h,ak as k,W as F}from"./vue-vendor-24c7dc61.js";import{r as te,n as oe,aC as ne,aZ as le,a$ as ie}from"./antd-vue-vendor-0d72f01e.js";import{C as se}from"./ComponentIcon-f1bbb90f.js";import{A as ae,u as re}from"./AggregationAdvancedFilter-a52ae827.js";import{s as pe}from"./type.definition-4eb605ee.js";import{u as ue}from"./LinkRecordSelect-385d0eae.js";import{l as de}from"./index-831af9dd.js";import"./FormSchemaFactory-ec827fa7.js";import"./index-bff0b654.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./vxe-table-vendor-8813019a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./SuperQueryValComponent-97f284a9.js";import"./helper-22dafba0.js";import"./SelectItem-04dd2229.js";import"./lowAppUtils-56892d30.js";import"./auto.desform.api-839115ed.js";import"./desformUtils-c7daaa89.js";import"./LinkRecordTags-cf4c2463.js";import"./lowAppAuth-3d637b7d.js";import"./useFuncSwitch-b7681246.js";import"./DictColors-73058d23.js";import"./TableImage-14ca1f5d.js";import"./SubTableTag-81763fd6.js";import"./CardCellFile-92b3c8c8.js";const ce=M({name:"FilterConditionConfig",components:{Popconfirm:te,SearchOutlined:oe,ComponentIcon:se,PlusOutlined:ne,TableOutlined:le,DeleteOutlined:ie,AggregationAdvancedFilter:ae},emits:["edit"],setup(e){let o=Q("tableRelationObj");const{getFieldConfig:u}=re(e,!0),{getConditionOptions:R,getDefaultRule:U,getDefaultVal:N}=ue(),O=Z(!1),v=Z(""),I=X(()=>o.relationForms.formList);function $(r){let _=v.value;return _?r?r.name.indexOf(_)>=0:!1:!0}function A(r,_){let w=U(r.type||"input"),C=N(r.type||"input"),t=W(L({form:_},r),{rule:w,val:C,reloading:!1});t!=null&&t.name&&(t.title=t.name),t!=null&&t.value&&(t.field=t.value,delete t.value),o.filterCondition.push(L({},t)),O.value=!1}function b(r){r.reloading=!0,Y(()=>{r.reloading=!1})}function V(r){const _=u(r.field);let w=r.type,C=R(w,_.multiple);return!C||C.length==0?[]:C}function S(r){o.filterCondition.splice(r,1)}function P(){o.filterCondition=[]}return{tableRelationObj:o,showPop:O,filterValue:v,onSelectField:A,isFilterItem:$,systemFields:pe,filterColumnList:I,onConditionRuleChange:b,getOptions:V,deleteOneCond:S,deleteAllCond:P}}});const E=e=>(x("data-v-2890b8d9"),e=e(),ee(),e),me={class:"filter-condition-content"},_e={class:"settingItem flexBetween marginTop20"},fe={class:"field-list"},ve=["onClick"],Ce=E(()=>i("div",{class:"split"},null,-1)),ge=["onClick"],ye=E(()=>i("span",{class:"pointer color-red"},"删除全部",-1)),he={style:{margin:"15px","overflow-y":"scroll",height:"600px"}},ke={class:"table-title"},Fe={class:"flex-row"},Oe={class:"field-item"},be={class:"field-list"},we=["onClick"],Be=E(()=>i("div",{class:"split"},null,-1)),Ie=["onClick"],$e={class:"condition-item"},Ae={class:"flex-row",style:{"margin-top":"10px","align-items":"center"}},Se={style:{"min-width":"70%"}},Ve=["onClick"];function Pe(e,o,u,R,U,N){const O=d("table-outlined"),v=d("component-icon"),I=d("a-collapse-panel"),$=d("a-collapse"),A=d("search-outlined"),b=d("a-input"),V=d("PlusOutlined"),S=d("a-popover"),P=d("Popconfirm"),r=d("a-select-option"),_=d("a-select"),w=d("AggregationAdvancedFilter"),C=d("DeleteOutlined");return l(),s("div",me,[i("div",_e,[i("span",{class:"pointer",onClick:o[2]||(o[2]=t=>e.showPop=!0)},[p(S,{overlayClassName:"view-pop-field-select",open:e.showPop,"onUpdate:open":o[1]||(o[1]=t=>e.showPop=t),trigger:"click"},{content:a(()=>[i("div",fe,[(l(!0),s(c,null,f(e.filterColumnList,(t,B)=>(l(),g($,{key:B,ghost:""},{expandIcon:a(()=>[p(O)]),default:a(()=>[(l(),g(I,{key:B,header:t.label},{default:a(()=>[(l(!0),s(c,null,f(t.fieldOptions,(n,y)=>(l(),s(c,{key:y},[e.isFilterItem(n)?(l(),s("div",{key:0,class:"field-item",onClick:m=>e.onSelectField(n,t)},[i("div",null,[p(v,{type:n.type},null,8,["type"]),h(" "+k(n.title),1)])],8,ve)):F("",!0)],64))),128)),Ce,(l(!0),s(c,null,f(e.systemFields,(n,y)=>(l(),s(c,{key:y},[e.isFilterItem(n)?(l(),s("div",{key:0,class:"field-item",onClick:m=>e.onSelectField(n,t)},[i("div",null,[p(v,{type:n.type},null,8,["type"]),h(k(n.name),1)])],8,ge)):F("",!0)],64))),128))]),_:2},1032,["header"]))]),_:2},1024))),128))])]),title:a(()=>[p(b,{placeholder:"搜索字段",class:"my-input",value:e.filterValue,"onUpdate:value":o[0]||(o[0]=t=>e.filterValue=t)},{prefix:a(()=>[p(A,{style:{color:"#c0c0c0"}})]),_:1},8,["value"])]),default:a(()=>[i("span",null,[p(V),h("添加过滤条件")])]),_:1},8,["open"])]),e.tableRelationObj.filterCondition.length>0?(l(),g(P,{key:0,placement:"topLeft",title:"确定删除吗？",onConfirm:e.deleteAllCond},{default:a(()=>[ye]),_:1},8,["onConfirm"])):F("",!0)]),i("ul",he,[(l(!0),s(c,null,f(e.tableRelationObj.filterCondition,(t,B)=>(l(),s("li",{class:"marginTop20",key:B},[i("div",ke,k(t.form.label),1),i("div",Fe,[i("span",Oe,[p(S,{overlayClassName:"view-pop-field-select",trigger:"click"},{content:a(()=>[i("div",be,[(l(!0),s(c,null,f(e.filterColumnList,(n,y)=>(l(),g($,{key:y,ghost:""},{expandIcon:a(()=>[p(O)]),default:a(()=>[(l(),g(I,{key:y,header:n.label},{default:a(()=>[(l(!0),s(c,null,f(n.fieldOptions,(m,D)=>(l(),s(c,{key:D},[e.isFilterItem(m)?(l(),s("div",{key:0,class:"field-item",onClick:q=>e.onSelectField(m,n)},[i("div",null,[p(v,{type:m.type},null,8,["type"]),h(" "+k(m.title),1)])],8,we)):F("",!0)],64))),128)),Be,(l(!0),s(c,null,f(e.systemFields,(m,D)=>(l(),s(c,{key:D},[e.isFilterItem(m)?(l(),s("div",{key:0,class:"field-item",onClick:q=>e.onSelectField(m,n)},[i("div",null,[p(v,{type:m.type},null,8,["type"]),h(k(m.name),1)])],8,Ie)):F("",!0)],64))),128))]),_:2},1032,["header"]))]),_:2},1024))),128))])]),title:a(()=>[p(b,{placeholder:"搜索字段",class:"my-input",value:e.filterValue,"onUpdate:value":o[3]||(o[3]=n=>e.filterValue=n)},{prefix:a(()=>[p(A,{style:{color:"#c0c0c0"}})]),_:1},8,["value"])]),default:a(()=>[i("span",null,[p(b,{style:{"min-width":"70%"},readOnly:"",value:t.title,"onUpdate:value":n=>t.title=n},null,8,["value","onUpdate:value"])])]),_:2},1024)]),i("span",$e,[p(_,{style:{"min-width":"70px"},bordered:!1,value:t.rule,"onUpdate:value":n=>t.rule=n,dropdownStyle:{minWidth:"120px"},onChange:n=>e.onConditionRuleChange(t)},{default:a(()=>[(l(!0),s(c,null,f(e.getOptions(t),n=>(l(),g(r,{value:n.value,key:n.value},{default:a(()=>[h(k(n.label),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value","onChange"])])]),i("div",Ae,[i("div",Se,[t.reloading?F("",!0):(l(),g(w,{key:0,columnList:t.form.fieldOptions,condition:t},null,8,["columnList","condition"]))]),i("div",{style:{"margin-left":"10px"},class:"pointer",onClick:n=>e.deleteOneCond(B)},[p(C)],8,Ve)])]))),128))])])}const Pt=de(ce,[["render",Pe],["__scopeId","data-v-2890b8d9"]]);export{Pt as default};

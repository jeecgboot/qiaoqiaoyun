var C=(e,u,l)=>new Promise((h,r)=>{var v=d=>{try{n(l.next(d))}catch(A){r(A)}},s=d=>{try{n(l.throw(d))}catch(A){r(A)}},n=d=>d.done?h(d.value):Promise.resolve(d.value).then(v,s);n((l=l.apply(e,u)).next())});import{d as L,f as m,w as x,a3 as D,a4 as H,a5 as f,V as S,a6 as B,a7 as K,ae as w,k as b}from"./vue-vendor-24c7dc61.js";import X from"./RoleCheckBox-ff98d496.js";import{j}from"./application.api-4e2bde90.js";import{a5 as k,l as q}from"./index-831af9dd.js";import{b as N}from"./useRoleAuth-039fb12a.js";import"./antd-vue-vendor-0d72f01e.js";import"./vxe-table-vendor-8813019a.js";const T="data:image/png;base64,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",V=L({name:"AuthOperation",components:{RoleCheckBox:X},props:{code:{type:String,default:""},operationAuthList:{type:Array,default:()=>[]}},emits:["data-change"],setup(e,{emit:u}){const l=m([]),h=m([]),r=m([]),v=m(""),s=m(""),n=m("");function d(){return C(this,null,function*(){yield P();let t=[];for(let p of l.value)t.push(p.value);let a=[];for(let p of h.value)a.push(p.value);let i=[];for(let p of r.value)i.push(p.value);v.value=t.join(","),s.value=a.join(","),n.value=i.join(",")})}function A(t){let a=[],i=[],p=[];for(let o of t)o.opStatus==1&&(o.opType=="table"?a.push(o.opKey):o.opType=="record"?i.push(o.opKey):o.opType=="button"&&p.push(o.opKey));v.value=a.join(","),s.value=i.join(","),n.value=p.join(",")}x(()=>e.operationAuthList,t=>C(this,null,function*(){yield d(),t&&t.length>0&&A(t)}),{immediate:!0,deep:!0});function P(){return C(this,null,function*(){if(l.value.length==0){const t=yield k("superAuthOptTable");for(let a of t)if(a.value=="batch_table"){a.iconText="批量操作是指工作表的批量勾选记录功能，开启后用户可以批量执行拥有权限的操作。";break}l.value=t.filter(a=>!["share_table","comment_table","log_table"].includes(a.value))}if(h.value.length==0){const t=yield k("superAuthOptRecord");h.value=t}if(r.value.length==0&&e.code){const t=yield j(e.code);let a=[];if(t&&t.length>0)for(let i of t)a.push({label:i.label,value:i.id});r.value=a}})}function y(){let t=[],a=v.value;for(let o of l.value){let c={designFormCode:e.code,opKey:o.value,opType:"table",opStatus:0};a.indexOf(o.value)>=0&&(c.opStatus=1),t.push(c)}let i=s.value;for(let o of h.value){let c={designFormCode:e.code,opKey:o.value,opType:"record",opStatus:0};i.indexOf(o.value)>=0&&(c.opStatus=1),t.push(c)}let p=n.value;for(let o of r.value){let c={designFormCode:e.code,opKey:o.value,opType:"button",opStatus:0};p.indexOf(o.value)>=0&&(c.opStatus=1),t.push(c)}return t}function F(){let t=y();u("data-change",t)}const{maxHeight:O}=N();return{AuthOperationImage:T,onDataChange:F,tableOptions:l,recordOptions:h,buttonOptions:r,tableCheckedList:v,recordCheckedList:s,buttonCheckedList:n,maxHeight:O}}});const g=e=>(D("data-v-7d6b157d"),e=e(),H(),e),Z={class:"auth-operation-title"},G=["src"],E=g(()=>f("span",null,"可执行哪些操作？",-1)),W={class:"auth-operation-item"},J=g(()=>f("div",{class:"line"},null,-1)),z={class:"auth-operation-item"},M=g(()=>f("div",{class:"line"},null,-1)),Q={class:"auth-operation-item"};function R(e,u,l,h,r,v){const s=S("RoleCheckBox");return B(),K("div",{style:w({height:e.maxHeight+"px","overflow-y":"auto"})},[f("div",Z,[f("img",{src:e.AuthOperationImage},null,8,G),E]),f("div",W,[b(s,{value:e.tableCheckedList,"onUpdate:value":u[0]||(u[0]=n=>e.tableCheckedList=n),options:e.tableOptions,title:"工作表",onChange:e.onDataChange},null,8,["value","options","onChange"])]),J,f("div",z,[b(s,{value:e.recordCheckedList,"onUpdate:value":u[1]||(u[1]=n=>e.recordCheckedList=n),options:e.recordOptions,title:"记录",onChange:e.onDataChange},null,8,["value","options","onChange"])]),M,f("div",Q,[b(s,{value:e.buttonCheckedList,"onUpdate:value":u[2]||(u[2]=n=>e.buttonCheckedList=n),options:e.buttonOptions,title:"自定义动作",onChange:e.onDataChange},null,8,["value","options","onChange"])])],4)}const ae=q(V,[["render",R],["__scopeId","data-v-7d6b157d"]]);export{ae as default};

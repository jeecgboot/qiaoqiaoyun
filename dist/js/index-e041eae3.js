var b=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var C=(t,u)=>{var r={};for(var s in t)z.call(t,s)&&u.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&b)for(var s of b(t))u.indexOf(s)<0&&U.call(t,s)&&(r[s]=t[s]);return r};var y=(t,u,r)=>new Promise((s,c)=>{var m=o=>{try{i(r.next(o))}catch(a){c(a)}},n=o=>{try{i(r.throw(o))}catch(a){c(a)}},i=o=>o.done?s(o.value):Promise.resolve(o.value).then(m,n);i((r=r.apply(t,u)).next())});import{f as B,e as p,w as D,d as G,u as e,k as d,F as W,ag as L}from"./vue-vendor-24c7dc61.js";import{B as Z}from"./index-158ad271.js";import j from"./SimpleMenu-fbc2f100.js";import J from"./AppLogo-063b26cf.js";import{c2 as V,H as I,bM as M,bZ as X,bJ as q,bG as K,h as Q,as as Y,bN as ee,bn as te,bR as ne,aZ as oe,S as se}from"./index-831af9dd.js";import{R as v,L as ie}from"./index-a964241b.js";import{u as ae}from"./index-5f7e4a11.js";import"./antd-vue-vendor-0d72f01e.js";import"./useOpenKeys-0758de45.js";import"./SubMenuItem-cfcb4516.js";import"./SimpleSubMenu-ff390f8a.js";import"./LowAppIcon-e49e90b9.js";import"./vxe-table-vendor-8813019a.js";import"./lowAppStore-499fb8f9.js";import"./low.app.api-97fc250a.js";function le(){const{lowStore:t}=ae(),u=B([]),r=p(()=>{let n=`${v}/${t.appId}`;return[{type:"divider"},{name:"应用配置",icon:"ant-design:setting",path:`/${n}/system`,showSetting:!1,children:[{name:"表单设计",path:`/${n}/list/desform`,showSetting:!1},{name:"流程设计",path:`/${n}/list/desflow`,showSetting:!1},{name:"仪表盘",path:`/${n}/list/drag`,showSetting:!1}]},{name:"Online开发",icon:"ant-design:setting",path:`/${n}/online`,showSetting:!1,children:[{name:"Online表单",path:`/${n}/list/cgform`,showSetting:!1},{name:"Online报表",path:`/${n}/list/cgreport`,showSetting:!1},{name:"Online图表",path:`/${n}/list/graphreport`,showSetting:!1}]},{name:"回收站",path:`/${n}/menu/recycleBin`,icon:"ant-design:delete",showSetting:!1}]}),s=p(()=>{let n=`${v}/${t.appId}`;return[{name:"我的待办",icon:"ant-design:bell",path:`/${n}/task/myTodo`,showSetting:!1},{name:"我发起的",icon:"ant-design:play-circle",path:`/${n}/task/myApply`,showSetting:!1},{name:"抄送我的",icon:"carbon:send-alt",path:`/${n}/task/myCCopy`,showSetting:!1},{type:"divider"}]});D(()=>[t.getDevMode,t.appMenus],c,{immediate:!0});function c(){return y(this,null,function*(){let n=t.appMenus,i=[];i=i.concat(s.value),m(n,i),t.getDevMode&&(i=i.concat(r.value)),u.value=i})}function m(n,i){if(n&&n.length>0)for(let o of n){let a={name:o.menuName,path:o.routerLink,icon:o.iconType,showSetting:!0,model:o};o.type===ie.GROUP.type?(a.path=V(6),a.children=[],a.icon="ant-design:folder",a.openIcon="ant-design:folder-open",m(o.children,a.children)):a.icon="ant-design:file-text",i.push(a)}}return{menusRef:u}}const Ce=G({name:"LayoutMenu",props:{theme:I.oneOf(["light","dark"]),splitType:{type:Number,default:M.NONE},isHorizontal:I.bool,menuMode:{type:[String],default:""}},setup(t){const u=X(),{getMenuMode:r,getMenuType:s,getMenuTheme:c,getCollapsed:m,getCollapsedShowTitle:n,getIsHorizontal:i,getIsSidebarType:o,getSplit:a}=q(),{getShowLogo:k}=K(),{prefixCls:w}=Q("layout-menu"),{menusRef:N}=le(),{getIsMobile:f}=Y(),_=p(()=>e(f)?ee.INLINE:t.menuMode||e(r)),h=p(()=>t.theme||e(c)),S=p(()=>e(k)&&e(o)),x=p(()=>!e(i)&&(e(o)||t.splitType===M.LEFT||t.splitType===M.NONE)),O=p(()=>({height:`calc(100% - ${e(S)?"48px":"0px"})`})),E=p(()=>[`${w}-logo`,e(h),{[`${w}--mobile`]:e(f)}]),R=p(()=>{const l=e(N);return{menus:l,beforeClickFn:F,items:l,theme:e(h),accordion:!1,collapse:e(m),collapsedShowTitle:e(n),onMenuClick:A}}),H=te();function A(l,g){g&&H.setPathTitle(l,g.title||""),u(l)}function F(l){return y(this,null,function*(){return ne(l)?(oe(l),!1):!0})}function P(){return!e(S)&&!e(f)?null:d(J,{showTitle:!e(m),class:e(E),theme:e(h)},null)}function $(){const T=e(R),{menus:l}=T,g=C(T,["menus"]);return!l||!l.length?null:t.isHorizontal?d(Z,L(g,{isHorizontal:t.isHorizontal,type:e(s),showLogo:e(S),mode:e(_),items:l}),null):d(j,L(g,{isSplitMenu:e(a),items:l}),null)}return()=>d(W,null,[P(),e(x)?d(se,{style:e(O)},{default:()=>$()}):$()])}});export{Ce as default};

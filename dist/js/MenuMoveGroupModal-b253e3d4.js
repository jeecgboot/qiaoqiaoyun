var N=Object.defineProperty,R=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var h=(e,t,o)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,d=(e,t)=>{for(var o in t||(t={}))b.call(t,o)&&h(e,o,t[o]);if(y)for(var o of y(t))q.call(t,o)&&h(e,o,t[o]);return e},P=(e,t)=>R(e,V(t));var w=(e,t,o)=>new Promise((p,l)=>{var u=n=>{try{a(o.next(n))}catch(i){l(i)}},r=n=>{try{a(o.throw(n))}catch(i){l(i)}},a=n=>n.done?p(n.value):Promise.resolve(n.value).then(u,r);a((o=o.apply(e,t)).next())});import{d as x,f,e as B,u as k,a5 as E,V as m,a6 as D,af as O,ap as T,aq as j,ai as _,k as g}from"./vue-vendor-24c7dc61.js";import{B as z}from"./index-1c3affea.js";import{q as F,j as U,a as H,l as J}from"./index-831af9dd.js";import{L as Q}from"./index-a964241b.js";import{u as W}from"./index-5f7e4a11.js";import{m as X}from"./low.app.api-97fc250a.js";import"./BasicModal-58413bab.js";import"./antd-vue-vendor-0d72f01e.js";import"./useWindowSizeFn-8f085f6f.js";import"./vxe-table-vendor-8813019a.js";import"./lowAppStore-499fb8f9.js";const Y=x({name:"MenuMoveGroupModal",components:{BasicModal:z},emits:["register","success"],setup(e,{emit:t}){const o=F(),{createMessage:p}=H(),{appId:l,lowStore:u}=W(),r=f(!1),a=f(),n=f([]),[i,{closeModal:L,setModalProps:S}]=U($),A=B(()=>{let s={width:400,title:"移动到…",confirmLoading:k(r)};return P(d(d(d({},k(o)),s),e),{onOk:I,onCancel:M,onRegister:i})}),C=B(()=>{let s=[];return u.appMenus.forEach(c=>{c.type===Q.GROUP.type&&s.push({key:c.id,title:c.menuName,slots:{icon:"folder"}})}),[{title:"根目录",key:"root",children:s}]});function $(s){n.value=[],a.value=s==null?void 0:s.menu}function M(){L()}function G(s){n.value=s}function I(){return w(this,null,function*(){var s;if(n.value.length===0){p.warning("请选择一个分组");return}v(!0);try{let c=n.value[0],K=c==="root"?"":c;yield X.moveToGroup((s=a.value)==null?void 0:s.id,l.value,K),M(),t("success")}finally{v(!1)}})}function v(s){r.value=s,S({confirmLoading:s})}return{getProps:A,loading:r,treeData:C,selectedKeys:n,onSelect:G}}}),Z=E("div",null,"请选择目标分组",-1),ee={style:{border:"1px solid #dcdcdc","margin-top":"8px"}};function oe(e,t,o,p,l,u){const r=m("a-icon"),a=m("a-tree"),n=m("a-spin"),i=m("BasicModal");return D(),O(i,T(j(e.getProps)),{default:_(()=>[g(n,{spinning:e.loading},{default:_(()=>[Z,E("div",ee,[g(a,{"show-icon":"",defaultExpandAll:"",selectedKeys:e.selectedKeys,"tree-data":e.treeData,onSelect:e.onSelect},{folder:_(()=>[g(r,{type:"folder"})]),_:1},8,["selectedKeys","tree-data","onSelect"])])]),_:1},8,["spinning"])]),_:1},16)}const fe=J(Y,[["render",oe]]);export{fe as default};

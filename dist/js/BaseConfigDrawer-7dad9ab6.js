var Z=Object.defineProperty;var N=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var V=(r,o,t)=>o in r?Z(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,T=(r,o)=>{for(var t in o||(o={}))H.call(o,t)&&V(r,t,o[t]);if(N)for(var t of N(o))P.call(o,t)&&V(r,t,o[t]);return r};var k=(r,o,t)=>new Promise((i,v)=>{var C=m=>{try{s(t.next(m))}catch(d){v(d)}},u=m=>{try{s(t.throw(m))}catch(d){v(d)}},s=m=>m.done?i(m.value):Promise.resolve(m.value).then(C,u);s((t=t.apply(r,o)).next())});import{B as M,a as Q}from"./index-44229d9b.js";import{f as _,r as X,w as E,a5 as l,V as a,a6 as f,af as p,ai as j,k as c,ae as W,a8 as y,E as x,W as g}from"./vue-vendor-24c7dc61.js";import{aZ as U,cn as q,b9 as G,av as J,cr as A,n as Y,bH as $,cs as ii,bZ as ei}from"./antd-vue-vendor-0d72f01e.js";import"./vuedraggable-vendor-6ef4bc68.js";import oi from"./Biaogeshezhi-292df70e.js";import{B as ti,S as ni,P as li,X as si,K as ai,a as ri,Z as mi}from"./Zdyan-401b7a2f.js";import ci from"./Paixu-7611295e.js";import di from"./Xianshiziduan-dc82edb5.js";import fi from"./Kuaisushaixuan-9e69d26c.js";import pi from"./Shaixuanliebiao-3594ac3b.js";import ui from"./Zidingyianniu-9bb48ba8.js";import{l as gi,k as vi}from"./index-831af9dd.js";import{a as _i}from"./useViewTabs-276e2e92.js";import{u as yi}from"./useWatchDesigner-b7c458e6.js";import xi from"./MultipleQueryGroupFilter-7cdf28cf.js";import"./vxe-table-vendor-8813019a.js";import"./ComponentIcon-f1bbb90f.js";import"./type.definition-4eb605ee.js";import"./KsShaixuanDrawer-b9f976a2.js";import"./useFieldSelect-1dde1da7.js";import"./LinkRecordSelect-385d0eae.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./SelectItem-04dd2229.js";import"./lowAppUtils-56892d30.js";import"./auto.desform.api-839115ed.js";import"./desformUtils-c7daaa89.js";import"./LinkRecordTags-cf4c2463.js";import"./FormSchemaFactory-ec827fa7.js";import"./index-bff0b654.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./lowAppAuth-3d637b7d.js";import"./useFuncSwitch-b7681246.js";import"./DictColors-73058d23.js";import"./TableImage-14ca1f5d.js";import"./SubTableTag-81763fd6.js";import"./CardCellFile-92b3c8c8.js";import"./ZdyanDrawer-58ee121b.js";import"./ButtonColorSelector-58fbd93b.js";import"./ButtonConditions-9a9a88d5.js";import"./useCustomButton-fa741dda.js";import"./FilterFiledListNew-bbda127c.js";import"./SuperQueryValComponent-97f284a9.js";import"./helper-22dafba0.js";import"./ButtonConfirmText-527dd2f0.js";import"./FilterFiledList-8a929f88.js";import"./ButtonFormConfig-7880f3ed.js";import"./FormFieldSelect-9cf3f019.js";const Ci={name:"BaseConfigDrawer",components:{TableOutlined:U,FilterOutlined:q,EyeOutlined:G,CloseOutlined:J,OrderedListOutlined:A,SearchOutlined:Y,AppstoreOutlined:$,ControlOutlined:ii,OrderedListOutlined:A,BasicDrawer:M,MultipleQueryFilter:xi,Biaogeshezhi:oi,Xianshiziduan:di,Paixu:ci,Kuaisushaixuan:fi,Shaixuanliebiao:pi,ApiOutlined:ei,Zidingyianniu:ui},emits:["reload","register"],props:{dbConfig:{type:Object,default:()=>{}},isLowApp:{type:Boolean,default:!1}},setup(r,{emit:o}){const t=_(""),i=_(""),v=_(""),C=_(""),u=_([]),s=X({bgsz:"",sjgl:"",px:"",xszd:"",kssx:"",sxlb:"",zdyan:""}),[m,{closeDrawer:d,getVisible:b}]=Q(e=>{C.value=e.myTitle,u.value=e.columnList,t.value=e.id});yi({closeDrawer:d,getVisible:b}),E(()=>r.dbConfig,e=>{e&&e.id&&(z(e),i.value=e.desform_code,v.value=e.desformName,e.designFormTitleField&&s.zdyan&&s.zdyan.setFormTitleField(e.designFormTitleField))},{deep:!0});function z(e){s.bgsz=new ti(e),s.sjgl=new ni(e),s.px=new li(e),s.xszd=new si(e),s.kssx=new ai(e),s.sxlb=new ri(e),s.zdyan=new mi(e)}const{myHeight:L,getDrawerClass:F}=_i(r),w=_("bgsz");function B(e){e.preventDefault(),e.stopPropagation();let n=e.target.getAttribute("i-flag");n&&(w.value=n)}function D(e){return k(this,null,function*(){let n=T({id:t.value},e);yield h(n,!0)})}function S(e){return k(this,null,function*(){let n=T({id:t.value},e);yield h(n,!0)})}function h(e,n){return k(this,null,function*(){const O="/desform/view/updateViewConfig";vi.put({url:O,params:e},{isTransformResponse:!1}).then(R=>{R.success&&(n===!0?o("reload",t.value,e):o("reload"))})})}function I(){o("reload")}function K(e){let n=e.target.value,O={id:t.value,name:n};h(O)}return{register:m,myHeight:L,title:C,activeKey:w,handleClickItem:B,columnList:u,saveFilterData:D,closeDrawer:d,onChangeTitle:K,saveBase:S,config:s,designFormCode:i,ID:t,refreshView:I,getDrawerClass:F,designFormName:v}}},hi={class:"drawer-title-input"},wi={class:"title-close-icon",title:"关闭"},ki={class:"left-list"},bi={class:"between-padding bottom-border"},zi={class:"between-padding bottom-border top-padding"},Li=l("p",null,"数据设置",-1),Fi={class:"between-padding bottom-border top-padding"},Bi=l("p",null,"用户操作",-1),Di={style:{width:"100%",flex:"1",position:"relative","overflow-y":"auto"}};function Si(r,o,t,i,v,C){const u=a("TableOutlined"),s=a("a-input"),m=a("CloseOutlined"),d=a("filter-outlined"),b=a("ordered-list-outlined"),z=a("eye-outlined"),L=a("search-outlined"),F=a("control-outlined"),w=a("Biaogeshezhi"),B=a("MultipleQueryFilter"),D=a("paixu"),S=a("xianshiziduan"),h=a("kuaisushaixuan"),I=a("shaixuanliebiao"),K=a("zidingyianniu"),e=a("BasicDrawer");return f(),p(e,{mask:!1,push:!1,closable:!1,rootClassName:i.getDrawerClass(),onRegister:i.register,width:640,headerStyle:{padding:"10px 20px"}},{title:j(()=>[l("span",null,[c(u,{style:{color:"#ffa515","font-size":"16px"}})]),l("span",hi,[c(s,{value:i.title,"onUpdate:value":o[0]||(o[0]=n=>i.title=n),onBlur:i.onChangeTitle},null,8,["value","onBlur"])]),l("span",wi,[c(m,{onClick:i.closeDrawer},null,8,["onClick"])])]),default:j(()=>[l("div",{class:"view-config-container",style:W({height:i.myHeight+"px"})},[l("div",ki,[l("div",bi,[l("div",{"i-flag":"bgsz",onClick:o[1]||(o[1]=(...n)=>i.handleClickItem&&i.handleClickItem(...n)),class:y(i.activeKey=="bgsz"?"item-active left-list-item":"left-list-item")},[c(u),x(" 表格设置 ")],2)]),l("div",zi,[Li,l("div",{"i-flag":"sjgl",onClick:o[2]||(o[2]=(...n)=>i.handleClickItem&&i.handleClickItem(...n)),class:y(i.activeKey=="sjgl"?"item-active left-list-item":"left-list-item")},[c(d),x(" 数据过滤 ")],2),l("div",{"i-flag":"px",onClick:o[3]||(o[3]=(...n)=>i.handleClickItem&&i.handleClickItem(...n)),class:y(i.activeKey=="px"?"item-active left-list-item":"left-list-item")},[c(b),x(" 排序 ")],2),l("div",{"i-flag":"xszd",onClick:o[4]||(o[4]=(...n)=>i.handleClickItem&&i.handleClickItem(...n)),class:y(i.activeKey=="xszd"?"item-active left-list-item":"left-list-item")},[c(z),x("显示字段 ")],2)]),l("div",Fi,[Bi,l("div",{"i-flag":"kssx",onClick:o[5]||(o[5]=(...n)=>i.handleClickItem&&i.handleClickItem(...n)),class:y(i.activeKey=="kssx"?"item-active left-list-item":"left-list-item")},[c(L),x(" 快速筛选 ")],2),l("div",{"i-flag":"sxlb",onClick:o[6]||(o[6]=(...n)=>i.handleClickItem&&i.handleClickItem(...n)),class:y(i.activeKey=="sxlb"?"item-active left-list-item":"left-list-item")},[c(F),x(" 筛选列表 ")],2)])]),l("div",Di,[i.activeKey=="bgsz"?(f(),p(w,{key:0,columnList:i.columnList,info:i.config.bgsz,onSave:i.saveBase},null,8,["columnList","info","onSave"])):g("",!0),i.activeKey=="sjgl"?(f(),p(B,{key:1,desformCode:i.designFormCode,columnList:i.columnList,info:i.config.sjgl,onSave:i.saveFilterData},null,8,["desformCode","columnList","info","onSave"])):g("",!0),i.activeKey=="px"?(f(),p(D,{key:2,columnList:i.columnList,info:i.config.px,onSave:i.saveFilterData},null,8,["columnList","info","onSave"])):g("",!0),i.activeKey=="xszd"?(f(),p(S,{key:3,columnList:i.columnList,info:i.config.xszd,onSave:i.saveBase},null,8,["columnList","info","onSave"])):g("",!0),i.activeKey=="kssx"?(f(),p(h,{key:4,columnList:i.columnList,info:i.config.kssx,onSave:i.saveFilterData},null,8,["columnList","info","onSave"])):g("",!0),i.activeKey=="sxlb"?(f(),p(I,{key:5,columnList:i.columnList,info:i.config.sxlb,onSave:i.saveFilterData},null,8,["columnList","info","onSave"])):g("",!0),i.activeKey=="zdyan"?(f(),p(K,{key:6,isLowApp:t.isLowApp,info:i.config.zdyan,onRefresh:i.refreshView,viewId:i.ID,designFormName:i.designFormName,code:i.designFormCode},null,8,["isLowApp","info","onRefresh","viewId","designFormName","code"])):g("",!0)])],4)]),_:1},8,["rootClassName","onRegister"])}const Ye=gi(Ci,[["render",Si]]);export{Ye as default};

var H=Object.defineProperty,O=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var N=(e,a,o)=>a in e?H(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,R=(e,a)=>{for(var o in a||(a={}))U.call(a,o)&&N(e,o,a[o]);if(M)for(var o of M(a))Q.call(a,o)&&N(e,o,a[o]);return e},V=(e,a)=>O(e,j(a));var q=(e,a,o)=>new Promise((C,u)=>{var d=i=>{try{h(o.next(i))}catch(f){u(f)}},n=i=>{try{h(o.throw(i))}catch(f){u(f)}},h=i=>i.done?C(i.value):Promise.resolve(i.value).then(d,n);h((o=o.apply(e,a)).next())});import{d as W,a2 as G,f as L,r as J,B as K,o as X,H as Y,u as k,a3 as Z,a4 as ee,a5 as t,V as r,a6 as l,af as w,a8 as E,ai as m,k as y,a7 as _,F as b,am as B,ak as g,ae as te,W as $,E as se}from"./vue-vendor-24c7dc61.js";import{R as ae,h as oe,cs as ne,L as le,a5 as F,l as ie}from"./index-831af9dd.js";import{c8 as ce}from"./antd-vue-vendor-0d72f01e.js";import{l as re}from"./market.api-af34a608.js";import"./vxe-table-vendor-8813019a.js";const ue=W({name:"MarketList",components:{Icon:ae,CloudUploadOutlined:ce},setup(){const{prefixCls:e}=oe("low-myapps-layout"),a=G(),o=L(!1),C=L(!0),u=L({current:1,pageSize:6,total:0}),d=L({keyword:"",category:"all",industry:"all"}),n=J({categoryList:[{label:"全部分类",value:"all"}],industryList:[{label:"全部行业",value:"all"}],tagList:[],recommendList:[]});function h(){a.push("/myapps/index")}function i(c){a.push({path:"/myapps/templateDetail",query:{id:c.id}})}function f(){a.push({path:"/myapps/templateManage"})}function P(){let c={keyword:k(d).keyword,category:k(d).category!=="all"?k(d).category:"",industry:k(d).industry!=="all"?k(d).industry:"",status:2,delFlag:0,izPublish:1,pageNo:u.value.current,pageSize:u.value.pageSize,column:"createTime",order:"desc"};return le(c)}function v(c){return q(this,null,function*(){c===1&&(u.value.current=1),o.value=!0;let s=P(),p=yield re(s);o.value=!1,p.records&&(n.recommendList=n.recommendList.concat(p.records),u.value.total=p.total,(n.recommendList.length==p.total||p.records.length<6)&&(C.value=!1))})}function D(){u.value.current+=1,v(0)}function z(){return q(this,null,function*(){let c=yield F("template_category"),s=yield F("template_industry"),p=yield F("template_tag");n.categoryList=n.categoryList.concat(c),n.industryList=n.industryList.concat(s),n.tagList=p})}function A(c){return n.tagList.length>0?k(n.tagList).filter(s=>s.value===c)[0].text:""}function T(){n.recommendList=[],v(1)}return K(()=>{z()}),X(()=>{v(1)}),V(R({lowAppLayout:e,goHomeClick:h,toDetail:i,myPublish:f},Y(n)),{queryParams:d,loading:o,nextPage:D,showMoreBtn:C,onSearch:T,getTagLabel:A})},methods:{getRandomColor:ne}});const S=e=>(Z("data-v-47e36f1e"),e=e(),ee(),e),de={style:{width:"100%",display:"flex","align-items":"center"}},pe=S(()=>t("div",{class:"home_title"},[t("span",{style:{"font-size":"16px","font-weight":"normal"}}," 模版市场 ")],-1)),_e={class:"market-container"},me={class:"header_area flexCenter"},ye=S(()=>t("div",{class:"title paddingTop30"},"模版中心",-1)),ge={class:"search flexCenter"},he={class:"flexCenter"},fe=S(()=>t("span",null,"我的发布",-1)),ve={class:"classification-container"},ke={class:"classification-list"},Ce=["onClick"],Le={class:"title"},we={class:"classification-list"},be=["onClick"],Be={class:"title"},Se={class:"template-list-container"},Pe=S(()=>t("div",{class:"segmentation"},[t("div",{class:"verticalBar"}),t("div",{class:"title"},"为你推荐")],-1)),De=["onClick"],ze={class:"template-cover"},Ae=["src","alt"],Te={class:"template-info"},qe={class:"title",style:{display:"flex"}},Ee=["title"],Fe={key:0,class:"tag",style:{"margin-left":"10px"}},xe={class:"text"},Ie={class:"desc"},Me={class:"desc_intro"},Ne={class:"desc_widget"},Re={class:"desc_classification"},Ve={class:"classification-item flexCenter"},$e={class:"title"},He={class:"classification-item flexCenter"},Oe={class:"title"},je={class:"num-item"},Ue={key:0,class:"flexCenter more-btn"};function Qe(e,a,o,C,u,d){const n=r("Icon"),h=r("a-tooltip"),i=r("a-layout-header"),f=r("a-input-search"),P=r("cloud-upload-outlined"),v=r("a-button"),D=r("a-col"),z=r("a-row"),A=r("a-empty"),T=r("a-spin"),c=r("a-layout");return l(),w(c,{class:E(e.lowAppLayout),style:{height:"100%"},theme:"light"},{default:m(()=>[y(i,{class:"app-index-header",theme:"light",style:{padding:"0 0 0 16px",background:"#ffffff"}},{default:m(()=>[t("div",de,[y(h,{title:"主页"},{default:m(()=>[t("div",{class:"home_icon",onClick:a[0]||(a[0]=(...s)=>e.goHomeClick&&e.goHomeClick(...s))},[y(n,{icon:"ant-design:home-filled"})])]),_:1}),pe])]),_:1}),y(T,{tip:"Loading...",spinning:e.loading,size:"large"},{default:m(()=>[t("div",_e,[t("div",me,[ye,t("div",ge,[y(f,{value:e.queryParams.keyword,"onUpdate:value":a[1]||(a[1]=s=>e.queryParams.keyword=s),onSearch:e.onSearch,placeholder:"请输入关键词搜索...","enter-button":"搜模版",size:"large"},null,8,["value","onSearch"]),y(v,{type:"primary",size:"large",style:{"margin-left":"20px"},onClick:e.myPublish},{default:m(()=>[t("span",he,[y(P,{style:{"margin-right":"10px"}}),fe])]),_:1},8,["onClick"])])]),t("div",ve,[t("ul",ke,[(l(!0),_(b,null,B(e.categoryList,s=>(l(),_("li",{class:E(["classification-item flexCenter",[{active:s.value==e.queryParams.category}]]),key:s.value,onClick:()=>{e.queryParams.category=s.value,e.onSearch()}},[t("span",Le,g(s.label),1)],10,Ce))),128))]),t("ul",we,[(l(!0),_(b,null,B(e.industryList,s=>(l(),_("li",{class:E(["classification-item flexCenter",[{active:s.value==e.queryParams.industry}]]),key:s.value,onClick:()=>{e.queryParams.industry=s.value,e.onSearch()}},[t("span",Be,g(s.label),1)],10,be))),128))])]),t("div",Se,[Pe,e.recommendList&&e.recommendList.length>0?(l(),w(z,{key:0,gutter:{xs:8,sm:16,md:24,lg:32}},{default:m(()=>[(l(!0),_(b,null,B(e.recommendList,(s,p)=>(l(),w(D,{span:8,key:p},{default:m(()=>[t("div",{class:"template-item",onClick:x=>e.toDetail(s)},[t("div",ze,[t("img",{src:s.coverUrl,alt:s.title},null,8,Ae)]),t("div",Te,[t("div",qe,[t("a",{class:"link-darker",href:"javascript:void(0)",title:s.title},g(s.title),9,Ee),s.tag&&s.tag.length>0?(l(),_("div",Fe,[(l(!0),_(b,null,B(s.tag.split(","),(x,I)=>(l(),_("span",{class:"tag-widget",style:te({background:e.getRandomColor(I)}),key:I},[t("span",xe,g(e.getTagLabel(x)),1)],4))),128))])):$("",!0)]),t("div",Ie,[t("div",Me,g(s.subTitle),1),t("div",Ne,[t("ul",Re,[t("li",Ve,[t("span",$e,g(s.category_dictText),1)]),t("li",He,[t("span",Oe,g(s.industry_dictText),1)])]),t("div",je,g(s.downloadNum)+"次安装 ",1)])])])],8,De)]),_:2},1024))),128))]),_:1})):(l(),w(A,{key:1,style:{padding:"100px 0"}}))]),e.showMoreBtn?(l(),_("div",Ue,[y(v,{type:"primary",onClick:e.nextPage},{default:m(()=>[se(" 发现更多 ")]),_:1},8,["onClick"])])):$("",!0)])]),_:1},8,["spinning"])]),_:1},8,["class"])}const Ze=ie(ue,[["render",Qe],["__scopeId","data-v-47e36f1e"]]);export{Ze as default};

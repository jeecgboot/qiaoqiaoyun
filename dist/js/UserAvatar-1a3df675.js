var m=(t,r,s)=>new Promise((n,i)=>{var f=a=>{try{e(s.next(a))}catch(c){i(c)}},o=a=>{try{e(s.throw(a))}catch(c){i(c)}},e=a=>a.done?n(a.value):Promise.resolve(a.value).then(f,o);e((s=s.apply(t,r)).next())});import{d as A,f as h,h as b,a3 as F,a4 as M,V as g,a6 as u,a7 as w,k as E,ai as v,a5 as l,af as _,E as x,ak as d}from"./vue-vendor-24c7dc61.js";import{ap as k,k as U,l as I}from"./index-831af9dd.js";const S=A({name:"UserAvatar",props:{username:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(t){const r=h(""),s=h(""),n=h("");b(()=>m(this,null,function*(){r.value="",s.value="",n.value="";let e=t.username;e&&(yield i(e));let a=t.detail;a&&(a.avatar&&(r.value=k(a.avatar)),a.realname&&(s.value=a.realname),a.phone&&(n.value=a.phone))}));function i(e){return m(this,null,function*(){const a={username:e},c="/sys/user/getMultiUser",p=yield U.get({url:c,params:a},{isTransformResponse:!1});if(p&&p.length>0){let y=p[0].avatar;y&&(r.value=k(y)),s.value=p[0].realname,n.value=p[0].phone}})}function f(){let e=s.value;return e||(e=t.username),e?e.length>2?e.substr(0,2):e:""}function o(){return r.value="",!0}return{userAvatar:r,userLabel:s,getAvatarText:f,phone:n,loadError:o}}});const T={class:"user-avatar-info"},B={style:{display:"flex","flex-direction":"row","align-items":"center"}},V={style:{width:"60px","text-align":"center"}},$={style:{flex:"1",display:"flex","flex-direction":"column","margin-left":"12px"}},z={style:{color:"#000",display:"inline-block","font-size":"15px","font-weight":"700","margin-top":"3px","vertical-align":"top",width:"170px"}},C={style:{color:"#757575",display:"block","margin-top":"4px"}},L={style:{cursor:"pointer"}},N={class:"realname-ellipsis"};function H(t,r,s,n,i,f){const o=g("a-avatar"),e=g("a-popover");return u(),w("div",T,[E(e,{title:"",overlayStyle:{width:"250px"}},{content:v(()=>[l("div",B,[l("div",V,[t.userAvatar?(u(),_(o,{key:0,src:t.userAvatar,size:47},null,8,["src"])):(u(),_(o,{key:1,size:47},{default:v(()=>[x(d(t.getAvatarText()),1)]),_:1}))]),l("div",$,[l("div",z,d(t.userLabel),1),l("div",C,d(t.phone),1)])])]),default:v(()=>[l("span",L,[t.userAvatar?(u(),_(o,{key:0,src:t.userAvatar,loadError:t.loadError},null,8,["src","loadError"])):(u(),_(o,{key:1},{default:v(()=>[x(d(t.getAvatarText()),1)]),_:1}))])]),_:1}),l("span",N,d(t.userLabel),1)])}const R=I(S,[["render",H],["__scopeId","data-v-6b5cc6c7"]]);export{R as U};

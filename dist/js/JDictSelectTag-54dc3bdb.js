var W=Object.defineProperty;var P=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var R=(e,t,n)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t)=>{for(var n in t||(t={}))G.call(t,n)&&R(e,n,t[n]);if(P)for(var n of P(t))K.call(t,n)&&R(e,n,t[n]);return e};var V=(e,t,n)=>new Promise((y,C)=>{var b=s=>{try{c(n.next(s))}catch(p){C(p)}},_=s=>{try{c(n.throw(s))}catch(p){C(p)}},c=s=>s.done?y(s.value):Promise.resolve(s.value).then(b,_);c((n=n.apply(e,t)).next())});import{d as Q,f as A,u as L,e as X,h as Y,w as Z,n as E,a3 as pe,a4 as fe,V as h,a6 as u,af as g,ag as F,ai as v,a7 as k,F as D,am as $,a5 as J,a8 as U,ae as j,ak as B,E as z,k as x,W as q}from"./vue-vendor-24c7dc61.js";import{H as i,q as ee,a5 as ae,l as te}from"./index-831af9dd.js";import{ak as oe,o as le}from"./antd-vue-vendor-0d72f01e.js";import{u as ne}from"./useFormItem-86503382.js";var M=(e=>(e.Radio="radio",e.RadioButton="radioButton",e.Select="select",e.List="list",e.Switch="switch",e.SelTree="sel_tree",e.CatTree="cat_tree",e.SelSearch="search",e.SelUser="sel_user",e.Checkbox="checkbox",e.ListMulti="list_multi",e.Pca="pca",e.Popup="popup",e.SelDepart="sel_depart",e))(M||{});const se=Q({name:"JDictSelectTag",inheritAttrs:!1,components:{LoadingOutlined:oe},props:{value:i.oneOfType([i.string,i.number,i.array]),dictCode:i.string,type:i.string,placeholder:i.string,stringToNumber:i.bool,useDicColor:i.bool.def(!1),getPopupContainer:{type:Function,default:e=>e==null?void 0:e.parentNode},showChooseOption:i.bool.def(!0),options:{type:Array,default:[],required:!1},style:i.any},emits:["options-change","change","update:value"],setup(e,{emit:t,refs:n}){const y=A([]),C=ee(),[b,,,_]=ne(e,"value","change"),c=Object.assign({},L(e),L(C)),s=A(!1);let p=!0;const w=X(()=>!e.type||e.type==="list"?"select":e.type);Y(()=>{e.dictCode&&(s.value=p,p=!1,S().finally(()=>{s.value=p})),e.dictCode||(y.value=e.options)}),Z(()=>e.value,()=>{e.value===""&&(t("change",""),E(()=>_.onFieldChange()))});function S(){return V(this,null,function*(){let{dictCode:o,stringToNumber:d}=e;const l=yield ae(o);y.value=l.reduce((f,r)=>{if(r){const O=r.value;f.push(N({label:r.text||r.label,value:d?+O:O,color:r.color},le(r,["text","value","color"])))}return f},[])})}function m(o){var f,r,O,T;const{mode:d}=L(c);let l;d==="multiple"?(l=(r=(f=o==null?void 0:o.target)==null?void 0:f.value)!=null?r:o,(l==null||l==="")&&(l=[]),Array.isArray(l)&&(l=l.filter(I=>I!=null&&I!==""))):l=(T=(O=o==null?void 0:o.target)==null?void 0:O.value)!=null?T:o,b.value=l,t("update:value",l)}function a(o){var d,l,f,r;b.value=(l=(d=o==null?void 0:o.target)==null?void 0:d.value)!=null?l:o,t("update:value",(r=(f=o==null?void 0:o.target)==null?void 0:f.value)!=null?r:o)}function H(o,d){var l;return typeof d.children=="function"&&((l=d.children()[0])==null?void 0:l.children.toLowerCase().indexOf(o.toLowerCase()))>=0?!0:(d.value||"").toString().toLowerCase().indexOf(o.toLowerCase())>=0}return{state:b,compType:w,attrs:C,loadingEcho:s,getBindValue:c,dictOptions:y,CompTypeEnum:M,handleChange:m,handleChangeRadio:a,handleFilterOption:H}}});const re=["title"];function ue(e,t,n,y,C,b){const _=h("a-radio"),c=h("a-radio-group"),s=h("a-radio-button"),p=h("LoadingOutlined"),w=h("a-input"),S=h("a-select-option"),m=h("a-select");return e.compType===e.CompTypeEnum.Radio?(u(),g(c,F({key:0},e.attrs,{value:e.state,"onUpdate:value":t[0]||(t[0]=a=>e.state=a),onChange:e.handleChangeRadio}),{default:v(()=>[(u(!0),k(D,null,$(e.dictOptions,a=>(u(),g(_,{key:`${a.value}`,value:a.value},{default:v(()=>[J("span",{class:U([e.useDicColor&&a.color?"colorText":""]),style:j({backgroundColor:`${e.useDicColor&&a.color}`})},B(a.label),7)]),_:2},1032,["value"]))),128))]),_:1},16,["value","onChange"])):e.compType===e.CompTypeEnum.RadioButton?(u(),g(c,F({key:1},e.attrs,{value:e.state,"onUpdate:value":t[1]||(t[1]=a=>e.state=a),buttonStyle:"solid",onChange:e.handleChangeRadio}),{default:v(()=>[(u(!0),k(D,null,$(e.dictOptions,a=>(u(),g(s,{key:`${a.value}`,value:a.value},{default:v(()=>[z(B(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["value","onChange"])):e.compType===e.CompTypeEnum.Select?(u(),k(D,{key:2},[e.loadingEcho?(u(),g(w,{key:0,readOnly:"",placeholder:"加载中…"},{prefix:v(()=>[x(p)]),_:1})):(u(),g(m,F({key:1,placeholder:e.placeholder},e.attrs,{value:e.state,"onUpdate:value":t[2]||(t[2]=a=>e.state=a),filterOption:e.handleFilterOption,getPopupContainer:e.getPopupContainer,style:e.style,onChange:e.handleChange}),{default:v(()=>[e.showChooseOption?(u(),g(S,{key:0,value:null},{default:v(()=>[z("请选择…")]),_:1})):q("",!0),(u(!0),k(D,null,$(e.dictOptions,a=>(u(),g(S,{key:`${a.value}`,value:a.value},{default:v(()=>[J("span",{class:U([e.useDicColor&&a.color?"colorText":""]),style:j({backgroundColor:`${e.useDicColor&&a.color}`}),title:a.label},B(a.label),15,re)]),_:2},1032,["value"]))),128))]),_:1},16,["placeholder","value","filterOption","getPopupContainer","style","onChange"]))],64)):q("",!0)}const ie=te(se,[["render",ue],["__scopeId","data-v-a0d047e5"]]),ye=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));export{M as C,ie as J,ye as a};

var c=(d,t,n)=>new Promise((o,p)=>{var s=e=>{try{i(n.next(e))}catch(r){p(r)}},u=e=>{try{i(n.throw(e))}catch(r){p(r)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,u);i((n=n.apply(d,t)).next())});import{e as l,c as g,w as m,u as M}from"./vue-vendor-24c7dc61.js";import{r as f,a as w}from"./index-831af9dd.js";import{a as k}from"./lowAppStore-499fb8f9.js";import{m as y}from"./low.app.api-97fc250a.js";function A(){const d=l(()=>f.currentRoute.value.params.appId),t=k(),n=l(()=>t.appId),o=l(()=>t.appInfo),p=l(()=>t.getDevMode),s=g("lowAppActions",{});function u(e,r={}){m(d,e,r)}function i(e){return c(this,null,function*(){e||(e=d.value);let r=yield t.queryAppInfo(e);r.success||(r.code===404?f.replace({path:"/404"}):f.replace({path:"/500",params:{message:r.message}}))})}return{routeId:d,lowStore:t,appId:n,appInfo:o,devMode:p,actions:s,pagesMap:s.pagesMap,reloadApp:i,watchRouteId:u}}function D(){const{createMessage:d,createConfirm:t}=w(),{reloadApp:n,actions:o,pagesMap:p}=A();function s(e,r){let a=r==null?void 0:r.model;e.key==="edit"?o!=null&&o.openLinkModal&&(o==null||o.openLinkModal(a)):e.key==="move-group"?o!=null&&o.openMoveGroupModal&&o.openMoveGroupModal(a):e.key==="create-group"?o!=null&&o.addOrEditGroup&&o.addOrEditGroup():e.key==="group-rename"?o!=null&&o.addOrEditGroup&&o.addOrEditGroup(a):e.key==="order-to-up"?u(!0,a):e.key==="order-to-down"?u(!1,a):e.key==="find-source"?o.findSourceData&&o.findSourceData(a):e.key==="delete"&&i(a)}function u(e,r){return c(this,null,function*(){yield(e?y.orderToUp:y.orderToDown)(r.id),n()})}function i(e){if(Array.isArray(e.children)&&e.children.length>0){d.warning("有子菜单的分组不能删除！");return}t({title:"删除",iconType:"warning",content:"确定要删除吗？",onOk(){return c(this,null,function*(){var a;yield y.delete(e.id),n(),(a=M(p==null?void 0:p.get("recycle-bin")))==null||a.reload()})}})}return{onSettingMenuClick:s}}export{D as a,A as u};

var y=(t,r,o)=>new Promise((h,d)=>{var f=a=>{try{p(o.next(a))}catch(n){d(n)}},c=a=>{try{p(o.throw(a))}catch(n){d(n)}},p=a=>a.done?h(a.value):Promise.resolve(a.value).then(f,c);p((o=o.apply(t,r)).next())});import{d as x,f as e,as as N,n as T,a3 as it,a4 as rt,V as s,a6 as C,af as S,ai as l,k as i,a5 as m,ae as P,a8 as B,a7 as b,W as L,E as w}from"./vue-vendor-24c7dc61.js";import V from"./CommonLayout-ae39432c.js";import $ from"./UserApplication-0f54f4ec.js";import H from"./RoleApplication-9f5f23d6.js";import z from"./RoleAuthPage-73b41ffd.js";import M from"./RoleUserPage-5a394bca.js";import{ae as O,k as W,l as j}from"./index-831af9dd.js";import q from"./RightChat-d63bc999.js";import{u as G}from"./lowAppAuth-3d637b7d.js";import"./useAppInfo-0243bc57.js";import"./low.app.api-97fc250a.js";import"./useAppTheme-3409245c.js";import"./BackIndex-47cd6641.js";import"./antd-vue-vendor-0d72f01e.js";import"./useCooperationPage-7c852af8.js";import"./index-b510c86d.js";import"./vxe-table-vendor-8813019a.js";import"./application.data-33c48cb5.js";import"./RoleAuthDrawer-e478a562.js";import"./index-44229d9b.js";import"./RoleCheckBox-ff98d496.js";import"./BasicTable-d435f501.js";import"./index-52c8c841.js";import"./useForm-14b2bc77.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./helper-22dafba0.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./useListPage-62a041ef.js";import"./index-621e597c.js";import"./RoleInfo-988ef559.js";import"./application.api-4e2bde90.js";import"./useRoleAuth-039fb12a.js";import"./ViewCurdAuthTable-7d5707fb.js";import"./FormAuthDrawer-ec07a39e.js";import"./AuthRecord-c2685ecc.js";import"./AuthOperation-f0820b93.js";import"./AuthField-ed45cd67.js";import"./ComponentIcon-f1bbb90f.js";import"./RoleCopyConfirm-c60c69d7.js";import"./RoleUserTable-82d6513e.js";import"./UserNameCell-fcd4cd60.js";import"./RoleUserUpdateModal-7b72dabf.js";import"./lowAppUtils-56892d30.js";const J=x({name:"AppPermission",components:{CommonLayout:V,UserApplication:$,RoleApplication:H,RoleAuthPage:z,RoleUserPage:M,RightChat:q},setup(){const t=e(300);t.value=window.innerHeight-86;const r=e(),o=e("user"),h=e([]),d=e(""),f=e(1),c=e("1"),p=e([{roleName:"应用管理员",id:"1",roleCode:"applicationAdmin",num:0},{roleName:"成员",id:"2",roleCode:"member",num:1},{roleName:"只读",id:"3",roleCode:"realonly",num:0}]);function a(u){o.value=u,u==="roleAuth"&&setTimeout(()=>{},300)}const n=e(""),g=N(),_=e(!1),v=G();O(()=>y(this,null,function*(){n.value=g.params.appId,o.value="",yield F(),o.value="user"}));function F(){return y(this,null,function*(){const u="/online/lowAppAuth/hasAdminAuth";let k=n.value,U={appId:k};const I=yield W.get({url:u,params:U},{isTransformResponse:!1});_.value=I.success,v.setLowAppAdminAuth(k,I.success)})}const A=e();function E(u){o.value="roleAuth",T(()=>{A.value.onSelectRoleById(u)})}const R=e();function D(u){o.value="user",T(()=>{R.value.onSelectRoleById(u)})}return{maxHeight:t,tabTitleClick:a,roleList:p,adminId:c,adminNum:f,searchRoleValue:d,allUserData:h,tabIndex:o,roleAppRef:r,lowAppId:n,onTabChange2Auth:E,roleAuthRef:A,onTabChange2User:D,roleUserRef:R,hasAdminAuth:_}}});const K={style:{margin:"10px"}},Q={class:"content-header"},X={class:"content-header-left flex pointer"},Y={class:"content-header-right"},Z={style:{"margin-left":"10px"}},tt={key:0,class:"content-top"},ot={key:1,class:"content-top"};function et(t,r,o,h,d,f){const c=s("a-checkbox"),p=s("a-tooltip"),a=s("RoleUserPage"),n=s("RoleAuthPage"),g=s("a-layout-content"),_=s("RightChat"),v=s("a-layout"),F=s("CommonLayout");return C(),S(F,{"page-title":"用户"},{default:l(()=>[i(v,null,{default:l(()=>[i(g,null,{default:l(()=>[m("div",K,[m("div",{class:"application-content",style:P({height:t.maxHeight+"px"})},[m("div",Q,[m("div",X,[m("span",{class:B(["content-header-left-title pointer",t.tabIndex==="user"?"tab-active":""]),onClick:r[0]||(r[0]=A=>t.tabTitleClick("user"))},"用户",2),t.hasAdminAuth?(C(),b("span",{key:0,class:B(["content-header-left-title",t.tabIndex==="roleAuth"?"tab-active":""]),onClick:r[1]||(r[1]=A=>t.tabTitleClick("roleAuth"))}," 角色权限 ",2)):L("",!0)]),m("div",Y,[i(p,{placement:"top",title:"开启时，当用户被添加、移除、变更角色时会收到系统通知，关闭时，以上操作不通知用户。"},{default:l(()=>[m("span",null,[i(c,null,{default:l(()=>[w("发送通知？")]),_:1})])]),_:1}),i(p,null,{default:l(()=>[m("span",Z,[i(c,null,{default:l(()=>[w("允许查看？")]),_:1})])]),_:1})])]),t.tabIndex==="user"?(C(),b("div",tt,[i(a,{ref:"roleUserRef","app-id":t.lowAppId,onTabChange:t.onTabChange2Auth},null,8,["app-id","onTabChange"])])):(C(),b("div",ot,[i(n,{ref:"roleAuthRef","app-id":t.lowAppId,onTabChange:t.onTabChange2User},null,8,["app-id","onTabChange"])]))],4)])]),_:1}),i(_)]),_:1})]),_:1})}const Do=j(J,[["render",et],["__scopeId","data-v-5cf0355d"]]);export{Do as default};

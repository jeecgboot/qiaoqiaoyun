var b=(t,a,i)=>new Promise((n,d)=>{var h=e=>{try{r(i.next(e))}catch(p){d(p)}},u=e=>{try{r(i.throw(e))}catch(p){d(p)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(h,u);r((i=i.apply(t,a)).next())});import{B as y,a as D}from"./index-44229d9b.js";import{d as w,f as c,r as F,V as m,a6 as L,af as B,ag as S,ai as l,a5 as k,k as s,E as O,ak as R}from"./vue-vendor-24c7dc61.js";import K from"./AuthRecord-c2685ecc.js";import V from"./AuthOperation-f0820b93.js";import $ from"./AuthField-ed45cd67.js";import{l as I}from"./index-831af9dd.js";import"./antd-vue-vendor-0d72f01e.js";import"./useRoleAuth-039fb12a.js";import"./application.api-4e2bde90.js";import"./RoleCheckBox-ff98d496.js";import"./vxe-table-vendor-8813019a.js";import"./BasicTable-d435f501.js";import"./index-52c8c841.js";import"./useForm-14b2bc77.js";import"./componentMap-c857637c.js";import"./useFormItem-86503382.js";import"./index-1c3affea.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JImageUpload-d644253a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./JCheckbox-0b89d32a.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./helper-22dafba0.js";import"./JAreaLinkage-173780c9.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./EasyCronInput-b2123242.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./useListPage-62a041ef.js";import"./index-621e597c.js";import"./ComponentIcon-f1bbb90f.js";const N=w({name:"FormAuthDrawer",components:{BasicDrawer:y,AuthRecord:K,AuthOperation:V,AuthField:$},emits:["record-change","operation-change","field-change","register"],setup(t,{emit:a}){const i=c(""),n=c(""),d=c([]),h=c([]),u=c([]),r=F({read:!1,update:!1,delete:!1,create:!1}),[e,{setDrawerProps:p}]=D(o=>b(this,null,function*(){p({confirmLoading:!1}),i.value=o.title,n.value=o.code,Object.keys(r).map(_=>{r[_]=o.status[_]}),d.value=o.recordAuthList,h.value=o.operationAuthList,u.value=o.fieldAuthList})),f={showFooter:!1,width:880,destroyOnClose:!0,class:"low-app-form-auth-drawer",bodyStyle:{}},g=c("1");function A(o){a("record-change",n.value,o)}function C(o){a("operation-change",n.value,o)}function v(o){a("field-change",n.value,o)}return{registerDrawer:e,drawerAttrs:f,title:i,designFormCode:n,activeKey:g,disabledStatus:r,recordAuthList:d,operationAuthList:h,fieldAuthList:u,onRecordChange:A,onOperationChange:C,onFieldChange:v}}});const P={class:"title-content"};function j(t,a,i,n,d,h){const u=m("Icon"),r=m("AuthRecord"),e=m("a-tab-pane"),p=m("AuthOperation"),f=m("AuthField"),g=m("a-tabs"),A=m("BasicDrawer");return L(),B(A,S(t.drawerAttrs,{onRegister:t.registerDrawer}),{title:l(()=>[k("span",P,[s(u,{icon:"ant-design:table-outlined",size:22,style:{"margin-right":"5px",color:"rgb(117, 117, 117)"}}),O(" "+R(t.title),1)])]),default:l(()=>[s(g,{activeKey:t.activeKey,"onUpdate:activeKey":a[0]||(a[0]=C=>t.activeKey=C)},{default:l(()=>[s(e,{key:"1",tab:"记录范围"},{default:l(()=>[s(r,{title:t.title,code:t.designFormCode,recordAuthList:t.recordAuthList,disabledStatus:t.disabledStatus,onDataChange:t.onRecordChange},null,8,["title","code","recordAuthList","disabledStatus","onDataChange"])]),_:1}),s(e,{key:"2",tab:"操作","force-render":""},{default:l(()=>[s(p,{code:t.designFormCode,operationAuthList:t.operationAuthList,onDataChange:t.onOperationChange},null,8,["code","operationAuthList","onDataChange"])]),_:1}),s(e,{key:"3",tab:"字段","force-render":""},{default:l(()=>[s(f,{code:t.designFormCode,disabledStatus:t.disabledStatus,fieldAuthList:t.fieldAuthList,onDataChange:t.onFieldChange},null,8,["code","disabledStatus","fieldAuthList","onDataChange"])]),_:1})]),_:1},8,["activeKey"])]),_:1},16,["onRegister"])}const Tt=I(N,[["render",j]]);export{Tt as default};

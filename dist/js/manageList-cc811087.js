var W=Object.defineProperty,$=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var v=(n,e,o)=>e in n?W(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,R=(n,e)=>{for(var o in e||(e={}))q.call(e,o)&&v(n,o,e[o]);if(P)for(var o of P(e))G.call(e,o)&&v(n,o,e[o]);return n},T=(n,e)=>$(n,j(e));var d=(n,e,o)=>new Promise((_,l)=>{var g=a=>{try{p(o.next(a))}catch(c){l(c)}},b=a=>{try{p(o.throw(a))}catch(c){l(c)}},p=a=>a.done?_(a.value):Promise.resolve(a.value).then(g,b);p((o=o.apply(n,e)).next())});import{d as U,V as m,a6 as B,a7 as J,k as i,ai as s,E as h,u as r,af as Q,W as Y}from"./vue-vendor-24c7dc61.js";import"./index-621e597c.js";import"./index-1c3affea.js";import{g as Z,c as tt,d as et,e as ot,f as nt}from"./manage.api-62536fbe.js";import{c as it,s as at}from"./manage.data-9b48f59f.js";import{_ as st}from"./ManageModal-2fdfa5b2.js";import{e as I,a as rt,k as mt}from"./index-831af9dd.js";import{u as lt}from"./useListPage-62a041ef.js";import{T as pt}from"./componentMap-c857637c.js";import ct from"./BasicTable-d435f501.js";import"./antd-vue-vendor-0d72f01e.js";import"./BasicModal-58413bab.js";import"./useWindowSizeFn-8f085f6f.js";import"./index-52c8c841.js";import"./useForm-14b2bc77.js";import"./helper-22dafba0.js";import"./JAreaLinkage-173780c9.js";import"./areaDataUtil-cdeee717.js";import"./china-area-data-vendor-556d14ee.js";import"./useFormItem-86503382.js";import"./vxe-table-vendor-8813019a.js";import"./JSelectUser-a44af43a.js";import"./useSelectBiz-2f560b0b.js";import"./props-8a7ac45b.js";import"./JSelectBiz-55a9591f.js";import"./JSelectDept-a90caee3.js";import"./index-f2fd5a28.js";import"./useContextMenu-810f9346.js";import"./JCodeEditor-66bd225e.js";import"./codemirror-17b6f671.js";import"./codemirror-26b29690.js";import"./active-line-512fef49.js";import"./JPopup-2a779923.js";import"./useMethods-f689b480.js";import"./EasyCronInput-b2123242.js";import"./JCheckbox-0b89d32a.js";import"./JDictSelectTag-54dc3bdb.js";import"./JSelectUserByDept-bd619076.js";import"./UserSelectByDepModal-db060ece.js";import"./depart.api-339f4da6.js";import"./JEditor-249b2194.js";import"./index-b845562c.js";import"./JImageUpload-d644253a.js";import"./MeetRoomSelect-1395272c.js";import"./MeetRoomSelectModal-973583c2.js";import"./room.data-cba2a619.js";import"./download-1ac6acce.js";import"./index-f99b266a.js";import"./JUpload-76e119c7.js";import"./index-d508f1f4.js";import"./index-6507b9cd.js";import"./index-4d0525a5.js";import"./UserSelectModal-d78c1490.js";import"./fullcalendar-vendor-e153c929.js";const ut=U({name:"meet-manage-list"}),_e=U(T(R({},ut),{setup(n){const{createMessage:e,createConfirm:o}=rt(),[_,{openModal:l}]=I(),[g,{openModal:b}]=I(),{prefixCls:p,tableContext:a,onExportXls:c,onImportXls:ft}=lt({designScope:"meet-room-list",tableProps:{title:"会议室管理",api:Z,columns:it,canResize:!1,formConfig:{schemas:at},actionColumn:{width:150,fixed:"right"}},exportConfig:{name:"用户列表",url:tt},importConfig:{url:et}}),[E,{reload:u},{rowSelection:A,selectedRowKeys:S}]=a,w="dev_eoa_metting_001";function V(t){o({iconType:"warning",title:"提示",content:"确认提交流程吗?",onOk:()=>d(this,null,function*(){let f=yield F({flowCode:w,id:t.id,formUrl:"super/eoa/meet/manage/components/MeetManageForm",formUrlMobile:"super/eoa/meet/manage/components/MeetManageForm"});f.success?(e.success(f.message),u()):e.warning(f.message)})})}function C(t){b(!0,{flowCode:w,dataId:t.id})}function D(){l(!0,{isUpdate:!1})}function F(t){return mt.post({url:"/act/process/extActProcess/startMutilProcess",params:t},{isTransformResponse:!1})}function M(t){l(!0,{id:t.id,isUpdate:!0})}function k(t){return d(this,null,function*(){yield ot({id:t.id},u)})}function N(){return d(this,null,function*(){yield nt({ids:S.value},u)})}function H(t){if(t.approvalStatus=="0")return[{label:"编辑",onClick:M.bind(null,t)},{label:"删除",popConfirm:{title:"是否确认删除",placement:"left",confirm:k.bind(null,t)}}];if(t.approvalStatus=="1")return[{label:"编辑",onClick:M.bind(null,t),ifShow:()=>t.bpmStatus==="1"||t.bpmStatus==="3"},{label:"删除",popConfirm:{title:"是否确认删除",placement:"left",confirm:k.bind(null,t)},ifShow:()=>t.bpmStatus==="1"},{label:"提交流程",onClick:V.bind(null,t),ifShow:t.bpmStatus==="1"&&t.status!=="3"},{label:"审批进度",onClick:C.bind(null,t),ifShow:t.bpmStatus==="2"||t.bpmStatus==="3"},{label:"历史进度",onClick:C.bind(null,t),ifShow:t.bpmStatus==="4"}]}return(t,f)=>{const x=m("a-button"),y=m("Icon"),L=m("a-menu-item"),O=m("a-menu"),X=m("a-dropdown"),z=m("BpmPictureModal");return B(),J("div",null,[i(r(ct),{onRegister:r(E),rowSelection:r(A)},{tableTitle:s(()=>[i(x,{preIcon:"ant-design:plus-outlined",type:"primary",onClick:D,style:{"margin-right":"5px"}},{default:s(()=>[h("新增")]),_:1}),r(S).length>0?(B(),Q(X,{key:0},{overlay:s(()=>[i(O,null,{default:s(()=>[i(L,{key:"1",onClick:N},{default:s(()=>[i(y,{icon:"ant-design:delete-outlined"}),h(" 删除 ")]),_:1})]),_:1})]),default:s(()=>[i(x,null,{default:s(()=>[h("批量操作 "),i(y,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):Y("",!0)]),action:s(({record:K})=>[i(r(pt),{actions:H(K)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"]),i(st,{onRegister:r(_),onSuccess:r(u)},null,8,["onRegister","onSuccess"]),i(z,{onRegister:r(g)},null,8,["onRegister"])])}}}));export{_e as default};
